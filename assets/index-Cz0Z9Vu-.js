var nX=Object.defineProperty;var k3=e=>{throw TypeError(e)};var iX=(e,t,r)=>t in e?nX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var cn=(e,t,r)=>iX(e,typeof t!="symbol"?t+"":t,r),P5=(e,t,r)=>t.has(e)||k3("Cannot "+r);var qe=(e,t,r)=>(P5(e,t,"read from private field"),r?r.call(e):t.get(e)),Wr=(e,t,r)=>t.has(e)?k3("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),lr=(e,t,r,n)=>(P5(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),hs=(e,t,r)=>(P5(e,t,"access private method"),r);var cb=(e,t,r,n)=>({set _(i){lr(e,t,i,r)},get _(){return qe(e,t,n)}});function sX(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N$={exports:{}},t_={},S$={exports:{}},Sr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0=Symbol.for("react.element"),aX=Symbol.for("react.portal"),oX=Symbol.for("react.fragment"),lX=Symbol.for("react.strict_mode"),cX=Symbol.for("react.profiler"),uX=Symbol.for("react.provider"),dX=Symbol.for("react.context"),fX=Symbol.for("react.forward_ref"),hX=Symbol.for("react.suspense"),mX=Symbol.for("react.memo"),pX=Symbol.for("react.lazy"),E3=Symbol.iterator;function gX(e){return e===null||typeof e!="object"?null:(e=E3&&e[E3]||e["@@iterator"],typeof e=="function"?e:null)}var A$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$=Object.assign,k$={};function lg(e,t,r){this.props=e,this.context=t,this.refs=k$,this.updater=r||A$}lg.prototype.isReactComponent={};lg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function E$(){}E$.prototype=lg.prototype;function wE(e,t,r){this.props=e,this.context=t,this.refs=k$,this.updater=r||A$}var _E=wE.prototype=new E$;_E.constructor=wE;C$(_E,lg.prototype);_E.isPureReactComponent=!0;var P3=Array.isArray,P$=Object.prototype.hasOwnProperty,jE={current:null},O$={key:!0,ref:!0,__self:!0,__source:!0};function T$(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)P$.call(t,n)&&!O$.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:n0,type:e,key:s,ref:o,props:i,_owner:jE.current}}function vX(e,t){return{$$typeof:n0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function NE(e){return typeof e=="object"&&e!==null&&e.$$typeof===n0}function yX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var O3=/\/+/g;function O5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yX(""+e.key):t.toString(36)}function b1(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case n0:case aX:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+O5(o,0):n,P3(i)?(r="",e!=null&&(r=e.replace(O3,"$&/")+"/"),b1(i,t,r,"",function(u){return u})):i!=null&&(NE(i)&&(i=vX(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(O3,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",P3(e))for(var l=0;l<e.length;l++){s=e[l];var c=n+O5(s,l);o+=b1(s,t,r,c,i)}else if(c=gX(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=n+O5(s,l++),o+=b1(s,t,r,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function db(e,t,r){if(e==null)return e;var n=[],i=0;return b1(e,n,"","",function(s){return t.call(r,s,i++)}),n}function xX(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fs={current:null},w1={transition:null},bX={ReactCurrentDispatcher:Fs,ReactCurrentBatchConfig:w1,ReactCurrentOwner:jE};function L$(){throw Error("act(...) is not supported in production builds of React.")}Sr.Children={map:db,forEach:function(e,t,r){db(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return db(e,function(){t++}),t},toArray:function(e){return db(e,function(t){return t})||[]},only:function(e){if(!NE(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Sr.Component=lg;Sr.Fragment=oX;Sr.Profiler=cX;Sr.PureComponent=wE;Sr.StrictMode=lX;Sr.Suspense=hX;Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bX;Sr.act=L$;Sr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=C$({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=jE.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)P$.call(t,c)&&!O$.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:n0,type:e.type,key:i,ref:s,props:n,_owner:o}};Sr.createContext=function(e){return e={$$typeof:dX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uX,_context:e},e.Consumer=e};Sr.createElement=T$;Sr.createFactory=function(e){var t=T$.bind(null,e);return t.type=e,t};Sr.createRef=function(){return{current:null}};Sr.forwardRef=function(e){return{$$typeof:fX,render:e}};Sr.isValidElement=NE;Sr.lazy=function(e){return{$$typeof:pX,_payload:{_status:-1,_result:e},_init:xX}};Sr.memo=function(e,t){return{$$typeof:mX,type:e,compare:t===void 0?null:t}};Sr.startTransition=function(e){var t=w1.transition;w1.transition={};try{e()}finally{w1.transition=t}};Sr.unstable_act=L$;Sr.useCallback=function(e,t){return Fs.current.useCallback(e,t)};Sr.useContext=function(e){return Fs.current.useContext(e)};Sr.useDebugValue=function(){};Sr.useDeferredValue=function(e){return Fs.current.useDeferredValue(e)};Sr.useEffect=function(e,t){return Fs.current.useEffect(e,t)};Sr.useId=function(){return Fs.current.useId()};Sr.useImperativeHandle=function(e,t,r){return Fs.current.useImperativeHandle(e,t,r)};Sr.useInsertionEffect=function(e,t){return Fs.current.useInsertionEffect(e,t)};Sr.useLayoutEffect=function(e,t){return Fs.current.useLayoutEffect(e,t)};Sr.useMemo=function(e,t){return Fs.current.useMemo(e,t)};Sr.useReducer=function(e,t,r){return Fs.current.useReducer(e,t,r)};Sr.useRef=function(e){return Fs.current.useRef(e)};Sr.useState=function(e){return Fs.current.useState(e)};Sr.useSyncExternalStore=function(e,t,r){return Fs.current.useSyncExternalStore(e,t,r)};Sr.useTransition=function(){return Fs.current.useTransition()};Sr.version="18.3.1";S$.exports=Sr;var _=S$.exports;const ie=nn(_),SE=sX({__proto__:null,default:ie},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wX=_,_X=Symbol.for("react.element"),jX=Symbol.for("react.fragment"),NX=Object.prototype.hasOwnProperty,SX=wX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AX={key:!0,ref:!0,__self:!0,__source:!0};function R$(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)NX.call(t,n)&&!AX.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:_X,type:e,key:s,ref:o,props:i,_owner:SX.current}}t_.Fragment=jX;t_.jsx=R$;t_.jsxs=R$;N$.exports=t_;var a=N$.exports,I$={exports:{}},La={},D$={exports:{}},M$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,K){var ae=q.length;q.push(K);e:for(;0<ae;){var J=ae-1>>>1,I=q[J];if(0<i(I,K))q[J]=K,q[ae]=I,ae=J;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var K=q[0],ae=q.pop();if(ae!==K){q[0]=ae;e:for(var J=0,I=q.length,$=I>>>1;J<$;){var U=2*(J+1)-1,H=q[U],re=U+1,X=q[re];if(0>i(H,ae))re<I&&0>i(X,H)?(q[J]=X,q[re]=ae,J=re):(q[J]=H,q[U]=ae,J=U);else if(re<I&&0>i(X,ae))q[J]=X,q[re]=ae,J=re;else break e}}return K}function i(q,K){var ae=q.sortIndex-K.sortIndex;return ae!==0?ae:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,v=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(q){for(var K=r(u);K!==null;){if(K.callback===null)n(u);else if(K.startTime<=q)n(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=r(u)}}function j(q){if(p=!1,x(q),!v)if(r(c)!==null)v=!0,z(N);else{var K=r(u);K!==null&&D(j,K.startTime-q)}}function N(q,K){v=!1,p&&(p=!1,y(E),E=-1),h=!0;var ae=m;try{for(x(K),f=r(c);f!==null&&(!(f.expirationTime>K)||q&&!k());){var J=f.callback;if(typeof J=="function"){f.callback=null,m=f.priorityLevel;var I=J(f.expirationTime<=K);K=e.unstable_now(),typeof I=="function"?f.callback=I:f===r(c)&&n(c),x(K)}else n(c);f=r(c)}if(f!==null)var $=!0;else{var U=r(u);U!==null&&D(j,U.startTime-K),$=!1}return $}finally{f=null,m=ae,h=!1}}var A=!1,C=null,E=-1,O=5,L=-1;function k(){return!(e.unstable_now()-L<O)}function T(){if(C!==null){var q=e.unstable_now();L=q;var K=!0;try{K=C(!0,q)}finally{K?B():(A=!1,C=null)}}else A=!1}var B;if(typeof b=="function")B=function(){b(T)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,G=M.port2;M.port1.onmessage=T,B=function(){G.postMessage(null)}}else B=function(){g(T,0)};function z(q){C=q,A||(A=!0,B())}function D(q,K){E=g(function(){q(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){v||h||(v=!0,z(N))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var ae=m;m=K;try{return q()}finally{m=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=m;m=q;try{return K()}finally{m=ae}},e.unstable_scheduleCallback=function(q,K,ae){var J=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?J+ae:J):ae=J,q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ae+I,q={id:d++,callback:K,priorityLevel:q,startTime:ae,expirationTime:I,sortIndex:-1},ae>J?(q.sortIndex=ae,t(u,q),r(c)===null&&q===r(u)&&(p?(y(E),E=-1):p=!0,D(j,ae-J))):(q.sortIndex=I,t(c,q),v||h||(v=!0,z(N))),q},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(q){var K=m;return function(){var ae=m;m=K;try{return q.apply(this,arguments)}finally{m=ae}}}})(M$);D$.exports=M$;var CX=D$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kX=_,Oa=CX;function Ze(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $$=new Set,Ny={};function yh(e,t){mp(e,t),mp(e+"Capture",t)}function mp(e,t){for(Ny[e]=t,e=0;e<t.length;e++)$$.add(t[e])}var Tc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),US=Object.prototype.hasOwnProperty,EX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T3={},L3={};function PX(e){return US.call(L3,e)?!0:US.call(T3,e)?!1:EX.test(e)?L3[e]=!0:(T3[e]=!0,!1)}function OX(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TX(e,t,r,n){if(t===null||typeof t>"u"||OX(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bs(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var us={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){us[e]=new Bs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];us[t]=new Bs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){us[e]=new Bs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){us[e]=new Bs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){us[e]=new Bs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){us[e]=new Bs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){us[e]=new Bs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){us[e]=new Bs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){us[e]=new Bs(e,5,!1,e.toLowerCase(),null,!1,!1)});var AE=/[\-:]([a-z])/g;function CE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(AE,CE);us[t]=new Bs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(AE,CE);us[t]=new Bs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(AE,CE);us[t]=new Bs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){us[e]=new Bs(e,1,!1,e.toLowerCase(),null,!1,!1)});us.xlinkHref=new Bs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){us[e]=new Bs(e,1,!1,e.toLowerCase(),null,!0,!0)});function kE(e,t,r,n){var i=us.hasOwnProperty(t)?us[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TX(t,r,i,n)&&(r=null),n||i===null?PX(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Zc=kX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fb=Symbol.for("react.element"),gm=Symbol.for("react.portal"),vm=Symbol.for("react.fragment"),EE=Symbol.for("react.strict_mode"),WS=Symbol.for("react.profiler"),F$=Symbol.for("react.provider"),B$=Symbol.for("react.context"),PE=Symbol.for("react.forward_ref"),HS=Symbol.for("react.suspense"),VS=Symbol.for("react.suspense_list"),OE=Symbol.for("react.memo"),Pu=Symbol.for("react.lazy"),z$=Symbol.for("react.offscreen"),R3=Symbol.iterator;function hv(e){return e===null||typeof e!="object"?null:(e=R3&&e[R3]||e["@@iterator"],typeof e=="function"?e:null)}var Xn=Object.assign,T5;function Fv(e){if(T5===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);T5=t&&t[1]||""}return`
`+T5+e}var L5=!1;function R5(e,t){if(!e||L5)return"";L5=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{L5=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fv(e):""}function LX(e){switch(e.tag){case 5:return Fv(e.type);case 16:return Fv("Lazy");case 13:return Fv("Suspense");case 19:return Fv("SuspenseList");case 0:case 2:case 15:return e=R5(e.type,!1),e;case 11:return e=R5(e.type.render,!1),e;case 1:return e=R5(e.type,!0),e;default:return""}}function GS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vm:return"Fragment";case gm:return"Portal";case WS:return"Profiler";case EE:return"StrictMode";case HS:return"Suspense";case VS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B$:return(e.displayName||"Context")+".Consumer";case F$:return(e._context.displayName||"Context")+".Provider";case PE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case OE:return t=e.displayName||null,t!==null?t:GS(e.type)||"Memo";case Pu:t=e._payload,e=e._init;try{return GS(e(t))}catch{}}return null}function RX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return GS(t);case 8:return t===EE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function q$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function IX(e){var t=q$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hb(e){e._valueTracker||(e._valueTracker=IX(e))}function U$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=q$(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function J1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function KS(e,t){var r=t.checked;return Xn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function I3(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=vd(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function W$(e,t){t=t.checked,t!=null&&kE(e,"checked",t,!1)}function YS(e,t){W$(e,t);var r=vd(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?XS(e,t.type,r):t.hasOwnProperty("defaultValue")&&XS(e,t.type,vd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function D3(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function XS(e,t,r){(t!=="number"||J1(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Bv=Array.isArray;function Im(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+vd(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ZS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return Xn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function M3(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ze(92));if(Bv(r)){if(1<r.length)throw Error(Ze(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:vd(r)}}function H$(e,t){var r=vd(t.value),n=vd(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function $3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function V$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function JS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?V$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,G$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Xv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DX=["Webkit","ms","Moz","O"];Object.keys(Xv).forEach(function(e){DX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xv[t]=Xv[e]})});function K$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Xv.hasOwnProperty(e)&&Xv[e]?(""+t).trim():t+"px"}function Y$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=K$(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var MX=Xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QS(e,t){if(t){if(MX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ze(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ze(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ze(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ze(62))}}function eA(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tA=null;function TE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rA=null,Dm=null,Mm=null;function F3(e){if(e=a0(e)){if(typeof rA!="function")throw Error(Ze(280));var t=e.stateNode;t&&(t=a_(t),rA(e.stateNode,e.type,t))}}function X$(e){Dm?Mm?Mm.push(e):Mm=[e]:Dm=e}function Z$(){if(Dm){var e=Dm,t=Mm;if(Mm=Dm=null,F3(e),t)for(e=0;e<t.length;e++)F3(t[e])}}function J$(e,t){return e(t)}function Q$(){}var I5=!1;function eF(e,t,r){if(I5)return e(t,r);I5=!0;try{return J$(e,t,r)}finally{I5=!1,(Dm!==null||Mm!==null)&&(Q$(),Z$())}}function Ay(e,t){var r=e.stateNode;if(r===null)return null;var n=a_(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ze(231,t,typeof r));return r}var nA=!1;if(Tc)try{var mv={};Object.defineProperty(mv,"passive",{get:function(){nA=!0}}),window.addEventListener("test",mv,mv),window.removeEventListener("test",mv,mv)}catch{nA=!1}function $X(e,t,r,n,i,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Zv=!1,Q1=null,ew=!1,iA=null,FX={onError:function(e){Zv=!0,Q1=e}};function BX(e,t,r,n,i,s,o,l,c){Zv=!1,Q1=null,$X.apply(FX,arguments)}function zX(e,t,r,n,i,s,o,l,c){if(BX.apply(this,arguments),Zv){if(Zv){var u=Q1;Zv=!1,Q1=null}else throw Error(Ze(198));ew||(ew=!0,iA=u)}}function xh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function tF(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function B3(e){if(xh(e)!==e)throw Error(Ze(188))}function qX(e){var t=e.alternate;if(!t){if(t=xh(e),t===null)throw Error(Ze(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return B3(i),e;if(s===n)return B3(i),t;s=s.sibling}throw Error(Ze(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o)throw Error(Ze(189))}}if(r.alternate!==n)throw Error(Ze(190))}if(r.tag!==3)throw Error(Ze(188));return r.stateNode.current===r?e:t}function rF(e){return e=qX(e),e!==null?nF(e):null}function nF(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nF(e);if(t!==null)return t;e=e.sibling}return null}var iF=Oa.unstable_scheduleCallback,z3=Oa.unstable_cancelCallback,UX=Oa.unstable_shouldYield,WX=Oa.unstable_requestPaint,hi=Oa.unstable_now,HX=Oa.unstable_getCurrentPriorityLevel,LE=Oa.unstable_ImmediatePriority,sF=Oa.unstable_UserBlockingPriority,tw=Oa.unstable_NormalPriority,VX=Oa.unstable_LowPriority,aF=Oa.unstable_IdlePriority,r_=null,Al=null;function GX(e){if(Al&&typeof Al.onCommitFiberRoot=="function")try{Al.onCommitFiberRoot(r_,e,void 0,(e.current.flags&128)===128)}catch{}}var zo=Math.clz32?Math.clz32:XX,KX=Math.log,YX=Math.LN2;function XX(e){return e>>>=0,e===0?32:31-(KX(e)/YX|0)|0}var pb=64,gb=4194304;function zv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rw(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=zv(l):(s&=o,s!==0&&(n=zv(s)))}else o=r&~i,o!==0?n=zv(o):s!==0&&(n=zv(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-zo(t),i=1<<r,n|=e[r],t&=~i;return n}function ZX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JX(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-zo(s),l=1<<o,c=i[o];c===-1?(!(l&r)||l&n)&&(i[o]=ZX(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function sA(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oF(){var e=pb;return pb<<=1,!(pb&4194240)&&(pb=64),e}function D5(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function i0(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zo(t),e[t]=r}function QX(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-zo(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function RE(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-zo(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var fn=0;function lF(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cF,IE,uF,dF,fF,aA=!1,vb=[],td=null,rd=null,nd=null,Cy=new Map,ky=new Map,Du=[],eZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q3(e,t){switch(e){case"focusin":case"focusout":td=null;break;case"dragenter":case"dragleave":rd=null;break;case"mouseover":case"mouseout":nd=null;break;case"pointerover":case"pointerout":Cy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ky.delete(t.pointerId)}}function pv(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=a0(t),t!==null&&IE(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function tZ(e,t,r,n,i){switch(t){case"focusin":return td=pv(td,e,t,r,n,i),!0;case"dragenter":return rd=pv(rd,e,t,r,n,i),!0;case"mouseover":return nd=pv(nd,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Cy.set(s,pv(Cy.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ky.set(s,pv(ky.get(s)||null,e,t,r,n,i)),!0}return!1}function hF(e){var t=wf(e.target);if(t!==null){var r=xh(t);if(r!==null){if(t=r.tag,t===13){if(t=tF(r),t!==null){e.blockedOn=t,fF(e.priority,function(){uF(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _1(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=oA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);tA=n,r.target.dispatchEvent(n),tA=null}else return t=a0(r),t!==null&&IE(t),e.blockedOn=r,!1;t.shift()}return!0}function U3(e,t,r){_1(e)&&r.delete(t)}function rZ(){aA=!1,td!==null&&_1(td)&&(td=null),rd!==null&&_1(rd)&&(rd=null),nd!==null&&_1(nd)&&(nd=null),Cy.forEach(U3),ky.forEach(U3)}function gv(e,t){e.blockedOn===t&&(e.blockedOn=null,aA||(aA=!0,Oa.unstable_scheduleCallback(Oa.unstable_NormalPriority,rZ)))}function Ey(e){function t(i){return gv(i,e)}if(0<vb.length){gv(vb[0],e);for(var r=1;r<vb.length;r++){var n=vb[r];n.blockedOn===e&&(n.blockedOn=null)}}for(td!==null&&gv(td,e),rd!==null&&gv(rd,e),nd!==null&&gv(nd,e),Cy.forEach(t),ky.forEach(t),r=0;r<Du.length;r++)n=Du[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Du.length&&(r=Du[0],r.blockedOn===null);)hF(r),r.blockedOn===null&&Du.shift()}var $m=Zc.ReactCurrentBatchConfig,nw=!0;function nZ(e,t,r,n){var i=fn,s=$m.transition;$m.transition=null;try{fn=1,DE(e,t,r,n)}finally{fn=i,$m.transition=s}}function iZ(e,t,r,n){var i=fn,s=$m.transition;$m.transition=null;try{fn=4,DE(e,t,r,n)}finally{fn=i,$m.transition=s}}function DE(e,t,r,n){if(nw){var i=oA(e,t,r,n);if(i===null)V5(e,t,n,iw,r),q3(e,n);else if(tZ(i,e,t,r,n))n.stopPropagation();else if(q3(e,n),t&4&&-1<eZ.indexOf(e)){for(;i!==null;){var s=a0(i);if(s!==null&&cF(s),s=oA(e,t,r,n),s===null&&V5(e,t,n,iw,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else V5(e,t,n,null,r)}}var iw=null;function oA(e,t,r,n){if(iw=null,e=TE(n),e=wf(e),e!==null)if(t=xh(e),t===null)e=null;else if(r=t.tag,r===13){if(e=tF(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return iw=e,null}function mF(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HX()){case LE:return 1;case sF:return 4;case tw:case VX:return 16;case aF:return 536870912;default:return 16}default:return 16}}var Vu=null,ME=null,j1=null;function pF(){if(j1)return j1;var e,t=ME,r=t.length,n,i="value"in Vu?Vu.value:Vu.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return j1=i.slice(e,1<n?1-n:void 0)}function N1(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yb(){return!0}function W3(){return!1}function Ra(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yb:W3,this.isPropagationStopped=W3,this}return Xn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yb)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yb)},persist:function(){},isPersistent:yb}),t}var cg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$E=Ra(cg),s0=Xn({},cg,{view:0,detail:0}),sZ=Ra(s0),M5,$5,vv,n_=Xn({},s0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vv&&(vv&&e.type==="mousemove"?(M5=e.screenX-vv.screenX,$5=e.screenY-vv.screenY):$5=M5=0,vv=e),M5)},movementY:function(e){return"movementY"in e?e.movementY:$5}}),H3=Ra(n_),aZ=Xn({},n_,{dataTransfer:0}),oZ=Ra(aZ),lZ=Xn({},s0,{relatedTarget:0}),F5=Ra(lZ),cZ=Xn({},cg,{animationName:0,elapsedTime:0,pseudoElement:0}),uZ=Ra(cZ),dZ=Xn({},cg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fZ=Ra(dZ),hZ=Xn({},cg,{data:0}),V3=Ra(hZ),mZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vZ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gZ[e])?!!t[e]:!1}function FE(){return vZ}var yZ=Xn({},s0,{key:function(e){if(e.key){var t=mZ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=N1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pZ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FE,charCode:function(e){return e.type==="keypress"?N1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?N1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xZ=Ra(yZ),bZ=Xn({},n_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G3=Ra(bZ),wZ=Xn({},s0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FE}),_Z=Ra(wZ),jZ=Xn({},cg,{propertyName:0,elapsedTime:0,pseudoElement:0}),NZ=Ra(jZ),SZ=Xn({},n_,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AZ=Ra(SZ),CZ=[9,13,27,32],BE=Tc&&"CompositionEvent"in window,Jv=null;Tc&&"documentMode"in document&&(Jv=document.documentMode);var kZ=Tc&&"TextEvent"in window&&!Jv,gF=Tc&&(!BE||Jv&&8<Jv&&11>=Jv),K3=" ",Y3=!1;function vF(e,t){switch(e){case"keyup":return CZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yF(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ym=!1;function EZ(e,t){switch(e){case"compositionend":return yF(t);case"keypress":return t.which!==32?null:(Y3=!0,K3);case"textInput":return e=t.data,e===K3&&Y3?null:e;default:return null}}function PZ(e,t){if(ym)return e==="compositionend"||!BE&&vF(e,t)?(e=pF(),j1=ME=Vu=null,ym=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gF&&t.locale!=="ko"?null:t.data;default:return null}}var OZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OZ[e.type]:t==="textarea"}function xF(e,t,r,n){X$(n),t=sw(t,"onChange"),0<t.length&&(r=new $E("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Qv=null,Py=null;function TZ(e){PF(e,0)}function i_(e){var t=wm(e);if(U$(t))return e}function LZ(e,t){if(e==="change")return t}var bF=!1;if(Tc){var B5;if(Tc){var z5="oninput"in document;if(!z5){var Z3=document.createElement("div");Z3.setAttribute("oninput","return;"),z5=typeof Z3.oninput=="function"}B5=z5}else B5=!1;bF=B5&&(!document.documentMode||9<document.documentMode)}function J3(){Qv&&(Qv.detachEvent("onpropertychange",wF),Py=Qv=null)}function wF(e){if(e.propertyName==="value"&&i_(Py)){var t=[];xF(t,Py,e,TE(e)),eF(TZ,t)}}function RZ(e,t,r){e==="focusin"?(J3(),Qv=t,Py=r,Qv.attachEvent("onpropertychange",wF)):e==="focusout"&&J3()}function IZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return i_(Py)}function DZ(e,t){if(e==="click")return i_(t)}function MZ(e,t){if(e==="input"||e==="change")return i_(t)}function $Z(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ho=typeof Object.is=="function"?Object.is:$Z;function Oy(e,t){if(Ho(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!US.call(t,i)||!Ho(e[i],t[i]))return!1}return!0}function Q3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eT(e,t){var r=Q3(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Q3(r)}}function _F(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_F(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jF(){for(var e=window,t=J1();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=J1(e.document)}return t}function zE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function FZ(e){var t=jF(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&_F(r.ownerDocument.documentElement,r)){if(n!==null&&zE(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=eT(r,s);var o=eT(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BZ=Tc&&"documentMode"in document&&11>=document.documentMode,xm=null,lA=null,ey=null,cA=!1;function tT(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cA||xm==null||xm!==J1(n)||(n=xm,"selectionStart"in n&&zE(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ey&&Oy(ey,n)||(ey=n,n=sw(lA,"onSelect"),0<n.length&&(t=new $E("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xm)))}function xb(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bm={animationend:xb("Animation","AnimationEnd"),animationiteration:xb("Animation","AnimationIteration"),animationstart:xb("Animation","AnimationStart"),transitionend:xb("Transition","TransitionEnd")},q5={},NF={};Tc&&(NF=document.createElement("div").style,"AnimationEvent"in window||(delete bm.animationend.animation,delete bm.animationiteration.animation,delete bm.animationstart.animation),"TransitionEvent"in window||delete bm.transitionend.transition);function s_(e){if(q5[e])return q5[e];if(!bm[e])return e;var t=bm[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in NF)return q5[e]=t[r];return e}var SF=s_("animationend"),AF=s_("animationiteration"),CF=s_("animationstart"),kF=s_("transitionend"),EF=new Map,rT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cd(e,t){EF.set(e,t),yh(t,[e])}for(var U5=0;U5<rT.length;U5++){var W5=rT[U5],zZ=W5.toLowerCase(),qZ=W5[0].toUpperCase()+W5.slice(1);Cd(zZ,"on"+qZ)}Cd(SF,"onAnimationEnd");Cd(AF,"onAnimationIteration");Cd(CF,"onAnimationStart");Cd("dblclick","onDoubleClick");Cd("focusin","onFocus");Cd("focusout","onBlur");Cd(kF,"onTransitionEnd");mp("onMouseEnter",["mouseout","mouseover"]);mp("onMouseLeave",["mouseout","mouseover"]);mp("onPointerEnter",["pointerout","pointerover"]);mp("onPointerLeave",["pointerout","pointerover"]);yh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yh("onBeforeInput",["compositionend","keypress","textInput","paste"]);yh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(qv));function nT(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,zX(n,t,void 0,e),e.currentTarget=null}function PF(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;nT(i,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;nT(i,l,u),s=c}}}if(ew)throw e=iA,ew=!1,iA=null,e}function Mn(e,t){var r=t[mA];r===void 0&&(r=t[mA]=new Set);var n=e+"__bubble";r.has(n)||(OF(t,e,2,!1),r.add(n))}function H5(e,t,r){var n=0;t&&(n|=4),OF(r,e,n,t)}var bb="_reactListening"+Math.random().toString(36).slice(2);function Ty(e){if(!e[bb]){e[bb]=!0,$$.forEach(function(r){r!=="selectionchange"&&(UZ.has(r)||H5(r,!1,e),H5(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bb]||(t[bb]=!0,H5("selectionchange",!1,t))}}function OF(e,t,r,n){switch(mF(t)){case 1:var i=nZ;break;case 4:i=iZ;break;default:i=DE}r=i.bind(null,t,r,e),i=void 0,!nA||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function V5(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=wf(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}eF(function(){var u=s,d=TE(r),f=[];e:{var m=EF.get(e);if(m!==void 0){var h=$E,v=e;switch(e){case"keypress":if(N1(r)===0)break e;case"keydown":case"keyup":h=xZ;break;case"focusin":v="focus",h=F5;break;case"focusout":v="blur",h=F5;break;case"beforeblur":case"afterblur":h=F5;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=H3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=oZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=_Z;break;case SF:case AF:case CF:h=uZ;break;case kF:h=NZ;break;case"scroll":h=sZ;break;case"wheel":h=AZ;break;case"copy":case"cut":case"paste":h=fZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=G3}var p=(t&4)!==0,g=!p&&e==="scroll",y=p?m!==null?m+"Capture":null:m;p=[];for(var b=u,x;b!==null;){x=b;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,y!==null&&(j=Ay(b,y),j!=null&&p.push(Ly(b,j,x)))),g)break;b=b.return}0<p.length&&(m=new h(m,v,null,r,d),f.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&r!==tA&&(v=r.relatedTarget||r.fromElement)&&(wf(v)||v[Lc]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=u,v=v?wf(v):null,v!==null&&(g=xh(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(p=H3,j="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(p=G3,j="onPointerLeave",y="onPointerEnter",b="pointer"),g=h==null?m:wm(h),x=v==null?m:wm(v),m=new p(j,b+"leave",h,r,d),m.target=g,m.relatedTarget=x,j=null,wf(d)===u&&(p=new p(y,b+"enter",v,r,d),p.target=x,p.relatedTarget=g,j=p),g=j,h&&v)t:{for(p=h,y=v,b=0,x=p;x;x=Uh(x))b++;for(x=0,j=y;j;j=Uh(j))x++;for(;0<b-x;)p=Uh(p),b--;for(;0<x-b;)y=Uh(y),x--;for(;b--;){if(p===y||y!==null&&p===y.alternate)break t;p=Uh(p),y=Uh(y)}p=null}else p=null;h!==null&&iT(f,m,h,p,!1),v!==null&&g!==null&&iT(f,g,v,p,!0)}}e:{if(m=u?wm(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var N=LZ;else if(X3(m))if(bF)N=MZ;else{N=IZ;var A=RZ}else(h=m.nodeName)&&h.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=DZ);if(N&&(N=N(e,u))){xF(f,N,r,d);break e}A&&A(e,m,u),e==="focusout"&&(A=m._wrapperState)&&A.controlled&&m.type==="number"&&XS(m,"number",m.value)}switch(A=u?wm(u):window,e){case"focusin":(X3(A)||A.contentEditable==="true")&&(xm=A,lA=u,ey=null);break;case"focusout":ey=lA=xm=null;break;case"mousedown":cA=!0;break;case"contextmenu":case"mouseup":case"dragend":cA=!1,tT(f,r,d);break;case"selectionchange":if(BZ)break;case"keydown":case"keyup":tT(f,r,d)}var C;if(BE)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ym?vF(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(gF&&r.locale!=="ko"&&(ym||E!=="onCompositionStart"?E==="onCompositionEnd"&&ym&&(C=pF()):(Vu=d,ME="value"in Vu?Vu.value:Vu.textContent,ym=!0)),A=sw(u,E),0<A.length&&(E=new V3(E,e,null,r,d),f.push({event:E,listeners:A}),C?E.data=C:(C=yF(r),C!==null&&(E.data=C)))),(C=kZ?EZ(e,r):PZ(e,r))&&(u=sw(u,"onBeforeInput"),0<u.length&&(d=new V3("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=C))}PF(f,t)})}function Ly(e,t,r){return{instance:e,listener:t,currentTarget:r}}function sw(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ay(e,r),s!=null&&n.unshift(Ly(e,s,i)),s=Ay(e,t),s!=null&&n.push(Ly(e,s,i))),e=e.return}return n}function Uh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function iT(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=Ay(r,s),c!=null&&o.unshift(Ly(r,c,l))):i||(c=Ay(r,s),c!=null&&o.push(Ly(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var WZ=/\r\n?/g,HZ=/\u0000|\uFFFD/g;function sT(e){return(typeof e=="string"?e:""+e).replace(WZ,`
`).replace(HZ,"")}function wb(e,t,r){if(t=sT(t),sT(e)!==t&&r)throw Error(Ze(425))}function aw(){}var uA=null,dA=null;function fA(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hA=typeof setTimeout=="function"?setTimeout:void 0,VZ=typeof clearTimeout=="function"?clearTimeout:void 0,aT=typeof Promise=="function"?Promise:void 0,GZ=typeof queueMicrotask=="function"?queueMicrotask:typeof aT<"u"?function(e){return aT.resolve(null).then(e).catch(KZ)}:hA;function KZ(e){setTimeout(function(){throw e})}function G5(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Ey(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ey(t)}function id(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function oT(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ug=Math.random().toString(36).slice(2),gl="__reactFiber$"+ug,Ry="__reactProps$"+ug,Lc="__reactContainer$"+ug,mA="__reactEvents$"+ug,YZ="__reactListeners$"+ug,XZ="__reactHandles$"+ug;function wf(e){var t=e[gl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Lc]||r[gl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=oT(e);e!==null;){if(r=e[gl])return r;e=oT(e)}return t}e=r,r=e.parentNode}return null}function a0(e){return e=e[gl]||e[Lc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ze(33))}function a_(e){return e[Ry]||null}var pA=[],_m=-1;function kd(e){return{current:e}}function zn(e){0>_m||(e.current=pA[_m],pA[_m]=null,_m--)}function Pn(e,t){_m++,pA[_m]=e.current,e.current=t}var yd={},Ns=kd(yd),Js=kd(!1),Kf=yd;function pp(e,t){var r=e.type.contextTypes;if(!r)return yd;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Qs(e){return e=e.childContextTypes,e!=null}function ow(){zn(Js),zn(Ns)}function lT(e,t,r){if(Ns.current!==yd)throw Error(Ze(168));Pn(Ns,t),Pn(Js,r)}function TF(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Ze(108,RX(e)||"Unknown",i));return Xn({},r,n)}function lw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yd,Kf=Ns.current,Pn(Ns,e),Pn(Js,Js.current),!0}function cT(e,t,r){var n=e.stateNode;if(!n)throw Error(Ze(169));r?(e=TF(e,t,Kf),n.__reactInternalMemoizedMergedChildContext=e,zn(Js),zn(Ns),Pn(Ns,e)):zn(Js),Pn(Js,r)}var mc=null,o_=!1,K5=!1;function LF(e){mc===null?mc=[e]:mc.push(e)}function ZZ(e){o_=!0,LF(e)}function Ed(){if(!K5&&mc!==null){K5=!0;var e=0,t=fn;try{var r=mc;for(fn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}mc=null,o_=!1}catch(i){throw mc!==null&&(mc=mc.slice(e+1)),iF(LE,Ed),i}finally{fn=t,K5=!1}}return null}var jm=[],Nm=0,cw=null,uw=0,Ga=[],Ka=0,Yf=null,bc=1,wc="";function cf(e,t){jm[Nm++]=uw,jm[Nm++]=cw,cw=e,uw=t}function RF(e,t,r){Ga[Ka++]=bc,Ga[Ka++]=wc,Ga[Ka++]=Yf,Yf=e;var n=bc;e=wc;var i=32-zo(n)-1;n&=~(1<<i),r+=1;var s=32-zo(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,bc=1<<32-zo(t)+i|r<<i|n,wc=s+e}else bc=1<<s|r<<i|n,wc=e}function qE(e){e.return!==null&&(cf(e,1),RF(e,1,0))}function UE(e){for(;e===cw;)cw=jm[--Nm],jm[Nm]=null,uw=jm[--Nm],jm[Nm]=null;for(;e===Yf;)Yf=Ga[--Ka],Ga[Ka]=null,wc=Ga[--Ka],Ga[Ka]=null,bc=Ga[--Ka],Ga[Ka]=null}var ka=null,Sa=null,Un=!1,Fo=null;function IF(e,t){var r=Qa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function uT(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ka=e,Sa=id(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ka=e,Sa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yf!==null?{id:bc,overflow:wc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ka=e,Sa=null,!0):!1;default:return!1}}function gA(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vA(e){if(Un){var t=Sa;if(t){var r=t;if(!uT(e,t)){if(gA(e))throw Error(Ze(418));t=id(r.nextSibling);var n=ka;t&&uT(e,t)?IF(n,r):(e.flags=e.flags&-4097|2,Un=!1,ka=e)}}else{if(gA(e))throw Error(Ze(418));e.flags=e.flags&-4097|2,Un=!1,ka=e}}}function dT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ka=e}function _b(e){if(e!==ka)return!1;if(!Un)return dT(e),Un=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fA(e.type,e.memoizedProps)),t&&(t=Sa)){if(gA(e))throw DF(),Error(Ze(418));for(;t;)IF(e,t),t=id(t.nextSibling)}if(dT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ze(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Sa=id(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Sa=null}}else Sa=ka?id(e.stateNode.nextSibling):null;return!0}function DF(){for(var e=Sa;e;)e=id(e.nextSibling)}function gp(){Sa=ka=null,Un=!1}function WE(e){Fo===null?Fo=[e]:Fo.push(e)}var JZ=Zc.ReactCurrentBatchConfig;function yv(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ze(309));var n=r.stateNode}if(!n)throw Error(Ze(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ze(284));if(!r._owner)throw Error(Ze(290,e))}return e}function jb(e,t){throw e=Object.prototype.toString.call(t),Error(Ze(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fT(e){var t=e._init;return t(e._payload)}function MF(e){function t(y,b){if(e){var x=y.deletions;x===null?(y.deletions=[b],y.flags|=16):x.push(b)}}function r(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=ld(y,b),y.index=0,y.sibling=null,y}function s(y,b,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<b?(y.flags|=2,b):x):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,x,j){return b===null||b.tag!==6?(b=tN(x,y.mode,j),b.return=y,b):(b=i(b,x),b.return=y,b)}function c(y,b,x,j){var N=x.type;return N===vm?d(y,b,x.props.children,j,x.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Pu&&fT(N)===b.type)?(j=i(b,x.props),j.ref=yv(y,b,x),j.return=y,j):(j=O1(x.type,x.key,x.props,null,y.mode,j),j.ref=yv(y,b,x),j.return=y,j)}function u(y,b,x,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=rN(x,y.mode,j),b.return=y,b):(b=i(b,x.children||[]),b.return=y,b)}function d(y,b,x,j,N){return b===null||b.tag!==7?(b=zf(x,y.mode,j,N),b.return=y,b):(b=i(b,x),b.return=y,b)}function f(y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=tN(""+b,y.mode,x),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fb:return x=O1(b.type,b.key,b.props,null,y.mode,x),x.ref=yv(y,null,b),x.return=y,x;case gm:return b=rN(b,y.mode,x),b.return=y,b;case Pu:var j=b._init;return f(y,j(b._payload),x)}if(Bv(b)||hv(b))return b=zf(b,y.mode,x,null),b.return=y,b;jb(y,b)}return null}function m(y,b,x,j){var N=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:l(y,b,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fb:return x.key===N?c(y,b,x,j):null;case gm:return x.key===N?u(y,b,x,j):null;case Pu:return N=x._init,m(y,b,N(x._payload),j)}if(Bv(x)||hv(x))return N!==null?null:d(y,b,x,j,null);jb(y,x)}return null}function h(y,b,x,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(x)||null,l(b,y,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case fb:return y=y.get(j.key===null?x:j.key)||null,c(b,y,j,N);case gm:return y=y.get(j.key===null?x:j.key)||null,u(b,y,j,N);case Pu:var A=j._init;return h(y,b,x,A(j._payload),N)}if(Bv(j)||hv(j))return y=y.get(x)||null,d(b,y,j,N,null);jb(b,j)}return null}function v(y,b,x,j){for(var N=null,A=null,C=b,E=b=0,O=null;C!==null&&E<x.length;E++){C.index>E?(O=C,C=null):O=C.sibling;var L=m(y,C,x[E],j);if(L===null){C===null&&(C=O);break}e&&C&&L.alternate===null&&t(y,C),b=s(L,b,E),A===null?N=L:A.sibling=L,A=L,C=O}if(E===x.length)return r(y,C),Un&&cf(y,E),N;if(C===null){for(;E<x.length;E++)C=f(y,x[E],j),C!==null&&(b=s(C,b,E),A===null?N=C:A.sibling=C,A=C);return Un&&cf(y,E),N}for(C=n(y,C);E<x.length;E++)O=h(C,y,E,x[E],j),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?E:O.key),b=s(O,b,E),A===null?N=O:A.sibling=O,A=O);return e&&C.forEach(function(k){return t(y,k)}),Un&&cf(y,E),N}function p(y,b,x,j){var N=hv(x);if(typeof N!="function")throw Error(Ze(150));if(x=N.call(x),x==null)throw Error(Ze(151));for(var A=N=null,C=b,E=b=0,O=null,L=x.next();C!==null&&!L.done;E++,L=x.next()){C.index>E?(O=C,C=null):O=C.sibling;var k=m(y,C,L.value,j);if(k===null){C===null&&(C=O);break}e&&C&&k.alternate===null&&t(y,C),b=s(k,b,E),A===null?N=k:A.sibling=k,A=k,C=O}if(L.done)return r(y,C),Un&&cf(y,E),N;if(C===null){for(;!L.done;E++,L=x.next())L=f(y,L.value,j),L!==null&&(b=s(L,b,E),A===null?N=L:A.sibling=L,A=L);return Un&&cf(y,E),N}for(C=n(y,C);!L.done;E++,L=x.next())L=h(C,y,E,L.value,j),L!==null&&(e&&L.alternate!==null&&C.delete(L.key===null?E:L.key),b=s(L,b,E),A===null?N=L:A.sibling=L,A=L);return e&&C.forEach(function(T){return t(y,T)}),Un&&cf(y,E),N}function g(y,b,x,j){if(typeof x=="object"&&x!==null&&x.type===vm&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case fb:e:{for(var N=x.key,A=b;A!==null;){if(A.key===N){if(N=x.type,N===vm){if(A.tag===7){r(y,A.sibling),b=i(A,x.props.children),b.return=y,y=b;break e}}else if(A.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Pu&&fT(N)===A.type){r(y,A.sibling),b=i(A,x.props),b.ref=yv(y,A,x),b.return=y,y=b;break e}r(y,A);break}else t(y,A);A=A.sibling}x.type===vm?(b=zf(x.props.children,y.mode,j,x.key),b.return=y,y=b):(j=O1(x.type,x.key,x.props,null,y.mode,j),j.ref=yv(y,b,x),j.return=y,y=j)}return o(y);case gm:e:{for(A=x.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){r(y,b.sibling),b=i(b,x.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else t(y,b);b=b.sibling}b=rN(x,y.mode,j),b.return=y,y=b}return o(y);case Pu:return A=x._init,g(y,b,A(x._payload),j)}if(Bv(x))return v(y,b,x,j);if(hv(x))return p(y,b,x,j);jb(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(r(y,b.sibling),b=i(b,x),b.return=y,y=b):(r(y,b),b=tN(x,y.mode,j),b.return=y,y=b),o(y)):r(y,b)}return g}var vp=MF(!0),$F=MF(!1),dw=kd(null),fw=null,Sm=null,HE=null;function VE(){HE=Sm=fw=null}function GE(e){var t=dw.current;zn(dw),e._currentValue=t}function yA(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fm(e,t){fw=e,HE=Sm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ys=!0),e.firstContext=null)}function io(e){var t=e._currentValue;if(HE!==e)if(e={context:e,memoizedValue:t,next:null},Sm===null){if(fw===null)throw Error(Ze(308));Sm=e,fw.dependencies={lanes:0,firstContext:e}}else Sm=Sm.next=e;return t}var _f=null;function KE(e){_f===null?_f=[e]:_f.push(e)}function FF(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,KE(t)):(r.next=i.next,i.next=r),t.interleaved=r,Rc(e,n)}function Rc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ou=!1;function YE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ac(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sd(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,$r&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Rc(e,r)}return i=n.interleaved,i===null?(t.next=t,KE(n)):(t.next=i.next,i.next=t),n.interleaved=t,Rc(e,r)}function S1(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,RE(e,r)}}function hT(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function hw(e,t,r,n){var i=e.updateQueue;Ou=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,d=u=c=null,l=s;do{var m=l.lane,h=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,p=l;switch(m=t,h=r,p.tag){case 1:if(v=p.payload,typeof v=="function"){f=v.call(h,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,m=typeof v=="function"?v.call(h,f,m):v,m==null)break e;f=Xn({},f,m);break e;case 2:Ou=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else h={eventTime:h,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Zf|=o,e.lanes=o,e.memoizedState=f}}function mT(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ze(191,i));i.call(n)}}}var o0={},Cl=kd(o0),Iy=kd(o0),Dy=kd(o0);function jf(e){if(e===o0)throw Error(Ze(174));return e}function XE(e,t){switch(Pn(Dy,t),Pn(Iy,e),Pn(Cl,o0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:JS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=JS(t,e)}zn(Cl),Pn(Cl,t)}function yp(){zn(Cl),zn(Iy),zn(Dy)}function zF(e){jf(Dy.current);var t=jf(Cl.current),r=JS(t,e.type);t!==r&&(Pn(Iy,e),Pn(Cl,r))}function ZE(e){Iy.current===e&&(zn(Cl),zn(Iy))}var Gn=kd(0);function mw(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Y5=[];function JE(){for(var e=0;e<Y5.length;e++)Y5[e]._workInProgressVersionPrimary=null;Y5.length=0}var A1=Zc.ReactCurrentDispatcher,X5=Zc.ReactCurrentBatchConfig,Xf=0,Kn=null,Di=null,Hi=null,pw=!1,ty=!1,My=0,QZ=0;function ms(){throw Error(Ze(321))}function QE(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ho(e[r],t[r]))return!1;return!0}function e4(e,t,r,n,i,s){if(Xf=s,Kn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A1.current=e===null||e.memoizedState===null?nJ:iJ,e=r(n,i),ty){s=0;do{if(ty=!1,My=0,25<=s)throw Error(Ze(301));s+=1,Hi=Di=null,t.updateQueue=null,A1.current=sJ,e=r(n,i)}while(ty)}if(A1.current=gw,t=Di!==null&&Di.next!==null,Xf=0,Hi=Di=Kn=null,pw=!1,t)throw Error(Ze(300));return e}function t4(){var e=My!==0;return My=0,e}function fl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hi===null?Kn.memoizedState=Hi=e:Hi=Hi.next=e,Hi}function so(){if(Di===null){var e=Kn.alternate;e=e!==null?e.memoizedState:null}else e=Di.next;var t=Hi===null?Kn.memoizedState:Hi.next;if(t!==null)Hi=t,Di=e;else{if(e===null)throw Error(Ze(310));Di=e,e={memoizedState:Di.memoizedState,baseState:Di.baseState,baseQueue:Di.baseQueue,queue:Di.queue,next:null},Hi===null?Kn.memoizedState=Hi=e:Hi=Hi.next=e}return Hi}function $y(e,t){return typeof t=="function"?t(e):t}function Z5(e){var t=so(),r=t.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=e;var n=Di,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Xf&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Kn.lanes|=d,Zf|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,Ho(n,t.memoizedState)||(Ys=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,Kn.lanes|=s,Zf|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function J5(e){var t=so(),r=t.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ho(s,t.memoizedState)||(Ys=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function qF(){}function UF(e,t){var r=Kn,n=so(),i=t(),s=!Ho(n.memoizedState,i);if(s&&(n.memoizedState=i,Ys=!0),n=n.queue,r4(VF.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Hi!==null&&Hi.memoizedState.tag&1){if(r.flags|=2048,Fy(9,HF.bind(null,r,n,i,t),void 0,null),Ki===null)throw Error(Ze(349));Xf&30||WF(r,t,i)}return i}function WF(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Kn.updateQueue,t===null?(t={lastEffect:null,stores:null},Kn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function HF(e,t,r,n){t.value=r,t.getSnapshot=n,GF(t)&&KF(e)}function VF(e,t,r){return r(function(){GF(t)&&KF(e)})}function GF(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ho(e,r)}catch{return!0}}function KF(e){var t=Rc(e,1);t!==null&&qo(t,e,1,-1)}function pT(e){var t=fl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$y,lastRenderedState:e},t.queue=e,e=e.dispatch=rJ.bind(null,Kn,e),[t.memoizedState,e]}function Fy(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Kn.updateQueue,t===null?(t={lastEffect:null,stores:null},Kn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function YF(){return so().memoizedState}function C1(e,t,r,n){var i=fl();Kn.flags|=e,i.memoizedState=Fy(1|t,r,void 0,n===void 0?null:n)}function l_(e,t,r,n){var i=so();n=n===void 0?null:n;var s=void 0;if(Di!==null){var o=Di.memoizedState;if(s=o.destroy,n!==null&&QE(n,o.deps)){i.memoizedState=Fy(t,r,s,n);return}}Kn.flags|=e,i.memoizedState=Fy(1|t,r,s,n)}function gT(e,t){return C1(8390656,8,e,t)}function r4(e,t){return l_(2048,8,e,t)}function XF(e,t){return l_(4,2,e,t)}function ZF(e,t){return l_(4,4,e,t)}function JF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function QF(e,t,r){return r=r!=null?r.concat([e]):null,l_(4,4,JF.bind(null,t,e),r)}function n4(){}function e7(e,t){var r=so();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&QE(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function t7(e,t){var r=so();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&QE(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function r7(e,t,r){return Xf&21?(Ho(r,t)||(r=oF(),Kn.lanes|=r,Zf|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ys=!0),e.memoizedState=r)}function eJ(e,t){var r=fn;fn=r!==0&&4>r?r:4,e(!0);var n=X5.transition;X5.transition={};try{e(!1),t()}finally{fn=r,X5.transition=n}}function n7(){return so().memoizedState}function tJ(e,t,r){var n=od(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},i7(e))s7(t,r);else if(r=FF(e,t,r,n),r!==null){var i=Ms();qo(r,e,n,i),a7(r,t,n)}}function rJ(e,t,r){var n=od(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(i7(e))s7(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,r);if(i.hasEagerState=!0,i.eagerState=l,Ho(l,o)){var c=t.interleaved;c===null?(i.next=i,KE(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=FF(e,t,i,n),r!==null&&(i=Ms(),qo(r,e,n,i),a7(r,t,n))}}function i7(e){var t=e.alternate;return e===Kn||t!==null&&t===Kn}function s7(e,t){ty=pw=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function a7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,RE(e,r)}}var gw={readContext:io,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},nJ={readContext:io,useCallback:function(e,t){return fl().memoizedState=[e,t===void 0?null:t],e},useContext:io,useEffect:gT,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,C1(4194308,4,JF.bind(null,t,e),r)},useLayoutEffect:function(e,t){return C1(4194308,4,e,t)},useInsertionEffect:function(e,t){return C1(4,2,e,t)},useMemo:function(e,t){var r=fl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=fl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tJ.bind(null,Kn,e),[n.memoizedState,e]},useRef:function(e){var t=fl();return e={current:e},t.memoizedState=e},useState:pT,useDebugValue:n4,useDeferredValue:function(e){return fl().memoizedState=e},useTransition:function(){var e=pT(!1),t=e[0];return e=eJ.bind(null,e[1]),fl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Kn,i=fl();if(Un){if(r===void 0)throw Error(Ze(407));r=r()}else{if(r=t(),Ki===null)throw Error(Ze(349));Xf&30||WF(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,gT(VF.bind(null,n,s,e),[e]),n.flags|=2048,Fy(9,HF.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=fl(),t=Ki.identifierPrefix;if(Un){var r=wc,n=bc;r=(n&~(1<<32-zo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=My++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=QZ++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iJ={readContext:io,useCallback:e7,useContext:io,useEffect:r4,useImperativeHandle:QF,useInsertionEffect:XF,useLayoutEffect:ZF,useMemo:t7,useReducer:Z5,useRef:YF,useState:function(){return Z5($y)},useDebugValue:n4,useDeferredValue:function(e){var t=so();return r7(t,Di.memoizedState,e)},useTransition:function(){var e=Z5($y)[0],t=so().memoizedState;return[e,t]},useMutableSource:qF,useSyncExternalStore:UF,useId:n7,unstable_isNewReconciler:!1},sJ={readContext:io,useCallback:e7,useContext:io,useEffect:r4,useImperativeHandle:QF,useInsertionEffect:XF,useLayoutEffect:ZF,useMemo:t7,useReducer:J5,useRef:YF,useState:function(){return J5($y)},useDebugValue:n4,useDeferredValue:function(e){var t=so();return Di===null?t.memoizedState=e:r7(t,Di.memoizedState,e)},useTransition:function(){var e=J5($y)[0],t=so().memoizedState;return[e,t]},useMutableSource:qF,useSyncExternalStore:UF,useId:n7,unstable_isNewReconciler:!1};function Oo(e,t){if(e&&e.defaultProps){t=Xn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function xA(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Xn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var c_={isMounted:function(e){return(e=e._reactInternals)?xh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ms(),i=od(e),s=Ac(n,i);s.payload=t,r!=null&&(s.callback=r),t=sd(e,s,i),t!==null&&(qo(t,e,i,n),S1(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ms(),i=od(e),s=Ac(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=sd(e,s,i),t!==null&&(qo(t,e,i,n),S1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ms(),n=od(e),i=Ac(r,n);i.tag=2,t!=null&&(i.callback=t),t=sd(e,i,n),t!==null&&(qo(t,e,n,r),S1(t,e,n))}};function vT(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!Oy(r,n)||!Oy(i,s):!0}function o7(e,t,r){var n=!1,i=yd,s=t.contextType;return typeof s=="object"&&s!==null?s=io(s):(i=Qs(t)?Kf:Ns.current,n=t.contextTypes,s=(n=n!=null)?pp(e,i):yd),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=c_,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function yT(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&c_.enqueueReplaceState(t,t.state,null)}function bA(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},YE(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=io(s):(s=Qs(t)?Kf:Ns.current,i.context=pp(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(xA(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&c_.enqueueReplaceState(i,i.state,null),hw(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function xp(e,t){try{var r="",n=t;do r+=LX(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Q5(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function wA(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var aJ=typeof WeakMap=="function"?WeakMap:Map;function l7(e,t,r){r=Ac(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){yw||(yw=!0,OA=n),wA(e,t)},r}function c7(e,t,r){r=Ac(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){wA(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){wA(e,t),typeof n!="function"&&(ad===null?ad=new Set([this]):ad.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function xT(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new aJ;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=bJ.bind(null,e,t,r),t.then(e,e))}function bT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wT(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ac(-1,1),t.tag=2,sd(r,t,1))),r.lanes|=1),e)}var oJ=Zc.ReactCurrentOwner,Ys=!1;function Ps(e,t,r,n){t.child=e===null?$F(t,null,r,n):vp(t,e.child,r,n)}function _T(e,t,r,n,i){r=r.render;var s=t.ref;return Fm(t,i),n=e4(e,t,r,n,s,i),r=t4(),e!==null&&!Ys?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ic(e,t,i)):(Un&&r&&qE(t),t.flags|=1,Ps(e,t,n,i),t.child)}function jT(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!d4(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,u7(e,t,s,n,i)):(e=O1(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Oy,r(o,n)&&e.ref===t.ref)return Ic(e,t,i)}return t.flags|=1,e=ld(s,n),e.ref=t.ref,e.return=t,t.child=e}function u7(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(Oy(s,n)&&e.ref===t.ref)if(Ys=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Ys=!0);else return t.lanes=e.lanes,Ic(e,t,i)}return _A(e,t,r,n,i)}function d7(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(Cm,ya),ya|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pn(Cm,ya),ya|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Pn(Cm,ya),ya|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Pn(Cm,ya),ya|=n;return Ps(e,t,i,r),t.child}function f7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _A(e,t,r,n,i){var s=Qs(r)?Kf:Ns.current;return s=pp(t,s),Fm(t,i),r=e4(e,t,r,n,s,i),n=t4(),e!==null&&!Ys?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ic(e,t,i)):(Un&&n&&qE(t),t.flags|=1,Ps(e,t,r,i),t.child)}function NT(e,t,r,n,i){if(Qs(r)){var s=!0;lw(t)}else s=!1;if(Fm(t,i),t.stateNode===null)k1(e,t),o7(t,r,n),bA(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=io(u):(u=Qs(r)?Kf:Ns.current,u=pp(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&yT(t,o,n,u),Ou=!1;var m=t.memoizedState;o.state=m,hw(t,n,o,i),c=t.memoizedState,l!==n||m!==c||Js.current||Ou?(typeof d=="function"&&(xA(t,r,d,n),c=t.memoizedState),(l=Ou||vT(t,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,BF(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Oo(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=io(c):(c=Qs(r)?Kf:Ns.current,c=pp(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&yT(t,o,n,c),Ou=!1,m=t.memoizedState,o.state=m,hw(t,n,o,i);var v=t.memoizedState;l!==f||m!==v||Js.current||Ou?(typeof h=="function"&&(xA(t,r,h,n),v=t.memoizedState),(u=Ou||vT(t,r,u,n,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return jA(e,t,r,n,s,i)}function jA(e,t,r,n,i,s){f7(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&cT(t,r,!1),Ic(e,t,s);n=t.stateNode,oJ.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=vp(t,e.child,null,s),t.child=vp(t,null,l,s)):Ps(e,t,l,s),t.memoizedState=n.state,i&&cT(t,r,!0),t.child}function h7(e){var t=e.stateNode;t.pendingContext?lT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lT(e,t.context,!1),XE(e,t.containerInfo)}function ST(e,t,r,n,i){return gp(),WE(i),t.flags|=256,Ps(e,t,r,n),t.child}var NA={dehydrated:null,treeContext:null,retryLane:0};function SA(e){return{baseLanes:e,cachePool:null,transitions:null}}function m7(e,t,r){var n=t.pendingProps,i=Gn.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pn(Gn,i&1),e===null)return vA(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=f_(o,n,0,null),e=zf(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=SA(r),t.memoizedState=NA,e):i4(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lJ(e,t,o,n,l,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ld(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ld(l,s):(s=zf(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?SA(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=NA,n}return s=e.child,e=s.sibling,n=ld(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function i4(e,t){return t=f_({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Nb(e,t,r,n){return n!==null&&WE(n),vp(t,e.child,null,r),e=i4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lJ(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=Q5(Error(Ze(422))),Nb(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=f_({mode:"visible",children:n.children},i,0,null),s=zf(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&vp(t,e.child,null,o),t.child.memoizedState=SA(o),t.memoizedState=NA,s);if(!(t.mode&1))return Nb(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(Ze(419)),n=Q5(s,n,void 0),Nb(e,t,o,n)}if(l=(o&e.childLanes)!==0,Ys||l){if(n=Ki,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rc(e,i),qo(n,e,i,-1))}return u4(),n=Q5(Error(Ze(421))),Nb(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=wJ.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Sa=id(i.nextSibling),ka=t,Un=!0,Fo=null,e!==null&&(Ga[Ka++]=bc,Ga[Ka++]=wc,Ga[Ka++]=Yf,bc=e.id,wc=e.overflow,Yf=t),t=i4(t,n.children),t.flags|=4096,t)}function AT(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yA(e.return,t,r)}function eN(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function p7(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Ps(e,t,n.children,r),n=Gn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&AT(e,r,t);else if(e.tag===19)AT(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Pn(Gn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&mw(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),eN(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&mw(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}eN(t,!0,r,null,s);break;case"together":eN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function k1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ic(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zf|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ze(153));if(t.child!==null){for(e=t.child,r=ld(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ld(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function cJ(e,t,r){switch(t.tag){case 3:h7(t),gp();break;case 5:zF(t);break;case 1:Qs(t.type)&&lw(t);break;case 4:XE(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Pn(dw,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Pn(Gn,Gn.current&1),t.flags|=128,null):r&t.child.childLanes?m7(e,t,r):(Pn(Gn,Gn.current&1),e=Ic(e,t,r),e!==null?e.sibling:null);Pn(Gn,Gn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return p7(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pn(Gn,Gn.current),n)break;return null;case 22:case 23:return t.lanes=0,d7(e,t,r)}return Ic(e,t,r)}var g7,AA,v7,y7;g7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};AA=function(){};v7=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,jf(Cl.current);var s=null;switch(r){case"input":i=KS(e,i),n=KS(e,n),s=[];break;case"select":i=Xn({},i,{value:void 0}),n=Xn({},n,{value:void 0}),s=[];break;case"textarea":i=ZS(e,i),n=ZS(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=aw)}QS(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ny.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ny.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Mn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};y7=function(e,t,r,n){r!==n&&(t.flags|=4)};function xv(e,t){if(!Un)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ps(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function uJ(e,t,r){var n=t.pendingProps;switch(UE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ps(t),null;case 1:return Qs(t.type)&&ow(),ps(t),null;case 3:return n=t.stateNode,yp(),zn(Js),zn(Ns),JE(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(_b(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fo!==null&&(RA(Fo),Fo=null))),AA(e,t),ps(t),null;case 5:ZE(t);var i=jf(Dy.current);if(r=t.type,e!==null&&t.stateNode!=null)v7(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ze(166));return ps(t),null}if(e=jf(Cl.current),_b(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[gl]=t,n[Ry]=s,e=(t.mode&1)!==0,r){case"dialog":Mn("cancel",n),Mn("close",n);break;case"iframe":case"object":case"embed":Mn("load",n);break;case"video":case"audio":for(i=0;i<qv.length;i++)Mn(qv[i],n);break;case"source":Mn("error",n);break;case"img":case"image":case"link":Mn("error",n),Mn("load",n);break;case"details":Mn("toggle",n);break;case"input":I3(n,s),Mn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Mn("invalid",n);break;case"textarea":M3(n,s),Mn("invalid",n)}QS(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&wb(n.textContent,l,e),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&wb(n.textContent,l,e),i=["children",""+l]):Ny.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Mn("scroll",n)}switch(r){case"input":hb(n),D3(n,s,!0);break;case"textarea":hb(n),$3(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=aw)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=V$(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[gl]=t,e[Ry]=n,g7(e,t,!1,!1),t.stateNode=e;e:{switch(o=eA(r,n),r){case"dialog":Mn("cancel",e),Mn("close",e),i=n;break;case"iframe":case"object":case"embed":Mn("load",e),i=n;break;case"video":case"audio":for(i=0;i<qv.length;i++)Mn(qv[i],e);i=n;break;case"source":Mn("error",e),i=n;break;case"img":case"image":case"link":Mn("error",e),Mn("load",e),i=n;break;case"details":Mn("toggle",e),i=n;break;case"input":I3(e,n),i=KS(e,n),Mn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Xn({},n,{value:void 0}),Mn("invalid",e);break;case"textarea":M3(e,n),i=ZS(e,n),Mn("invalid",e);break;default:i=n}QS(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Y$(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&G$(e,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Sy(e,c):typeof c=="number"&&Sy(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ny.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Mn("scroll",e):c!=null&&kE(e,s,c,o))}switch(r){case"input":hb(e),D3(e,n,!1);break;case"textarea":hb(e),$3(e);break;case"option":n.value!=null&&e.setAttribute("value",""+vd(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Im(e,!!n.multiple,s,!1):n.defaultValue!=null&&Im(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=aw)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ps(t),null;case 6:if(e&&t.stateNode!=null)y7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ze(166));if(r=jf(Dy.current),jf(Cl.current),_b(t)){if(n=t.stateNode,r=t.memoizedProps,n[gl]=t,(s=n.nodeValue!==r)&&(e=ka,e!==null))switch(e.tag){case 3:wb(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wb(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[gl]=t,t.stateNode=n}return ps(t),null;case 13:if(zn(Gn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Un&&Sa!==null&&t.mode&1&&!(t.flags&128))DF(),gp(),t.flags|=98560,s=!1;else if(s=_b(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(Ze(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ze(317));s[gl]=t}else gp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ps(t),s=!1}else Fo!==null&&(RA(Fo),Fo=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Gn.current&1?Fi===0&&(Fi=3):u4())),t.updateQueue!==null&&(t.flags|=4),ps(t),null);case 4:return yp(),AA(e,t),e===null&&Ty(t.stateNode.containerInfo),ps(t),null;case 10:return GE(t.type._context),ps(t),null;case 17:return Qs(t.type)&&ow(),ps(t),null;case 19:if(zn(Gn),s=t.memoizedState,s===null)return ps(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)xv(s,!1);else{if(Fi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=mw(e),o!==null){for(t.flags|=128,xv(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pn(Gn,Gn.current&1|2),t.child}e=e.sibling}s.tail!==null&&hi()>bp&&(t.flags|=128,n=!0,xv(s,!1),t.lanes=4194304)}else{if(!n)if(e=mw(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xv(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Un)return ps(t),null}else 2*hi()-s.renderingStartTime>bp&&r!==1073741824&&(t.flags|=128,n=!0,xv(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=hi(),t.sibling=null,r=Gn.current,Pn(Gn,n?r&1|2:r&1),t):(ps(t),null);case 22:case 23:return c4(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ya&1073741824&&(ps(t),t.subtreeFlags&6&&(t.flags|=8192)):ps(t),null;case 24:return null;case 25:return null}throw Error(Ze(156,t.tag))}function dJ(e,t){switch(UE(t),t.tag){case 1:return Qs(t.type)&&ow(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yp(),zn(Js),zn(Ns),JE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ZE(t),null;case 13:if(zn(Gn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ze(340));gp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zn(Gn),null;case 4:return yp(),null;case 10:return GE(t.type._context),null;case 22:case 23:return c4(),null;case 24:return null;default:return null}}var Sb=!1,_s=!1,fJ=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Am(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ni(e,t,n)}else r.current=null}function CA(e,t,r){try{r()}catch(n){ni(e,t,n)}}var CT=!1;function hJ(e,t){if(uA=nw,e=jF(),zE(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==r||i!==0&&f.nodeType!==3||(l=o+i),f!==s||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===r&&++u===i&&(l=o),m===s&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(dA={focusedElem:e,selectionRange:r},nw=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){t=ot;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?p:Oo(t.type,p),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ze(163))}}catch(j){ni(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}return v=CT,CT=!1,v}function ry(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&CA(t,r,s)}i=i.next}while(i!==n)}}function u_(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function kA(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function x7(e){var t=e.alternate;t!==null&&(e.alternate=null,x7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gl],delete t[Ry],delete t[mA],delete t[YZ],delete t[XZ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function b7(e){return e.tag===5||e.tag===3||e.tag===4}function kT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||b7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function EA(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=aw));else if(n!==4&&(e=e.child,e!==null))for(EA(e,t,r),e=e.sibling;e!==null;)EA(e,t,r),e=e.sibling}function PA(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(PA(e,t,r),e=e.sibling;e!==null;)PA(e,t,r),e=e.sibling}var os=null,Do=!1;function wu(e,t,r){for(r=r.child;r!==null;)w7(e,t,r),r=r.sibling}function w7(e,t,r){if(Al&&typeof Al.onCommitFiberUnmount=="function")try{Al.onCommitFiberUnmount(r_,r)}catch{}switch(r.tag){case 5:_s||Am(r,t);case 6:var n=os,i=Do;os=null,wu(e,t,r),os=n,Do=i,os!==null&&(Do?(e=os,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):os.removeChild(r.stateNode));break;case 18:os!==null&&(Do?(e=os,r=r.stateNode,e.nodeType===8?G5(e.parentNode,r):e.nodeType===1&&G5(e,r),Ey(e)):G5(os,r.stateNode));break;case 4:n=os,i=Do,os=r.stateNode.containerInfo,Do=!0,wu(e,t,r),os=n,Do=i;break;case 0:case 11:case 14:case 15:if(!_s&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&CA(r,t,o),i=i.next}while(i!==n)}wu(e,t,r);break;case 1:if(!_s&&(Am(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ni(r,t,l)}wu(e,t,r);break;case 21:wu(e,t,r);break;case 22:r.mode&1?(_s=(n=_s)||r.memoizedState!==null,wu(e,t,r),_s=n):wu(e,t,r);break;default:wu(e,t,r)}}function ET(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fJ),t.forEach(function(n){var i=_J.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function So(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:os=l.stateNode,Do=!1;break e;case 3:os=l.stateNode.containerInfo,Do=!0;break e;case 4:os=l.stateNode.containerInfo,Do=!0;break e}l=l.return}if(os===null)throw Error(Ze(160));w7(s,o,i),os=null,Do=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){ni(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_7(t,e),t=t.sibling}function _7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(So(t,e),cl(e),n&4){try{ry(3,e,e.return),u_(3,e)}catch(p){ni(e,e.return,p)}try{ry(5,e,e.return)}catch(p){ni(e,e.return,p)}}break;case 1:So(t,e),cl(e),n&512&&r!==null&&Am(r,r.return);break;case 5:if(So(t,e),cl(e),n&512&&r!==null&&Am(r,r.return),e.flags&32){var i=e.stateNode;try{Sy(i,"")}catch(p){ni(e,e.return,p)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&W$(i,s),eA(l,o);var u=eA(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Y$(i,f):d==="dangerouslySetInnerHTML"?G$(i,f):d==="children"?Sy(i,f):kE(i,d,f,u)}switch(l){case"input":YS(i,s);break;case"textarea":H$(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Im(i,!!s.multiple,h,!1):m!==!!s.multiple&&(s.defaultValue!=null?Im(i,!!s.multiple,s.defaultValue,!0):Im(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ry]=s}catch(p){ni(e,e.return,p)}}break;case 6:if(So(t,e),cl(e),n&4){if(e.stateNode===null)throw Error(Ze(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(p){ni(e,e.return,p)}}break;case 3:if(So(t,e),cl(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ey(t.containerInfo)}catch(p){ni(e,e.return,p)}break;case 4:So(t,e),cl(e);break;case 13:So(t,e),cl(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(o4=hi())),n&4&&ET(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(_s=(u=_s)||d,So(t,e),_s=u):So(t,e),cl(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ot=e,d=e.child;d!==null;){for(f=ot=d;ot!==null;){switch(m=ot,h=m.child,m.tag){case 0:case 11:case 14:case 15:ry(4,m,m.return);break;case 1:Am(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){ni(n,r,p)}}break;case 5:Am(m,m.return);break;case 22:if(m.memoizedState!==null){OT(f);continue}}h!==null?(h.return=m,ot=h):OT(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=K$("display",o))}catch(p){ni(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){ni(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:So(t,e),cl(e),n&4&&ET(e);break;case 21:break;default:So(t,e),cl(e)}}function cl(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(b7(r)){var n=r;break e}r=r.return}throw Error(Ze(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Sy(i,""),n.flags&=-33);var s=kT(e);PA(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=kT(e);EA(e,l,o);break;default:throw Error(Ze(161))}}catch(c){ni(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mJ(e,t,r){ot=e,j7(e)}function j7(e,t,r){for(var n=(e.mode&1)!==0;ot!==null;){var i=ot,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Sb;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||_s;l=Sb;var u=_s;if(Sb=o,(_s=c)&&!u)for(ot=i;ot!==null;)o=ot,c=o.child,o.tag===22&&o.memoizedState!==null?TT(i):c!==null?(c.return=o,ot=c):TT(i);for(;s!==null;)ot=s,j7(s),s=s.sibling;ot=i,Sb=l,_s=u}PT(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ot=s):PT(e)}}function PT(e){for(;ot!==null;){var t=ot;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_s||u_(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_s)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Oo(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&mT(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}mT(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ey(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ze(163))}_s||t.flags&512&&kA(t)}catch(m){ni(t,t.return,m)}}if(t===e){ot=null;break}if(r=t.sibling,r!==null){r.return=t.return,ot=r;break}ot=t.return}}function OT(e){for(;ot!==null;){var t=ot;if(t===e){ot=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ot=r;break}ot=t.return}}function TT(e){for(;ot!==null;){var t=ot;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{u_(4,t)}catch(c){ni(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){ni(t,i,c)}}var s=t.return;try{kA(t)}catch(c){ni(t,s,c)}break;case 5:var o=t.return;try{kA(t)}catch(c){ni(t,o,c)}}}catch(c){ni(t,t.return,c)}if(t===e){ot=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ot=l;break}ot=t.return}}var pJ=Math.ceil,vw=Zc.ReactCurrentDispatcher,s4=Zc.ReactCurrentOwner,to=Zc.ReactCurrentBatchConfig,$r=0,Ki=null,Ni=null,cs=0,ya=0,Cm=kd(0),Fi=0,By=null,Zf=0,d_=0,a4=0,ny=null,Gs=null,o4=0,bp=1/0,dc=null,yw=!1,OA=null,ad=null,Ab=!1,Gu=null,xw=0,iy=0,TA=null,E1=-1,P1=0;function Ms(){return $r&6?hi():E1!==-1?E1:E1=hi()}function od(e){return e.mode&1?$r&2&&cs!==0?cs&-cs:JZ.transition!==null?(P1===0&&(P1=oF()),P1):(e=fn,e!==0||(e=window.event,e=e===void 0?16:mF(e.type)),e):1}function qo(e,t,r,n){if(50<iy)throw iy=0,TA=null,Error(Ze(185));i0(e,r,n),(!($r&2)||e!==Ki)&&(e===Ki&&(!($r&2)&&(d_|=r),Fi===4&&Mu(e,cs)),ea(e,n),r===1&&$r===0&&!(t.mode&1)&&(bp=hi()+500,o_&&Ed()))}function ea(e,t){var r=e.callbackNode;JX(e,t);var n=rw(e,e===Ki?cs:0);if(n===0)r!==null&&z3(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&z3(r),t===1)e.tag===0?ZZ(LT.bind(null,e)):LF(LT.bind(null,e)),GZ(function(){!($r&6)&&Ed()}),r=null;else{switch(lF(n)){case 1:r=LE;break;case 4:r=sF;break;case 16:r=tw;break;case 536870912:r=aF;break;default:r=tw}r=O7(r,N7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function N7(e,t){if(E1=-1,P1=0,$r&6)throw Error(Ze(327));var r=e.callbackNode;if(Bm()&&e.callbackNode!==r)return null;var n=rw(e,e===Ki?cs:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=bw(e,n);else{t=n;var i=$r;$r|=2;var s=A7();(Ki!==e||cs!==t)&&(dc=null,bp=hi()+500,Bf(e,t));do try{yJ();break}catch(l){S7(e,l)}while(!0);VE(),vw.current=s,$r=i,Ni!==null?t=0:(Ki=null,cs=0,t=Fi)}if(t!==0){if(t===2&&(i=sA(e),i!==0&&(n=i,t=LA(e,i))),t===1)throw r=By,Bf(e,0),Mu(e,n),ea(e,hi()),r;if(t===6)Mu(e,n);else{if(i=e.current.alternate,!(n&30)&&!gJ(i)&&(t=bw(e,n),t===2&&(s=sA(e),s!==0&&(n=s,t=LA(e,s))),t===1))throw r=By,Bf(e,0),Mu(e,n),ea(e,hi()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Ze(345));case 2:uf(e,Gs,dc);break;case 3:if(Mu(e,n),(n&130023424)===n&&(t=o4+500-hi(),10<t)){if(rw(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ms(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=hA(uf.bind(null,e,Gs,dc),t);break}uf(e,Gs,dc);break;case 4:if(Mu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-zo(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=hi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pJ(n/1960))-n,10<n){e.timeoutHandle=hA(uf.bind(null,e,Gs,dc),n);break}uf(e,Gs,dc);break;case 5:uf(e,Gs,dc);break;default:throw Error(Ze(329))}}}return ea(e,hi()),e.callbackNode===r?N7.bind(null,e):null}function LA(e,t){var r=ny;return e.current.memoizedState.isDehydrated&&(Bf(e,t).flags|=256),e=bw(e,t),e!==2&&(t=Gs,Gs=r,t!==null&&RA(t)),e}function RA(e){Gs===null?Gs=e:Gs.push.apply(Gs,e)}function gJ(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Ho(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mu(e,t){for(t&=~a4,t&=~d_,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zo(t),n=1<<r;e[r]=-1,t&=~n}}function LT(e){if($r&6)throw Error(Ze(327));Bm();var t=rw(e,0);if(!(t&1))return ea(e,hi()),null;var r=bw(e,t);if(e.tag!==0&&r===2){var n=sA(e);n!==0&&(t=n,r=LA(e,n))}if(r===1)throw r=By,Bf(e,0),Mu(e,t),ea(e,hi()),r;if(r===6)throw Error(Ze(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uf(e,Gs,dc),ea(e,hi()),null}function l4(e,t){var r=$r;$r|=1;try{return e(t)}finally{$r=r,$r===0&&(bp=hi()+500,o_&&Ed())}}function Jf(e){Gu!==null&&Gu.tag===0&&!($r&6)&&Bm();var t=$r;$r|=1;var r=to.transition,n=fn;try{if(to.transition=null,fn=1,e)return e()}finally{fn=n,to.transition=r,$r=t,!($r&6)&&Ed()}}function c4(){ya=Cm.current,zn(Cm)}function Bf(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,VZ(r)),Ni!==null)for(r=Ni.return;r!==null;){var n=r;switch(UE(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ow();break;case 3:yp(),zn(Js),zn(Ns),JE();break;case 5:ZE(n);break;case 4:yp();break;case 13:zn(Gn);break;case 19:zn(Gn);break;case 10:GE(n.type._context);break;case 22:case 23:c4()}r=r.return}if(Ki=e,Ni=e=ld(e.current,null),cs=ya=t,Fi=0,By=null,a4=d_=Zf=0,Gs=ny=null,_f!==null){for(t=0;t<_f.length;t++)if(r=_f[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}_f=null}return e}function S7(e,t){do{var r=Ni;try{if(VE(),A1.current=gw,pw){for(var n=Kn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}pw=!1}if(Xf=0,Hi=Di=Kn=null,ty=!1,My=0,s4.current=null,r===null||r.return===null){Fi=1,By=t,Ni=null;break}e:{var s=e,o=r.return,l=r,c=t;if(t=cs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=bT(o);if(h!==null){h.flags&=-257,wT(h,o,l,s,t),h.mode&1&&xT(s,u,t),t=h,c=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(c),t.updateQueue=p}else v.add(c);break e}else{if(!(t&1)){xT(s,u,t),u4();break e}c=Error(Ze(426))}}else if(Un&&l.mode&1){var g=bT(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),wT(g,o,l,s,t),WE(xp(c,l));break e}}s=c=xp(c,l),Fi!==4&&(Fi=2),ny===null?ny=[s]:ny.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=l7(s,c,t);hT(s,y);break e;case 1:l=c;var b=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ad===null||!ad.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=c7(s,l,t);hT(s,j);break e}}s=s.return}while(s!==null)}k7(r)}catch(N){t=N,Ni===r&&r!==null&&(Ni=r=r.return);continue}break}while(!0)}function A7(){var e=vw.current;return vw.current=gw,e===null?gw:e}function u4(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),Ki===null||!(Zf&268435455)&&!(d_&268435455)||Mu(Ki,cs)}function bw(e,t){var r=$r;$r|=2;var n=A7();(Ki!==e||cs!==t)&&(dc=null,Bf(e,t));do try{vJ();break}catch(i){S7(e,i)}while(!0);if(VE(),$r=r,vw.current=n,Ni!==null)throw Error(Ze(261));return Ki=null,cs=0,Fi}function vJ(){for(;Ni!==null;)C7(Ni)}function yJ(){for(;Ni!==null&&!UX();)C7(Ni)}function C7(e){var t=P7(e.alternate,e,ya);e.memoizedProps=e.pendingProps,t===null?k7(e):Ni=t,s4.current=null}function k7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=dJ(r,t),r!==null){r.flags&=32767,Ni=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fi=6,Ni=null;return}}else if(r=uJ(r,t,ya),r!==null){Ni=r;return}if(t=t.sibling,t!==null){Ni=t;return}Ni=t=e}while(t!==null);Fi===0&&(Fi=5)}function uf(e,t,r){var n=fn,i=to.transition;try{to.transition=null,fn=1,xJ(e,t,r,n)}finally{to.transition=i,fn=n}return null}function xJ(e,t,r,n){do Bm();while(Gu!==null);if($r&6)throw Error(Ze(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ze(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(QX(e,s),e===Ki&&(Ni=Ki=null,cs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ab||(Ab=!0,O7(tw,function(){return Bm(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=to.transition,to.transition=null;var o=fn;fn=1;var l=$r;$r|=4,s4.current=null,hJ(e,r),_7(r,e),FZ(dA),nw=!!uA,dA=uA=null,e.current=r,mJ(r),WX(),$r=l,fn=o,to.transition=s}else e.current=r;if(Ab&&(Ab=!1,Gu=e,xw=i),s=e.pendingLanes,s===0&&(ad=null),GX(r.stateNode),ea(e,hi()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(yw)throw yw=!1,e=OA,OA=null,e;return xw&1&&e.tag!==0&&Bm(),s=e.pendingLanes,s&1?e===TA?iy++:(iy=0,TA=e):iy=0,Ed(),null}function Bm(){if(Gu!==null){var e=lF(xw),t=to.transition,r=fn;try{if(to.transition=null,fn=16>e?16:e,Gu===null)var n=!1;else{if(e=Gu,Gu=null,xw=0,$r&6)throw Error(Ze(331));var i=$r;for($r|=4,ot=e.current;ot!==null;){var s=ot,o=s.child;if(ot.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ot=u;ot!==null;){var d=ot;switch(d.tag){case 0:case 11:case 15:ry(8,d,s)}var f=d.child;if(f!==null)f.return=d,ot=f;else for(;ot!==null;){d=ot;var m=d.sibling,h=d.return;if(x7(d),d===u){ot=null;break}if(m!==null){m.return=h,ot=m;break}ot=h}}}var v=s.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}ot=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ot=o;else e:for(;ot!==null;){if(s=ot,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ry(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ot=y;break e}ot=s.return}}var b=e.current;for(ot=b;ot!==null;){o=ot;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ot=x;else e:for(o=b;ot!==null;){if(l=ot,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:u_(9,l)}}catch(N){ni(l,l.return,N)}if(l===o){ot=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ot=j;break e}ot=l.return}}if($r=i,Ed(),Al&&typeof Al.onPostCommitFiberRoot=="function")try{Al.onPostCommitFiberRoot(r_,e)}catch{}n=!0}return n}finally{fn=r,to.transition=t}}return!1}function RT(e,t,r){t=xp(r,t),t=l7(e,t,1),e=sd(e,t,1),t=Ms(),e!==null&&(i0(e,1,t),ea(e,t))}function ni(e,t,r){if(e.tag===3)RT(e,e,r);else for(;t!==null;){if(t.tag===3){RT(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ad===null||!ad.has(n))){e=xp(r,e),e=c7(t,e,1),t=sd(t,e,1),e=Ms(),t!==null&&(i0(t,1,e),ea(t,e));break}}t=t.return}}function bJ(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ms(),e.pingedLanes|=e.suspendedLanes&r,Ki===e&&(cs&r)===r&&(Fi===4||Fi===3&&(cs&130023424)===cs&&500>hi()-o4?Bf(e,0):a4|=r),ea(e,t)}function E7(e,t){t===0&&(e.mode&1?(t=gb,gb<<=1,!(gb&130023424)&&(gb=4194304)):t=1);var r=Ms();e=Rc(e,t),e!==null&&(i0(e,t,r),ea(e,r))}function wJ(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),E7(e,r)}function _J(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ze(314))}n!==null&&n.delete(t),E7(e,r)}var P7;P7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Js.current)Ys=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ys=!1,cJ(e,t,r);Ys=!!(e.flags&131072)}else Ys=!1,Un&&t.flags&1048576&&RF(t,uw,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;k1(e,t),e=t.pendingProps;var i=pp(t,Ns.current);Fm(t,r),i=e4(null,t,n,e,i,r);var s=t4();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qs(n)?(s=!0,lw(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,YE(t),i.updater=c_,t.stateNode=i,i._reactInternals=t,bA(t,n,e,r),t=jA(null,t,n,!0,s,r)):(t.tag=0,Un&&s&&qE(t),Ps(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(k1(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=NJ(n),e=Oo(n,e),i){case 0:t=_A(null,t,n,e,r);break e;case 1:t=NT(null,t,n,e,r);break e;case 11:t=_T(null,t,n,e,r);break e;case 14:t=jT(null,t,n,Oo(n.type,e),r);break e}throw Error(Ze(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Oo(n,i),_A(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Oo(n,i),NT(e,t,n,i,r);case 3:e:{if(h7(t),e===null)throw Error(Ze(387));n=t.pendingProps,s=t.memoizedState,i=s.element,BF(e,t),hw(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=xp(Error(Ze(423)),t),t=ST(e,t,n,r,i);break e}else if(n!==i){i=xp(Error(Ze(424)),t),t=ST(e,t,n,r,i);break e}else for(Sa=id(t.stateNode.containerInfo.firstChild),ka=t,Un=!0,Fo=null,r=$F(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gp(),n===i){t=Ic(e,t,r);break e}Ps(e,t,n,r)}t=t.child}return t;case 5:return zF(t),e===null&&vA(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,fA(n,i)?o=null:s!==null&&fA(n,s)&&(t.flags|=32),f7(e,t),Ps(e,t,o,r),t.child;case 6:return e===null&&vA(t),null;case 13:return m7(e,t,r);case 4:return XE(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=vp(t,null,n,r):Ps(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Oo(n,i),_T(e,t,n,i,r);case 7:return Ps(e,t,t.pendingProps,r),t.child;case 8:return Ps(e,t,t.pendingProps.children,r),t.child;case 12:return Ps(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Pn(dw,n._currentValue),n._currentValue=o,s!==null)if(Ho(s.value,o)){if(s.children===i.children&&!Js.current){t=Ic(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Ac(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),yA(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ze(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),yA(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ps(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Fm(t,r),i=io(i),n=n(i),t.flags|=1,Ps(e,t,n,r),t.child;case 14:return n=t.type,i=Oo(n,t.pendingProps),i=Oo(n.type,i),jT(e,t,n,i,r);case 15:return u7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Oo(n,i),k1(e,t),t.tag=1,Qs(n)?(e=!0,lw(t)):e=!1,Fm(t,r),o7(t,n,i),bA(t,n,i,r),jA(null,t,n,!0,e,r);case 19:return p7(e,t,r);case 22:return d7(e,t,r)}throw Error(Ze(156,t.tag))};function O7(e,t){return iF(e,t)}function jJ(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(e,t,r,n){return new jJ(e,t,r,n)}function d4(e){return e=e.prototype,!(!e||!e.isReactComponent)}function NJ(e){if(typeof e=="function")return d4(e)?1:0;if(e!=null){if(e=e.$$typeof,e===PE)return 11;if(e===OE)return 14}return 2}function ld(e,t){var r=e.alternate;return r===null?(r=Qa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function O1(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")d4(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case vm:return zf(r.children,i,s,t);case EE:o=8,i|=8;break;case WS:return e=Qa(12,r,t,i|2),e.elementType=WS,e.lanes=s,e;case HS:return e=Qa(13,r,t,i),e.elementType=HS,e.lanes=s,e;case VS:return e=Qa(19,r,t,i),e.elementType=VS,e.lanes=s,e;case z$:return f_(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F$:o=10;break e;case B$:o=9;break e;case PE:o=11;break e;case OE:o=14;break e;case Pu:o=16,n=null;break e}throw Error(Ze(130,e==null?e:typeof e,""))}return t=Qa(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function zf(e,t,r,n){return e=Qa(7,e,n,t),e.lanes=r,e}function f_(e,t,r,n){return e=Qa(22,e,n,t),e.elementType=z$,e.lanes=r,e.stateNode={isHidden:!1},e}function tN(e,t,r){return e=Qa(6,e,null,t),e.lanes=r,e}function rN(e,t,r){return t=Qa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SJ(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=D5(0),this.expirationTimes=D5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D5(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function f4(e,t,r,n,i,s,o,l,c){return e=new SJ(e,t,r,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Qa(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},YE(s),e}function AJ(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gm,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function T7(e){if(!e)return yd;e=e._reactInternals;e:{if(xh(e)!==e||e.tag!==1)throw Error(Ze(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Qs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ze(171))}if(e.tag===1){var r=e.type;if(Qs(r))return TF(e,r,t)}return t}function L7(e,t,r,n,i,s,o,l,c){return e=f4(r,n,!0,e,i,s,o,l,c),e.context=T7(null),r=e.current,n=Ms(),i=od(r),s=Ac(n,i),s.callback=t??null,sd(r,s,i),e.current.lanes=i,i0(e,i,n),ea(e,n),e}function h_(e,t,r,n){var i=t.current,s=Ms(),o=od(i);return r=T7(r),t.context===null?t.context=r:t.pendingContext=r,t=Ac(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=sd(i,t,o),e!==null&&(qo(e,i,o,s),S1(e,i,o)),o}function ww(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function IT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function h4(e,t){IT(e,t),(e=e.alternate)&&IT(e,t)}function CJ(){return null}var R7=typeof reportError=="function"?reportError:function(e){console.error(e)};function m4(e){this._internalRoot=e}m_.prototype.render=m4.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ze(409));h_(e,t,null,null)};m_.prototype.unmount=m4.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jf(function(){h_(null,e,null,null)}),t[Lc]=null}};function m_(e){this._internalRoot=e}m_.prototype.unstable_scheduleHydration=function(e){if(e){var t=dF();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Du.length&&t!==0&&t<Du[r].priority;r++);Du.splice(r,0,e),r===0&&hF(e)}};function p4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function p_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function DT(){}function kJ(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=ww(o);s.call(u)}}var o=L7(t,n,e,0,null,!1,!1,"",DT);return e._reactRootContainer=o,e[Lc]=o.current,Ty(e.nodeType===8?e.parentNode:e),Jf(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=ww(c);l.call(u)}}var c=f4(e,0,!1,null,null,!1,!1,"",DT);return e._reactRootContainer=c,e[Lc]=c.current,Ty(e.nodeType===8?e.parentNode:e),Jf(function(){h_(t,c,r,n)}),c}function g_(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=ww(o);l.call(c)}}h_(t,o,e,i)}else o=kJ(r,t,e,i,n);return ww(o)}cF=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=zv(t.pendingLanes);r!==0&&(RE(t,r|1),ea(t,hi()),!($r&6)&&(bp=hi()+500,Ed()))}break;case 13:Jf(function(){var n=Rc(e,1);if(n!==null){var i=Ms();qo(n,e,1,i)}}),h4(e,1)}};IE=function(e){if(e.tag===13){var t=Rc(e,134217728);if(t!==null){var r=Ms();qo(t,e,134217728,r)}h4(e,134217728)}};uF=function(e){if(e.tag===13){var t=od(e),r=Rc(e,t);if(r!==null){var n=Ms();qo(r,e,t,n)}h4(e,t)}};dF=function(){return fn};fF=function(e,t){var r=fn;try{return fn=e,t()}finally{fn=r}};rA=function(e,t,r){switch(t){case"input":if(YS(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=a_(n);if(!i)throw Error(Ze(90));U$(n),YS(n,i)}}}break;case"textarea":H$(e,r);break;case"select":t=r.value,t!=null&&Im(e,!!r.multiple,t,!1)}};J$=l4;Q$=Jf;var EJ={usingClientEntryPoint:!1,Events:[a0,wm,a_,X$,Z$,l4]},bv={findFiberByHostInstance:wf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PJ={bundleType:bv.bundleType,version:bv.version,rendererPackageName:bv.rendererPackageName,rendererConfig:bv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rF(e),e===null?null:e.stateNode},findFiberByHostInstance:bv.findFiberByHostInstance||CJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cb.isDisabled&&Cb.supportsFiber)try{r_=Cb.inject(PJ),Al=Cb}catch{}}La.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EJ;La.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p4(t))throw Error(Ze(200));return AJ(e,t,null,r)};La.createRoot=function(e,t){if(!p4(e))throw Error(Ze(299));var r=!1,n="",i=R7;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=f4(e,1,!1,null,null,r,!1,n,i),e[Lc]=t.current,Ty(e.nodeType===8?e.parentNode:e),new m4(t)};La.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ze(188)):(e=Object.keys(e).join(","),Error(Ze(268,e)));return e=rF(t),e=e===null?null:e.stateNode,e};La.flushSync=function(e){return Jf(e)};La.hydrate=function(e,t,r){if(!p_(t))throw Error(Ze(200));return g_(null,e,t,!0,r)};La.hydrateRoot=function(e,t,r){if(!p4(e))throw Error(Ze(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=R7;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=L7(t,null,e,1,r??null,i,!1,s,o),e[Lc]=t.current,Ty(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new m_(t)};La.render=function(e,t,r){if(!p_(t))throw Error(Ze(200));return g_(null,e,t,!1,r)};La.unmountComponentAtNode=function(e){if(!p_(e))throw Error(Ze(40));return e._reactRootContainer?(Jf(function(){g_(null,null,e,!1,function(){e._reactRootContainer=null,e[Lc]=null})}),!0):!1};La.unstable_batchedUpdates=l4;La.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!p_(r))throw Error(Ze(200));if(e==null||e._reactInternals===void 0)throw Error(Ze(38));return g_(e,t,r,!1,n)};La.version="18.3.1-next-f1338f8080-20240426";function I7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I7)}catch(e){console.error(e)}}I7(),I$.exports=La;var bh=I$.exports;const D7=nn(bh);var M7,MT=bh;M7=MT.createRoot,MT.hydrateRoot;const OJ=1,TJ=1e6;let nN=0;function LJ(){return nN=(nN+1)%Number.MAX_SAFE_INTEGER,nN.toString()}const iN=new Map,$T=e=>{if(iN.has(e))return;const t=setTimeout(()=>{iN.delete(e),sy({type:"REMOVE_TOAST",toastId:e})},TJ);iN.set(e,t)},RJ=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,OJ)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?$T(r):e.toasts.forEach(n=>{$T(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},T1=[];let L1={toasts:[]};function sy(e){L1=RJ(L1,e),T1.forEach(t=>{t(L1)})}function IA({...e}){const t=LJ(),r=i=>sy({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>sy({type:"DISMISS_TOAST",toastId:t});return sy({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function qr(){const[e,t]=_.useState(L1);return _.useEffect(()=>(T1.push(t),()=>{const r=T1.indexOf(t);r>-1&&T1.splice(r,1)}),[e]),{...e,toast:IA,dismiss:r=>sy({type:"DISMISS_TOAST",toastId:r})}}function lt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function FT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Qf(...e){return t=>{let r=!1;const n=e.map(i=>{const s=FT(i,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():FT(e[i],null)}}}}function vr(...e){return _.useCallback(Qf(...e),e)}function IJ(e,t){const r=_.createContext(t),n=s=>{const{children:o,...l}=s,c=_.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function i(s){const o=_.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[n,i]}function Ia(e,t=[]){let r=[];function n(s,o){const l=_.createContext(o),c=r.length;r=[...r,o];const u=f=>{var y;const{scope:m,children:h,...v}=f,p=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,g=_.useMemo(()=>v,Object.values(v));return a.jsx(p.Provider,{value:g,children:h})};u.displayName=s+"Provider";function d(f,m){var p;const h=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,v=_.useContext(h);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=r.map(o=>_.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return _.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[n,DJ(i,...t)]}function DJ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return _.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function eh(e){const t=$J(e),r=_.forwardRef((n,i)=>{const{children:s,...o}=n,l=_.Children.toArray(s),c=l.find(FJ);if(c){const u=c.props.children,d=l.map(f=>f===c?_.Children.count(u)>1?_.Children.only(null):_.isValidElement(u)?u.props.children:null:f);return a.jsx(t,{...o,ref:i,children:_.isValidElement(u)?_.cloneElement(u,void 0,d):null})}return a.jsx(t,{...o,ref:i,children:s})});return r.displayName=`${e}.Slot`,r}var MJ=eh("Slot");function $J(e){const t=_.forwardRef((r,n)=>{const{children:i,...s}=r;if(_.isValidElement(i)){const o=zJ(i),l=BJ(s,i.props);return i.type!==_.Fragment&&(l.ref=n?Qf(n,o):o),_.cloneElement(i,l)}return _.Children.count(i)>1?_.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $7=Symbol("radix.slottable");function F7(e){const t=({children:r})=>a.jsx(a.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=$7,t}function FJ(e){return _.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$7}function BJ(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...l)=>{const c=s(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}function zJ(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function g4(e){const t=e+"CollectionProvider",[r,n]=Ia(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:y}=p,b=ie.useRef(null),x=ie.useRef(new Map).current;return a.jsx(i,{scope:g,itemMap:x,collectionRef:b,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=eh(l),u=ie.forwardRef((p,g)=>{const{scope:y,children:b}=p,x=s(l,y),j=vr(g,x.collectionRef);return a.jsx(c,{ref:j,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=eh(d),h=ie.forwardRef((p,g)=>{const{scope:y,children:b,...x}=p,j=ie.useRef(null),N=vr(g,j),A=s(d,y);return ie.useEffect(()=>(A.itemMap.set(j,{ref:j,...x}),()=>void A.itemMap.delete(j))),a.jsx(m,{[f]:"",ref:N,children:b})});h.displayName=d;function v(p){const g=s(e+"CollectionConsumer",p);return ie.useCallback(()=>{const b=g.collectionRef.current;if(!b)return[];const x=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((A,C)=>x.indexOf(A.ref.current)-x.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:u,ItemSlot:h},v,n]}var qJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jt=qJ.reduce((e,t)=>{const r=eh(`Primitive.${t}`),n=_.forwardRef((i,s)=>{const{asChild:o,...l}=i,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function B7(e,t){e&&bh.flushSync(()=>e.dispatchEvent(t))}function Mi(e){const t=_.useRef(e);return _.useEffect(()=>{t.current=e}),_.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function UJ(e,t=globalThis==null?void 0:globalThis.document){const r=Mi(e);_.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var WJ="DismissableLayer",DA="dismissableLayer.update",HJ="dismissableLayer.pointerDownOutside",VJ="dismissableLayer.focusOutside",BT,z7=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dg=_.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=_.useContext(z7),[d,f]=_.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=_.useState({}),v=vr(t,C=>f(C)),p=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(g),b=d?p.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,N=KJ(C=>{const E=C.target,O=[...u.branches].some(L=>L.contains(E));!j||O||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},m),A=YJ(C=>{const E=C.target;[...u.branches].some(L=>L.contains(E))||(s==null||s(C),o==null||o(C),C.defaultPrevented||l==null||l())},m);return UJ(C=>{b===u.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),_.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(BT=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),zT(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=BT)}},[d,m,r,u]),_.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),zT())},[d,u]),_.useEffect(()=>{const C=()=>h({});return document.addEventListener(DA,C),()=>document.removeEventListener(DA,C)},[]),a.jsx(jt.div,{...c,ref:v,style:{pointerEvents:x?j?"auto":"none":void 0,...e.style},onFocusCapture:lt(e.onFocusCapture,A.onFocusCapture),onBlurCapture:lt(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:lt(e.onPointerDownCapture,N.onPointerDownCapture)})});dg.displayName=WJ;var GJ="DismissableLayerBranch",q7=_.forwardRef((e,t)=>{const r=_.useContext(z7),n=_.useRef(null),i=vr(t,n);return _.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),a.jsx(jt.div,{...e,ref:i})});q7.displayName=GJ;function KJ(e,t=globalThis==null?void 0:globalThis.document){const r=Mi(e),n=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const s=l=>{if(l.target&&!n.current){let c=function(){U7(HJ,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function YJ(e,t=globalThis==null?void 0:globalThis.document){const r=Mi(e),n=_.useRef(!1);return _.useEffect(()=>{const i=s=>{s.target&&!n.current&&U7(VJ,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function zT(){const e=new CustomEvent(DA);document.dispatchEvent(e)}function U7(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?B7(i,s):i.dispatchEvent(s)}var XJ=dg,ZJ=q7,Yi=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},JJ="Portal",l0=_.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[i,s]=_.useState(!1);Yi(()=>s(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?D7.createPortal(a.jsx(jt.div,{...n,ref:t}),o):null});l0.displayName=JJ;function QJ(e,t){return _.useReducer((r,n)=>t[r][n]??r,e)}var ta=e=>{const{present:t,children:r}=e,n=eQ(t),i=typeof r=="function"?r({present:n.isPresent}):_.Children.only(r),s=vr(n.ref,tQ(i));return typeof r=="function"||n.isPresent?_.cloneElement(i,{ref:s}):null};ta.displayName="Presence";function eQ(e){const[t,r]=_.useState(),n=_.useRef(null),i=_.useRef(e),s=_.useRef("none"),o=e?"mounted":"unmounted",[l,c]=QJ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const u=kb(n.current);s.current=l==="mounted"?u:"none"},[l]),Yi(()=>{const u=n.current,d=i.current;if(d!==e){const m=s.current,h=kb(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Yi(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=h=>{const p=kb(n.current).includes(h.animationName);if(h.target===t&&p&&(c("ANIMATION_END"),!i.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},m=h=>{h.target===t&&(s.current=kb(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function kb(e){return(e==null?void 0:e.animationName)||"none"}function tQ(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var rQ=SE[" useInsertionEffect ".trim().toString()]||Yi;function Dc({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,s,o]=nQ({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:i;{const d=_.useRef(e!==void 0);_.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=_.useCallback(d=>{var f;if(l){const m=iQ(d)?d(e):d;m!==e&&((f=o.current)==null||f.call(o,m))}else s(d)},[l,e,s,o]);return[c,u]}function nQ({defaultProp:e,onChange:t}){const[r,n]=_.useState(e),i=_.useRef(r),s=_.useRef(t);return rQ(()=>{s.current=t},[t]),_.useEffect(()=>{var o;i.current!==r&&((o=s.current)==null||o.call(s,r),i.current=r)},[r,i]),[r,n,s]}function iQ(e){return typeof e=="function"}var W7=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sQ="VisuallyHidden",v_=_.forwardRef((e,t)=>a.jsx(jt.span,{...e,ref:t,style:{...W7,...e.style}}));v_.displayName=sQ;var aQ=v_,v4="ToastProvider",[y4,oQ,lQ]=g4("Toast"),[H7,s7e]=Ia("Toast",[lQ]),[cQ,y_]=H7(v4),V7=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=e,[l,c]=_.useState(null),[u,d]=_.useState(0),f=_.useRef(!1),m=_.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${v4}\`. Expected non-empty \`string\`.`),a.jsx(y4.Provider,{scope:t,children:a.jsx(cQ,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:_.useCallback(()=>d(h=>h+1),[]),onToastRemove:_.useCallback(()=>d(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};V7.displayName=v4;var G7="ToastViewport",uQ=["F8"],MA="toast.viewportPause",$A="toast.viewportResume",K7=_.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=uQ,label:i="Notifications ({hotkey})",...s}=e,o=y_(G7,r),l=oQ(r),c=_.useRef(null),u=_.useRef(null),d=_.useRef(null),f=_.useRef(null),m=vr(t,f,o.onViewportChange),h=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;_.useEffect(()=>{const g=y=>{var x;n.length!==0&&n.every(j=>y[j]||y.code===j)&&((x=f.current)==null||x.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),_.useEffect(()=>{const g=c.current,y=f.current;if(v&&g&&y){const b=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(MA);y.dispatchEvent(A),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent($A);y.dispatchEvent(A),o.isClosePausedRef.current=!1}},j=A=>{!g.contains(A.relatedTarget)&&x()},N=()=>{g.contains(document.activeElement)||x()};return g.addEventListener("focusin",b),g.addEventListener("focusout",j),g.addEventListener("pointermove",b),g.addEventListener("pointerleave",N),window.addEventListener("blur",b),window.addEventListener("focus",x),()=>{g.removeEventListener("focusin",b),g.removeEventListener("focusout",j),g.removeEventListener("pointermove",b),g.removeEventListener("pointerleave",N),window.removeEventListener("blur",b),window.removeEventListener("focus",x)}}},[v,o.isClosePausedRef]);const p=_.useCallback(({tabbingDirection:g})=>{const b=l().map(x=>{const j=x.ref.current,N=[j,...jQ(j)];return g==="forwards"?N:N.reverse()});return(g==="forwards"?b.reverse():b).flat()},[l]);return _.useEffect(()=>{const g=f.current;if(g){const y=b=>{var N,A,C;const x=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!x){const E=document.activeElement,O=b.shiftKey;if(b.target===g&&O){(N=u.current)==null||N.focus();return}const T=p({tabbingDirection:O?"backwards":"forwards"}),B=T.findIndex(M=>M===E);sN(T.slice(B+1))?b.preventDefault():O?(A=u.current)==null||A.focus():(C=d.current)==null||C.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[l,p]),a.jsxs(ZJ,{ref:c,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&a.jsx(FA,{ref:u,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"forwards"});sN(g)}}),a.jsx(y4.Slot,{scope:r,children:a.jsx(jt.ol,{tabIndex:-1,...s,ref:m})}),v&&a.jsx(FA,{ref:d,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"backwards"});sN(g)}})]})});K7.displayName=G7;var Y7="ToastFocusProxy",FA=_.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,s=y_(Y7,r);return a.jsx(v_,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&n()}})});FA.displayName=Y7;var c0="Toast",dQ="toast.swipeStart",fQ="toast.swipeMove",hQ="toast.swipeCancel",mQ="toast.swipeEnd",X7=_.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...o}=e,[l,c]=Dc({prop:n,defaultProp:i??!0,onChange:s,caller:c0});return a.jsx(ta,{present:r||l,children:a.jsx(vQ,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Mi(e.onPause),onResume:Mi(e.onResume),onSwipeStart:lt(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lt(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:lt(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lt(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});X7.displayName=c0;var[pQ,gQ]=H7(c0,{onClose(){}}),vQ=_.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:h,...v}=e,p=y_(c0,r),[g,y]=_.useState(null),b=vr(t,M=>y(M)),x=_.useRef(null),j=_.useRef(null),N=i||p.duration,A=_.useRef(0),C=_.useRef(N),E=_.useRef(0),{onToastAdd:O,onToastRemove:L}=p,k=Mi(()=>{var G;(g==null?void 0:g.contains(document.activeElement))&&((G=p.viewport)==null||G.focus()),o()}),T=_.useCallback(M=>{!M||M===1/0||(window.clearTimeout(E.current),A.current=new Date().getTime(),E.current=window.setTimeout(k,M))},[k]);_.useEffect(()=>{const M=p.viewport;if(M){const G=()=>{T(C.current),u==null||u()},z=()=>{const D=new Date().getTime()-A.current;C.current=C.current-D,window.clearTimeout(E.current),c==null||c()};return M.addEventListener(MA,z),M.addEventListener($A,G),()=>{M.removeEventListener(MA,z),M.removeEventListener($A,G)}}},[p.viewport,N,c,u,T]),_.useEffect(()=>{s&&!p.isClosePausedRef.current&&T(N)},[s,N,p.isClosePausedRef,T]),_.useEffect(()=>(O(),()=>L()),[O,L]);const B=_.useMemo(()=>g?nB(g):null,[g]);return p.viewport?a.jsxs(a.Fragment,{children:[B&&a.jsx(yQ,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),a.jsx(pQ,{scope:r,onClose:k,children:bh.createPortal(a.jsx(y4.ItemSlot,{scope:r,children:a.jsx(XJ,{asChild:!0,onEscapeKeyDown:lt(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||k(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(jt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:lt(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:lt(e.onPointerDown,M=>{M.button===0&&(x.current={x:M.clientX,y:M.clientY})}),onPointerMove:lt(e.onPointerMove,M=>{if(!x.current)return;const G=M.clientX-x.current.x,z=M.clientY-x.current.y,D=!!j.current,q=["left","right"].includes(p.swipeDirection),K=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,ae=q?K(0,G):0,J=q?0:K(0,z),I=M.pointerType==="touch"?10:2,$={x:ae,y:J},U={originalEvent:M,delta:$};D?(j.current=$,Eb(fQ,f,U,{discrete:!1})):qT($,p.swipeDirection,I)?(j.current=$,Eb(dQ,d,U,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(G)>I||Math.abs(z)>I)&&(x.current=null)}),onPointerUp:lt(e.onPointerUp,M=>{const G=j.current,z=M.target;if(z.hasPointerCapture(M.pointerId)&&z.releasePointerCapture(M.pointerId),j.current=null,x.current=null,G){const D=M.currentTarget,q={originalEvent:M,delta:G};qT(G,p.swipeDirection,p.swipeThreshold)?Eb(mQ,h,q,{discrete:!0}):Eb(hQ,m,q,{discrete:!0}),D.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),yQ=e=>{const{__scopeToast:t,children:r,...n}=e,i=y_(c0,t),[s,o]=_.useState(!1),[l,c]=_.useState(!1);return wQ(()=>o(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(l0,{asChild:!0,children:a.jsx(v_,{...n,children:s&&a.jsxs(a.Fragment,{children:[i.label," ",r]})})})},xQ="ToastTitle",Z7=_.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return a.jsx(jt.div,{...n,ref:t})});Z7.displayName=xQ;var bQ="ToastDescription",J7=_.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return a.jsx(jt.div,{...n,ref:t})});J7.displayName=bQ;var Q7="ToastAction",eB=_.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?a.jsx(rB,{altText:r,asChild:!0,children:a.jsx(x4,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Q7}\`. Expected non-empty \`string\`.`),null)});eB.displayName=Q7;var tB="ToastClose",x4=_.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=gQ(tB,r);return a.jsx(rB,{asChild:!0,children:a.jsx(jt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,i.onClose)})})});x4.displayName=tB;var rB=_.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return a.jsx(jt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function nB(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),_Q(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...nB(n))}}),t}function Eb(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?B7(i,s):i.dispatchEvent(s)}var qT=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),s=n>i;return t==="left"||t==="right"?s&&n>r:!s&&i>r};function wQ(e=()=>{}){const t=Mi(e);Yi(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function _Q(e){return e.nodeType===e.ELEMENT_NODE}function jQ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function sN(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var NQ=V7,iB=K7,sB=X7,aB=Z7,oB=J7,lB=eB,cB=x4;function uB(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=uB(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function cr(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=uB(e))&&(n&&(n+=" "),n+=t);return n}const UT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,WT=cr,x_=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return WT(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],f=s==null?void 0:s[u];if(d===null)return null;const m=UT(d)||UT(f);return i[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(v=>{let[p,g]=v;return Array.isArray(g)?g.includes({...s,...l}[p]):{...s,...l}[p]===g})?[...u,f,m]:u},[]);return WT(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dB=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...l},c)=>_.createElement("svg",{ref:c,...AQ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:dB("lucide",i),...l},[...o.map(([u,d])=>_.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(e,t)=>{const r=_.forwardRef(({className:n,...i},s)=>_.createElement(CQ,{ref:s,iconNode:t,className:dB(`lucide-${SQ(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=Je("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=Je("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=Je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=Je("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=Je("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Je("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=Je("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=Je("BookX",[["path",{d:"m14.5 7-5 5",key:"dy991v"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9.5 7 5 5",key:"s45iea"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=Je("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Je("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=Je("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Je("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Je("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=Je("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=Je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=Je("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=Je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=Je("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=Je("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=Je("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=Je("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=Je("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=Je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=Je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=Je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Je("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=Je("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=Je("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=Je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Je("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=Je("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=Je("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Je("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=Je("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=Je("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=Je("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=Je("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=Je("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=Je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=Je("MessageSquareWarning",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v2",key:"stiyo7"}],["path",{d:"M12 13h.01",key:"y0uutt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=Je("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=Je("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Je("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=Je("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=Je("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=Je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=Je("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=Je("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=Je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=Je("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=Je("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=Je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Je("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=Je("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=Je("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=Je("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Je("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=Je("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Je("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=Je("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Je("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=Je("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),A4="-",JQ=e=>{const t=eee(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(A4);return l[0]===""&&l.length!==1&&l.shift(),bB(l,t)||QQ(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},bB=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?bB(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(A4);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},GT=/^\[(.+)\]$/,QQ=e=>{if(GT.test(e)){const t=GT.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},eee=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return ree(Object.entries(e.classGroups),r).forEach(([s,o])=>{zA(o,n,s,t)}),n},zA=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:KT(t,i);s.classGroupId=r;return}if(typeof i=="function"){if(tee(i)){zA(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,o])=>{zA(o,KT(t,s),r,n)})})},KT=(e,t)=>{let r=e;return t.split(A4).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},tee=e=>e.isThemeGetter,ree=(e,t)=>t?e.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[r,i]}):e,nee=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(s,o)=>{r.set(s,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){r.has(s)?r.set(s,o):i(s,o)}}},wB="!",iee=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],s=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let g=0;g<l.length;g++){let y=l[g];if(u===0){if(y===i&&(n||l.slice(g,g+s)===t)){c.push(l.slice(d,g)),d=g+s;continue}if(y==="/"){f=g;continue}}y==="["?u++:y==="]"&&u--}const m=c.length===0?l:l.substring(d),h=m.startsWith(wB),v=h?m.substring(1):m,p=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:v,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},see=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},aee=e=>({cache:nee(e.cacheSize),parseClassName:iee(e),...JQ(e)}),oee=/\s+/,lee=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(oee);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:h}=r(u);let v=!!h,p=n(v?m.substring(0,h):m);if(!p){if(!v){l=u+(l.length>0?" "+l:l);continue}if(p=n(m),!p){l=u+(l.length>0?" "+l:l);continue}v=!1}const g=see(d).join(":"),y=f?g+wB:g,b=y+p;if(s.includes(b))continue;s.push(b);const x=i(p,v);for(let j=0;j<x.length;++j){const N=x[j];s.push(y+N)}l=u+(l.length>0?" "+l:l)}return l};function cee(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=_B(t))&&(n&&(n+=" "),n+=r);return n}const _B=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=_B(e[n]))&&(r&&(r+=" "),r+=t);return r};function uee(e,...t){let r,n,i,s=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=aee(u),n=r.cache.get,i=r.cache.set,s=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=lee(c,r);return i(c,d),d}return function(){return s(cee.apply(null,arguments))}}const Dn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},jB=/^\[(?:([a-z-]+):)?(.+)\]$/i,dee=/^\d+\/\d+$/,fee=new Set(["px","full","screen"]),hee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ac=e=>qm(e)||fee.has(e)||dee.test(e),_u=e=>mg(e,"length",See),qm=e=>!!e&&!Number.isNaN(Number(e)),oN=e=>mg(e,"number",qm),wv=e=>!!e&&Number.isInteger(Number(e)),yee=e=>e.endsWith("%")&&qm(e.slice(0,-1)),mr=e=>jB.test(e),ju=e=>hee.test(e),xee=new Set(["length","size","percentage"]),bee=e=>mg(e,xee,NB),wee=e=>mg(e,"position",NB),_ee=new Set(["image","url"]),jee=e=>mg(e,_ee,Cee),Nee=e=>mg(e,"",Aee),_v=()=>!0,mg=(e,t,r)=>{const n=jB.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},See=e=>mee.test(e)&&!pee.test(e),NB=()=>!1,Aee=e=>gee.test(e),Cee=e=>vee.test(e),kee=()=>{const e=Dn("colors"),t=Dn("spacing"),r=Dn("blur"),n=Dn("brightness"),i=Dn("borderColor"),s=Dn("borderRadius"),o=Dn("borderSpacing"),l=Dn("borderWidth"),c=Dn("contrast"),u=Dn("grayscale"),d=Dn("hueRotate"),f=Dn("invert"),m=Dn("gap"),h=Dn("gradientColorStops"),v=Dn("gradientColorStopPositions"),p=Dn("inset"),g=Dn("margin"),y=Dn("opacity"),b=Dn("padding"),x=Dn("saturate"),j=Dn("scale"),N=Dn("sepia"),A=Dn("skew"),C=Dn("space"),E=Dn("translate"),O=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",mr,t],T=()=>[mr,t],B=()=>["",ac,_u],M=()=>["auto",qm,mr],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",mr],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[qm,mr];return{cacheSize:500,separator:":",theme:{colors:[_v],spacing:[ac,_u],blur:["none","",ju,mr],brightness:J(),borderColor:[e],borderRadius:["none","","full",ju,mr],borderSpacing:T(),borderWidth:B(),contrast:J(),grayscale:K(),hueRotate:J(),invert:K(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[yee,_u],inset:k(),margin:k(),opacity:J(),padding:T(),saturate:J(),scale:J(),sepia:K(),skew:J(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",mr]}],container:["container"],columns:[{columns:[ju]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),mr]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wv,mr]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mr]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",wv,mr]}],"grid-cols":[{"grid-cols":[_v]}],"col-start-end":[{col:["auto",{span:["full",wv,mr]},mr]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[_v]}],"row-start-end":[{row:["auto",{span:[wv,mr]},mr]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mr]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mr,t]}],"min-w":[{"min-w":[mr,t,"min","max","fit"]}],"max-w":[{"max-w":[mr,t,"none","full","min","max","fit","prose",{screen:[ju]},ju]}],h:[{h:[mr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ju,_u]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",oN]}],"font-family":[{font:[_v]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mr]}],"line-clamp":[{"line-clamp":["none",qm,oN]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ac,mr]}],"list-image":[{"list-image":["none",mr]}],"list-style-type":[{list:["none","disc","decimal",mr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ac,_u]}],"underline-offset":[{"underline-offset":["auto",ac,mr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),wee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jee]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[ac,mr]}],"outline-w":[{outline:[ac,_u]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[ac,_u]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ju,Nee]}],"shadow-color":[{shadow:[_v]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ju,mr]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mr]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",mr]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",mr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[wv,mr]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ac,_u,oN]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Eee=uee(kee);function rt(...e){return Eee(cr(e))}const Pee=NQ,SB=_.forwardRef(({className:e,...t},r)=>a.jsx(iB,{ref:r,className:rt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));SB.displayName=iB.displayName;const Oee=x_("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),AB=_.forwardRef(({className:e,variant:t,...r},n)=>a.jsx(sB,{ref:n,className:rt(Oee({variant:t}),e),...r}));AB.displayName=sB.displayName;const Tee=_.forwardRef(({className:e,...t},r)=>a.jsx(lB,{ref:r,className:rt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));Tee.displayName=lB.displayName;const CB=_.forwardRef(({className:e,...t},r)=>a.jsx(cB,{ref:r,className:rt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:a.jsx(hg,{className:"h-4 w-4"})}));CB.displayName=cB.displayName;const kB=_.forwardRef(({className:e,...t},r)=>a.jsx(aB,{ref:r,className:rt("text-sm font-semibold",e),...t}));kB.displayName=aB.displayName;const EB=_.forwardRef(({className:e,...t},r)=>a.jsx(oB,{ref:r,className:rt("text-sm opacity-90",e),...t}));EB.displayName=oB.displayName;function Lee(){const{toasts:e}=qr();return a.jsxs(Pee,{children:[e.map(function({id:t,title:r,description:n,action:i,...s}){return a.jsxs(AB,{...s,children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx(kB,{children:r}),n&&a.jsx(EB,{children:n})]}),i,a.jsx(CB,{})]},t)}),a.jsx(SB,{})]})}var Ree=e=>{switch(e){case"success":return Mee;case"info":return Fee;case"warning":return $ee;case"error":return Bee;default:return null}},Iee=Array(12).fill(0),Dee=({visible:e,className:t})=>ie.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ie.createElement("div",{className:"sonner-spinner"},Iee.map((r,n)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Mee=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$ee=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Fee=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Bee=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),zee=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),qee=()=>{let[e,t]=ie.useState(document.hidden);return ie.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},qA=1,Uee=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...i}=t,s=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:qA++,o=this.toasts.find(c=>c.id===s),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...t,id:s,title:n}),{...c,...t,id:s,dismissible:l,title:n}):c):this.addToast({title:n,...i,dismissible:l,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=t instanceof Promise?t:t(),s=n!==void 0,o,l=i.then(async u=>{if(o=["resolve",u],ie.isValidElement(u))s=!1,this.create({id:n,type:"default",message:u});else if(Hee(u)&&!u.ok){s=!1;let d=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,f=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description;this.create({id:n,type:"error",message:d,description:f})}else if(r.success!==void 0){s=!1;let d=typeof r.success=="function"?await r.success(u):r.success,f=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"success",message:d,description:f})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){s=!1;let d=typeof r.error=="function"?await r.error(u):r.error,f=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"error",message:d,description:f})}}).finally(()=>{var u;s&&(this.dismiss(n),n=void 0),(u=r.finally)==null||u.call(r)}),c=()=>new Promise((u,d)=>l.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(t,r)=>{let n=(r==null?void 0:r.id)||qA++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Hs=new Uee,Wee=(e,t)=>{let r=(t==null?void 0:t.id)||qA++;return Hs.addToast({title:e,...t,id:r}),r},Hee=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Vee=Wee,Gee=()=>Hs.toasts,Kee=()=>Hs.getActiveToasts(),fi=Object.assign(Vee,{success:Hs.success,info:Hs.info,warning:Hs.warning,error:Hs.error,custom:Hs.custom,message:Hs.message,promise:Hs.promise,dismiss:Hs.dismiss,loading:Hs.loading},{getHistory:Gee,getToasts:Kee});function Yee(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Yee(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Pb(e){return e.label!==void 0}var Xee=3,Zee="32px",Jee="16px",YT=4e3,Qee=356,ete=14,tte=20,rte=200;function Ao(...e){return e.filter(Boolean).join(" ")}function nte(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var ite=e=>{var t,r,n,i,s,o,l,c,u,d,f;let{invert:m,toast:h,unstyled:v,interacting:p,setHeights:g,visibleToasts:y,heights:b,index:x,toasts:j,expanded:N,removeToast:A,defaultRichColors:C,closeButton:E,style:O,cancelButtonStyle:L,actionButtonStyle:k,className:T="",descriptionClassName:B="",duration:M,position:G,gap:z,loadingIcon:D,expandByDefault:q,classNames:K,icons:ae,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:I}=e,[$,U]=ie.useState(null),[H,re]=ie.useState(null),[X,he]=ie.useState(!1),[se,ue]=ie.useState(!1),[ge,ve]=ie.useState(!1),[te,Ne]=ie.useState(!1),[Y,Le]=ie.useState(!1),[ye,we]=ie.useState(0),[_e,Qe]=ie.useState(0),We=ie.useRef(h.duration||M||YT),Ge=ie.useRef(null),Ke=ie.useRef(null),Pt=x===0,Lt=x+1<=y,ft=h.type,Zt=h.dismissible!==!1,gr=h.className||"",ht=h.descriptionClassName||"",qt=ie.useMemo(()=>b.findIndex(It=>It.toastId===h.id)||0,[b,h.id]),bt=ie.useMemo(()=>{var It;return(It=h.closeButton)!=null?It:E},[h.closeButton,E]),Nn=ie.useMemo(()=>h.duration||M||YT,[h.duration,M]),xr=ie.useRef(0),Ht=ie.useRef(0),rr=ie.useRef(0),Ir=ie.useRef(null),[Ot,Xr]=G.split("-"),Rt=ie.useMemo(()=>b.reduce((It,Gt,wr)=>wr>=qt?It:It+Gt.height,0),[b,qt]),Vt=qee(),sn=h.invert||m,nr=ft==="loading";Ht.current=ie.useMemo(()=>qt*z+Rt,[qt,Rt]),ie.useEffect(()=>{We.current=Nn},[Nn]),ie.useEffect(()=>{he(!0)},[]),ie.useEffect(()=>{let It=Ke.current;if(It){let Gt=It.getBoundingClientRect().height;return Qe(Gt),g(wr=>[{toastId:h.id,height:Gt,position:h.position},...wr]),()=>g(wr=>wr.filter(Ln=>Ln.toastId!==h.id))}},[g,h.id]),ie.useLayoutEffect(()=>{if(!X)return;let It=Ke.current,Gt=It.style.height;It.style.height="auto";let wr=It.getBoundingClientRect().height;It.style.height=Gt,Qe(wr),g(Ln=>Ln.find(ut=>ut.toastId===h.id)?Ln.map(ut=>ut.toastId===h.id?{...ut,height:wr}:ut):[{toastId:h.id,height:wr,position:h.position},...Ln])},[X,h.title,h.description,g,h.id]);let vt=ie.useCallback(()=>{ue(!0),we(Ht.current),g(It=>It.filter(Gt=>Gt.toastId!==h.id)),setTimeout(()=>{A(h)},rte)},[h,A,g,Ht]);ie.useEffect(()=>{if(h.promise&&ft==="loading"||h.duration===1/0||h.type==="loading")return;let It;return N||p||I&&Vt?(()=>{if(rr.current<xr.current){let Gt=new Date().getTime()-xr.current;We.current=We.current-Gt}rr.current=new Date().getTime()})():We.current!==1/0&&(xr.current=new Date().getTime(),It=setTimeout(()=>{var Gt;(Gt=h.onAutoClose)==null||Gt.call(h,h),vt()},We.current)),()=>clearTimeout(It)},[N,p,h,ft,I,Vt,vt]),ie.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function Pr(){var It,Gt,wr;return ae!=null&&ae.loading?ie.createElement("div",{className:Ao(K==null?void 0:K.loader,(It=h==null?void 0:h.classNames)==null?void 0:It.loader,"sonner-loader"),"data-visible":ft==="loading"},ae.loading):D?ie.createElement("div",{className:Ao(K==null?void 0:K.loader,(Gt=h==null?void 0:h.classNames)==null?void 0:Gt.loader,"sonner-loader"),"data-visible":ft==="loading"},D):ie.createElement(Dee,{className:Ao(K==null?void 0:K.loader,(wr=h==null?void 0:h.classNames)==null?void 0:wr.loader),visible:ft==="loading"})}return ie.createElement("li",{tabIndex:0,ref:Ke,className:Ao(T,gr,K==null?void 0:K.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,K==null?void 0:K.default,K==null?void 0:K[ft],(r=h==null?void 0:h.classNames)==null?void 0:r[ft]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:C,"data-styled":!(h.jsx||h.unstyled||v),"data-mounted":X,"data-promise":!!h.promise,"data-swiped":Y,"data-removed":se,"data-visible":Lt,"data-y-position":Ot,"data-x-position":Xr,"data-index":x,"data-front":Pt,"data-swiping":ge,"data-dismissible":Zt,"data-type":ft,"data-invert":sn,"data-swipe-out":te,"data-swipe-direction":H,"data-expanded":!!(N||q&&X),style:{"--index":x,"--toasts-before":x,"--z-index":j.length-x,"--offset":`${se?ye:Ht.current}px`,"--initial-height":q?"auto":`${_e}px`,...O,...h.style},onDragEnd:()=>{ve(!1),U(null),Ir.current=null},onPointerDown:It=>{nr||!Zt||(Ge.current=new Date,we(Ht.current),It.target.setPointerCapture(It.pointerId),It.target.tagName!=="BUTTON"&&(ve(!0),Ir.current={x:It.clientX,y:It.clientY}))},onPointerUp:()=>{var It,Gt,wr,Ln;if(te||!Zt)return;Ir.current=null;let ut=Number(((It=Ke.current)==null?void 0:It.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),oi=Number(((Gt=Ke.current)==null?void 0:Gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ce=new Date().getTime()-((wr=Ge.current)==null?void 0:wr.getTime()),yt=$==="x"?ut:oi,Jt=Math.abs(yt)/Ce;if(Math.abs(yt)>=tte||Jt>.11){we(Ht.current),(Ln=h.onDismiss)==null||Ln.call(h,h),re($==="x"?ut>0?"right":"left":oi>0?"down":"up"),vt(),Ne(!0),Le(!1);return}ve(!1),U(null)},onPointerMove:It=>{var Gt,wr,Ln,ut;if(!Ir.current||!Zt||((Gt=window.getSelection())==null?void 0:Gt.toString().length)>0)return;let oi=It.clientY-Ir.current.y,Ce=It.clientX-Ir.current.x,yt=(wr=e.swipeDirections)!=null?wr:nte(G);!$&&(Math.abs(Ce)>1||Math.abs(oi)>1)&&U(Math.abs(Ce)>Math.abs(oi)?"x":"y");let Jt={x:0,y:0};$==="y"?(yt.includes("top")||yt.includes("bottom"))&&(yt.includes("top")&&oi<0||yt.includes("bottom")&&oi>0)&&(Jt.y=oi):$==="x"&&(yt.includes("left")||yt.includes("right"))&&(yt.includes("left")&&Ce<0||yt.includes("right")&&Ce>0)&&(Jt.x=Ce),(Math.abs(Jt.x)>0||Math.abs(Jt.y)>0)&&Le(!0),(Ln=Ke.current)==null||Ln.style.setProperty("--swipe-amount-x",`${Jt.x}px`),(ut=Ke.current)==null||ut.style.setProperty("--swipe-amount-y",`${Jt.y}px`)}},bt&&!h.jsx?ie.createElement("button",{"aria-label":J,"data-disabled":nr,"data-close-button":!0,onClick:nr||!Zt?()=>{}:()=>{var It;vt(),(It=h.onDismiss)==null||It.call(h,h)},className:Ao(K==null?void 0:K.closeButton,(i=h==null?void 0:h.classNames)==null?void 0:i.closeButton)},(s=ae==null?void 0:ae.close)!=null?s:zee):null,h.jsx||_.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:ie.createElement(ie.Fragment,null,ft||h.icon||h.promise?ie.createElement("div",{"data-icon":"",className:Ao(K==null?void 0:K.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Pr():null,h.type!=="loading"?h.icon||(ae==null?void 0:ae[ft])||Ree(ft):null):null,ie.createElement("div",{"data-content":"",className:Ao(K==null?void 0:K.content,(l=h==null?void 0:h.classNames)==null?void 0:l.content)},ie.createElement("div",{"data-title":"",className:Ao(K==null?void 0:K.title,(c=h==null?void 0:h.classNames)==null?void 0:c.title)},typeof h.title=="function"?h.title():h.title),h.description?ie.createElement("div",{"data-description":"",className:Ao(B,ht,K==null?void 0:K.description,(u=h==null?void 0:h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),_.isValidElement(h.cancel)?h.cancel:h.cancel&&Pb(h.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||L,onClick:It=>{var Gt,wr;Pb(h.cancel)&&Zt&&((wr=(Gt=h.cancel).onClick)==null||wr.call(Gt,It),vt())},className:Ao(K==null?void 0:K.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,_.isValidElement(h.action)?h.action:h.action&&Pb(h.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||k,onClick:It=>{var Gt,wr;Pb(h.action)&&((wr=(Gt=h.action).onClick)==null||wr.call(Gt,It),!It.defaultPrevented&&vt())},className:Ao(K==null?void 0:K.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function XT(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function ste(e,t){let r={};return[e,t].forEach((n,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",l=s?Jee:Zee;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var ate=_.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:m,style:h,visibleToasts:v=Xee,toastOptions:p,dir:g=XT(),gap:y=ete,loadingIcon:b,icons:x,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:N}=e,[A,C]=ie.useState([]),E=ie.useMemo(()=>Array.from(new Set([n].concat(A.filter(I=>I.position).map(I=>I.position)))),[A,n]),[O,L]=ie.useState([]),[k,T]=ie.useState(!1),[B,M]=ie.useState(!1),[G,z]=ie.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=ie.useRef(null),q=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=ie.useRef(null),ae=ie.useRef(!1),J=ie.useCallback(I=>{C($=>{var U;return(U=$.find(H=>H.id===I.id))!=null&&U.delete||Hs.dismiss(I.id),$.filter(({id:H})=>H!==I.id)})},[]);return ie.useEffect(()=>Hs.subscribe(I=>{if(I.dismiss){C($=>$.map(U=>U.id===I.id?{...U,delete:!0}:U));return}setTimeout(()=>{D7.flushSync(()=>{C($=>{let U=$.findIndex(H=>H.id===I.id);return U!==-1?[...$.slice(0,U),{...$[U],...I},...$.slice(U+1)]:[I,...$]})})})}),[]),ie.useEffect(()=>{if(d!=="system"){z(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let I=window.matchMedia("(prefers-color-scheme: dark)");try{I.addEventListener("change",({matches:$})=>{z($?"dark":"light")})}catch{I.addListener(({matches:U})=>{try{z(U?"dark":"light")}catch(H){console.error(H)}})}},[d]),ie.useEffect(()=>{A.length<=1&&T(!1)},[A]),ie.useEffect(()=>{let I=$=>{var U,H;i.every(re=>$[re]||$.code===re)&&(T(!0),(U=D.current)==null||U.focus()),$.code==="Escape"&&(document.activeElement===D.current||(H=D.current)!=null&&H.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[i]),ie.useEffect(()=>{if(D.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,ae.current=!1)}},[D.current]),ie.createElement("section",{ref:t,"aria-label":`${j} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((I,$)=>{var U;let[H,re]=I.split("-");return A.length?ie.createElement("ol",{key:I,dir:g==="auto"?XT():g,tabIndex:-1,ref:D,className:l,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":H,"data-lifted":k&&A.length>1&&!s,"data-x-position":re,style:{"--front-toast-height":`${((U=O[0])==null?void 0:U.height)||0}px`,"--width":`${Qee}px`,"--gap":`${y}px`,...h,...ste(c,u)},onBlur:X=>{ae.current&&!X.currentTarget.contains(X.relatedTarget)&&(ae.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||ae.current||(ae.current=!0,K.current=X.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{B||T(!1)},onDragEnd:()=>T(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},A.filter(X=>!X.position&&$===0||X.position===I).map((X,he)=>{var se,ue;return ie.createElement(ite,{key:X.id,icons:x,index:he,toast:X,defaultRichColors:f,duration:(se=p==null?void 0:p.duration)!=null?se:m,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:r,visibleToasts:v,closeButton:(ue=p==null?void 0:p.closeButton)!=null?ue:o,interacting:B,position:I,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:J,toasts:A.filter(ge=>ge.position==X.position),heights:O.filter(ge=>ge.position==X.position),setHeights:L,expandByDefault:s,gap:y,loadingIcon:b,expanded:k,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))});const ote=({...e})=>a.jsx(ate,{theme:"light",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e});var lte=SE[" useId ".trim().toString()]||(()=>{}),cte=0;function $s(e){const[t,r]=_.useState(lte());return Yi(()=>{r(n=>n??String(cte++))},[e]),t?`radix-${t}`:""}const ute=["top","right","bottom","left"],wd=Math.min,ba=Math.max,_w=Math.round,Ob=Math.floor,El=e=>({x:e,y:e}),dte={left:"right",right:"left",bottom:"top",top:"bottom"},fte={start:"end",end:"start"};function UA(e,t,r){return ba(e,wd(t,r))}function zc(e,t){return typeof e=="function"?e(t):e}function qc(e){return e.split("-")[0]}function pg(e){return e.split("-")[1]}function C4(e){return e==="x"?"y":"x"}function k4(e){return e==="y"?"height":"width"}const hte=new Set(["top","bottom"]);function _l(e){return hte.has(qc(e))?"y":"x"}function E4(e){return C4(_l(e))}function mte(e,t,r){r===void 0&&(r=!1);const n=pg(e),i=E4(e),s=k4(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=jw(o)),[o,jw(o)]}function pte(e){const t=jw(e);return[WA(e),t,WA(t)]}function WA(e){return e.replace(/start|end/g,t=>fte[t])}const ZT=["left","right"],JT=["right","left"],gte=["top","bottom"],vte=["bottom","top"];function yte(e,t,r){switch(e){case"top":case"bottom":return r?t?JT:ZT:t?ZT:JT;case"left":case"right":return t?gte:vte;default:return[]}}function xte(e,t,r,n){const i=pg(e);let s=yte(qc(e),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(WA)))),s}function jw(e){return e.replace(/left|right|bottom|top/g,t=>dte[t])}function bte(e){return{top:0,right:0,bottom:0,left:0,...e}}function PB(e){return typeof e!="number"?bte(e):{top:e,right:e,bottom:e,left:e}}function Nw(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function QT(e,t,r){let{reference:n,floating:i}=e;const s=_l(t),o=E4(t),l=k4(o),c=qc(t),u=s==="y",d=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,m=n[l]/2-i[l]/2;let h;switch(c){case"top":h={x:d,y:n.y-i.height};break;case"bottom":h={x:d,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:f};break;case"left":h={x:n.x-i.width,y:f};break;default:h={x:n.x,y:n.y}}switch(pg(t)){case"start":h[o]-=m*(r&&u?-1:1);break;case"end":h[o]+=m*(r&&u?-1:1);break}return h}const wte=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:f}=QT(u,n,c),m=n,h={},v=0;for(let p=0;p<l.length;p++){const{name:g,fn:y}=l[p],{x:b,y:x,data:j,reset:N}=await y({x:d,y:f,initialPlacement:n,placement:m,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});d=b??d,f=x??f,h={...h,[g]:{...h[g],...j}},N&&v<=50&&(v++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(u=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):N.rects),{x:d,y:f}=QT(u,m,c)),p=-1)}return{x:d,y:f,placement:m,strategy:i,middlewareData:h}};async function Vy(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:h=0}=zc(t,e),v=PB(h),g=l[m?f==="floating"?"reference":"floating":f],y=Nw(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(g)))==null||r?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=f==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),j=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},N=Nw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:x,strategy:c}):b);return{top:(y.top-N.top+v.top)/j.y,bottom:(N.bottom-y.bottom+v.bottom)/j.y,left:(y.left-N.left+v.left)/j.x,right:(N.right-y.right+v.right)/j.x}}const _te=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=zc(e,t)||{};if(u==null)return{};const f=PB(d),m={x:r,y:n},h=E4(i),v=k4(h),p=await o.getDimensions(u),g=h==="y",y=g?"top":"left",b=g?"bottom":"right",x=g?"clientHeight":"clientWidth",j=s.reference[v]+s.reference[h]-m[h]-s.floating[v],N=m[h]-s.reference[h],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=A?A[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(A)))&&(C=l.floating[x]||s.floating[v]);const E=j/2-N/2,O=C/2-p[v]/2-1,L=wd(f[y],O),k=wd(f[b],O),T=L,B=C-p[v]-k,M=C/2-p[v]/2+E,G=UA(T,M,B),z=!c.arrow&&pg(i)!=null&&M!==G&&s.reference[v]/2-(M<T?L:k)-p[v]/2<0,D=z?M<T?M-T:M-B:0;return{[h]:m[h]+D,data:{[h]:G,centerOffset:M-G-D,...z&&{alignmentOffset:D}},reset:z}}}),jte=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...g}=zc(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const y=qc(i),b=_l(l),x=qc(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=m||(x||!p?[jw(l)]:pte(l)),A=v!=="none";!m&&A&&N.push(...xte(l,p,v,j));const C=[l,...N],E=await Vy(t,g),O=[];let L=((n=s.flip)==null?void 0:n.overflows)||[];if(d&&O.push(E[y]),f){const M=mte(i,o,j);O.push(E[M[0]],E[M[1]])}if(L=[...L,{placement:i,overflows:O}],!O.every(M=>M<=0)){var k,T;const M=(((k=s.flip)==null?void 0:k.index)||0)+1,G=C[M];if(G&&(!(f==="alignment"?b!==_l(G):!1)||L.every(q=>q.overflows[0]>0&&_l(q.placement)===b)))return{data:{index:M,overflows:L},reset:{placement:G}};let z=(T=L.filter(D=>D.overflows[0]<=0).sort((D,q)=>D.overflows[1]-q.overflows[1])[0])==null?void 0:T.placement;if(!z)switch(h){case"bestFit":{var B;const D=(B=L.filter(q=>{if(A){const K=_l(q.placement);return K===b||K==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(K=>K>0).reduce((K,ae)=>K+ae,0)]).sort((q,K)=>q[1]-K[1])[0])==null?void 0:B[0];D&&(z=D);break}case"initialPlacement":z=l;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function eL(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function tL(e){return ute.some(t=>e[t]>=0)}const Nte=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=zc(e,t);switch(n){case"referenceHidden":{const s=await Vy(t,{...i,elementContext:"reference"}),o=eL(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:tL(o)}}}case"escaped":{const s=await Vy(t,{...i,altBoundary:!0}),o=eL(s,r.floating);return{data:{escapedOffsets:o,escaped:tL(o)}}}default:return{}}}}},OB=new Set(["left","top"]);async function Ste(e,t){const{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=qc(r),l=pg(r),c=_l(r)==="y",u=OB.has(o)?-1:1,d=s&&c?-1:1,f=zc(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(h=l==="end"?v*-1:v),c?{x:h*d,y:m*u}:{x:m*u,y:h*d}}const Ate=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:o,middlewareData:l}=t,c=await Ste(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},Cte=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...c}=zc(e,t),u={x:r,y:n},d=await Vy(t,c),f=_l(qc(i)),m=C4(f);let h=u[m],v=u[f];if(s){const g=m==="y"?"top":"left",y=m==="y"?"bottom":"right",b=h+d[g],x=h-d[y];h=UA(b,h,x)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=v+d[g],x=v-d[y];v=UA(b,v,x)}const p=l.fn({...t,[m]:h,[f]:v});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[m]:s,[f]:o}}}}}},kte=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=zc(e,t),d={x:r,y:n},f=_l(i),m=C4(f);let h=d[m],v=d[f];const p=zc(l,t),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const x=m==="y"?"height":"width",j=s.reference[m]-s.floating[x]+g.mainAxis,N=s.reference[m]+s.reference[x]-g.mainAxis;h<j?h=j:h>N&&(h=N)}if(u){var y,b;const x=m==="y"?"width":"height",j=OB.has(qc(i)),N=s.reference[f]-s.floating[x]+(j&&((y=o.offset)==null?void 0:y[f])||0)+(j?0:g.crossAxis),A=s.reference[f]+s.reference[x]+(j?0:((b=o.offset)==null?void 0:b[f])||0)-(j?g.crossAxis:0);v<N?v=N:v>A&&(v=A)}return{[m]:h,[f]:v}}}},Ete=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...u}=zc(e,t),d=await Vy(t,u),f=qc(i),m=pg(i),h=_l(i)==="y",{width:v,height:p}=s.floating;let g,y;f==="top"||f==="bottom"?(g=f,y=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,g=m==="end"?"top":"bottom");const b=p-d.top-d.bottom,x=v-d.left-d.right,j=wd(p-d[g],b),N=wd(v-d[y],x),A=!t.middlewareData.shift;let C=j,E=N;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=x),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=b),A&&!m){const L=ba(d.left,0),k=ba(d.right,0),T=ba(d.top,0),B=ba(d.bottom,0);h?E=v-2*(L!==0||k!==0?L+k:ba(d.left,d.right)):C=p-2*(T!==0||B!==0?T+B:ba(d.top,d.bottom))}await c({...t,availableWidth:E,availableHeight:C});const O=await o.getDimensions(l.floating);return v!==O.width||p!==O.height?{reset:{rects:!0}}:{}}}};function S_(){return typeof window<"u"}function gg(e){return TB(e)?(e.nodeName||"").toLowerCase():"#document"}function Ea(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Bl(e){var t;return(t=(TB(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function TB(e){return S_()?e instanceof Node||e instanceof Ea(e).Node:!1}function Vo(e){return S_()?e instanceof Element||e instanceof Ea(e).Element:!1}function Ml(e){return S_()?e instanceof HTMLElement||e instanceof Ea(e).HTMLElement:!1}function rL(e){return!S_()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ea(e).ShadowRoot}const Pte=new Set(["inline","contents"]);function d0(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=Go(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Pte.has(i)}const Ote=new Set(["table","td","th"]);function Tte(e){return Ote.has(gg(e))}const Lte=[":popover-open",":modal"];function A_(e){return Lte.some(t=>{try{return e.matches(t)}catch{return!1}})}const Rte=["transform","translate","scale","rotate","perspective"],Ite=["transform","translate","scale","rotate","perspective","filter"],Dte=["paint","layout","strict","content"];function P4(e){const t=O4(),r=Vo(e)?Go(e):e;return Rte.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Ite.some(n=>(r.willChange||"").includes(n))||Dte.some(n=>(r.contain||"").includes(n))}function Mte(e){let t=_d(e);for(;Ml(t)&&!Np(t);){if(P4(t))return t;if(A_(t))return null;t=_d(t)}return null}function O4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $te=new Set(["html","body","#document"]);function Np(e){return $te.has(gg(e))}function Go(e){return Ea(e).getComputedStyle(e)}function C_(e){return Vo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _d(e){if(gg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rL(e)&&e.host||Bl(e);return rL(t)?t.host:t}function LB(e){const t=_d(e);return Np(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ml(t)&&d0(t)?t:LB(t)}function Gy(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=LB(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),o=Ea(i);if(s){const l=HA(o);return t.concat(o,o.visualViewport||[],d0(i)?i:[],l&&r?Gy(l):[])}return t.concat(i,Gy(i,[],r))}function HA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function RB(e){const t=Go(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=Ml(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,l=_w(r)!==s||_w(n)!==o;return l&&(r=s,n=o),{width:r,height:n,$:l}}function T4(e){return Vo(e)?e:e.contextElement}function Um(e){const t=T4(e);if(!Ml(t))return El(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=RB(t);let o=(s?_w(r.width):r.width)/n,l=(s?_w(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Fte=El(0);function IB(e){const t=Ea(e);return!O4()||!t.visualViewport?Fte:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Bte(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ea(e)?!1:t}function rh(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),s=T4(e);let o=El(1);t&&(n?Vo(n)&&(o=Um(n)):o=Um(e));const l=Bte(s,r,n)?IB(s):El(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(s){const m=Ea(s),h=n&&Vo(n)?Ea(n):n;let v=m,p=HA(v);for(;p&&n&&h!==v;){const g=Um(p),y=p.getBoundingClientRect(),b=Go(p),x=y.left+(p.clientLeft+parseFloat(b.paddingLeft))*g.x,j=y.top+(p.clientTop+parseFloat(b.paddingTop))*g.y;c*=g.x,u*=g.y,d*=g.x,f*=g.y,c+=x,u+=j,v=Ea(p),p=HA(v)}}return Nw({width:d,height:f,x:c,y:u})}function L4(e,t){const r=C_(e).scrollLeft;return t?t.left+r:rh(Bl(e)).left+r}function DB(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-(r?0:L4(e,n)),s=n.top+t.scrollTop;return{x:i,y:s}}function zte(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s=i==="fixed",o=Bl(n),l=t?A_(t.floating):!1;if(n===o||l&&s)return r;let c={scrollLeft:0,scrollTop:0},u=El(1);const d=El(0),f=Ml(n);if((f||!f&&!s)&&((gg(n)!=="body"||d0(o))&&(c=C_(n)),Ml(n))){const h=rh(n);u=Um(n),d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}const m=o&&!f&&!s?DB(o,c,!0):El(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function qte(e){return Array.from(e.getClientRects())}function Ute(e){const t=Bl(e),r=C_(e),n=e.ownerDocument.body,i=ba(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=ba(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+L4(e);const l=-r.scrollTop;return Go(n).direction==="rtl"&&(o+=ba(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:l}}function Wte(e,t){const r=Ea(e),n=Bl(e),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){s=i.width,o=i.height;const u=O4();(!u||u&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:l,y:c}}const Hte=new Set(["absolute","fixed"]);function Vte(e,t){const r=rh(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=Ml(e)?Um(e):El(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=i*s.x,u=n*s.y;return{width:o,height:l,x:c,y:u}}function nL(e,t,r){let n;if(t==="viewport")n=Wte(e,r);else if(t==="document")n=Ute(Bl(e));else if(Vo(t))n=Vte(t,r);else{const i=IB(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Nw(n)}function MB(e,t){const r=_d(e);return r===t||!Vo(r)||Np(r)?!1:Go(r).position==="fixed"||MB(r,t)}function Gte(e,t){const r=t.get(e);if(r)return r;let n=Gy(e,[],!1).filter(l=>Vo(l)&&gg(l)!=="body"),i=null;const s=Go(e).position==="fixed";let o=s?_d(e):e;for(;Vo(o)&&!Np(o);){const l=Go(o),c=P4(o);!c&&l.position==="fixed"&&(i=null),(s?!c&&!i:!c&&l.position==="static"&&!!i&&Hte.has(i.position)||d0(o)&&!c&&MB(e,o))?n=n.filter(d=>d!==o):i=l,o=_d(o)}return t.set(e,n),n}function Kte(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?A_(t)?[]:Gte(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=nL(t,d,i);return u.top=ba(f.top,u.top),u.right=wd(f.right,u.right),u.bottom=wd(f.bottom,u.bottom),u.left=ba(f.left,u.left),u},nL(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Yte(e){const{width:t,height:r}=RB(e);return{width:t,height:r}}function Xte(e,t,r){const n=Ml(t),i=Bl(t),s=r==="fixed",o=rh(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=El(0);function u(){c.x=L4(i)}if(n||!n&&!s)if((gg(t)!=="body"||d0(i))&&(l=C_(t)),n){const h=rh(t,!0,s,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else i&&u();s&&!n&&i&&u();const d=i&&!n&&!s?DB(i,l):El(0),f=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:o.width,height:o.height}}function lN(e){return Go(e).position==="static"}function iL(e,t){if(!Ml(e)||Go(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Bl(e)===r&&(r=r.ownerDocument.body),r}function $B(e,t){const r=Ea(e);if(A_(e))return r;if(!Ml(e)){let i=_d(e);for(;i&&!Np(i);){if(Vo(i)&&!lN(i))return i;i=_d(i)}return r}let n=iL(e,t);for(;n&&Tte(n)&&lN(n);)n=iL(n,t);return n&&Np(n)&&lN(n)&&!P4(n)?r:n||Mte(e)||r}const Zte=async function(e){const t=this.getOffsetParent||$B,r=this.getDimensions,n=await r(e.floating);return{reference:Xte(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Jte(e){return Go(e).direction==="rtl"}const Qte={convertOffsetParentRelativeRectToViewportRelativeRect:zte,getDocumentElement:Bl,getClippingRect:Kte,getOffsetParent:$B,getElementRects:Zte,getClientRects:qte,getDimensions:Yte,getScale:Um,isElement:Vo,isRTL:Jte};function FB(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ere(e,t){let r=null,n;const i=Bl(e);function s(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:h}=u;if(l||t(),!m||!h)return;const v=Ob(f),p=Ob(i.clientWidth-(d+m)),g=Ob(i.clientHeight-(f+h)),y=Ob(d),x={rootMargin:-v+"px "+-p+"px "+-g+"px "+-y+"px",threshold:ba(0,wd(1,c))||1};let j=!0;function N(A){const C=A[0].intersectionRatio;if(C!==c){if(!j)return o();C?o(!1,C):n=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!FB(u,e.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(N,{...x,root:i.ownerDocument})}catch{r=new IntersectionObserver(N,x)}r.observe(e)}return o(!0),s}function tre(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=T4(e),d=i||s?[...u?Gy(u):[],...Gy(t)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",r,{passive:!0}),s&&y.addEventListener("resize",r)});const f=u&&l?ere(u,r):null;let m=-1,h=null;o&&(h=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),r()}),u&&!c&&h.observe(u),h.observe(t));let v,p=c?rh(e):null;c&&g();function g(){const y=rh(e);p&&!FB(p,y)&&r(),p=y,v=requestAnimationFrame(g)}return r(),()=>{var y;d.forEach(b=>{i&&b.removeEventListener("scroll",r),s&&b.removeEventListener("resize",r)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(v)}}const rre=Ate,nre=Cte,ire=jte,sre=Ete,are=Nte,sL=_te,ore=kte,lre=(e,t,r)=>{const n=new Map,i={platform:Qte,...r},s={...i.platform,_c:n};return wte(e,t,{...i,platform:s})};var cre=typeof document<"u",ure=function(){},D1=cre?_.useLayoutEffect:ure;function Sw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Sw(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&e.$$typeof)&&!Sw(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function BB(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function aL(e,t){const r=BB(e);return Math.round(t*r)/r}function cN(e){const t=_.useRef(e);return D1(()=>{t.current=e}),t}function dre(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=_.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=_.useState(n);Sw(m,n)||h(n);const[v,p]=_.useState(null),[g,y]=_.useState(null),b=_.useCallback(q=>{q!==A.current&&(A.current=q,p(q))},[]),x=_.useCallback(q=>{q!==C.current&&(C.current=q,y(q))},[]),j=s||v,N=o||g,A=_.useRef(null),C=_.useRef(null),E=_.useRef(d),O=c!=null,L=cN(c),k=cN(i),T=cN(u),B=_.useCallback(()=>{if(!A.current||!C.current)return;const q={placement:t,strategy:r,middleware:m};k.current&&(q.platform=k.current),lre(A.current,C.current,q).then(K=>{const ae={...K,isPositioned:T.current!==!1};M.current&&!Sw(E.current,ae)&&(E.current=ae,bh.flushSync(()=>{f(ae)}))})},[m,t,r,k,T]);D1(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[u]);const M=_.useRef(!1);D1(()=>(M.current=!0,()=>{M.current=!1}),[]),D1(()=>{if(j&&(A.current=j),N&&(C.current=N),j&&N){if(L.current)return L.current(j,N,B);B()}},[j,N,B,L,O]);const G=_.useMemo(()=>({reference:A,floating:C,setReference:b,setFloating:x}),[b,x]),z=_.useMemo(()=>({reference:j,floating:N}),[j,N]),D=_.useMemo(()=>{const q={position:r,left:0,top:0};if(!z.floating)return q;const K=aL(z.floating,d.x),ae=aL(z.floating,d.y);return l?{...q,transform:"translate("+K+"px, "+ae+"px)",...BB(z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:K,top:ae}},[r,l,z.floating,d.x,d.y]);return _.useMemo(()=>({...d,update:B,refs:G,elements:z,floatingStyles:D}),[d,B,G,z,D])}const fre=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?sL({element:n.current,padding:i}).fn(r):{}:n?sL({element:n,padding:i}).fn(r):{}}}},hre=(e,t)=>({...rre(e),options:[e,t]}),mre=(e,t)=>({...nre(e),options:[e,t]}),pre=(e,t)=>({...ore(e),options:[e,t]}),gre=(e,t)=>({...ire(e),options:[e,t]}),vre=(e,t)=>({...sre(e),options:[e,t]}),yre=(e,t)=>({...are(e),options:[e,t]}),xre=(e,t)=>({...fre(e),options:[e,t]});var bre="Arrow",zB=_.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...s}=e;return a.jsx(jt.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});zB.displayName=bre;var wre=zB;function R4(e){const[t,r]=_.useState(void 0);return Yi(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var I4="Popper",[qB,vg]=Ia(I4),[_re,UB]=qB(I4),WB=e=>{const{__scopePopper:t,children:r}=e,[n,i]=_.useState(null);return a.jsx(_re,{scope:t,anchor:n,onAnchorChange:i,children:r})};WB.displayName=I4;var HB="PopperAnchor",VB=_.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,s=UB(HB,r),o=_.useRef(null),l=vr(t,o);return _.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(jt.div,{...i,ref:l})});VB.displayName=HB;var D4="PopperContent",[jre,Nre]=qB(D4),GB=_.forwardRef((e,t)=>{var X,he,se,ue,ge,ve;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:v,...p}=e,g=UB(D4,r),[y,b]=_.useState(null),x=vr(t,te=>b(te)),[j,N]=_.useState(null),A=R4(j),C=(A==null?void 0:A.width)??0,E=(A==null?void 0:A.height)??0,O=n+(s!=="center"?"-"+s:""),L=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(u)?u:[u],T=k.length>0,B={padding:L,boundary:k.filter(Are),altBoundary:T},{refs:M,floatingStyles:G,placement:z,isPositioned:D,middlewareData:q}=dre({strategy:"fixed",placement:O,whileElementsMounted:(...te)=>tre(...te,{animationFrame:h==="always"}),elements:{reference:g.anchor},middleware:[hre({mainAxis:i+E,alignmentAxis:o}),c&&mre({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?pre():void 0,...B}),c&&gre({...B}),vre({...B,apply:({elements:te,rects:Ne,availableWidth:Y,availableHeight:Le})=>{const{width:ye,height:we}=Ne.reference,_e=te.floating.style;_e.setProperty("--radix-popper-available-width",`${Y}px`),_e.setProperty("--radix-popper-available-height",`${Le}px`),_e.setProperty("--radix-popper-anchor-width",`${ye}px`),_e.setProperty("--radix-popper-anchor-height",`${we}px`)}}),j&&xre({element:j,padding:l}),Cre({arrowWidth:C,arrowHeight:E}),m&&yre({strategy:"referenceHidden",...B})]}),[K,ae]=XB(z),J=Mi(v);Yi(()=>{D&&(J==null||J())},[D,J]);const I=(X=q.arrow)==null?void 0:X.x,$=(he=q.arrow)==null?void 0:he.y,U=((se=q.arrow)==null?void 0:se.centerOffset)!==0,[H,re]=_.useState();return Yi(()=>{y&&re(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:D?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(ue=q.transformOrigin)==null?void 0:ue.x,(ge=q.transformOrigin)==null?void 0:ge.y].join(" "),...((ve=q.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(jre,{scope:r,placedSide:K,onArrowChange:N,arrowX:I,arrowY:$,shouldHideArrow:U,children:a.jsx(jt.div,{"data-side":K,"data-align":ae,...p,ref:x,style:{...p.style,animation:D?void 0:"none"}})})})});GB.displayName=D4;var KB="PopperArrow",Sre={top:"bottom",right:"left",bottom:"top",left:"right"},YB=_.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,s=Nre(KB,n),o=Sre[s.placedSide];return a.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:a.jsx(wre,{...i,ref:r,style:{...i.style,display:"block"}})})});YB.displayName=KB;function Are(e){return e!==null}var Cre=e=>({name:"transformOrigin",options:e,fn(t){var g,y,b;const{placement:r,rects:n,middlewareData:i}=t,o=((g=i.arrow)==null?void 0:g.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=XB(r),f={start:"0%",center:"50%",end:"100%"}[d],m=(((y=i.arrow)==null?void 0:y.x)??0)+l/2,h=(((b=i.arrow)==null?void 0:b.y)??0)+c/2;let v="",p="";return u==="bottom"?(v=o?f:`${m}px`,p=`${-c}px`):u==="top"?(v=o?f:`${m}px`,p=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,p=o?f:`${h}px`):u==="left"&&(v=`${n.floating.width+c}px`,p=o?f:`${h}px`),{data:{x:v,y:p}}}});function XB(e){const[t,r="center"]=e.split("-");return[t,r]}var ZB=WB,k_=VB,M4=GB,$4=YB,[E_,o7e]=Ia("Tooltip",[vg]),F4=vg(),JB="TooltipProvider",kre=700,oL="tooltip.open",[Ere,QB]=E_(JB),e9=e=>{const{__scopeTooltip:t,delayDuration:r=kre,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=e,o=_.useRef(!0),l=_.useRef(!1),c=_.useRef(0);return _.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(Ere,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:_.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:_.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};e9.displayName=JB;var t9="Tooltip",[l7e,P_]=E_(t9),VA="TooltipTrigger",Pre=_.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=P_(VA,r),s=QB(VA,r),o=F4(r),l=_.useRef(null),c=vr(t,l,i.onTriggerChange),u=_.useRef(!1),d=_.useRef(!1),f=_.useCallback(()=>u.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(k_,{asChild:!0,...o,children:a.jsx(jt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:lt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:lt(e.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:lt(e.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:lt(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:lt(e.onBlur,i.onClose),onClick:lt(e.onClick,i.onClose)})})});Pre.displayName=VA;var Ore="TooltipPortal",[c7e,Tre]=E_(Ore,{forceMount:void 0}),Sp="TooltipContent",r9=_.forwardRef((e,t)=>{const r=Tre(Sp,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=e,o=P_(Sp,e.__scopeTooltip);return a.jsx(ta,{present:n||o.open,children:o.disableHoverableContent?a.jsx(n9,{side:i,...s,ref:t}):a.jsx(Lre,{side:i,...s,ref:t})})}),Lre=_.forwardRef((e,t)=>{const r=P_(Sp,e.__scopeTooltip),n=QB(Sp,e.__scopeTooltip),i=_.useRef(null),s=vr(t,i),[o,l]=_.useState(null),{trigger:c,onClose:u}=r,d=i.current,{onPointerInTransitChange:f}=n,m=_.useCallback(()=>{l(null),f(!1)},[f]),h=_.useCallback((v,p)=>{const g=v.currentTarget,y={x:v.clientX,y:v.clientY},b=$re(y,g.getBoundingClientRect()),x=Fre(y,b),j=Bre(p.getBoundingClientRect()),N=qre([...x,...j]);l(N),f(!0)},[f]);return _.useEffect(()=>()=>m(),[m]),_.useEffect(()=>{if(c&&d){const v=g=>h(g,d),p=g=>h(g,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",p)}}},[c,d,h,m]),_.useEffect(()=>{if(o){const v=p=>{const g=p.target,y={x:p.clientX,y:p.clientY},b=(c==null?void 0:c.contains(g))||(d==null?void 0:d.contains(g)),x=!zre(y,o);b?m():x&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,m]),a.jsx(n9,{...e,ref:s})}),[Rre,Ire]=E_(t9,{isInside:!1}),Dre=F7("TooltipContent"),n9=_.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=P_(Sp,r),u=F4(r),{onClose:d}=c;return _.useEffect(()=>(document.addEventListener(oL,d),()=>document.removeEventListener(oL,d)),[d]),_.useEffect(()=>{if(c.trigger){const f=m=>{const h=m.target;h!=null&&h.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),a.jsx(dg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:a.jsxs(M4,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(Dre,{children:n}),a.jsx(Rre,{scope:r,isInside:!0,children:a.jsx(aQ,{id:c.contentId,role:"tooltip",children:i||n})})]})})});r9.displayName=Sp;var i9="TooltipArrow",Mre=_.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=F4(r);return Ire(i9,r).isInside?null:a.jsx($4,{...i,...n,ref:t})});Mre.displayName=i9;function $re(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Fre(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function Bre(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}function zre(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>n!=m>n&&r<(f-u)*(n-d)/(m-d)+u&&(i=!i)}return i}function qre(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Ure(t)}function Ure(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;r.length>=2;){const s=r[r.length-1],o=r[r.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Wre=e9,s9=r9;const Hre=Wre,Vre=_.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(s9,{ref:n,sideOffset:t,className:rt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Vre.displayName=s9.displayName;var O_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},T_=typeof window>"u"||"Deno"in globalThis;function To(){}function Gre(e,t){return typeof e=="function"?e(t):e}function Kre(e){return typeof e=="number"&&e>=0&&e!==1/0}function Yre(e,t){return Math.max(e+(t||0)-Date.now(),0)}function GA(e,t){return typeof e=="function"?e(t):e}function Xre(e,t){return typeof e=="function"?e(t):e}function lL(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==B4(o,t.options))return!1}else if(!Yy(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||s&&!s(t))}function cL(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Ky(t.options.mutationKey)!==Ky(s))return!1}else if(!Yy(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function B4(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ky)(e)}function Ky(e){return JSON.stringify(e,(t,r)=>KA(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Yy(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Yy(e[r],t[r])):!1}function a9(e,t){if(e===t)return e;const r=uL(e)&&uL(t);if(r||KA(e)&&KA(t)){const n=r?e:Object.keys(e),i=n.length,s=r?t:Object.keys(t),o=s.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:s[d];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=a9(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return i===o&&u===i?e:l}return t}function uL(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function KA(e){if(!dL(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!dL(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function dL(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zre(e){return new Promise(t=>{setTimeout(t,e)})}function Jre(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?a9(e,t):t}function Qre(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function ene(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var z4=Symbol();function o9(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===z4?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Rf,zu,ap,g$,tne=(g$=class extends O_{constructor(){super();Wr(this,Rf);Wr(this,zu);Wr(this,ap);lr(this,ap,t=>{if(!T_&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){qe(this,zu)||this.setEventListener(qe(this,ap))}onUnsubscribe(){var t;this.hasListeners()||((t=qe(this,zu))==null||t.call(this),lr(this,zu,void 0))}setEventListener(t){var r;lr(this,ap,t),(r=qe(this,zu))==null||r.call(this),lr(this,zu,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){qe(this,Rf)!==t&&(lr(this,Rf,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof qe(this,Rf)=="boolean"?qe(this,Rf):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Rf=new WeakMap,zu=new WeakMap,ap=new WeakMap,g$),l9=new tne,op,qu,lp,v$,rne=(v$=class extends O_{constructor(){super();Wr(this,op,!0);Wr(this,qu);Wr(this,lp);lr(this,lp,t=>{if(!T_&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){qe(this,qu)||this.setEventListener(qe(this,lp))}onUnsubscribe(){var t;this.hasListeners()||((t=qe(this,qu))==null||t.call(this),lr(this,qu,void 0))}setEventListener(t){var r;lr(this,lp,t),(r=qe(this,qu))==null||r.call(this),lr(this,qu,t(this.setOnline.bind(this)))}setOnline(t){qe(this,op)!==t&&(lr(this,op,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return qe(this,op)}},op=new WeakMap,qu=new WeakMap,lp=new WeakMap,v$),Aw=new rne;function nne(){let e,t;const r=new Promise((i,s)=>{e=i,t=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function ine(e){return Math.min(1e3*2**e,3e4)}function c9(e){return(e??"online")==="online"?Aw.isOnline():!0}var u9=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function uN(e){return e instanceof u9}function d9(e){let t=!1,r=0,n=!1,i;const s=nne(),o=p=>{var g;n||(m(new u9(p)),(g=e.abort)==null||g.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>l9.isFocused()&&(e.networkMode==="always"||Aw.isOnline())&&e.canRun(),d=()=>c9(e.networkMode)&&e.canRun(),f=p=>{var g;n||(n=!0,(g=e.onSuccess)==null||g.call(e,p),i==null||i(),s.resolve(p))},m=p=>{var g;n||(n=!0,(g=e.onError)==null||g.call(e,p),i==null||i(),s.reject(p))},h=()=>new Promise(p=>{var g;i=y=>{(n||u())&&p(y)},(g=e.onPause)==null||g.call(e)}).then(()=>{var p;i=void 0,n||(p=e.onContinue)==null||p.call(e)}),v=()=>{if(n)return;let p;const g=r===0?e.initialPromise:void 0;try{p=g??e.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(f).catch(y=>{var A;if(n)return;const b=e.retry??(T_?0:3),x=e.retryDelay??ine,j=typeof x=="function"?x(r,y):x,N=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(t||!N){m(y);return}r++,(A=e.onFail)==null||A.call(e,r,y),Zre(j).then(()=>u()?void 0:h()).then(()=>{t?m(y):v()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():h().then(v),s)}}var sne=e=>setTimeout(e,0);function ane(){let e=[],t=0,r=l=>{l()},n=l=>{l()},i=sne;const s=l=>{t?e.push(l):i(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var Ts=ane(),If,y$,f9=(y$=class{constructor(){Wr(this,If)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Kre(this.gcTime)&&lr(this,If,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(T_?1/0:5*60*1e3))}clearGcTimeout(){qe(this,If)&&(clearTimeout(qe(this,If)),lr(this,If,void 0))}},If=new WeakMap,y$),cp,Df,Va,Mf,bs,t0,$f,Ro,uc,x$,one=(x$=class extends f9{constructor(t){super();Wr(this,Ro);Wr(this,cp);Wr(this,Df);Wr(this,Va);Wr(this,Mf);Wr(this,bs);Wr(this,t0);Wr(this,$f);lr(this,$f,!1),lr(this,t0,t.defaultOptions),this.setOptions(t.options),this.observers=[],lr(this,Mf,t.client),lr(this,Va,qe(this,Mf).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,lr(this,cp,cne(this.options)),this.state=t.state??qe(this,cp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=qe(this,bs))==null?void 0:t.promise}setOptions(t){this.options={...qe(this,t0),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&qe(this,Va).remove(this)}setData(t,r){const n=Jre(this.state.data,t,this.options);return hs(this,Ro,uc).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){hs(this,Ro,uc).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=qe(this,bs))==null?void 0:n.promise;return(i=qe(this,bs))==null||i.cancel(t),r?r.then(To).catch(To):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(qe(this,cp))}isActive(){return this.observers.some(t=>Xre(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===z4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>GA(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Yre(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=qe(this,bs))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=qe(this,bs))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),qe(this,Va).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(qe(this,bs)&&(qe(this,$f)?qe(this,bs).cancel({revert:!0}):qe(this,bs).cancelRetry()),this.scheduleGc()),qe(this,Va).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||hs(this,Ro,uc).call(this,{type:"invalidate"})}fetch(t,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(qe(this,bs))return qe(this,bs).continueRetry(),qe(this,bs).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(h=>h.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(lr(this,$f,!0),n.signal)})},s=()=>{const m=o9(this.options,r),v=(()=>{const p={client:qe(this,Mf),queryKey:this.queryKey,meta:this.meta};return i(p),p})();return lr(this,$f,!1),this.options.persister?this.options.persister(m,v,this):m(v)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:qe(this,Mf),state:this.state,fetchFn:s};return i(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),lr(this,Df,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&hs(this,Ro,uc).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var h,v,p,g;uN(m)&&m.silent||hs(this,Ro,uc).call(this,{type:"error",error:m}),uN(m)||((v=(h=qe(this,Va).config).onError)==null||v.call(h,m,this),(g=(p=qe(this,Va).config).onSettled)==null||g.call(p,this.state.data,m,this)),this.scheduleGc()};return lr(this,bs,d9({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var h,v,p,g;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){c(y);return}(v=(h=qe(this,Va).config).onSuccess)==null||v.call(h,m,this),(g=(p=qe(this,Va).config).onSettled)==null||g.call(p,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,h)=>{hs(this,Ro,uc).call(this,{type:"failed",failureCount:m,error:h})},onPause:()=>{hs(this,Ro,uc).call(this,{type:"pause"})},onContinue:()=>{hs(this,Ro,uc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),qe(this,bs).start()}},cp=new WeakMap,Df=new WeakMap,Va=new WeakMap,Mf=new WeakMap,bs=new WeakMap,t0=new WeakMap,$f=new WeakMap,Ro=new WeakSet,uc=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...lne(n.data,this.options),fetchMeta:t.meta??null};case"success":return lr(this,Df,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return uN(i)&&i.revert&&qe(this,Df)?{...qe(this,Df),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ts.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),qe(this,Va).notify({query:this,type:"updated",action:t})})},x$);function lne(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:c9(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function cne(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var hl,b$,une=(b$=class extends O_{constructor(t={}){super();Wr(this,hl);this.config=t,lr(this,hl,new Map)}build(t,r,n){const i=r.queryKey,s=r.queryHash??B4(i,r);let o=this.get(s);return o||(o=new one({client:t,queryKey:i,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){qe(this,hl).has(t.queryHash)||(qe(this,hl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=qe(this,hl).get(t.queryHash);r&&(t.destroy(),r===t&&qe(this,hl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ts.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return qe(this,hl).get(t)}getAll(){return[...qe(this,hl).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>lL(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>lL(t,n)):r}notify(t){Ts.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ts.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ts.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hl=new WeakMap,b$),ml,Es,Ff,pl,Cu,w$,dne=(w$=class extends f9{constructor(t){super();Wr(this,pl);Wr(this,ml);Wr(this,Es);Wr(this,Ff);this.mutationId=t.mutationId,lr(this,Es,t.mutationCache),lr(this,ml,[]),this.state=t.state||fne(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){qe(this,ml).includes(t)||(qe(this,ml).push(t),this.clearGcTimeout(),qe(this,Es).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){lr(this,ml,qe(this,ml).filter(r=>r!==t)),this.scheduleGc(),qe(this,Es).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){qe(this,ml).length||(this.state.status==="pending"?this.scheduleGc():qe(this,Es).remove(this))}continue(){var t;return((t=qe(this,Ff))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,u,d,f,m,h,v,p,g,y,b,x,j,N,A,C,E;const r=()=>{hs(this,pl,Cu).call(this,{type:"continue"})};lr(this,Ff,d9({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,L)=>{hs(this,pl,Cu).call(this,{type:"failed",failureCount:O,error:L})},onPause:()=>{hs(this,pl,Cu).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>qe(this,Es).canRun(this)}));const n=this.state.status==="pending",i=!qe(this,Ff).canStart();try{if(n)r();else{hs(this,pl,Cu).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(s=qe(this,Es).config).onMutate)==null?void 0:o.call(s,t,this));const L=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));L!==this.state.context&&hs(this,pl,Cu).call(this,{type:"pending",context:L,variables:t,isPaused:i})}const O=await qe(this,Ff).start();return await((d=(u=qe(this,Es).config).onSuccess)==null?void 0:d.call(u,O,t,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,O,t,this.state.context)),await((v=(h=qe(this,Es).config).onSettled)==null?void 0:v.call(h,O,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,O,null,t,this.state.context)),hs(this,pl,Cu).call(this,{type:"success",data:O}),O}catch(O){try{throw await((b=(y=qe(this,Es).config).onError)==null?void 0:b.call(y,O,t,this.state.context,this)),await((j=(x=this.options).onError)==null?void 0:j.call(x,O,t,this.state.context)),await((A=(N=qe(this,Es).config).onSettled)==null?void 0:A.call(N,void 0,O,this.state.variables,this.state.context,this)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,O,t,this.state.context)),O}finally{hs(this,pl,Cu).call(this,{type:"error",error:O})}}finally{qe(this,Es).runNext(this)}}},ml=new WeakMap,Es=new WeakMap,Ff=new WeakMap,pl=new WeakSet,Cu=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ts.batch(()=>{qe(this,ml).forEach(n=>{n.onMutationUpdate(t)}),qe(this,Es).notify({mutation:this,type:"updated",action:t})})},w$);function fne(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vc,Io,r0,_$,hne=(_$=class extends O_{constructor(t={}){super();Wr(this,vc);Wr(this,Io);Wr(this,r0);this.config=t,lr(this,vc,new Set),lr(this,Io,new Map),lr(this,r0,0)}build(t,r,n){const i=new dne({mutationCache:this,mutationId:++cb(this,r0)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){qe(this,vc).add(t);const r=Tb(t);if(typeof r=="string"){const n=qe(this,Io).get(r);n?n.push(t):qe(this,Io).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(qe(this,vc).delete(t)){const r=Tb(t);if(typeof r=="string"){const n=qe(this,Io).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&qe(this,Io).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Tb(t);if(typeof r=="string"){const n=qe(this,Io).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=Tb(t);if(typeof r=="string"){const i=(n=qe(this,Io).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ts.batch(()=>{qe(this,vc).forEach(t=>{this.notify({type:"removed",mutation:t})}),qe(this,vc).clear(),qe(this,Io).clear()})}getAll(){return Array.from(qe(this,vc))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>cL(r,n))}findAll(t={}){return this.getAll().filter(r=>cL(t,r))}notify(t){Ts.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ts.batch(()=>Promise.all(t.map(r=>r.continue().catch(To))))}},vc=new WeakMap,Io=new WeakMap,r0=new WeakMap,_$);function Tb(e){var t;return(t=e.options.scope)==null?void 0:t.id}function fL(e){return{onFetch:(t,r)=>{var d,f,m,h,v;const n=t.options,i=(m=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,s=((h=t.state.data)==null?void 0:h.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const g=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},y=o9(t.options,t.fetchOptions),b=async(x,j,N)=>{if(p)return Promise.reject();if(j==null&&x.pages.length)return Promise.resolve(x);const C=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:j,direction:N?"backward":"forward",meta:t.options.meta};return g(k),k})(),E=await y(C),{maxPages:O}=t.options,L=N?ene:Qre;return{pages:L(x.pages,E,O),pageParams:L(x.pageParams,j,O)}};if(i&&s.length){const x=i==="backward",j=x?mne:hL,N={pages:s,pageParams:o},A=j(n,N);l=await b(N,A,x)}else{const x=e??s.length;do{const j=c===0?o[0]??n.initialPageParam:hL(n,l);if(c>0&&j==null)break;l=await b(l,j),c++}while(c<x)}return l};t.options.persister?t.fetchFn=()=>{var p,g;return(g=(p=t.options).persister)==null?void 0:g.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function hL(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function mne(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Qn,Uu,Wu,up,dp,Hu,fp,hp,j$,pne=(j$=class{constructor(e={}){Wr(this,Qn);Wr(this,Uu);Wr(this,Wu);Wr(this,up);Wr(this,dp);Wr(this,Hu);Wr(this,fp);Wr(this,hp);lr(this,Qn,e.queryCache||new une),lr(this,Uu,e.mutationCache||new hne),lr(this,Wu,e.defaultOptions||{}),lr(this,up,new Map),lr(this,dp,new Map),lr(this,Hu,0)}mount(){cb(this,Hu)._++,qe(this,Hu)===1&&(lr(this,fp,l9.subscribe(async e=>{e&&(await this.resumePausedMutations(),qe(this,Qn).onFocus())})),lr(this,hp,Aw.subscribe(async e=>{e&&(await this.resumePausedMutations(),qe(this,Qn).onOnline())})))}unmount(){var e,t;cb(this,Hu)._--,qe(this,Hu)===0&&((e=qe(this,fp))==null||e.call(this),lr(this,fp,void 0),(t=qe(this,hp))==null||t.call(this),lr(this,hp,void 0))}isFetching(e){return qe(this,Qn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return qe(this,Uu).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=qe(this,Qn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=qe(this,Qn).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(GA(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return qe(this,Qn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=qe(this,Qn).get(n.queryHash),s=i==null?void 0:i.state.data,o=Gre(t,s);if(o!==void 0)return qe(this,Qn).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ts.batch(()=>qe(this,Qn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=qe(this,Qn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=qe(this,Qn);Ts.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=qe(this,Qn);return Ts.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ts.batch(()=>qe(this,Qn).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(To).catch(To)}invalidateQueries(e,t={}){return Ts.batch(()=>(qe(this,Qn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ts.batch(()=>qe(this,Qn).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(To)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(To)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=qe(this,Qn).build(this,t);return r.isStaleByTime(GA(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(To).catch(To)}fetchInfiniteQuery(e){return e.behavior=fL(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(To).catch(To)}ensureInfiniteQueryData(e){return e.behavior=fL(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Aw.isOnline()?qe(this,Uu).resumePausedMutations():Promise.resolve()}getQueryCache(){return qe(this,Qn)}getMutationCache(){return qe(this,Uu)}getDefaultOptions(){return qe(this,Wu)}setDefaultOptions(e){lr(this,Wu,e)}setQueryDefaults(e,t){qe(this,up).set(Ky(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...qe(this,up).values()],r={};return t.forEach(n=>{Yy(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){qe(this,dp).set(Ky(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...qe(this,dp).values()],r={};return t.forEach(n=>{Yy(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...qe(this,Wu).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=B4(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===z4&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...qe(this,Wu).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){qe(this,Qn).clear(),qe(this,Uu).clear()}},Qn=new WeakMap,Uu=new WeakMap,Wu=new WeakMap,up=new WeakMap,dp=new WeakMap,Hu=new WeakMap,fp=new WeakMap,hp=new WeakMap,j$),gne=_.createContext(void 0),vne=({client:e,children:t})=>(_.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(gne.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xy.apply(this,arguments)}var Ku;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ku||(Ku={}));const mL="popstate";function yne(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:o,hash:l}=n.location;return YA("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Cw(i)}return bne(t,r,null,e)}function vi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function h9(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xne(){return Math.random().toString(36).substr(2,8)}function pL(e,t){return{usr:e.state,key:e.key,idx:t}}function YA(e,t,r,n){return r===void 0&&(r=null),Xy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yg(t):t,{state:r,key:t&&t.key||n||xne()})}function Cw(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yg(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function bne(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,l=Ku.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Xy({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Ku.Pop;let g=d(),y=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:y})}function m(g,y){l=Ku.Push;let b=YA(p.location,g,y);u=d()+1;let x=pL(b,u),j=p.createHref(b);try{o.pushState(x,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(j)}s&&c&&c({action:l,location:p.location,delta:1})}function h(g,y){l=Ku.Replace;let b=YA(p.location,g,y);u=d();let x=pL(b,u),j=p.createHref(b);o.replaceState(x,"",j),s&&c&&c({action:l,location:p.location,delta:0})}function v(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:Cw(g);return b=b.replace(/ $/,"%20"),vi(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let p={get action(){return l},get location(){return e(i,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(mL,f),c=g,()=>{i.removeEventListener(mL,f),c=null}},createHref(g){return t(i,g)},createURL:v,encodeLocation(g){let y=v(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:h,go(g){return o.go(g)}};return p}var gL;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gL||(gL={}));function wne(e,t,r){return r===void 0&&(r="/"),_ne(e,t,r,!1)}function _ne(e,t,r,n){let i=typeof t=="string"?yg(t):t,s=q4(i.pathname||"/",r);if(s==null)return null;let o=m9(e);jne(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Rne(s);l=Tne(o[c],u,n)}return l}function m9(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(vi(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ud([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(vi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),m9(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:Pne(u,s.index),routesMeta:d})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of p9(s.path))i(s,o,c)}),t}function p9(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=p9(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function jne(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:One(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Nne=/^:[\w-]+$/,Sne=3,Ane=2,Cne=1,kne=10,Ene=-2,vL=e=>e==="*";function Pne(e,t){let r=e.split("/"),n=r.length;return r.some(vL)&&(n+=Ene),t&&(n+=Ane),r.filter(i=>!vL(i)).reduce((i,s)=>i+(Nne.test(s)?Sne:s===""?Cne:kne),n)}function One(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Tne(e,t,r){let{routesMeta:n}=e,i={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=yL({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=yL({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:ud([s,f.pathname]),pathnameBase:$ne(ud([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=ud([s,f.pathnameBase]))}return o}function yL(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Lne(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:m,isOptional:h}=d;if(m==="*"){let p=l[f]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const v=l[f];return h&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function Lne(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),h9(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Rne(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return h9(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function q4(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Ine(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?yg(e):e;return{pathname:r?r.startsWith("/")?r:Dne(r,t):t,search:Fne(n),hash:Bne(i)}}function Dne(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function dN(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mne(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function U4(e,t){let r=Mne(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function W4(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=yg(e):(i=Xy({},e),vi(!i.pathname||!i.pathname.includes("?"),dN("?","pathname","search",i)),vi(!i.pathname||!i.pathname.includes("#"),dN("#","pathname","hash",i)),vi(!i.search||!i.search.includes("#"),dN("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=Ine(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ud=e=>e.join("/").replace(/\/\/+/g,"/"),$ne=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fne=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Bne=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const g9=["post","put","patch","delete"];new Set(g9);const qne=["get",...g9];new Set(qne);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zy.apply(this,arguments)}const H4=_.createContext(null),Une=_.createContext(null),Pd=_.createContext(null),L_=_.createContext(null),Jc=_.createContext({outlet:null,matches:[],isDataRoute:!1}),v9=_.createContext(null);function Wne(e,t){let{relative:r}=t===void 0?{}:t;xg()||vi(!1);let{basename:n,navigator:i}=_.useContext(Pd),{hash:s,pathname:o,search:l}=x9(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:ud([n,o])),i.createHref({pathname:c,search:l,hash:s})}function xg(){return _.useContext(L_)!=null}function Od(){return xg()||vi(!1),_.useContext(L_).location}function y9(e){_.useContext(Pd).static||_.useLayoutEffect(e)}function yi(){let{isDataRoute:e}=_.useContext(Jc);return e?nie():Hne()}function Hne(){xg()||vi(!1);let e=_.useContext(H4),{basename:t,future:r,navigator:n}=_.useContext(Pd),{matches:i}=_.useContext(Jc),{pathname:s}=Od(),o=JSON.stringify(U4(i,r.v7_relativeSplatPath)),l=_.useRef(!1);return y9(()=>{l.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=W4(u,JSON.parse(o),s,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ud([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,s,e])}function Qc(){let{matches:e}=_.useContext(Jc),t=e[e.length-1];return t?t.params:{}}function x9(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=_.useContext(Pd),{matches:i}=_.useContext(Jc),{pathname:s}=Od(),o=JSON.stringify(U4(i,n.v7_relativeSplatPath));return _.useMemo(()=>W4(e,JSON.parse(o),s,r==="path"),[e,o,s,r])}function Vne(e,t){return Gne(e,t)}function Gne(e,t,r,n){xg()||vi(!1);let{navigator:i}=_.useContext(Pd),{matches:s}=_.useContext(Jc),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Od(),d;if(t){var f;let g=typeof t=="string"?yg(t):t;c==="/"||(f=g.pathname)!=null&&f.startsWith(c)||vi(!1),d=g}else d=u;let m=d.pathname||"/",h=m;if(c!=="/"){let g=c.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(g.length).join("/")}let v=wne(e,{pathname:h}),p=Jne(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:ud([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:ud([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,r,n);return t&&p?_.createElement(L_.Provider,{value:{location:Zy({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ku.Pop}},p):p}function Kne(){let e=rie(),t=zne(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:i},r):null,null)}const Yne=_.createElement(Kne,null);class Xne extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(Jc.Provider,{value:this.props.routeContext},_.createElement(v9.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zne(e){let{routeContext:t,match:r,children:n}=e,i=_.useContext(H4);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(Jc.Provider,{value:t},n)}function Jne(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(i=r)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||vi(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:h}=r,v=f.route.loader&&m[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let h,v=!1,p=null,g=null;r&&(h=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||Yne,c&&(u<0&&m===0?(v=!0,g=null):u===m&&(v=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,m+1)),b=()=>{let x;return h?x=p:v?x=g:f.route.Component?x=_.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=d,_.createElement(Zne,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:x})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?_.createElement(Xne,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var b9=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(b9||{}),kw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kw||{});function Qne(e){let t=_.useContext(H4);return t||vi(!1),t}function eie(e){let t=_.useContext(Une);return t||vi(!1),t}function tie(e){let t=_.useContext(Jc);return t||vi(!1),t}function w9(e){let t=tie(),r=t.matches[t.matches.length-1];return r.route.id||vi(!1),r.route.id}function rie(){var e;let t=_.useContext(v9),r=eie(kw.UseRouteError),n=w9(kw.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function nie(){let{router:e}=Qne(b9.UseNavigateStable),t=w9(kw.UseNavigateStable),r=_.useRef(!1);return y9(()=>{r.current=!0}),_.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Zy({fromRouteId:t},s)))},[e,t])}function iie(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function _9(e){let{to:t,replace:r,state:n,relative:i}=e;xg()||vi(!1);let{future:s,static:o}=_.useContext(Pd),{matches:l}=_.useContext(Jc),{pathname:c}=Od(),u=yi(),d=W4(t,U4(l,s.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return _.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:i}),[u,f,i,r,n]),null}function pr(e){vi(!1)}function sie(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Ku.Pop,navigator:s,static:o=!1,future:l}=e;xg()&&vi(!1);let c=t.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:s,static:o,future:Zy({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=yg(n));let{pathname:d="/",search:f="",hash:m="",state:h=null,key:v="default"}=n,p=_.useMemo(()=>{let g=q4(d,c);return g==null?null:{location:{pathname:g,search:f,hash:m,state:h,key:v},navigationType:i}},[c,d,f,m,h,v,i]);return p==null?null:_.createElement(Pd.Provider,{value:u},_.createElement(L_.Provider,{children:r,value:p}))}function aie(e){let{children:t,location:r}=e;return Vne(XA(t),r)}new Promise(()=>{});function XA(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,i)=>{if(!_.isValidElement(n))return;let s=[...t,i];if(n.type===_.Fragment){r.push.apply(r,XA(n.props.children,s));return}n.type!==pr&&vi(!1),!n.props.index||!n.props.children||vi(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=XA(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZA(){return ZA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZA.apply(this,arguments)}function oie(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function lie(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cie(e,t){return e.button===0&&(!t||t==="_self")&&!lie(e)}function JA(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function uie(e,t){let r=JA(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(s=>{r.append(i,s)})}),r}const die=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fie="6";try{window.__reactRouterVersion=fie}catch{}const hie="startTransition",xL=SE[hie];function mie(e){let{basename:t,children:r,future:n,window:i}=e,s=_.useRef();s.current==null&&(s.current=yne({window:i,v5Compat:!0}));let o=s.current,[l,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=_.useCallback(f=>{u&&xL?xL(()=>c(f)):c(f)},[c,u]);return _.useLayoutEffect(()=>o.listen(d),[o,d]),_.useEffect(()=>iie(n),[n]),_.createElement(sie,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const pie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=_.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=oie(t,die),{basename:h}=_.useContext(Pd),v,p=!1;if(typeof u=="string"&&gie.test(u)&&(v=u,pie))try{let x=new URL(window.location.href),j=u.startsWith("//")?new URL(x.protocol+u):new URL(u),N=q4(j.pathname,h);j.origin===x.origin&&N!=null?u=N+j.search+j.hash:p=!0}catch{}let g=Wne(u,{relative:i}),y=vie(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f});function b(x){n&&n(x),x.defaultPrevented||y(x)}return _.createElement("a",ZA({},m,{href:v||g,onClick:p||s?n:b,ref:r,target:c}))});var bL;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bL||(bL={}));var wL;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wL||(wL={}));function vie(e,t){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=yi(),u=Od(),d=x9(e,{relative:o});return _.useCallback(f=>{if(cie(f,r)){f.preventDefault();let m=n!==void 0?n:Cw(u)===Cw(d);c(e,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,n,i,r,e,s,o,l])}function j9(e){let t=_.useRef(JA(e)),r=_.useRef(!1),n=Od(),i=_.useMemo(()=>uie(n.search,r.current?null:t.current),[n.search]),s=yi(),o=_.useCallback((l,c)=>{const u=JA(typeof l=="function"?l(i):l);r.current=!0,s("?"+u,c)},[s,i]);return[i,o]}var vl=function(){return vl=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},vl.apply(this,arguments)};function bg(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function yie(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function xie(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}const bie=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class V4 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class wie extends V4{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _L extends V4{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jL extends V4{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var QA;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(QA||(QA={}));class _ie{constructor(t,{headers:r={},customFetch:n,region:i=QA.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=bie(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return yie(this,arguments,void 0,function*(r,n={}){var i;let s,o;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let m={},{region:h}=n;h||(h=this.region);const v=new URL(`${this.url}/${r}`);h&&h!=="any"&&(m["x-region"]=h,v.searchParams.set("forceFunctionRegion",h));let p;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",p=u):typeof u=="string"?(m["Content-Type"]="text/plain",p=u):typeof FormData<"u"&&u instanceof FormData?p=u:(m["Content-Type"]="application/json",p=JSON.stringify(u)):p=u;let g=d;f&&(o=new AbortController,s=setTimeout(()=>o.abort(),f),d?(g=o.signal,d.addEventListener("abort",()=>o.abort())):g=o.signal);const y=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:p,signal:g}).catch(N=>{throw new wie(N)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new _L(y);if(!y.ok)throw new jL(y);let x=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return x==="application/json"?j=yield y.json():x==="application/octet-stream"||x==="application/pdf"?j=yield y.blob():x==="text/event-stream"?j=y:x==="multipart/form-data"?j=yield y.formData():j=yield y.text(),{data:j,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof jL||l instanceof _L?l.context:void 0}}finally{s&&clearTimeout(s)}})}}var jie=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Nie=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,l=null,c=null,u=s.status,d=s.statusText;if(s.ok){var f,m;if(r.method!=="HEAD"){var h;const y=await s.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((h=r.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const p=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),g=(m=s.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");p&&g&&g.length>1&&(c=parseInt(g[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const p=await s.text();try{o=JSON.parse(p),Array.isArray(o)&&s.status===404&&(l=[],o=null,u=200,d="OK")}catch{s.status===404&&p===""?(u=204,d="No Content"):o={message:p}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new jie(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let l="";const c=s==null?void 0:s.cause;if(c){var u,d,f,m;const v=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",p=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(f=s==null?void 0:s.name)!==null&&f!==void 0?f:"FetchError"}: ${s==null?void 0:s.message}`,l+=`

Caused by: ${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"Error"}: ${v}`,p&&(l+=` (${p})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var h;l=(h=s==null?void 0:s.stack)!==null&&h!==void 0?h:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},Sie=class extends Nie{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const NL=new RegExp("[,()]");var lm=class extends Sie{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&NL.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&NL.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Aie=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,t){const{head:r=!1,count:n}=t??{},i=r?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new lm({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const s=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(s.length>0){const o=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new lm({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new lm({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new lm({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new lm({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Cie=class N9{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Aie(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new N9(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:s}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||i?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{c.searchParams.append(f,m)})):(l="POST",u=r);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new lm({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class kie{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Eie="2.89.0",Pie=`realtime-js/${Eie}`,S9="1.0.0",Oie="2.0.0",SL=S9,eC=1e4,Tie=1e3,Lie=100;var Tu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Tu||(Tu={}));var Ri;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ri||(Ri={}));var Mo;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Mo||(Mo={}));var tC;(function(e){e.websocket="websocket"})(tC||(tC={}));var vf;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(vf||(vf={}));class Rie{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var i,s;const o=t.topic,l=(i=t.ref)!==null&&i!==void 0?i:"",c=(s=t.join_ref)!==null&&s!==void 0?s:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(h),p=0;v.setUint8(p++,this.KINDS.userBroadcastPush),v.setUint8(p++,c.length),v.setUint8(p++,l.length),v.setUint8(p++,o.length),v.setUint8(p++,u.length),v.setUint8(p++,f.length),v.setUint8(p++,r),Array.from(c,y=>v.setUint8(p++,y.charCodeAt(0))),Array.from(l,y=>v.setUint8(p++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(p++,y.charCodeAt(0))),Array.from(u,y=>v.setUint8(p++,y.charCodeAt(0))),Array.from(f,y=>v.setUint8(p++,y.charCodeAt(0)));var g=new Uint8Array(h.byteLength+n.byteLength);return g.set(new Uint8Array(h),0),g.set(new Uint8Array(n),h.byteLength),g.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,s,o,l,c]=n;return r({join_ref:i,ref:s,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,i)}}_decodeUserBroadcast(t,r,n){const i=r.getUint8(1),s=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+i));c=c+i;const d=n.decode(t.slice(c,c+s));c=c+s;const f=n.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),h=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,v={type:this.BROADCAST_EVENT,event:d,payload:h};return o>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class A9{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Cn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Cn||(Cn={}));const AL=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((s,o)=>(s[o]=Iie(o,e,t,i),s),{}):{}},Iie=(e,t,r,n)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,o=r[e];return s&&!n.includes(s)?C9(s,o):rC(o)},C9=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Fie(t,r)}switch(e){case Cn.bool:return Die(t);case Cn.float4:case Cn.float8:case Cn.int2:case Cn.int4:case Cn.int8:case Cn.numeric:case Cn.oid:return Mie(t);case Cn.json:case Cn.jsonb:return $ie(t);case Cn.timestamp:return Bie(t);case Cn.abstime:case Cn.date:case Cn.daterange:case Cn.int4range:case Cn.int8range:case Cn.money:case Cn.reltime:case Cn.text:case Cn.time:case Cn.timestamptz:case Cn.timetz:case Cn.tsrange:case Cn.tstzrange:return rC(t);default:return rC(t)}},rC=e=>e,Die=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Mie=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$ie=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Fie=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const o=e.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>C9(t,l))}return e},Bie=e=>typeof e=="string"?e.replace(" ","T"):e,k9=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class fN{constructor(t,r,n={},i=eC){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var CL;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(CL||(CL={}));class oy{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oy.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=oy.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=oy.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const s=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(s,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=s[u];if(f){const m=d.map(g=>g.presence_ref),h=f.map(g=>g.presence_ref),v=d.filter(g=>h.indexOf(g.presence_ref)<0),p=f.filter(g=>m.indexOf(g.presence_ref)<0);v.length>0&&(l[u]=v),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(s,{joins:l,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(h=>h.presence_ref),m=d.filter(h=>f.indexOf(h.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,i(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kL;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(kL||(kL={}));var ly;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ly||(ly={}));var fc;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(fc||(fc={}));class km{constructor(t,r={config:{}},n){var i,s;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ri.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new fN(this,Mo.join,this.params,this.timeout),this.rejoinTimer=new A9(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ri.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ri.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ri.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ri.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ri.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mo.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new oy(this),this.broadcastEndpointURL=k9(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ri.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[ly.PRESENCE]&&this.bindings[ly.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(fc.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(fc.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(fc.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,g=(v=p==null?void 0:p.length)!==null&&v!==void 0?v:0,y=[];for(let b=0;b<g;b++){const x=p[b],{filter:{event:j,schema:N,table:A,filter:C}}=x,E=h&&h[b];if(E&&E.event===j&&km.isFilterValueEqual(E.schema,N)&&km.isFilterValueEqual(E.table,A)&&km.isFilterValueEqual(E.filter,C))y.push(Object.assign(Object.assign({},x),{id:E.id}));else{this.unsubscribe(),this.state=Ri.errored,t==null||t(fc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(fc.SUBSCRIBED);return}}).receive("error",h=>{this.state=Ri.errored,t==null||t(fc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(fc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ri.joined&&t===ly.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ri.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new fN(this,Mo.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ri.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new fN(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Lie){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Mo;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var v,p,g;return((v=h.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(p=h.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(h=>h.callback(m,n)):(s=this.bindings[o])===null||s===void 0||s.filter(h=>{var v,p,g,y,b,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const j=h.id,N=(v=h.filter)===null||v===void 0?void 0:v.event;return j&&((p=r.ids)===null||p===void 0?void 0:p.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const j=(b=(y=h==null?void 0:h.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:p,table:g,commit_timestamp:y,type:b,errors:x}=v;m=Object.assign(Object.assign({},{schema:p,table:g,commit_timestamp:y,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(v))}h.callback(m,n)})}_isClosed(){return this.state===Ri.closed}_isJoined(){return this.state===Ri.joined}_isJoining(){return this.state===Ri.joining}_isLeaving(){return this.state===Ri.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&km.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Mo.close,{},t)}_onError(t){this._on(Mo.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ri.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=AL(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=AL(t.columns,t.old_record)),r}}const hN=()=>{},Lb={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zie=[1e3,2e3,5e3,1e4],qie=1e4,Uie=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Wie{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=eC,this.transport=null,this.heartbeatIntervalMs=Lb.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hN,this.ref=0,this.reconnectTimer=null,this.vsn=SL,this.logger=hN,this.conn=null,this.sendBuffer=[],this.serializer=new Rie,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${tC.websocket}`,this.httpEndpoint=k9(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kie.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Tu.connecting:return vf.Connecting;case Tu.open:return vf.Open;case Tu.closing:return vf.Closing;default:return vf.Closed}}isConnected(){return this.connectionState()===vf.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new km(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:i,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Tie,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Lb.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=r,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${n} ${i} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Tu.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Tu.open||this.conn.readyState===Tu.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Mo.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Uie],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const s={access_token:r,version:Pie};r&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Mo.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new A9(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lb.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,s,o,l,c,u,d,f,m,h;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:eC,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Lb.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:hN,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:SL,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>zie[v-1]||qie,this.vsn){case S9:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,p)=>p(JSON.stringify(v)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(v,p)=>p(JSON.parse(v));break;case Oie:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Jy=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Hie(e,t,r){const n=new URL(t,e);if(r)for(const[i,s]of Object.entries(r))s!==void 0&&n.searchParams.set(i,s);return n.toString()}async function Vie(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Gie(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:s,headers:o}){const l=Hie(e.baseUrl,n,i),c=await Vie(e.auth),u=await t(l,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...c,...o},body:s?JSON.stringify(s):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),m=f&&d?JSON.parse(d):d;if(!u.ok){const h=f?m:void 0,v=h==null?void 0:h.error;throw new Jy((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:h})}return{status:u.status,headers:u.headers,data:m}}}}function Rb(e){return e.join("")}var Kie=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Rb(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rb(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rb(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rb(e.namespace)}`}),!0}catch(t){if(t instanceof Jy&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Jy&&r.status===409)return;throw r}}};function Wh(e){return e.join("")}var Yie=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wh(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wh(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wh(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wh(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wh(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wh(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Jy&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Jy&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Xie=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Gie({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Kie(this.client,t),this.tableOps=new Yie(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},R_=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Vn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Zie=class extends R_{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},nC=class extends R_{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const G4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Jie=()=>Response,iC=e=>{if(Array.isArray(e))return e.map(r=>iC(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=iC(n)}),t},Qie=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ese=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Qy(e){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qy(e)}function tse(e,t){if(Qy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rse(e){var t=tse(e,"string");return Qy(t)=="symbol"?t:t+""}function nse(e,t,r){return(t=rse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(r),!0).forEach(function(n){nse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const mN=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},ise=async(e,t,r)=>{e instanceof await Jie()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const i=e.status||500,s=(n==null?void 0:n.statusCode)||i+"";t(new Zie(mN(n),i,s))}).catch(n=>{t(new nC(mN(n),n))}):t(new nC(mN(e),e))},sse=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(Qie(n)?(i.headers=zt({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),zt(zt({},i),r))};async function f0(e,t,r,n,i,s){return new Promise((o,l)=>{e(r,sse(t,n,i,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>ise(c,l,n))})}async function ex(e,t,r,n){return f0(e,"GET",t,r,n)}async function Lo(e,t,r,n,i){return f0(e,"POST",t,n,i,r)}async function sC(e,t,r,n,i){return f0(e,"PUT",t,n,i,r)}async function ase(e,t,r,n){return f0(e,"HEAD",t,zt(zt({},r),{},{noResolveJson:!0}),n)}async function K4(e,t,r,n,i){return f0(e,"DELETE",t,n,i,r)}var ose=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Vn(t))return{data:null,error:t};throw t}}};let E9;E9=Symbol.toStringTag;var lse=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[E9]="BlobDownloadBuilder",this.promise=null}asStream(){return new ose(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Vn(t))return{data:null,error:t};throw t}}};const cse={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},PL={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var use=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=G4(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var i=this;try{let s;const o=zt(zt({},PL),n);let l=zt(zt({},i.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",i.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),c&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=zt(zt({},l),n.headers));const u=i._removeEmptyFolders(t),d=i._getFinalPath(u),f=await(e=="PUT"?sC:Lo)(i.fetch,`${i.url}/object/${d}`,s,zt({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Vn(s))return{data:null,error:s};throw s}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var i=this;const s=i._removeEmptyFolders(e),o=i._getFinalPath(s),l=new URL(i.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=zt({upsert:PL.upsert},n),d=zt(zt({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:s,fullPath:(await sC(i.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Vn(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const i=zt({},r.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=await Lo(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(r.url+s.url),l=o.searchParams.get("token");if(!l)throw new R_("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Lo(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Vn(i))return{data:null,error:i};throw i}}async copy(e,t,r){var n=this;try{return{data:{path:(await Lo(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Vn(i))return{data:null,error:i};throw i}}async createSignedUrl(e,t,r){var n=this;try{let i=n._getFinalPath(e),s=await Lo(n.fetch,`${n.url}/object/sign/${i}`,zt({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${n.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Vn(i))return{data:null,error:i};throw i}}async createSignedUrls(e,t,r){var n=this;try{const i=await Lo(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>zt(zt({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Vn(i))return{data:null,error:i};throw i}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=n?`?${n}`:"",s=this._getFinalPath(e),o=()=>ex(this.fetch,`${this.url}/${r}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new lse(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:iC(await ex(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await ase(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Vn(n)&&n instanceof nC){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await K4(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vn(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const i=zt(zt(zt({},cse),t),{},{prefix:e||""});return{data:await Lo(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Vn(i))return{data:null,error:i};throw i}}async listV2(e,t){var r=this;try{const n=zt({},e);return{data:await Lo(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const P9="2.89.0",O9={"X-Client-Info":`storage-js/${P9}`};var dse=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=zt(zt({},O9),t),this.fetch=G4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await ex(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vn(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await ex(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vn(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Lo(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await sC(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Lo(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await K4(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vn(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},fse=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=zt(zt({},O9),t),this.fetch=G4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Lo(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vn(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await ex(t.fetch,i,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await K4(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vn(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!ese(e))throw new R_("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Xie({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(i,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const Y4={"X-Client-Info":`storage-js/${P9}`,"Content-Type":"application/json"};var T9=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function _a(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var pN=class extends T9{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},hse=class extends T9{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const X4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),mse=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},OL=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pse=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||n+"";t(new pN(OL(s),n,o))}).catch(()=>{const s=n+"";t(new pN(i.statusText||`HTTP ${n} error`,n,s))});else{const s=n+"";t(new pN(i.statusText||`HTTP ${n} error`,n,s))}}else t(new hse(OL(e),e))},gse=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(mse(n)?(i.headers=zt({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,zt(zt({},i),r)):i};async function vse(e,t,r,n,i,s){return new Promise((o,l)=>{e(r,gse(t,n,i,s)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>pse(c,l,n))})}async function ja(e,t,r,n,i){return vse(e,"POST",t,n,i,r)}var yse=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=zt(zt({},Y4),t),this.fetch=X4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await ja(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await ja(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_a(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await ja(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await ja(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_a(n))return{data:null,error:n};throw n}}},xse=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=zt(zt({},Y4),t),this.fetch=X4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ja(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await ja(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await ja(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await ja(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ja(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}},bse=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=zt(zt({},Y4),t),this.fetch=X4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ja(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await ja(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await ja(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await ja(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_a(r))return{data:null,error:r};throw r}}},wse=class extends bse{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new _se(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},_se=class extends yse{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,zt(zt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,zt(zt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new jse(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},jse=class extends xse{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,zt(zt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,zt(zt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,zt(zt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,zt(zt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,zt(zt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Nse=class extends dse{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new use(this.url,this.headers,e,this.fetch)}get vectors(){return new wse(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fse(this.url+"/iceberg",this.headers,this.fetch)}};const L9="2.89.0",cm=30*1e3,aC=3,gN=aC*cm,Sse="http://localhost:9999",Ase="supabase.auth.token",Cse={"X-Client-Info":`gotrue-js/${L9}`},oC="X-Supabase-Api-Version",R9={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kse=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ese=10*60*1e3;class tx extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Et(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Pse extends tx{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Ose(e){return Et(e)&&e.name==="AuthApiError"}class yf extends tx{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class eu extends tx{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class pa extends eu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tse(e){return Et(e)&&e.name==="AuthSessionMissingError"}class Hh extends eu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ib extends eu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Db extends eu{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Lse(e){return Et(e)&&e.name==="AuthImplicitGrantRedirectError"}class TL extends eu{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rse extends eu{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class lC extends eu{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function vN(e){return Et(e)&&e.name==="AuthRetryableFetchError"}class LL extends eu{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class cC extends eu{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ew="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),RL=` 	
\r=`.split(""),Ise=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<RL.length;t+=1)e[RL[t].charCodeAt(0)]=-2;for(let t=0;t<Ew.length;t+=1)e[Ew[t].charCodeAt(0)]=t;return e})();function IL(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ew[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ew[n]),t.queuedBits-=6}}function I9(e,t,r){const n=Ise[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function DL(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{$se(o,n,r)};for(let o=0;o<e.length;o+=1)I9(e.charCodeAt(o),i,s);return t.join("")}function Dse(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Mse(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Dse(n,t)}}function $se(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Wm(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)I9(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Fse(e){const t=[];return Mse(e,r=>t.push(r)),new Uint8Array(t)}function Nf(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>IL(i,r,n)),IL(null,r,n),t.join("")}function Bse(e){return Math.round(Date.now()/1e3)+e}function zse(){return Symbol("auth-callback")}const ss=()=>typeof window<"u"&&typeof document<"u",tf={tested:!1,writable:!1},D9=()=>{if(!ss())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tf.tested)return tf.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tf.tested=!0,tf.writable=!0}catch{tf.tested=!0,tf.writable=!1}return tf.writable};function qse(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const M9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Use=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",um=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},rf=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},is=async(e,t)=>{await e.removeItem(t)};class I_{constructor(){this.promise=new I_.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}I_.promiseConstructor=Promise;function yN(e){const t=e.split(".");if(t.length!==3)throw new cC("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!kse.test(t[n]))throw new cC("JWT not in base64url format");return{header:JSON.parse(DL(t[0])),payload:JSON.parse(DL(t[1])),signature:Wm(t[2]),raw:{header:t[0],payload:t[1]}}}async function Wse(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Hse(e,t){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){n(o);return}}catch(o){if(!t(s,o)){i(o);return}}})()})}function Vse(e){return("0"+e.toString(16)).substr(-2)}function Gse(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,Vse).join("")}async function Kse(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Yse(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Kse(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vh(e,t,r=!1){const n=Gse();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await um(e,`${t}-code-verifier`,i);const s=await Yse(n);return[s,n===s?"plain":"s256"]}const Xse=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Zse(e){const t=e.headers.get(oC);if(!t||!t.match(Xse))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Jse(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Qse(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const eae=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gh(e){if(!eae.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xN(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tae(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function ML(e){return JSON.parse(JSON.stringify(e))}const df=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rae=[502,503,504];async function $L(e){var t;if(!Use(e))throw new lC(df(e),0);if(rae.includes(e.status))throw new lC(df(e),e.status);let r;try{r=await e.json()}catch(s){throw new yf(df(s),s)}let n;const i=Zse(e);if(i&&i.getTime()>=R9["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new LL(df(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new pa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new LL(df(r),e.status,r.weak_password.reasons);throw new Pse(df(r),e.status||500,n)}const nae=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Bt(e,t,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[oC]||(s[oC]=R9["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await iae(e,t,r+l,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function iae(e,t,r,n,i,s){const o=nae(t,n,i,s);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new lC(df(c),0)}if(l.ok||await $L(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await $L(c)}}function Eo(e){var t;let r=null;oae(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Bse(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function FL(e){const t=Eo(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function $u(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function sae(e){return{data:e,error:null}}function aae(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e,o=bg(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function BL(e){return e}function oae(e){return e.access_token&&e.refresh_token&&e.expires_in}const bN=["global","local","others"];class lae{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=M9(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=bN[0]){if(bN.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bN.join(", ")}`);try{return await Bt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Et(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Bt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:$u})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=bg(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Bt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:aae,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Et(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Bt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:$u})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Bt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:BL});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(v=>{const p=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=p}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Et(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Gh(t);try{return await Bt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:$u})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Gh(t);try{return await Bt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:$u})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Gh(t);try{return await Bt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:$u})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Gh(t.userId);try{const{data:r,error:n}=await Bt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Gh(t.userId),Gh(t.id);try{return{data:await Bt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Bt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:BL});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(v=>{const p=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=p}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Et(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Bt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Bt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Bt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Et(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Bt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Bt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}}function zL(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Kh={debug:!!(globalThis&&D9()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $9 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class cae extends $9{}async function uae(e,t,r){Kh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Kh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Kh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Kh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Kh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new cae(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Kh.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function dae(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function F9(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function fae(e){return parseInt(e,16)}function hae(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function mae(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=F9(e.address),v=d?`${d}://${n}`:n,p=e.statement?`${e.statement}
`:"",g=`${v} wants you to sign in with your Ethereum account:
${h}

${p}`;let y=`URI: ${f}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);b+=`
- ${x}`}y+=b}return`${g}
${y}`}class ji extends Error{constructor({message:t,code:r,cause:n,name:i}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Pw extends ji{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function pae({error:e,options:t}){var r,n,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ji({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ji({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ji({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ji({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ji({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ji({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ji({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ji({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(B9(o)){if(s.rp.id!==o)return new ji({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ji({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ji({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ji({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ji({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function gae({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ji({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ji({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(B9(n)){if(r.rpId!==n)return new ji({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ji({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ji({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ji({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class vae{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const yae=new vae;function xae(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=bg(e,["challenge","user","excludeCredentials"]),s=Wm(t).buffer,o=Object.assign(Object.assign({},r),{id:Wm(r.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Wm(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function bae(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=bg(e,["challenge","allowCredentials"]),i=Wm(t).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];s.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Wm(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function wae(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Nf(new Uint8Array(e.response.attestationObject)),clientDataJSON:Nf(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _ae(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Nf(new Uint8Array(i.authenticatorData)),clientDataJSON:Nf(new Uint8Array(i.clientDataJSON)),signature:Nf(new Uint8Array(i.signature)),userHandle:i.userHandle?Nf(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function B9(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function qL(){var e,t;return!!(ss()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function jae(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pw("Browser returned unexpected credential type",t)}:{data:null,error:new Pw("Empty credential response",t)}}catch(t){return{data:null,error:pae({error:t,options:e})}}}async function Nae(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pw("Browser returned unexpected credential type",t)}:{data:null,error:new Pw("Empty credential response",t)}}catch(t){return{data:null,error:gae({error:t,options:e})}}}const Sae={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Aae={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ow(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(r(o))n[s]=o;else if(t(o)){const l=n[s];t(l)?n[s]=Ow(l,o):n[s]=Ow(o)}else n[s]=o}return n}function Cae(e,t){return Ow(Sae,e,t||{})}function kae(e,t){return Ow(Aae,e,t||{})}class Eae{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},s){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=i??yae.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Cae(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await jae({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=kae(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await Nae(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(o){return Et(o)?{data:null,error:o}:{data:null,error:new yf("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new tx("rpId is required for WebAuthn authentication")};try{if(!qL())return{data:null,error:new yf("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return Et(o)?{data:null,error:o}:{data:null,error:new yf("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new tx("rpId is required for WebAuthn registration")};try{if(!qL())return{data:null,error:new yf("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Et(o)?{data:null,error:o}:{data:null,error:new yf("Unexpected error in register",o)}}}}dae();const Pae={url:Sse,storageKey:Ase,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cse,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function UL(e,t,r){return await r()}const Yh={};class rx{get jwks(){var t,r;return(r=(t=Yh[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Yh[this.storageKey]=Object.assign(Object.assign({},Yh[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Yh[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Yh[this.storageKey]=Object.assign(Object.assign({},Yh[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Pae),t);if(this.storageKey=s.storageKey,this.instanceID=(r=rx.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,rx.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ss()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new lae({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=M9(s.fetch),this.lock=s.lock||UL,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&ss()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=uae:this.lock=UL,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Eae(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:D9()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zL(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=zL(this.memoryStorage)),ss()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${L9}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(ss()&&(r=qse(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ss()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Lse(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Et(r)?this._returnResult({error:r}):this._returnResult({error:new yf("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const s=await Bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Eo}),{data:o,error:l}=s;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(Et(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var r,n,i;try{let s;if("email"in t){const{email:d,password:f,options:m}=t;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await Vh(this.storage,this.storageKey)),s=await Bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:h,code_challenge_method:v},xform:Eo})}else if("phone"in t){const{phone:d,password:f,options:m}=t;s=await Bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Eo})}else throw new Ib("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return await is(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(await is(this.storage,`${this.storageKey}-code-verifier`),Et(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:o,options:l}=t;r=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:FL})}else if("phone"in t){const{phone:s,password:o,options:l}=t;r=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:FL})}else throw new Ib("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new Hh;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Et(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,s,o,l,c,u,d,f,m;let h,v;if("message"in t)h=t.message,v=t.signature;else{const{chain:p,wallet:g,statement:y,options:b}=t;let x;if(ss())if(typeof g=="object")x=g;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")x=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),N=await x.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=F9(N[0]);let C=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const O=await x.request({method:"eth_chainId"});C=fae(O)}const E={domain:j.host,address:A,statement:y,uri:j.href,version:"1",chainId:C,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=mae(E),v=await x.request({method:"personal_sign",params:[hae(h),A]})}try{const{data:p,error:g}=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Eo});if(g)throw g;if(!p||!p.session||!p.user){const y=new Hh;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:g})}catch(p){if(Et(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(t){var r,n,i,s,o,l,c,u,d,f,m,h;let v,p;if("message"in t)v=t.message,p=t.signature;else{const{chain:g,wallet:y,statement:b,options:x}=t;let j;if(ss())if(typeof y=="object")j=y;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))j=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const N=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const A=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),b?{statement:b}:null));let C;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")C=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)C=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)v=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),p=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const A=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=A}}try{const{data:g,error:y}=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Nf(p)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Eo});if(y)throw y;if(!g||!g.session||!g.user){const b=new Hh;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(Et(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(t){const r=await rf(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Rse;const{data:s,error:o}=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Eo});if(await is(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const l=new Hh;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await is(this.storage,`${this.storageKey}-code-verifier`),Et(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=t,l=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Eo}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Hh;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(Et(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,s,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Vh(this.storage,this.storageKey));const{error:f}=await Bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Ib("You must provide either an email or phone number.")}catch(l){if(await is(this.storage,`${this.storageKey}-code-verifier`),Et(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let i,s;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Bt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Eo});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Et(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i,s,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Vh(this.storage,this.storageKey));const u=await Bt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:sae});return!((s=u.data)===null||s===void 0)&&s.url&&ss()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await is(this.storage,`${this.storageKey}-code-verifier`),Et(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new pa;const{error:i}=await Bt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Et(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:s}=t,{error:o}=await Bt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:i,options:s}=t,{data:o,error:l}=await Bt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Ib("You must provide either an email or phone number and a type")}catch(r){if(Et(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await rf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<gN:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await rf(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=xN()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=tae(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:$u}):await this._useSession(async r=>{var n,i,s;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pa}:await Bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:$u})})}catch(r){if(Et(r))return Tse(r)&&(await this._removeSession(),await is(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new pa;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Vh(this.storage,this.storageKey));const{data:u,error:d}=await Bt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:$u});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await is(this.storage,`${this.storageKey}-code-verifier`),Et(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new pa;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=yN(t.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(Et(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new pa;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Et(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ss())throw new Db("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Db(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new TL("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Db("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new TL("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!o||!u)throw new Db("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let m=d+f;c&&(m=parseInt(c));const h=m-d;h*1e3<=cm&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const v=m-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:p,error:g}=await this._getUser(s);if(g)throw g;const y={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(Et(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await rf(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({error:s});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Ose(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await is(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=zse(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Vh(this.storage,this.storageKey,!0));try{return await Bt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await is(this.storage,`${this.storageKey}-code-verifier`),Et(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,l,c,u,d;const{data:f,error:m}=s;if(m)throw m;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Bt(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return ss()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Et(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,f=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Eo}),{data:m,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Hh}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:h}))}catch(i){if(await is(this.storage,`${this.storageKey}-code-verifier`),Et(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await Bt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Hse(async i=>(i>0&&await Wse(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Bt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Eo})),(i,s)=>{const o=200*Math.pow(2,i);return s&&vN(s)&&Date.now()+o-n<cm})}catch(n){if(this._debug(r,"error",n),Et(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ss()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await rf(this.storage,this.storageKey);if(i&&this.userStorage){let o=await rf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await um(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:xN()}else if(i&&!i.user&&!i.user){const o=await rf(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await is(this.storage,this.storageKey+"-user"),await um(this.storage,this.storageKey,i)):i.user=xN()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<gN;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${gN}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),vN(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new pa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new I_;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new pa;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),Et(s)){const o={data:null,error:s};return vN(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await is(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await um(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=ML(i);await um(this.storage,this.storageKey,s)}else{const i=ML(r);await um(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await is(this.storage,this.storageKey),await is(this.storage,this.storageKey+"-code-verifier"),await is(this.storage,this.storageKey+"-user"),this.userStorage&&await is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ss()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),cm);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/cm);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${cm}ms, refresh threshold is ${aC} ticks`),i<=aC&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof $9)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ss()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Vh(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await Bt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Bt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?wae(t.webauthn.credential_response):_ae(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Bt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=await Bt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:xae(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:bae(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=yN(n.access_token);let o=null;s.aal&&(o=s.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Bt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new pa})})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new pa});const o=await Bt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ss()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Et(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new pa});const o=await Bt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ss()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Et(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Bt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new pa})})}catch(t){if(Et(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await Bt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pa})})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Ese>i)return n;const{data:s,error:o}=await Bt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:h,error:v}=await this.getSession();if(v||!h.session)return this._returnResult({data:null,error:v});n=h.session.access_token}const{header:i,payload:s,signature:o,raw:{header:l,payload:c}}=yN(n);r!=null&&r.allowExpired||Jse(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:s,header:i,signature:o},error:null}}const d=Qse(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,Fse(`${l}.${c}`)))throw new cC("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(Et(n))return this._returnResult({data:null,error:n});throw n}}}rx.nextInstanceID={};const Oae=rx,Tae="2.89.0";let Uv="";typeof Deno<"u"?Uv="deno":typeof document<"u"?Uv="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Uv="react-native":Uv="node";const Lae={"X-Client-Info":`supabase-js-${Uv}/${Tae}`},Rae={headers:Lae},Iae={schema:"public"},Dae={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mae={};function nx(e){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}function $ae(e,t){if(nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fae(e){var t=$ae(e,"string");return nx(t)=="symbol"?t:t+""}function Bae(e,t,r){return(t=Fae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ti(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WL(Object(r),!0).forEach(function(n){Bae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const zae=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qae=()=>Headers,Uae=(e,t,r)=>{const n=zae(r),i=qae();return async(s,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(s,ti(ti({},o),{},{headers:u}))}};function Wae(e){return e.endsWith("/")?e:e+"/"}function Hae(e,t){var r,n;const{db:i,auth:s,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,m={db:ti(ti({},c),i),auth:ti(ti({},u),s),realtime:ti(ti({},d),o),storage:{},global:ti(ti(ti({},f),l),{},{headers:ti(ti({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function Vae(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wae(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Gae=class extends Oae{constructor(e){super(e)}},Kae=class{constructor(e,t,r){var n,i;this.supabaseUrl=e,this.supabaseKey=t;const s=Vae(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,l={db:Iae,realtime:Mae,auth:ti(ti({},Dae),{},{storageKey:o}),global:Rae},c=Hae(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Uae(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ti({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Cie(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Nse(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new _ie(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:s,flowType:o,lock:l,debug:c,throwOnError:u},d,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gae({url:this.authUrl.href,headers:ti(ti({},m),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Wie(this.realtimeUrl.href,ti(ti({},e),{},{params:ti(ti({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Yae=(e,t,r)=>new Kae(e,t,r);function Xae(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Xae()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zae="https://dwvfjdhmykhqgpotsdcw.supabase.co",Jae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR3dmZqZGhteWtocWdwb3RzZGN3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyMDgwMjMsImV4cCI6MjA4MTc4NDAyM30.K9QzDZmKOeCJH5PSoX_TyJ44Rmy0FxysDEPepJlrZdg",fe=Yae(Zae,Jae,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),z9=_.createContext(void 0);function Qae({children:e}){const[t,r]=_.useState(null),[n,i]=_.useState(null),[s,o]=_.useState(null),[l,c]=_.useState([]),[u,d]=_.useState(!0),f=async x=>{try{const{data:j,error:N}=await fe.from("profiles").select("*, department:departments(*)").eq("id",x).single();if(N){console.error("Error fetching profile:",N);return}o(j);const{data:A,error:C}=await fe.from("user_roles").select("role").eq("user_id",x);if(C){console.error("Error fetching roles:",C);return}c((A||[]).map(E=>E.role))}catch(j){console.error("Error in fetchProfile:",j)}};_.useEffect(()=>{const{data:{subscription:x}}=fe.auth.onAuthStateChange((j,N)=>{i(N),r((N==null?void 0:N.user)??null),N!=null&&N.user?setTimeout(()=>{f(N.user.id)},0):(o(null),c([])),j==="SIGNED_OUT"&&(o(null),c([]))});return fe.auth.getSession().then(({data:{session:j}})=>{i(j),r((j==null?void 0:j.user)??null),j!=null&&j.user?f(j.user.id).finally(()=>{d(!1)}):d(!1)}),()=>x.unsubscribe()},[]);const m=async(x,j)=>{const{error:N}=await fe.auth.signInWithPassword({email:x,password:j});return{error:N}},h=async(x,j,N,A)=>{const C=`${window.location.origin}/`,{error:E}=await fe.auth.signUp({email:x,password:j,options:{emailRedirectTo:C,data:{first_name:N,last_name:A}}});return{error:E}},v=async()=>{await fe.auth.signOut(),r(null),i(null),o(null),c([])},p=async()=>{t&&await f(t.id)},g=x=>l.includes(x),y=x=>x.some(j=>l.includes(j)),b=g("admin");return a.jsx(z9.Provider,{value:{user:t,session:n,profile:s,roles:l,isLoading:u,isAdmin:b,hasRole:g,hasAnyRole:y,signIn:m,signUp:h,signOut:v,refreshProfile:p},children:e})}function yr(){const e=_.useContext(z9);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const Z4=x_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),de=_.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},s)=>{const o=n?MJ:"button";return a.jsx(o,{className:rt(Z4({variant:t,size:r,className:e})),ref:s,...i})});de.displayName="Button";const De=_.forwardRef(({className:e,type:t,...r},n)=>a.jsx("input",{type:t,className:rt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));De.displayName="Input";var eoe="Label",q9=_.forwardRef((e,t)=>a.jsx(jt.label,{...e,ref:t,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));q9.displayName=eoe;var U9=q9;const toe=x_("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pe=_.forwardRef(({className:e,...t},r)=>a.jsx(U9,{ref:r,className:rt(toe(),e),...t}));Pe.displayName=U9.displayName;var Hr;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},e.find=(i,s)=>{for(const o of i)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Hr||(Hr={}));var HL;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(HL||(HL={}));const xt=Hr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Lu=e=>{switch(typeof e){case"undefined":return xt.undefined;case"string":return xt.string;case"number":return Number.isNaN(e)?xt.nan:xt.number;case"boolean":return xt.boolean;case"function":return xt.function;case"bigint":return xt.bigint;case"symbol":return xt.symbol;case"object":return Array.isArray(e)?xt.array:e===null?xt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?xt.promise:typeof Map<"u"&&e instanceof Map?xt.map:typeof Set<"u"&&e instanceof Set?xt.set:typeof Date<"u"&&e instanceof Date?xt.date:xt.object;default:return xt.unknown}},tt=Hr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Uc extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),n}static assert(t){if(!(t instanceof Uc))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Hr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];r[s]=r[s]||[],r[s].push(t(i))}else n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Uc.create=e=>new Uc(e);const uC=(e,t)=>{let r;switch(e.code){case tt.invalid_type:e.received===xt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case tt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Hr.jsonStringifyReplacer)}`;break;case tt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Hr.joinValues(e.keys,", ")}`;break;case tt.invalid_union:r="Invalid input";break;case tt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Hr.joinValues(e.options)}`;break;case tt.invalid_enum_value:r=`Invalid enum value. Expected ${Hr.joinValues(e.options)}, received '${e.received}'`;break;case tt.invalid_arguments:r="Invalid function arguments";break;case tt.invalid_return_type:r="Invalid function return type";break;case tt.invalid_date:r="Invalid date";break;case tt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Hr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case tt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case tt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case tt.custom:r="Invalid input";break;case tt.invalid_intersection_types:r="Intersection results could not be merged";break;case tt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case tt.not_finite:r="Number must be finite";break;default:r=t.defaultError,Hr.assertNever(e)}return{message:r}};let roe=uC;function noe(){return roe}const ioe=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...i,path:s,message:l}};function at(e,t){const r=noe(),n=ioe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===uC?void 0:uC].filter(i=>!!i)});e.common.issues.push(n)}class Ta{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return sr;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const s=await i.key,o=await i.value;n.push({key:s,value:o})}return Ta.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return sr;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:t.value,value:n}}}const sr=Object.freeze({status:"aborted"}),Wv=e=>({status:"dirty",value:e}),go=e=>({status:"valid",value:e}),VL=e=>e.status==="aborted",GL=e=>e.status==="dirty",Ap=e=>e.status==="valid",Tw=e=>typeof Promise<"u"&&e instanceof Promise;var St;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(St||(St={}));class jd{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const KL=(e,t)=>{if(Ap(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Uc(e.common.issues);return this._error=r,this._error}}};function br(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:i}}class Ur{get description(){return this._def.description}_getType(t){return Lu(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Lu(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ta,ctx:{common:t.parent.common,data:t.data,parsedType:Lu(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Tw(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Lu(t)},i=this._parseSync({data:t,path:n.path,parent:n});return KL(n,i)}"~validate"(t){var n,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Lu(t)};if(!this["~standard"].async)try{const s=this._parseSync({data:t,path:[],parent:r});return Ap(s)?{value:s.value}:{issues:r.common.issues}}catch(s){(i=(n=s==null?void 0:s.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(s=>Ap(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Lu(t)},i=this._parse({data:t,path:n.path,parent:n}),s=await(Tw(i)?i:Promise.resolve(i));return KL(n,s)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=t(i),l=()=>s.addIssue({code:tt.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new kp({schema:this,typeName:ar.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return dd.create(this,this._def)}nullable(){return Ep.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pl.create(this)}promise(){return Dw.create(this,this._def)}or(t){return Rw.create([this,t],this._def)}and(t){return Iw.create(this,t,this._def)}transform(t){return new kp({...br(this._def),schema:this,typeName:ar.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new fC({...br(this._def),innerType:this,defaultValue:r,typeName:ar.ZodDefault})}brand(){return new Coe({typeName:ar.ZodBranded,type:this,...br(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new hC({...br(this._def),innerType:this,catchValue:r,typeName:ar.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return J4.create(this,t)}readonly(){return mC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const soe=/^c[^\s-]{8,}$/i,aoe=/^[0-9a-z]+$/,ooe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,loe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,coe=/^[a-z0-9_-]{21}$/i,uoe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,doe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,foe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hoe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wN;const moe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,poe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,goe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,voe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,yoe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xoe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,W9="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",boe=new RegExp(`^${W9}$`);function H9(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function woe(e){return new RegExp(`^${H9(e)}$`)}function _oe(e){let t=`${W9}T${H9(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function joe(e,t){return!!((t==="v4"||!t)&&moe.test(e)||(t==="v6"||!t)&&goe.test(e))}function Noe(e,t){if(!uoe.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function Soe(e,t){return!!((t==="v4"||!t)&&poe.test(e)||(t==="v6"||!t)&&voe.test(e))}class Yu extends Ur{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==xt.string){const s=this._getOrReturnCtx(t);return at(s,{code:tt.invalid_type,expected:xt.string,received:s.parsedType}),sr}const n=new Ta;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),at(i,{code:tt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),at(i,{code:tt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=t.data.length>s.value,l=t.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?at(i,{code:tt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&at(i,{code:tt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")foe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"email",code:tt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")wN||(wN=new RegExp(hoe,"u")),wN.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"emoji",code:tt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")loe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"uuid",code:tt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")coe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"nanoid",code:tt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")soe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"cuid",code:tt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")aoe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"cuid2",code:tt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")ooe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"ulid",code:tt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),at(i,{validation:"url",code:tt.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"regex",code:tt.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),at(i,{code:tt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),at(i,{code:tt.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),at(i,{code:tt.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?_oe(s).test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{code:tt.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?boe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{code:tt.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?woe(s).test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{code:tt.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?doe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"duration",code:tt.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?joe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"ip",code:tt.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?Noe(t.data,s.alg)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"jwt",code:tt.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?Soe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"cidr",code:tt.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?yoe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"base64",code:tt.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?xoe.test(t.data)||(i=this._getOrReturnCtx(t,i),at(i,{validation:"base64url",code:tt.invalid_string,message:s.message}),n.dirty()):Hr.assertNever(s);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:tt.invalid_string,...St.errToObj(n)})}_addCheck(t){return new Yu({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...St.errToObj(t)})}url(t){return this._addCheck({kind:"url",...St.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...St.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...St.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...St.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...St.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...St.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...St.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...St.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...St.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...St.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...St.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...St.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...St.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...St.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...St.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...St.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...St.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...St.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...St.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...St.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...St.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...St.errToObj(r)})}nonempty(t){return this.min(1,St.errToObj(t))}trim(){return new Yu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Yu.create=e=>new Yu({checks:[],typeName:ar.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...br(e)});function Aoe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,s=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return s%o/10**i}class ix extends Ur{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==xt.number){const s=this._getOrReturnCtx(t);return at(s,{code:tt.invalid_type,expected:xt.number,received:s.parsedType}),sr}let n;const i=new Ta;for(const s of this._def.checks)s.kind==="int"?Hr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),at(n,{code:tt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),at(n,{code:tt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),at(n,{code:tt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Aoe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),at(n,{code:tt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),at(n,{code:tt.not_finite,message:s.message}),i.dirty()):Hr.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,St.toString(r))}gt(t,r){return this.setLimit("min",t,!1,St.toString(r))}lte(t,r){return this.setLimit("max",t,!0,St.toString(r))}lt(t,r){return this.setLimit("max",t,!1,St.toString(r))}setLimit(t,r,n,i){return new ix({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:St.toString(i)}]})}_addCheck(t){return new ix({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:St.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:St.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:St.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:St.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:St.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:St.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:St.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:St.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:St.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Hr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}ix.create=e=>new ix({checks:[],typeName:ar.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...br(e)});class sx extends Ur{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==xt.bigint)return this._getInvalidInput(t);let n;const i=new Ta;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),at(n,{code:tt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),at(n,{code:tt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),at(n,{code:tt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Hr.assertNever(s);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return at(r,{code:tt.invalid_type,expected:xt.bigint,received:r.parsedType}),sr}gte(t,r){return this.setLimit("min",t,!0,St.toString(r))}gt(t,r){return this.setLimit("min",t,!1,St.toString(r))}lte(t,r){return this.setLimit("max",t,!0,St.toString(r))}lt(t,r){return this.setLimit("max",t,!1,St.toString(r))}setLimit(t,r,n,i){return new sx({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:St.toString(i)}]})}_addCheck(t){return new sx({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:St.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:St.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:St.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:St.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:St.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}sx.create=e=>new sx({checks:[],typeName:ar.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...br(e)});class YL extends Ur{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==xt.boolean){const n=this._getOrReturnCtx(t);return at(n,{code:tt.invalid_type,expected:xt.boolean,received:n.parsedType}),sr}return go(t.data)}}YL.create=e=>new YL({typeName:ar.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...br(e)});class Lw extends Ur{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==xt.date){const s=this._getOrReturnCtx(t);return at(s,{code:tt.invalid_type,expected:xt.date,received:s.parsedType}),sr}if(Number.isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return at(s,{code:tt.invalid_date}),sr}const n=new Ta;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),at(i,{code:tt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),at(i,{code:tt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Hr.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Lw({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:St.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:St.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Lw.create=e=>new Lw({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ar.ZodDate,...br(e)});class XL extends Ur{_parse(t){if(this._getType(t)!==xt.symbol){const n=this._getOrReturnCtx(t);return at(n,{code:tt.invalid_type,expected:xt.symbol,received:n.parsedType}),sr}return go(t.data)}}XL.create=e=>new XL({typeName:ar.ZodSymbol,...br(e)});class ZL extends Ur{_parse(t){if(this._getType(t)!==xt.undefined){const n=this._getOrReturnCtx(t);return at(n,{code:tt.invalid_type,expected:xt.undefined,received:n.parsedType}),sr}return go(t.data)}}ZL.create=e=>new ZL({typeName:ar.ZodUndefined,...br(e)});class JL extends Ur{_parse(t){if(this._getType(t)!==xt.null){const n=this._getOrReturnCtx(t);return at(n,{code:tt.invalid_type,expected:xt.null,received:n.parsedType}),sr}return go(t.data)}}JL.create=e=>new JL({typeName:ar.ZodNull,...br(e)});class QL extends Ur{constructor(){super(...arguments),this._any=!0}_parse(t){return go(t.data)}}QL.create=e=>new QL({typeName:ar.ZodAny,...br(e)});class eR extends Ur{constructor(){super(...arguments),this._unknown=!0}_parse(t){return go(t.data)}}eR.create=e=>new eR({typeName:ar.ZodUnknown,...br(e)});class Nd extends Ur{_parse(t){const r=this._getOrReturnCtx(t);return at(r,{code:tt.invalid_type,expected:xt.never,received:r.parsedType}),sr}}Nd.create=e=>new Nd({typeName:ar.ZodNever,...br(e)});class tR extends Ur{_parse(t){if(this._getType(t)!==xt.undefined){const n=this._getOrReturnCtx(t);return at(n,{code:tt.invalid_type,expected:xt.void,received:n.parsedType}),sr}return go(t.data)}}tR.create=e=>new tR({typeName:ar.ZodVoid,...br(e)});class Pl extends Ur{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==xt.array)return at(r,{code:tt.invalid_type,expected:xt.array,received:r.parsedType}),sr;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(o||l)&&(at(r,{code:o?tt.too_big:tt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(at(r,{code:tt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(at(r,{code:tt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>i.type._parseAsync(new jd(r,o,r.path,l)))).then(o=>Ta.mergeArray(n,o));const s=[...r.data].map((o,l)=>i.type._parseSync(new jd(r,o,r.path,l)));return Ta.mergeArray(n,s)}get element(){return this._def.type}min(t,r){return new Pl({...this._def,minLength:{value:t,message:St.toString(r)}})}max(t,r){return new Pl({...this._def,maxLength:{value:t,message:St.toString(r)}})}length(t,r){return new Pl({...this._def,exactLength:{value:t,message:St.toString(r)}})}nonempty(t){return this.min(1,t)}}Pl.create=(e,t)=>new Pl({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ar.ZodArray,...br(t)});function dm(e){if(e instanceof ri){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=dd.create(dm(n))}return new ri({...e._def,shape:()=>t})}else return e instanceof Pl?new Pl({...e._def,type:dm(e.element)}):e instanceof dd?dd.create(dm(e.unwrap())):e instanceof Ep?Ep.create(dm(e.unwrap())):e instanceof nh?nh.create(e.items.map(t=>dm(t))):e}class ri extends Ur{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Hr.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==xt.object){const u=this._getOrReturnCtx(t);return at(u,{code:tt.invalid_type,expected:xt.object,received:u.parsedType}),sr}const{status:n,ctx:i}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Nd&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new jd(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Nd){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(at(i,{code:tt.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new jd(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,m=await d.value;u.push({key:f,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>Ta.mergeObjectSync(n,u)):Ta.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return St.errToObj,new ri({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:St.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new ri({...this._def,unknownKeys:"strip"})}passthrough(){return new ri({...this._def,unknownKeys:"passthrough"})}extend(t){return new ri({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ri({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ar.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new ri({...this._def,catchall:t})}pick(t){const r={};for(const n of Hr.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new ri({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Hr.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new ri({...this._def,shape:()=>r})}deepPartial(){return dm(this)}partial(t){const r={};for(const n of Hr.objectKeys(this.shape)){const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}return new ri({...this._def,shape:()=>r})}required(t){const r={};for(const n of Hr.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof dd;)s=s._def.innerType;r[n]=s}return new ri({...this._def,shape:()=>r})}keyof(){return V9(Hr.objectKeys(this.shape))}}ri.create=(e,t)=>new ri({shape:()=>e,unknownKeys:"strip",catchall:Nd.create(),typeName:ar.ZodObject,...br(t)});ri.strictCreate=(e,t)=>new ri({shape:()=>e,unknownKeys:"strict",catchall:Nd.create(),typeName:ar.ZodObject,...br(t)});ri.lazycreate=(e,t)=>new ri({shape:e,unknownKeys:"strip",catchall:Nd.create(),typeName:ar.ZodObject,...br(t)});class Rw extends Ur{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new Uc(l.ctx.common.issues));return at(r,{code:tt.invalid_union,unionErrors:o}),sr}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(c=>new Uc(c));return at(r,{code:tt.invalid_union,unionErrors:l}),sr}}get options(){return this._def.options}}Rw.create=(e,t)=>new Rw({options:e,typeName:ar.ZodUnion,...br(t)});function dC(e,t){const r=Lu(e),n=Lu(t);if(e===t)return{valid:!0,data:e};if(r===xt.object&&n===xt.object){const i=Hr.objectKeys(t),s=Hr.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of s){const c=dC(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===xt.array&&n===xt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const o=e[s],l=t[s],c=dC(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===xt.date&&n===xt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Iw extends Ur{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(s,o)=>{if(VL(s)||VL(o))return sr;const l=dC(s.value,o.value);return l.valid?((GL(s)||GL(o))&&r.dirty(),{status:r.value,value:l.data}):(at(n,{code:tt.invalid_intersection_types}),sr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Iw.create=(e,t,r)=>new Iw({left:e,right:t,typeName:ar.ZodIntersection,...br(r)});class nh extends Ur{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==xt.array)return at(n,{code:tt.invalid_type,expected:xt.array,received:n.parsedType}),sr;if(n.data.length<this._def.items.length)return at(n,{code:tt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),sr;!this._def.rest&&n.data.length>this._def.items.length&&(at(n,{code:tt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new jd(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Ta.mergeArray(r,o)):Ta.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new nh({...this._def,rest:t})}}nh.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nh({items:e,typeName:ar.ZodTuple,rest:null,...br(t)})};class rR extends Ur{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==xt.map)return at(n,{code:tt.invalid_type,expected:xt.map,received:n.parsedType}),sr;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:i._parse(new jd(n,l,n.path,[u,"key"])),value:s._parse(new jd(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return sr;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return sr;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}rR.create=(e,t,r)=>new rR({valueType:t,keyType:e,typeName:ar.ZodMap,...br(r)});class ax extends Ur{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==xt.set)return at(n,{code:tt.invalid_type,expected:xt.set,received:n.parsedType}),sr;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(at(n,{code:tt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(at(n,{code:tt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return sr;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>s._parse(new jd(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new ax({...this._def,minSize:{value:t,message:St.toString(r)}})}max(t,r){return new ax({...this._def,maxSize:{value:t,message:St.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}ax.create=(e,t)=>new ax({valueType:e,minSize:null,maxSize:null,typeName:ar.ZodSet,...br(t)});class nR extends Ur{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}nR.create=(e,t)=>new nR({getter:e,typeName:ar.ZodLazy,...br(t)});class iR extends Ur{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return at(r,{received:r.data,code:tt.invalid_literal,expected:this._def.value}),sr}return{status:"valid",value:t.data}}get value(){return this._def.value}}iR.create=(e,t)=>new iR({value:e,typeName:ar.ZodLiteral,...br(t)});function V9(e,t){return new Cp({values:e,typeName:ar.ZodEnum,...br(t)})}class Cp extends Ur{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return at(r,{expected:Hr.joinValues(n),received:r.parsedType,code:tt.invalid_type}),sr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return at(r,{received:r.data,code:tt.invalid_enum_value,options:n}),sr}return go(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Cp.create(t,{...this._def,...r})}exclude(t,r=this._def){return Cp.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Cp.create=V9;class sR extends Ur{_parse(t){const r=Hr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==xt.string&&n.parsedType!==xt.number){const i=Hr.objectValues(r);return at(n,{expected:Hr.joinValues(i),received:n.parsedType,code:tt.invalid_type}),sr}if(this._cache||(this._cache=new Set(Hr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Hr.objectValues(r);return at(n,{received:n.data,code:tt.invalid_enum_value,options:i}),sr}return go(t.data)}get enum(){return this._def.values}}sR.create=(e,t)=>new sR({values:e,typeName:ar.ZodNativeEnum,...br(t)});class Dw extends Ur{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==xt.promise&&r.common.async===!1)return at(r,{code:tt.invalid_type,expected:xt.promise,received:r.parsedType}),sr;const n=r.parsedType===xt.promise?r.data:Promise.resolve(r.data);return go(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Dw.create=(e,t)=>new Dw({type:e,typeName:ar.ZodPromise,...br(t)});class kp extends Ur{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ar.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:o=>{at(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(n.data,s);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return sr;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?sr:c.status==="dirty"||r.value==="dirty"?Wv(c.value):c});{if(r.value==="aborted")return sr;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?sr:l.status==="dirty"||r.value==="dirty"?Wv(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?sr:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?sr:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ap(o))return sr;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Ap(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:r.value,value:l})):sr);Hr.assertNever(i)}}kp.create=(e,t,r)=>new kp({schema:e,typeName:ar.ZodEffects,effect:t,...br(r)});kp.createWithPreprocess=(e,t,r)=>new kp({schema:t,effect:{type:"preprocess",transform:e},typeName:ar.ZodEffects,...br(r)});class dd extends Ur{_parse(t){return this._getType(t)===xt.undefined?go(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}dd.create=(e,t)=>new dd({innerType:e,typeName:ar.ZodOptional,...br(t)});class Ep extends Ur{_parse(t){return this._getType(t)===xt.null?go(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ep.create=(e,t)=>new Ep({innerType:e,typeName:ar.ZodNullable,...br(t)});class fC extends Ur{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===xt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}fC.create=(e,t)=>new fC({innerType:e,typeName:ar.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...br(t)});class hC extends Ur{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Tw(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Uc(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Uc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}hC.create=(e,t)=>new hC({innerType:e,typeName:ar.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...br(t)});class aR extends Ur{_parse(t){if(this._getType(t)!==xt.nan){const n=this._getOrReturnCtx(t);return at(n,{code:tt.invalid_type,expected:xt.nan,received:n.parsedType}),sr}return{status:"valid",value:t.data}}}aR.create=e=>new aR({typeName:ar.ZodNaN,...br(e)});class Coe extends Ur{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class J4 extends Ur{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?sr:s.status==="dirty"?(r.dirty(),Wv(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?sr:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new J4({in:t,out:r,typeName:ar.ZodPipeline})}}class mC extends Ur{_parse(t){const r=this._def.innerType._parse(t),n=i=>(Ap(i)&&(i.value=Object.freeze(i.value)),i);return Tw(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}mC.create=(e,t)=>new mC({innerType:e,typeName:ar.ZodReadonly,...br(t)});ri.lazycreate;var ar;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ar||(ar={}));const cy=Yu.create;Nd.create;Pl.create;const koe=ri.create;ri.strictCreate;Rw.create;Iw.create;nh.create;Cp.create;Dw.create;dd.create;Ep.create;const G9=koe({email:cy().email("Adresse email invalide"),password:cy().min(6,"Le mot de passe doit contenir au moins 6 caractres")}),Eoe=G9.extend({firstName:cy().min(1,"Le prnom est requis"),lastName:cy().min(1,"Le nom est requis"),confirmPassword:cy()}).refine(e=>e.password===e.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]});function Poe(){const[e,t]=_.useState(!0),[r,n]=_.useState(!1),[i,s]=_.useState(""),[o,l]=_.useState(""),[c,u]=_.useState(""),[d,f]=_.useState(""),[m,h]=_.useState(""),[v,p]=_.useState({}),{signIn:g,signUp:y,user:b}=yr(),x=yi(),{toast:j}=qr();if(b)return x("/dashboard",{replace:!0}),null;const N=async C=>{C.preventDefault(),p({}),n(!0);try{if(e){const E=G9.safeParse({email:i,password:o});if(!E.success){const L={};E.error.errors.forEach(k=>{k.path[0]&&(L[k.path[0]]=k.message)}),p(L),n(!1);return}const{error:O}=await g(i,o);O?O.message.includes("Invalid login credentials")?j({title:"chec de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"}):j({title:"Erreur",description:O.message,variant:"destructive"}):x("/dashboard",{replace:!0})}else{const E=Eoe.safeParse({email:i,password:o,confirmPassword:c,firstName:d,lastName:m});if(!E.success){const L={};E.error.errors.forEach(k=>{k.path[0]&&(L[k.path[0]]=k.message)}),p(L),n(!1);return}const{error:O}=await y(i,o,d,m);O?O.message.includes("already registered")?j({title:"Compte existant",description:"Un compte avec cet email existe dj. Essayez de vous connecter.",variant:"destructive"}):j({title:"Erreur",description:O.message,variant:"destructive"}):(j({title:"Compte cr",description:"Votre compte a t cr avec succs. Vous pouvez maintenant vous connecter."}),t(!0))}}catch{j({title:"Erreur",description:"Une erreur inattendue s'est produite.",variant:"destructive"})}finally{n(!1)}},A=[{icon:zs,title:"Gestion des besoins",description:"Centralisez vos demandes internes"},{icon:Uo,title:"Suivi des achats",description:"Pilotez vos processus d'achat"},{icon:fg,title:"Collaboration",description:"Travaillez en quipe efficacement"},{icon:Ya,title:"Scurit",description:"Vos donnes protges"}];return a.jsxs("div",{className:"flex min-h-screen",children:[a.jsxs("div",{className:"relative hidden w-1/2 lg:flex lg:flex-col lg:justify-between bg-secondary overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary via-secondary to-primary/20"}),a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsxs("svg",{className:"h-full w-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[a.jsx("defs",{children:a.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:a.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-primary-foreground"})})}),a.jsx("rect",{width:"100",height:"100",fill:"url(#grid)"})]})}),a.jsx("div",{className:"absolute -top-20 -right-20 h-80 w-80 rounded-full bg-primary/20 blur-3xl"}),a.jsx("div",{className:"absolute -bottom-32 -left-32 h-96 w-96 rounded-full bg-primary/15 blur-3xl"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col h-full p-12",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:"/logo-kimbo.png",alt:"KIMBO AFRICA",className:"h-14 w-auto"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-primary-foreground",children:"KPM SYSTEME"}),a.jsx("p",{className:"text-sm text-primary-foreground/70",children:"KIMBO AFRICA SA"})]})]}),a.jsxs("div",{className:"flex flex-1 flex-col justify-center",children:[a.jsxs("h1",{className:"mb-4 font-serif text-4xl font-bold leading-tight text-primary-foreground",children:["Votre plateforme de gestion"," ",a.jsx("span",{className:"text-primary",children:"intelligente"})]}),a.jsx("p",{className:"mb-12 max-w-md text-lg text-primary-foreground/80",children:"Simplifiez la gestion de vos besoins internes, demandes d'achat et bons de livraison avec KPM Systme."}),a.jsx("div",{className:"grid grid-cols-2 gap-6",children:A.map((C,E)=>a.jsxs("div",{className:"group flex items-start gap-4 rounded-xl bg-primary-foreground/5 p-4 backdrop-blur-sm transition-all hover:bg-primary-foreground/10",children:[a.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/20",children:a.jsx(C.icon,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-primary-foreground",children:C.title}),a.jsx("p",{className:"text-sm text-primary-foreground/60",children:C.description})]})]},E))})]}),a.jsxs("div",{className:"text-sm text-primary-foreground/50",children:[" ",new Date().getFullYear()," KIMBO AFRICA SA. Tous droits rservs."]})]})]}),a.jsx("div",{className:"flex w-full flex-col items-center justify-center bg-background p-8 lg:w-1/2",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"mb-8 text-center lg:hidden",children:[a.jsx("img",{src:"/logo-kimbo.png",alt:"KIMBO AFRICA",className:"mx-auto mb-4 h-16 w-auto"}),a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"KPM SYSTEME"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"KIMBO AFRICA SA"})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"font-serif text-3xl font-bold text-foreground",children:e?"Bienvenue":"Crer un compte"}),a.jsx("p",{className:"mt-2 text-muted-foreground",children:e?"Connectez-vous pour accder  votre espace de travail":"Crez votre compte pour commencer"})]}),a.jsxs("form",{onSubmit:N,className:"space-y-5",children:[!e&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"firstName",children:"Prnom"}),a.jsx(De,{id:"firstName",value:d,onChange:C=>f(C.target.value),placeholder:"Prnom",disabled:r,className:"h-12"}),v.firstName&&a.jsx("p",{className:"text-sm text-destructive",children:v.firstName})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"lastName",children:"Nom"}),a.jsx(De,{id:"lastName",value:m,onChange:C=>h(C.target.value),placeholder:"Nom",disabled:r,className:"h-12"}),v.lastName&&a.jsx("p",{className:"text-sm text-destructive",children:v.lastName})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"email",children:"Adresse email"}),a.jsx(De,{id:"email",type:"email",value:i,onChange:C=>s(C.target.value),placeholder:"votre@email.com",disabled:r,className:"h-12"}),v.email&&a.jsx("p",{className:"text-sm text-destructive",children:v.email})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"password",children:"Mot de passe"}),a.jsx(De,{id:"password",type:"password",value:o,onChange:C=>l(C.target.value),placeholder:"",disabled:r,className:"h-12"}),v.password&&a.jsx("p",{className:"text-sm text-destructive",children:v.password})]}),!e&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),a.jsx(De,{id:"confirmPassword",type:"password",value:c,onChange:C=>u(C.target.value),placeholder:"",disabled:r,className:"h-12"}),v.confirmPassword&&a.jsx("p",{className:"text-sm text-destructive",children:v.confirmPassword})]}),a.jsx(de,{type:"submit",className:"h-12 w-full text-base font-medium",disabled:r,children:r?"Chargement...":e?"Se connecter":"Crer le compte"})]}),a.jsxs("div",{className:"mt-10 text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:"Besoin d'aide ? Contactez-nous"}),a.jsx("p",{className:"mt-1 font-medium text-foreground",children:"infos@kimboafricasa.com"})]})]})})]})}function Ooe(){const{user:e,isAdmin:t,roles:r}=yr(),[n,i]=_.useState([]),[s,o]=_.useState([]),[l,c]=_.useState(!0),u=_.useCallback(async()=>{if(!e){i([]),o([]),c(!1);return}try{const{data:v,error:p}=await fe.rpc("get_user_permissions",{_user_id:e.id});if(p)throw p;i(v||[]);const g=[...new Set((v||[]).filter(y=>y.permission_code.endsWith(".voir")).map(y=>y.module))];o(g)}catch(v){console.error("Error fetching permissions:",v),i([]),o([])}finally{c(!1)}},[e]);_.useEffect(()=>{u()},[u]);const d=_.useCallback(v=>t?!0:n.some(p=>p.permission_code===v),[n,t]),f=_.useCallback(v=>t?!0:v.some(p=>n.some(g=>g.permission_code===p)),[n,t]),m=_.useCallback(v=>t?!0:v.every(p=>n.some(g=>g.permission_code===p)),[n,t]),h=_.useCallback(v=>t?!0:s.includes(v),[s,t]);return{permissions:n,modules:s,isLoading:l,hasPermission:d,hasAnyPermission:f,hasAllPermissions:m,canViewModule:h,refreshPermissions:u}}const oR={dashboard:"Tableau de bord",administration:"Administration",besoins:"Besoins internes",da:"Demandes d'achat",bl:"Bons de livraison",fournisseurs:"Fournisseurs",stock:"Stock",comptabilite:"Comptabilit",projets:"Projets",notes_frais:"Notes de frais",caisse:"Caisse",audit:"Journal d'audit",rapports:"Rapports"},Toe=[{label:"Tableau de bord",href:"/dashboard",icon:zQ,module:"dashboard"},{label:"Administration",href:"/admin",icon:_p,module:"administration",children:[{label:"Utilisateurs",href:"/admin/users",icon:fg,permission:"administration.gerer_users"},{label:"Dpartements",href:"/admin/departments",icon:zs,permission:"administration.gerer_departements"},{label:"Rles & Permissions",href:"/admin/roles",icon:_p,permission:"administration.gerer_roles"},{label:"Units de mesure",href:"/admin/units",icon:yB,permission:"administration.gerer_unites"},{label:"Modes paiement",href:"/admin/payment-categories",icon:si,permission:"administration.gerer_modes_paiement"},{label:"Plan comptable",href:"/admin/comptes-comptables",icon:Mc,permission:"administration.gerer_plan_comptable"},{label:"Paramtres",href:"/admin/settings",icon:YQ,permission:"administration.gerer_parametres"}]},{label:"Journal d'audit",href:"/audit",icon:jn,module:"audit"},{label:"Rapports",href:"/reports",icon:xd,module:"rapports"}],Loe=[{label:"Besoins internes",href:"/besoins",icon:MQ,module:"besoins"},{label:"Demandes d'achat",href:"/demandes-achat",icon:jn,module:"da"},{label:"Bons de livraison",href:"/bons-livraison",icon:Tn,module:"bl"},{label:"Fournisseurs",href:"/fournisseurs",icon:zs,module:"fournisseurs"},{label:"Comptabilit",href:"/comptabilite",icon:si,module:"comptabilite"},{label:"Stock",href:"/stock",icon:Tn,module:"stock",children:[{label:"Articles",href:"/stock",icon:Tn},{label:"Mouvements",href:"/stock/mouvements",icon:xB},{label:"Catgories",href:"/stock/categories",icon:zy}]},{label:"Projets / Chantiers",href:"/projets",icon:zy,module:"projets"},{label:"Notes de frais",href:"/notes-frais",icon:__,module:"notes_frais"},{label:"Caisse",href:"/caisse",icon:si,module:"caisse"}];function Roe(){const{profile:e,signOut:t,isAdmin:r}=yr(),{canViewModule:n,hasPermission:i,isLoading:s}=Ooe(),o=Od(),[l,c]=_.useState(!1),[u,d]=_.useState(["/admin"]),f=g=>r?!0:g.permission?i(g.permission):g.module?n(g.module):!0,m=g=>{d(y=>y.includes(g)?y.filter(b=>b!==g):[...y,g])},h=g=>o.pathname===g||o.pathname.startsWith(g+"/"),v=(g,y=0)=>{if(!f(g))return null;const b=g.children&&g.children.length>0,x=b?g.children.filter(A=>f(A)):[],j=u.includes(g.href),N=h(g.href);return b&&x.length===0?null:a.jsxs("div",{children:[b?a.jsxs("button",{onClick:()=>m(g.href),className:rt("flex w-full items-center justify-between gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",N?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground hover:bg-sidebar-accent/50"),style:{paddingLeft:`${12+y*12}px`},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(g.icon,{className:"h-4 w-4"}),a.jsx("span",{children:g.label})]}),a.jsx(w4,{className:rt("h-4 w-4 transition-transform",j&&"rotate-180")})]}):a.jsxs($t,{to:g.href,onClick:()=>c(!1),className:rt("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",N?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground hover:bg-sidebar-accent/50"),style:{paddingLeft:`${12+y*12}px`},children:[a.jsx(g.icon,{className:"h-4 w-4"}),a.jsx("span",{children:g.label})]}),b&&j&&a.jsx("div",{className:"mt-1 space-y-1",children:x.map(A=>v(A,y+1))})]},g.href)},p=Loe.filter(g=>f(g));return a.jsxs(a.Fragment,{children:[a.jsx(de,{variant:"ghost",size:"icon",className:"fixed left-4 top-4 z-50 lg:hidden",onClick:()=>c(!l),children:l?a.jsx(hg,{className:"h-5 w-5"}):a.jsx(HQ,{className:"h-5 w-5"})}),l&&a.jsx("div",{className:"fixed inset-0 z-40 bg-foreground/20 backdrop-blur-sm lg:hidden",onClick:()=>c(!1)}),a.jsxs("aside",{className:rt("fixed inset-y-0 left-0 z-40 flex w-64 flex-col bg-sidebar transition-transform lg:translate-x-0",l?"translate-x-0":"-translate-x-full"),children:[a.jsxs("div",{className:"flex h-16 items-center gap-3 border-b border-sidebar-border px-4",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-sidebar-primary",children:a.jsx("span",{className:"text-lg font-bold text-sidebar-primary-foreground",children:"K"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-lg font-bold text-sidebar-foreground",children:"KPM SYSTEME"}),a.jsx("p",{className:"text-xs text-sidebar-muted",children:"KIMBO AFRICA SA"})]})]}),a.jsxs("nav",{className:"flex-1 space-y-1 overflow-y-auto p-4",children:[Toe.map(g=>v(g)),p.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-4 mb-2 px-3",children:a.jsx("p",{className:"text-xs font-medium uppercase tracking-wider text-sidebar-muted",children:"Modules mtier"})}),p.map(g=>v(g))]})]}),a.jsxs("div",{className:"border-t border-sidebar-border p-4",children:[a.jsxs($t,{to:"/profile",onClick:()=>c(!1),className:"mb-3 block rounded-md px-3 py-2 hover:bg-sidebar-accent/50 transition-colors",children:[a.jsxs("p",{className:"text-sm font-medium text-sidebar-foreground",children:[e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]}),a.jsx("p",{className:"text-xs text-sidebar-muted",children:e==null?void 0:e.email}),a.jsx("p",{className:"text-xs text-primary mt-1",children:"Voir mon profil "})]}),a.jsxs(de,{variant:"ghost",className:"w-full justify-start gap-3 text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",onClick:t,children:[a.jsx(WQ,{className:"h-4 w-4"}),"Dconnexion"]})]})]})]})}var _N=0;function Q4(){_.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??lR()),document.body.insertAdjacentElement("beforeend",e[1]??lR()),_N++,()=>{_N===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),_N--}},[])}function lR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var jN="focusScope.autoFocusOnMount",NN="focusScope.autoFocusOnUnmount",cR={bubbles:!1,cancelable:!0},Ioe="FocusScope",D_=_.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[l,c]=_.useState(null),u=Mi(i),d=Mi(s),f=_.useRef(null),m=vr(t,p=>c(p)),h=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(n){let p=function(x){if(h.paused||!l)return;const j=x.target;l.contains(j)?f.current=j:ku(f.current,{select:!0})},g=function(x){if(h.paused||!l)return;const j=x.relatedTarget;j!==null&&(l.contains(j)||ku(f.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const N of x)N.removedNodes.length>0&&ku(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),b.disconnect()}}},[n,l,h.paused]),_.useEffect(()=>{if(l){dR.add(h);const p=document.activeElement;if(!l.contains(p)){const y=new CustomEvent(jN,cR);l.addEventListener(jN,u),l.dispatchEvent(y),y.defaultPrevented||(Doe(zoe(K9(l)),{select:!0}),document.activeElement===p&&ku(l))}return()=>{l.removeEventListener(jN,u),setTimeout(()=>{const y=new CustomEvent(NN,cR);l.addEventListener(NN,d),l.dispatchEvent(y),y.defaultPrevented||ku(p??document.body,{select:!0}),l.removeEventListener(NN,d),dR.remove(h)},0)}}},[l,u,d,h]);const v=_.useCallback(p=>{if(!r&&!n||h.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(g&&y){const b=p.currentTarget,[x,j]=Moe(b);x&&j?!p.shiftKey&&y===j?(p.preventDefault(),r&&ku(x,{select:!0})):p.shiftKey&&y===x&&(p.preventDefault(),r&&ku(j,{select:!0})):y===b&&p.preventDefault()}},[r,n,h.paused]);return a.jsx(jt.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});D_.displayName=Ioe;function Doe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ku(n,{select:t}),document.activeElement!==r)return}function Moe(e){const t=K9(e),r=uR(t,e),n=uR(t.reverse(),e);return[r,n]}function K9(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function uR(e,t){for(const r of e)if(!$oe(r,{upTo:t}))return r}function $oe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Foe(e){return e instanceof HTMLInputElement&&"select"in e}function ku(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Foe(e)&&t&&e.select()}}var dR=Boe();function Boe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=fR(e,t),e.unshift(t)},remove(t){var r;e=fR(e,t),(r=e[0])==null||r.resume()}}}function fR(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function zoe(e){return e.filter(t=>t.tagName!=="A")}var qoe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xh=new WeakMap,Mb=new WeakMap,$b={},SN=0,Y9=function(e){return e&&(e.host||Y9(e.parentNode))},Uoe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Y9(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Woe=function(e,t,r,n){var i=Uoe(t,Array.isArray(e)?e:[e]);$b[r]||($b[r]=new WeakMap);var s=$b[r],o=[],l=new Set,c=new Set(i),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var h=m.getAttribute(n),v=h!==null&&h!=="false",p=(Xh.get(m)||0)+1,g=(s.get(m)||0)+1;Xh.set(m,p),s.set(m,g),o.push(m),p===1&&v&&Mb.set(m,!0),g===1&&m.setAttribute(r,"true"),v||m.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return d(t),l.clear(),SN++,function(){o.forEach(function(f){var m=Xh.get(f)-1,h=s.get(f)-1;Xh.set(f,m),s.set(f,h),m||(Mb.has(f)||f.removeAttribute(n),Mb.delete(f)),h||f.removeAttribute(r)}),SN--,SN||(Xh=new WeakMap,Xh=new WeakMap,Mb=new WeakMap,$b={})}},eP=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=qoe(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),Woe(n,i,r,"aria-hidden")):function(){return null}},M1="right-scroll-bar-position",$1="width-before-scroll-bar",Hoe="with-scroll-bars-hidden",Voe="--removed-body-scroll-bar-size";function AN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Goe(e,t){var r=_.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var Koe=typeof window<"u"?_.useLayoutEffect:_.useEffect,hR=new WeakMap;function Yoe(e,t){var r=Goe(null,function(n){return e.forEach(function(i){return AN(i,n)})});return Koe(function(){var n=hR.get(r);if(n){var i=new Set(n),s=new Set(e),o=r.current;i.forEach(function(l){s.has(l)||AN(l,null)}),s.forEach(function(l){i.has(l)||AN(l,o)})}hR.set(r,e)},[e]),r}function Xoe(e){return e}function Zoe(e,t){t===void 0&&(t=Xoe);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var o=t(s,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(l){return s(l)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(s),o=r}var c=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return i}function Joe(e){e===void 0&&(e={});var t=Zoe(null);return t.options=vl({async:!0,ssr:!1},e),t}var X9=function(e){var t=e.sideCar,r=bg(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return _.createElement(n,vl({},r))};X9.isSideCarExport=!0;function Qoe(e,t){return e.useMedium(t),X9}var Z9=Joe(),CN=function(){},M_=_.forwardRef(function(e,t){var r=_.useRef(null),n=_.useState({onScrollCapture:CN,onWheelCapture:CN,onTouchMoveCapture:CN}),i=n[0],s=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,h=e.noRelative,v=e.noIsolation,p=e.inert,g=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,x=e.gapMode,j=bg(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,A=Yoe([r,t]),C=vl(vl({},j),i);return _.createElement(_.Fragment,null,d&&_.createElement(N,{sideCar:Z9,removeScrollBar:u,shards:f,noRelative:h,noIsolation:v,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:r,gapMode:x}),o?_.cloneElement(_.Children.only(l),vl(vl({},C),{ref:A})):_.createElement(b,vl({},C,{className:c,ref:A}),l))});M_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};M_.classNames={fullWidth:$1,zeroRight:M1};var ele=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function tle(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ele();return t&&e.setAttribute("nonce",t),e}function rle(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function nle(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ile=function(){var e=0,t=null;return{add:function(r){e==0&&(t=tle())&&(rle(t,r),nle(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sle=function(){var e=ile();return function(t,r){_.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},J9=function(){var e=sle(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},ale={left:0,top:0,right:0,gap:0},kN=function(e){return parseInt(e||"",10)||0},ole=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[kN(r),kN(n),kN(i)]},lle=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ale;var t=ole(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},cle=J9(),Hm="data-scroll-locked",ule=function(e,t,r,n){var i=e.left,s=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Hoe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Hm,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(M1,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat($1,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(M1," .").concat(M1,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat($1," .").concat($1,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Hm,`] {
    `).concat(Voe,": ").concat(l,`px;
  }
`)},mR=function(){var e=parseInt(document.body.getAttribute(Hm)||"0",10);return isFinite(e)?e:0},dle=function(){_.useEffect(function(){return document.body.setAttribute(Hm,(mR()+1).toString()),function(){var e=mR()-1;e<=0?document.body.removeAttribute(Hm):document.body.setAttribute(Hm,e.toString())}},[])},fle=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;dle();var s=_.useMemo(function(){return lle(i)},[i]);return _.createElement(cle,{styles:ule(s,!t,i,r?"":"!important")})},pC=!1;if(typeof window<"u")try{var Fb=Object.defineProperty({},"passive",{get:function(){return pC=!0,!0}});window.addEventListener("test",Fb,Fb),window.removeEventListener("test",Fb,Fb)}catch{pC=!1}var Zh=pC?{passive:!1}:!1,hle=function(e){return e.tagName==="TEXTAREA"},Q9=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!hle(e)&&r[t]==="visible")},mle=function(e){return Q9(e,"overflowY")},ple=function(e){return Q9(e,"overflowX")},pR=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=ez(e,n);if(i){var s=tz(e,n),o=s[1],l=s[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},gle=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},vle=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},ez=function(e,t){return e==="v"?mle(t):ple(t)},tz=function(e,t){return e==="v"?gle(t):vle(t)},yle=function(e,t){return e==="h"&&t==="rtl"?-1:1},xle=function(e,t,r,n,i){var s=yle(e,window.getComputedStyle(t).direction),o=s*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,m=0;do{if(!l)break;var h=tz(e,l),v=h[0],p=h[1],g=h[2],y=p-g-s*v;(v||y)&&ez(e,l)&&(f+=y,m+=v);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(m)<1||!i))&&(u=!0),u},Bb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gR=function(e){return[e.deltaX,e.deltaY]},vR=function(e){return e&&"current"in e?e.current:e},ble=function(e,t){return e[0]===t[0]&&e[1]===t[1]},wle=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_le=0,Jh=[];function jle(e){var t=_.useRef([]),r=_.useRef([0,0]),n=_.useRef(),i=_.useState(_le++)[0],s=_.useState(J9)[0],o=_.useRef(e);_.useEffect(function(){o.current=e},[e]),_.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=xie([e.lockRef.current],(e.shards||[]).map(vR),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=_.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var y=Bb(p),b=r.current,x="deltaX"in p?p.deltaX:b[0]-y[0],j="deltaY"in p?p.deltaY:b[1]-y[1],N,A=p.target,C=Math.abs(x)>Math.abs(j)?"h":"v";if("touches"in p&&C==="h"&&A.type==="range")return!1;var E=pR(C,A);if(!E)return!0;if(E?N=C:(N=C==="v"?"h":"v",E=pR(C,A)),!E)return!1;if(!n.current&&"changedTouches"in p&&(x||j)&&(n.current=N),!N)return!0;var O=n.current||N;return xle(O,g,p,O==="h"?x:j,!0)},[]),c=_.useCallback(function(p){var g=p;if(!(!Jh.length||Jh[Jh.length-1]!==s)){var y="deltaY"in g?gR(g):Bb(g),b=t.current.filter(function(N){return N.name===g.type&&(N.target===g.target||g.target===N.shadowParent)&&ble(N.delta,y)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var x=(o.current.shards||[]).map(vR).filter(Boolean).filter(function(N){return N.contains(g.target)}),j=x.length>0?l(g,x[0]):!o.current.noIsolation;j&&g.cancelable&&g.preventDefault()}}},[]),u=_.useCallback(function(p,g,y,b){var x={name:p,delta:g,target:y,should:b,shadowParent:Nle(y)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(j){return j!==x})},1)},[]),d=_.useCallback(function(p){r.current=Bb(p),n.current=void 0},[]),f=_.useCallback(function(p){u(p.type,gR(p),p.target,l(p,e.lockRef.current))},[]),m=_.useCallback(function(p){u(p.type,Bb(p),p.target,l(p,e.lockRef.current))},[]);_.useEffect(function(){return Jh.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Zh),document.addEventListener("touchmove",c,Zh),document.addEventListener("touchstart",d,Zh),function(){Jh=Jh.filter(function(p){return p!==s}),document.removeEventListener("wheel",c,Zh),document.removeEventListener("touchmove",c,Zh),document.removeEventListener("touchstart",d,Zh)}},[]);var h=e.removeScrollBar,v=e.inert;return _.createElement(_.Fragment,null,v?_.createElement(s,{styles:wle(i)}):null,h?_.createElement(fle,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Nle(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Sle=Qoe(Z9,jle);var $_=_.forwardRef(function(e,t){return _.createElement(M_,vl({},e,{ref:t,sideCar:Sle}))});$_.classNames=M_.classNames;var F_="Popover",[rz,u7e]=Ia(F_,[vg]),h0=vg(),[Ale,Td]=rz(F_),nz=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,l=h0(t),c=_.useRef(null),[u,d]=_.useState(!1),[f,m]=Dc({prop:n,defaultProp:i??!1,onChange:s,caller:F_});return a.jsx(ZB,{...l,children:a.jsx(Ale,{scope:t,contentId:$s(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:_.useCallback(()=>m(h=>!h),[m]),hasCustomAnchor:u,onCustomAnchorAdd:_.useCallback(()=>d(!0),[]),onCustomAnchorRemove:_.useCallback(()=>d(!1),[]),modal:o,children:r})})};nz.displayName=F_;var iz="PopoverAnchor",Cle=_.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Td(iz,r),s=h0(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return _.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(k_,{...s,...n,ref:t})});Cle.displayName=iz;var sz="PopoverTrigger",az=_.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Td(sz,r),s=h0(r),o=vr(t,i.triggerRef),l=a.jsx(jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":dz(i.open),...n,ref:o,onClick:lt(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:a.jsx(k_,{asChild:!0,...s,children:l})});az.displayName=sz;var tP="PopoverPortal",[kle,Ele]=rz(tP,{forceMount:void 0}),oz=e=>{const{__scopePopover:t,forceMount:r,children:n,container:i}=e,s=Td(tP,t);return a.jsx(kle,{scope:t,forceMount:r,children:a.jsx(ta,{present:r||s.open,children:a.jsx(l0,{asChild:!0,container:i,children:n})})})};oz.displayName=tP;var Pp="PopoverContent",lz=_.forwardRef((e,t)=>{const r=Ele(Pp,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,s=Td(Pp,e.__scopePopover);return a.jsx(ta,{present:n||s.open,children:s.modal?a.jsx(Ole,{...i,ref:t}):a.jsx(Tle,{...i,ref:t})})});lz.displayName=Pp;var Ple=eh("PopoverContent.RemoveScroll"),Ole=_.forwardRef((e,t)=>{const r=Td(Pp,e.__scopePopover),n=_.useRef(null),i=vr(t,n),s=_.useRef(!1);return _.useEffect(()=>{const o=n.current;if(o)return eP(o)},[]),a.jsx($_,{as:Ple,allowPinchZoom:!0,children:a.jsx(cz,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lt(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:lt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:lt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Tle=_.forwardRef((e,t)=>{const r=Td(Pp,e.__scopePopover),n=_.useRef(!1),i=_.useRef(!1);return a.jsx(cz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),cz=_.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,m=Td(Pp,r),h=h0(r);return Q4(),a.jsx(D_,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:a.jsx(dg,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:a.jsx(M4,{"data-state":dz(m.open),role:"dialog",id:m.contentId,...h,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),uz="PopoverClose",Lle=_.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Td(uz,r);return a.jsx(jt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,()=>i.onOpenChange(!1))})});Lle.displayName=uz;var Rle="PopoverArrow",Ile=_.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=h0(r);return a.jsx($4,{...i,...n,ref:t})});Ile.displayName=Rle;function dz(e){return e?"open":"closed"}var Dle=nz,Mle=az,$le=oz,fz=lz;const hz=Dle,mz=Mle,rP=_.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},i)=>a.jsx($le,{children:a.jsx(fz,{ref:i,align:t,sideOffset:r,className:rt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));rP.displayName=fz.displayName;var Fle=_.createContext(void 0);function B_(e){const t=_.useContext(Fle);return e||t||"ltr"}function gC(e,[t,r]){return Math.min(r,Math.max(t,e))}function Ble(e,t){return _.useReducer((r,n)=>t[r][n]??r,e)}var nP="ScrollArea",[pz,d7e]=Ia(nP),[zle,vo]=pz(nP),gz=_.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:s=600,...o}=e,[l,c]=_.useState(null),[u,d]=_.useState(null),[f,m]=_.useState(null),[h,v]=_.useState(null),[p,g]=_.useState(null),[y,b]=_.useState(0),[x,j]=_.useState(0),[N,A]=_.useState(!1),[C,E]=_.useState(!1),O=vr(t,k=>c(k)),L=B_(i);return a.jsx(zle,{scope:r,type:n,dir:L,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:h,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:A,scrollbarY:p,onScrollbarYChange:g,scrollbarYEnabled:C,onScrollbarYEnabledChange:E,onCornerWidthChange:b,onCornerHeightChange:j,children:a.jsx(jt.div,{dir:L,...o,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});gz.displayName=nP;var vz="ScrollAreaViewport",yz=_.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:i,...s}=e,o=vo(vz,r),l=_.useRef(null),c=vr(t,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),a.jsx(jt.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});yz.displayName=vz;var zl="ScrollAreaScrollbar",iP=_.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=vo(zl,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return _.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),i.type==="hover"?a.jsx(qle,{...n,ref:t,forceMount:r}):i.type==="scroll"?a.jsx(Ule,{...n,ref:t,forceMount:r}):i.type==="auto"?a.jsx(xz,{...n,ref:t,forceMount:r}):i.type==="always"?a.jsx(sP,{...n,ref:t}):null});iP.displayName=zl;var qle=_.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=vo(zl,e.__scopeScrollArea),[s,o]=_.useState(!1);return _.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),a.jsx(ta,{present:r||s,children:a.jsx(xz,{"data-state":s?"visible":"hidden",...n,ref:t})})}),Ule=_.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=vo(zl,e.__scopeScrollArea),s=e.orientation==="horizontal",o=q_(()=>c("SCROLL_END"),100),[l,c]=Ble("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),_.useEffect(()=>{const u=i.viewport,d=s?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const h=u[d];f!==h&&(c("SCROLL"),o()),f=h};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[i.viewport,s,c,o]),a.jsx(ta,{present:r||l!=="hidden",children:a.jsx(sP,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:lt(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:lt(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),xz=_.forwardRef((e,t)=>{const r=vo(zl,e.__scopeScrollArea),{forceMount:n,...i}=e,[s,o]=_.useState(!1),l=e.orientation==="horizontal",c=q_(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Op(r.viewport,c),Op(r.content,c),a.jsx(ta,{present:n||s,children:a.jsx(sP,{"data-state":s?"visible":"hidden",...i,ref:t})})}),sP=_.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,i=vo(zl,e.__scopeScrollArea),s=_.useRef(null),o=_.useRef(0),[l,c]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Nz(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>s.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,h){return Yle(m,o.current,l,h)}return r==="horizontal"?a.jsx(Wle,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const m=i.viewport.scrollLeft,h=yR(m,l,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollLeft=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollLeft=f(m,i.dir))}}):r==="vertical"?a.jsx(Hle,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const m=i.viewport.scrollTop,h=yR(m,l);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollTop=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollTop=f(m))}}):null}),Wle=_.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,s=vo(zl,e.__scopeScrollArea),[o,l]=_.useState(),c=_.useRef(null),u=vr(t,c,s.onScrollbarXChange);return _.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(wz,{"data-orientation":"horizontal",...i,ref:u,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":z_(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(s.viewport){const m=s.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),Az(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:$w(o.paddingLeft),paddingEnd:$w(o.paddingRight)}})}})}),Hle=_.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,s=vo(zl,e.__scopeScrollArea),[o,l]=_.useState(),c=_.useRef(null),u=vr(t,c,s.onScrollbarYChange);return _.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(wz,{"data-orientation":"vertical",...i,ref:u,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":z_(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(s.viewport){const m=s.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),Az(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:$w(o.paddingTop),paddingEnd:$w(o.paddingBottom)}})}})}),[Vle,bz]=pz(zl),wz=_.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=e,h=vo(zl,r),[v,p]=_.useState(null),g=vr(t,O=>p(O)),y=_.useRef(null),b=_.useRef(""),x=h.viewport,j=n.content-n.viewport,N=Mi(d),A=Mi(c),C=q_(f,10);function E(O){if(y.current){const L=O.clientX-y.current.left,k=O.clientY-y.current.top;u({x:L,y:k})}}return _.useEffect(()=>{const O=L=>{const k=L.target;(v==null?void 0:v.contains(k))&&N(L,j)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[x,v,j,N]),_.useEffect(A,[n,A]),Op(v,C),Op(h.content,C),a.jsx(Vle,{scope:r,scrollbar:v,hasThumb:i,onThumbChange:Mi(s),onThumbPointerUp:Mi(o),onThumbPositionChange:A,onThumbPointerDown:Mi(l),children:a.jsx(jt.div,{...m,ref:g,style:{position:"absolute",...m.style},onPointerDown:lt(e.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),y.current=v.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),E(O))}),onPointerMove:lt(e.onPointerMove,E),onPointerUp:lt(e.onPointerUp,O=>{const L=O.target;L.hasPointerCapture(O.pointerId)&&L.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=b.current,h.viewport&&(h.viewport.style.scrollBehavior=""),y.current=null})})})}),Mw="ScrollAreaThumb",_z=_.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=bz(Mw,e.__scopeScrollArea);return a.jsx(ta,{present:r||i.hasThumb,children:a.jsx(Gle,{ref:t,...n})})}),Gle=_.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...i}=e,s=vo(Mw,r),o=bz(Mw,r),{onThumbPositionChange:l}=o,c=vr(t,f=>o.onThumbChange(f)),u=_.useRef(void 0),d=q_(()=>{u.current&&(u.current(),u.current=void 0)},100);return _.useEffect(()=>{const f=s.viewport;if(f){const m=()=>{if(d(),!u.current){const h=Xle(f,l);u.current=h,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[s.viewport,d,l]),a.jsx(jt.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:lt(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),v=f.clientX-h.left,p=f.clientY-h.top;o.onThumbPointerDown({x:v,y:p})}),onPointerUp:lt(e.onPointerUp,o.onThumbPointerUp)})});_z.displayName=Mw;var aP="ScrollAreaCorner",jz=_.forwardRef((e,t)=>{const r=vo(aP,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(Kle,{...e,ref:t}):null});jz.displayName=aP;var Kle=_.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,i=vo(aP,r),[s,o]=_.useState(0),[l,c]=_.useState(0),u=!!(s&&l);return Op(i.scrollbarX,()=>{var f;const d=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),Op(i.scrollbarY,()=>{var f;const d=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),u?a.jsx(jt.div,{...n,ref:t,style:{width:s,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function $w(e){return e?parseInt(e,10):0}function Nz(e,t){const r=e/t;return isNaN(r)?0:r}function z_(e){const t=Nz(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function Yle(e,t,r,n="ltr"){const i=z_(r),s=i/2,o=t||s,l=i-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return Sz([c,u],f)(e)}function yR(e,t,r="ltr"){const n=z_(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,l=s-n,c=r==="ltr"?[0,o]:[o*-1,0],u=gC(e,c);return Sz([0,o],[0,l])(u)}function Sz(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Az(e,t){return e>0&&e<t}var Xle=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=r.left!==s.left,l=r.top!==s.top;(o||l)&&t(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function q_(e,t){const r=Mi(e),n=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(n.current),[]),_.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Op(e,t){const r=Mi(t);Yi(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}var Cz=gz,Zle=yz,Jle=jz;const uy=_.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(Cz,{ref:n,className:rt("relative overflow-hidden",e),...r,children:[a.jsx(Zle,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(kz,{}),a.jsx(Jle,{})]}));uy.displayName=Cz.displayName;const kz=_.forwardRef(({className:e,orientation:t="vertical",...r},n)=>a.jsx(iP,{ref:n,orientation:t,className:rt("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:a.jsx(_z,{className:"relative flex-1 rounded-full bg-border"})}));kz.displayName=iP.displayName;function en(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ko(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Qle(e,t){const r=en(e);return isNaN(t)?Ko(e,NaN):(r.setDate(r.getDate()+t),r)}function ece(e,t){const r=en(e);if(isNaN(t))return Ko(e,NaN);if(!t)return r;const n=r.getDate(),i=Ko(e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const s=i.getDate();return n>=s?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}const Ez=6048e5,tce=864e5,zb=43200,xR=1440;let rce={};function m0(){return rce}function ox(e,t){var l,c,u,d;const r=m0(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=en(e),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Fw(e){return ox(e,{weekStartsOn:1})}function Pz(e){const t=en(e),r=t.getFullYear(),n=Ko(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Fw(n),s=Ko(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Fw(s);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function bR(e){const t=en(e);return t.setHours(0,0,0,0),t}function Bw(e){const t=en(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function nce(e,t){const r=bR(e),n=bR(t),i=+r-Bw(r),s=+n-Bw(n);return Math.round((i-s)/tce)}function ice(e){const t=Pz(e),r=Ko(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Fw(r)}function F1(e,t){const r=en(e),n=en(t),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function sce(e){return Ko(e,Date.now())}function ace(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function oce(e){if(!ace(e)&&typeof e!="number")return!1;const t=en(e);return!isNaN(Number(t))}function lce(e,t){const r=en(e),n=en(t),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function cce(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function uce(e,t){return+en(e)-+en(t)}function dce(e){const t=en(e);return t.setHours(23,59,59,999),t}function zw(e){const t=en(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function fce(e){const t=en(e);return+dce(t)==+zw(t)}function hce(e,t){const r=en(e),n=en(t),i=F1(r,n),s=Math.abs(lce(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let l=F1(r,n)===-i;fce(en(e))&&s===1&&F1(e,n)===1&&(l=!1),o=i*(s-Number(l))}return o===0?0:o}function mce(e,t,r){const n=uce(e,t)/1e3;return cce(r==null?void 0:r.roundingMethod)(n)}function vC(e){const t=en(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Oz(e){const t=en(e),r=Ko(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const pce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gce=(e,t,r)=>{let n;const i=pce[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Vm(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const vce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bce={date:Vm({formats:vce,defaultWidth:"full"}),time:Vm({formats:yce,defaultWidth:"full"}),dateTime:Vm({formats:xce,defaultWidth:"full"})},wce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_ce=(e,t,r,n)=>wce[e];function yl(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;i=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const jce={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nce={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Sce={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ace={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Cce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ece=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Pce={ordinalNumber:Ece,era:yl({values:jce,defaultWidth:"wide"}),quarter:yl({values:Nce,defaultWidth:"wide",argumentCallback:e=>e-1}),month:yl({values:Sce,defaultWidth:"wide"}),day:yl({values:Ace,defaultWidth:"wide"}),dayPeriod:yl({values:Cce,defaultWidth:"wide",formattingValues:kce,defaultFormattingWidth:"wide"})};function xl(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Tce(l,f=>f.test(o)):Oce(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function Oce(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Tce(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Tz(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const Lce=/^(\d+)(th|st|nd|rd)?/i,Rce=/\d+/i,Ice={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Dce={any:[/^b/i,/^(a|c)/i]},Mce={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$ce={any:[/1/i,/2/i,/3/i,/4/i]},Fce={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Bce={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zce={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qce={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Uce={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wce={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Hce={ordinalNumber:Tz({matchPattern:Lce,parsePattern:Rce,valueCallback:e=>parseInt(e,10)}),era:xl({matchPatterns:Ice,defaultMatchWidth:"wide",parsePatterns:Dce,defaultParseWidth:"any"}),quarter:xl({matchPatterns:Mce,defaultMatchWidth:"wide",parsePatterns:$ce,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xl({matchPatterns:Fce,defaultMatchWidth:"wide",parsePatterns:Bce,defaultParseWidth:"any"}),day:xl({matchPatterns:zce,defaultMatchWidth:"wide",parsePatterns:qce,defaultParseWidth:"any"}),dayPeriod:xl({matchPatterns:Uce,defaultMatchWidth:"any",parsePatterns:Wce,defaultParseWidth:"any"})},Lz={code:"en-US",formatDistance:gce,formatLong:bce,formatRelative:_ce,localize:Pce,match:Hce,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vce(e){const t=en(e);return nce(t,Oz(t))+1}function Gce(e){const t=en(e),r=+Fw(t)-+ice(t);return Math.round(r/Ez)+1}function Rz(e,t){var d,f,m,h;const r=en(e),n=r.getFullYear(),i=m0(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(m=i.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??1,o=Ko(e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=ox(o,t),c=Ko(e,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=ox(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Kce(e,t){var l,c,u,d;const r=m0(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=Rz(e,t),s=Ko(e,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),ox(s,t)}function Yce(e,t){const r=en(e),n=+ox(r,t)-+Kce(r,t);return Math.round(n/Ez)+1}function un(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Nu={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return un(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):un(r+1,2)},d(e,t){return un(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return un(e.getHours()%12||12,t.length)},H(e,t){return un(e.getHours(),t.length)},m(e,t){return un(e.getMinutes(),t.length)},s(e,t){return un(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return un(i,t.length)}},Qh={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wR={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Nu.y(e,t)},Y:function(e,t,r,n){const i=Rz(e,n),s=i>0?i:1-i;if(t==="YY"){const o=s%100;return un(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):un(s,t.length)},R:function(e,t){const r=Pz(e);return un(r,t.length)},u:function(e,t){const r=e.getFullYear();return un(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return un(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return un(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Nu.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return un(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=Yce(e,n);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):un(i,t.length)},I:function(e,t,r){const n=Gce(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):un(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Nu.d(e,t)},D:function(e,t,r){const n=Vce(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):un(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return un(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return un(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return un(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(n===12?i=Qh.noon:n===0?i=Qh.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(n>=17?i=Qh.evening:n>=12?i=Qh.afternoon:n>=4?i=Qh.morning:i=Qh.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Nu.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Nu.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):un(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):un(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Nu.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Nu.s(e,t)},S:function(e,t){return Nu.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return jR(n);case"XXXX":case"XX":return ff(n);case"XXXXX":case"XXX":default:return ff(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return jR(n);case"xxxx":case"xx":return ff(n);case"xxxxx":case"xxx":default:return ff(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_R(n,":");case"OOOO":default:return"GMT"+ff(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_R(n,":");case"zzzz":default:return"GMT"+ff(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return un(n,t.length)},T:function(e,t,r){const n=e.getTime();return un(n,t.length)}};function _R(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+t+un(s,2)}function jR(e,t){return e%60===0?(e>0?"-":"+")+un(Math.abs(e)/60,2):ff(e,t)}function ff(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=un(Math.trunc(n/60),2),s=un(n%60,2);return r+i+t+s}const NR=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Iz=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Xce=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return NR(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",NR(n,t)).replace("{{time}}",Iz(i,t))},Zce={p:Iz,P:Xce},Jce=/^D+$/,Qce=/^Y+$/,eue=["D","DD","YY","YYYY"];function tue(e){return Jce.test(e)}function rue(e){return Qce.test(e)}function nue(e,t,r){const n=iue(e,t,r);if(console.warn(n),eue.includes(e))throw new RangeError(n)}function iue(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,aue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oue=/^'([^]*?)'?$/,lue=/''/g,cue=/[a-zA-Z]/;function Ct(e,t,r){var d,f,m,h,v,p,g,y;const n=m0(),i=(r==null?void 0:r.locale)??n.locale??Lz,s=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(m=n.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((p=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((y=(g=n.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,l=en(e);if(!oce(l))throw new RangeError("Invalid time value");let c=t.match(aue).map(b=>{const x=b[0];if(x==="p"||x==="P"){const j=Zce[x];return j(b,i.formatLong)}return b}).join("").match(sue).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const x=b[0];if(x==="'")return{isToken:!1,value:uue(b)};if(wR[x])return{isToken:!0,value:b};if(x.match(cue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(b=>{if(!b.isToken)return b.value;const x=b.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&rue(x)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&tue(x))&&nue(x,t,String(e));const j=wR[x[0]];return j(l,x,i.localize,u)}).join("")}function uue(e){const t=e.match(oue);return t?t[1].replace(lue,"'"):e}function due(e,t,r){const n=m0(),i=(r==null?void 0:r.locale)??n.locale??Lz,s=2520,o=F1(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=en(t),u=en(e)):(c=en(e),u=en(t));const d=mce(u,c),f=(Bw(u)-Bw(c))/1e3,m=Math.round((d-f)/60);let h;if(m<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<xR){const v=Math.round(m/60);return i.formatDistance("aboutXHours",v,l)}else{if(m<s)return i.formatDistance("xDays",1,l);if(m<zb){const v=Math.round(m/xR);return i.formatDistance("xDays",v,l)}else if(m<zb*2)return h=Math.round(m/zb),i.formatDistance("aboutXMonths",h,l)}if(h=hce(u,c),h<12){const v=Math.round(m/zb);return i.formatDistance("xMonths",v,l)}else{const v=h%12,p=Math.trunc(h/12);return v<3?i.formatDistance("aboutXYears",p,l):v<9?i.formatDistance("overXYears",p,l):i.formatDistance("almostXYears",p+1,l)}}function Dz(e,t){return due(e,sce(e),t)}function fue(e,t){return Qle(e,-t)}function Mz(e,t){return ece(e,-t)}const hue={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},mue=(e,t,r)=>{let n;const i=hue[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},pue={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},gue={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},vue={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yue={date:Vm({formats:pue,defaultWidth:"full"}),time:Vm({formats:gue,defaultWidth:"full"}),dateTime:Vm({formats:vue,defaultWidth:"full"})},xue={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},bue=(e,t,r,n)=>xue[e],wue={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},_ue={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},jue={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},Nue={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Sue={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},Aue=(e,t)=>{const r=Number(e),n=t==null?void 0:t.unit;if(r===0)return"0";const i=["year","week","hour","minute","second"];let s;return r===1?s=n&&i.includes(n)?"re":"er":s="me",r+s},Cue=["MMM","MMMM"],kue={preprocessor:(e,t)=>e.getDate()===1||!t.some(n=>n.isToken&&Cue.includes(n.value))?t:t.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:Aue,era:yl({values:wue,defaultWidth:"wide"}),quarter:yl({values:_ue,defaultWidth:"wide",argumentCallback:e=>e-1}),month:yl({values:jue,defaultWidth:"wide"}),day:yl({values:Nue,defaultWidth:"wide"}),dayPeriod:yl({values:Sue,defaultWidth:"wide"})},Eue=/^(\d+)(ime|re|me|er|e)?/i,Pue=/\d+/i,Oue={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},Tue={any:[/^av/i,/^ap/i]},Lue={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},Rue={any:[/1/i,/2/i,/3/i,/4/i]},Iue={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},Due={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mue={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},$ue={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Fue={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},Bue={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},zue={ordinalNumber:Tz({matchPattern:Eue,parsePattern:Pue,valueCallback:e=>parseInt(e)}),era:xl({matchPatterns:Oue,defaultMatchWidth:"wide",parsePatterns:Tue,defaultParseWidth:"any"}),quarter:xl({matchPatterns:Lue,defaultMatchWidth:"wide",parsePatterns:Rue,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xl({matchPatterns:Iue,defaultMatchWidth:"wide",parsePatterns:Due,defaultParseWidth:"any"}),day:xl({matchPatterns:Mue,defaultMatchWidth:"wide",parsePatterns:$ue,defaultParseWidth:"any"}),dayPeriod:xl({matchPatterns:Fue,defaultMatchWidth:"any",parsePatterns:Bue,defaultParseWidth:"any"})},Tt={code:"fr",formatDistance:mue,formatLong:yue,formatRelative:bue,localize:kue,match:zue,options:{weekStartsOn:1,firstWeekContainsDate:4}};function que(){const{user:e}=yr(),[t,r]=_.useState([]),[n,i]=_.useState(0),[s,o]=_.useState(!1),l=async()=>{if(!e)return;const{data:m,error:h}=await fe.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(10);!h&&m&&(r(m),i(m.filter(v=>!v.is_read).length))};_.useEffect(()=>{if(l(),!e)return;const m=fe.channel("notifications-bell").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},h=>{const v=h.new;r(p=>[v,...p.slice(0,9)]),i(p=>p+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},()=>{l()}).subscribe();return()=>{fe.removeChannel(m)}},[e]);const c=async m=>{const{error:h}=await fe.from("notifications").update({is_read:!0}).eq("id",m);h||(r(v=>v.map(p=>p.id===m?{...p,is_read:!0}:p)),i(v=>Math.max(0,v-1)))},u=async()=>{if(!e)return;const{error:m}=await fe.from("notifications").update({is_read:!0}).eq("user_id",e.id).eq("is_read",!1);m||(r(h=>h.map(v=>({...v,is_read:!0}))),i(0))},d=m=>{switch(m){case"besoin_created":case"da_created":case"bl_created":return"bg-primary/10 text-primary";case"besoin_status_changed":case"da_validated_finance":case"da_paid":return"bg-success/10 text-success";case"da_rejected":case"da_refused_finance":case"da_rejected_comptabilite":return"bg-destructive/10 text-destructive";case"da_revision_requested":case"da_validation_required":return"bg-warning/10 text-warning";default:return"bg-muted text-muted-foreground"}},f=m=>{o(m),m&&n>0&&setTimeout(()=>{u()},1500)};return a.jsxs(hz,{open:s,onOpenChange:f,children:[a.jsx(mz,{asChild:!0,children:a.jsxs(de,{variant:"ghost",size:"icon",className:"relative",children:[a.jsx(zm,{className:"h-5 w-5"}),n>0&&a.jsx("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-destructive text-xs font-medium text-destructive-foreground animate-pulse",children:n>9?"9+":n})]})}),a.jsxs(rP,{className:"w-80 p-0",align:"end",children:[a.jsxs("div",{className:"flex items-center justify-between border-b p-3",children:[a.jsx("h4",{className:"font-medium",children:"Notifications"}),n>0&&a.jsxs(de,{variant:"ghost",size:"sm",className:"h-auto p-1 text-xs",onClick:u,children:[a.jsx($c,{className:"mr-1 h-3 w-3"}),"Tout marquer lu"]})]}),a.jsx(uy,{className:"h-80",children:t.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center text-muted-foreground",children:[a.jsx(zm,{className:"mb-2 h-8 w-8 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Aucune notification"})]}):a.jsx("div",{className:"divide-y",children:t.map(m=>a.jsxs("div",{className:rt("flex gap-3 p-3 transition-colors hover:bg-muted/50",!m.is_read&&"bg-accent/30"),onClick:()=>!m.is_read&&c(m.id),children:[a.jsx("div",{className:rt("mt-0.5 flex h-8 w-8 shrink-0 items-center justify-center rounded-full",d(m.type)),children:a.jsx(zm,{className:"h-4 w-4"})}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-tight",children:m.title}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:m.message}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:Dz(new Date(m.created_at),{addSuffix:!0,locale:Tt})}),m.link&&a.jsx($t,{to:m.link,onClick:()=>{c(m.id),o(!1)},className:"text-xs text-primary hover:underline",children:"Voir"})]})]}),!m.is_read&&a.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full bg-primary"})]},m.id))})}),a.jsx("div",{className:"border-t p-2",children:a.jsxs($t,{to:"/notifications",onClick:()=>o(!1),className:"flex w-full items-center justify-center gap-1 rounded-md py-2 text-sm text-primary hover:bg-muted",children:["Voir toutes les notifications",a.jsx(Fc,{className:"h-3 w-3"})]})})]})]})}function st({children:e}){return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Roe,{}),a.jsx("header",{className:"fixed right-0 top-0 z-30 flex h-16 items-center justify-end gap-2 px-4 lg:left-64",children:a.jsx(que,{})}),a.jsx("main",{className:"lg:pl-64",children:a.jsx("div",{className:"min-h-screen p-4 pt-20 lg:p-8 lg:pt-8",children:e})})]})}const me=_.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:rt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));me.displayName="Card";const ze=_.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:rt("flex flex-col space-y-1.5 p-6",e),...t}));ze.displayName="CardHeader";const Ue=_.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:rt("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ue.displayName="CardTitle";const wn=_.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:rt("text-sm text-muted-foreground",e),...t}));wn.displayName="CardDescription";const pe=_.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:rt("p-6 pt-0",e),...t}));pe.displayName="CardContent";const Uue=_.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:rt("flex items-center p-6 pt-0",e),...t}));Uue.displayName="CardFooter";const Cc={admin:"Administrateur",dg:"Directeur Gnral",daf:"Directeur Administratif et Financier",comptable:"Comptable",responsable_logistique:"Responsable Logistique",agent_logistique:"Agent Logistique",responsable_achats:"Responsable Achats",agent_achats:"Agent Achats",responsable_departement:"Responsable Dpartement",employe:"Employ",lecture_seule:"Lecture seule"},Wue={active:"Actif",inactive:"Inactif",suspended:"Suspendu"},EN={actif:"Actif",en_pause:"En pause",termine:"Termin",annule:"Annul"},B1={achat:"Achat",transport:"Transport",service:"Service",reparation:"Rparation",location:"Location",main_oeuvre:"Main d'oeuvres"},PN={materiel:"Matriel",service:"Service",transport:"Transport",autre:"Autre"},dy={normale:"Normale (standard)",urgente:"Urgente (48h)",critique:"Critique (immdiat)"},$z={cree:"Cr",pris_en_charge:"Pris en charge",accepte:"Accept",refuse:"Refus",retourne:" corriger",annulee:"Annule"},Hue=["besoin urgent","transport","dpense","depense","achat","urgent"],ON=["Achat de cbles RJ45 Cat6 pour installation UIPA","Transport du personnel pour achat de matriel","Rparation climatisation bureau DG","Location vhicule pour mission terrain"],Fz=["admin","dg","daf","responsable_departement","responsable_logistique","responsable_achats"],jh=["responsable_logistique","agent_logistique"],Bz=["responsable_achats","agent_achats"],lx={fournitures:"Fournitures",equipement:"quipement",service:"Service",maintenance:"Maintenance",informatique:"Informatique",autre:"Autre"},Gm={basse:"Basse",normale:"Normale",haute:"Haute",urgente:"Urgente"},Ol={brouillon:"Brouillon",soumise:"Soumise aux Achats",en_analyse:"En analyse Achats",chiffree:"Chiffre",soumise_validation:"En attente validation DAF/DG",validee_finance:"Valide financirement",refusee_finance:"Refuse (DAF/DG)",en_revision_achats:"En rvision Achats",rejetee:"Rejete",payee:"Paye",rejetee_comptabilite:"Rejete (Comptabilit)",annulee:"Annule"},zz={1:"Comptes de ressources durables",2:"Comptes d'actif immobilis",3:"Comptes de stocks",4:"Comptes de tiers",5:"Comptes de trsorerie",6:"Comptes de charges",7:"Comptes de produits"},fy={prepare:"Prpar",en_attente_validation:"En attente validation DAF",valide:"Valid",livre:"Livr",livree_partiellement:"Livr partiellement",refusee:"Refus",annulee:"Annule"},z1={entree:"Entre",sortie:"Sortie",ajustement:"Ajustement",reservation:"Rservation",liberation:"Libration"},q1={disponible:"Disponible",reserve:"Rserv",epuise:"puis"},U1={brouillon:"Brouillon",soumise:"Soumise",validee_daf:"Valide DAF",payee:"Paye",rejetee:"Rejete"};function Xa({className:e,...t}){return a.jsx("div",{className:rt("animate-pulse rounded-md bg-muted",e),...t})}function Vue(){return a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Xa,{className:"h-4 w-24"}),a.jsx(Xa,{className:"h-4 w-4"})]}),a.jsxs(pe,{children:[a.jsx(Xa,{className:"h-8 w-16 mb-2"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Xa,{className:"h-3 w-16"}),a.jsx(Xa,{className:"h-3 w-16"})]})]})]},e))})}const Gue=x_("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function it({className:e,variant:t,...r}){return a.jsx("div",{className:rt(Gue({variant:t}),e),...r})}function Kue(){const e=yi(),[t,r]=_.useState([]),[n,i]=_.useState([]),[s,o]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const{data:d}=await fe.from("bons_livraison").select(`
            id,
            reference,
            status,
            created_at,
            department:departments(name),
            besoin:besoins(title)
          `).in("status",["prepare","en_attente_validation","valide"]).order("created_at",{ascending:!1}).limit(10);r(d||[]);const{data:f}=await fe.from("articles_stock").select("id, designation, quantity_available, quantity_min, status, location").or("status.eq.epuise,quantity_available.lte.quantity_min").order("quantity_available",{ascending:!0}).limit(10),m=(f||[]).filter(h=>h.status==="epuise"||h.quantity_available<=(h.quantity_min||0));i(m)}catch(d){console.error("Error fetching logistique data:",d)}finally{o(!1)}})()},[]);const l=u=>{switch(u){case"prepare":return a.jsx(it,{variant:"outline",className:"bg-muted/50",children:"Prpar"});case"en_attente_validation":return a.jsx(it,{variant:"secondary",className:"bg-warning/10 text-warning",children:"En attente validation"});case"valide":return a.jsx(it,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Valid"});default:return a.jsx(it,{variant:"outline",children:u})}},c=u=>u.status==="epuise"||u.quantity_available<=0?a.jsx(Er,{className:"h-4 w-4 text-destructive"}):a.jsx(zr,{className:"h-4 w-4 text-warning"});return s?a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsxs(me,{className:"animate-pulse",children:[a.jsx(ze,{children:a.jsx("div",{className:"h-5 bg-muted rounded w-1/2"})}),a.jsx(pe,{children:a.jsx("div",{className:"h-32 bg-muted rounded"})})]}),a.jsxs(me,{className:"animate-pulse",children:[a.jsx(ze,{children:a.jsx("div",{className:"h-5 bg-muted rounded w-1/2"})}),a.jsx(pe,{children:a.jsx("div",{className:"h-32 bg-muted rounded"})})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[a.jsx(th,{className:"h-5 w-5 text-primary"}),"Tableau de bord Logistique"]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Ue,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Yn,{className:"h-4 w-4 text-warning"}),"BL en attente (",t.length,")"]}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>e("/bons-livraison"),className:"text-xs",children:["Voir tout ",a.jsx(qf,{className:"ml-1 h-3 w-3"})]})]}),a.jsx(pe,{children:t.length===0?a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(Br,{className:"mx-auto h-8 w-8 mb-2 text-success"}),a.jsx("p",{className:"text-sm",children:"Aucun BL en attente"})]}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map(u=>{var d,f;return a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md border bg-card hover:bg-accent/5 cursor-pointer transition-colors",onClick:()=>e(`/bons-livraison/${u.id}`),children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:u.reference}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[((d=u.besoin)==null?void 0:d.title)||"N/A","  ",((f=u.department)==null?void 0:f.name)||"N/A"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground hidden sm:block",children:Ct(new Date(u.created_at),"dd MMM",{locale:Tt})}),l(u.status)]})]},u.id)})})})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Ue,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(zr,{className:"h-4 w-4 text-warning"}),"Stock critique (",n.length,")"]}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>e("/stock"),className:"text-xs",children:["Voir tout ",a.jsx(qf,{className:"ml-1 h-3 w-3"})]})]}),a.jsx(pe,{children:n.length===0?a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(Tn,{className:"mx-auto h-8 w-8 mb-2 text-success"}),a.jsx("p",{className:"text-sm",children:"Tous les stocks sont normaux"})]}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map(u=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md border bg-card hover:bg-accent/5 cursor-pointer transition-colors",onClick:()=>e("/stock"),children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c(u),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:u.designation}),a.jsx("p",{className:"text-xs text-muted-foreground",children:u.location||"Emplacement non dfini"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:`text-sm font-bold ${u.quantity_available<=0?"text-destructive":"text-warning"}`,children:u.quantity_available}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Min: ",u.quantity_min||0]})]})]},u.id))})})]})]})]})}function Yue(){const e=yi(),[t,r]=_.useState([]),[n,i]=_.useState([]),[s,o]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const{data:f}=await fe.from("demandes_achat").select(`
            id,
            reference,
            status,
            priority,
            created_at,
            total_amount,
            currency,
            department:departments(name)
          `).in("status",["soumise","en_analyse","chiffree","en_revision_achats"]).order("created_at",{ascending:!1}).limit(10);r(f||[]);const{data:m}=await fe.from("fournisseurs").select("id, name, contact_name, email, phone").eq("is_active",!0).order("name").limit(10),h=await Promise.all((m||[]).map(async v=>{const{count:p}=await fe.from("demandes_achat").select("*",{count:"exact",head:!0}).eq("selected_fournisseur_id",v.id);return{...v,da_count:p||0}}));h.sort((v,p)=>p.da_count-v.da_count),i(h)}catch(f){console.error("Error fetching achats data:",f)}finally{o(!1)}})()},[]);const l=d=>{switch(d){case"soumise":return a.jsx(it,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Soumise"});case"en_analyse":return a.jsx(it,{variant:"secondary",className:"bg-warning/10 text-warning",children:"En analyse"});case"chiffree":return a.jsx(it,{variant:"secondary",className:"bg-success/10 text-success",children:"Chiffre"});case"en_revision_achats":return a.jsx(it,{variant:"secondary",className:"bg-destructive/10 text-destructive",children:"En rvision"});default:return a.jsx(it,{variant:"outline",children:d})}},c=d=>{switch(d){case"urgente":return a.jsx(it,{variant:"destructive",className:"text-xs",children:"Urgent"});case"haute":return a.jsx(it,{variant:"secondary",className:"bg-warning/10 text-warning text-xs",children:"Haute"});default:return null}},u=(d,f)=>d?new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(d)+" "+(f||"XOF"):"Non chiffr";return s?a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsxs(me,{className:"animate-pulse",children:[a.jsx(ze,{children:a.jsx("div",{className:"h-5 bg-muted rounded w-1/2"})}),a.jsx(pe,{children:a.jsx("div",{className:"h-32 bg-muted rounded"})})]}),a.jsxs(me,{className:"animate-pulse",children:[a.jsx(ze,{children:a.jsx("div",{className:"h-5 bg-muted rounded w-1/2"})}),a.jsx(pe,{children:a.jsx("div",{className:"h-32 bg-muted rounded"})})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[a.jsx(jp,{className:"h-5 w-5 text-primary"}),"Tableau de bord Achats"]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Ue,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Yn,{className:"h-4 w-4 text-warning"}),"DA  traiter (",t.length,")"]}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>e("/demandes-achat"),className:"text-xs",children:["Voir tout ",a.jsx(qf,{className:"ml-1 h-3 w-3"})]})]}),a.jsx(pe,{children:t.length===0?a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(Br,{className:"mx-auto h-8 w-8 mb-2 text-success"}),a.jsx("p",{className:"text-sm",children:"Aucune DA en attente"})]}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map(d=>{var f;return a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md border bg-card hover:bg-accent/5 cursor-pointer transition-colors",onClick:()=>e(`/demandes-achat/${d.id}`),children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium text-sm",children:d.reference}),c(d.priority)]}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[((f=d.department)==null?void 0:f.name)||"N/A","  ",u(d.total_amount,d.currency)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground hidden sm:block",children:Ct(new Date(d.created_at),"dd MMM",{locale:Tt})}),l(d.status)]})]},d.id)})})})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Ue,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(fg,{className:"h-4 w-4 text-primary"}),"Fournisseurs actifs (",n.length,")"]}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>e("/fournisseurs"),className:"text-xs",children:["Voir tout ",a.jsx(qf,{className:"ml-1 h-3 w-3"})]})]}),a.jsx(pe,{children:n.length===0?a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(b_,{className:"mx-auto h-8 w-8 mb-2"}),a.jsx("p",{className:"text-sm",children:"Aucun fournisseur actif"})]}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map(d=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md border bg-card hover:bg-accent/5 cursor-pointer transition-colors",onClick:()=>e("/fournisseurs"),children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:d.name}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:d.contact_name||d.email||d.phone||"Pas de contact"})]}),a.jsx("div",{className:"flex items-center gap-2",children:d.da_count>0&&a.jsxs(it,{variant:"outline",className:"text-xs",children:[a.jsx(Uo,{className:"mr-1 h-3 w-3"}),d.da_count," DA"]})})]},d.id))})})]})]})]})}function Xue(){const e=yi(),[t,r]=_.useState([]),[n,i]=_.useState([]),[s,o]=_.useState([]),[l,c]=_.useState({debit:0,credit:0,enAttente:0,soldeTotalCaisses:0}),[u,d]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const{data:p}=await fe.from("ecritures_comptables").select("id, reference, libelle, debit, credit, devise, date_ecriture, is_validated").eq("is_validated",!1).order("date_ecriture",{ascending:!1}).limit(10);r(p||[]);const g=(p||[]).reduce((A,C)=>A+(C.debit||0),0),y=(p||[]).reduce((A,C)=>A+(C.credit||0),0),{data:b}=await fe.from("demandes_achat").select(`
            id,
            reference,
            total_amount,
            currency,
            validated_finance_at,
            department:departments(name)
          `).eq("status","validee_finance").order("validated_finance_at",{ascending:!0}).limit(10);i(b||[]);const x=(b||[]).reduce((A,C)=>A+(C.total_amount||0),0),{data:j}=await fe.from("caisses").select("id, code, name, solde_actuel, solde_initial, devise, type, is_active").eq("is_active",!0).order("code");o(j||[]);const N=(j||[]).reduce((A,C)=>A+(C.solde_actuel||0),0);c({debit:g,credit:y,enAttente:x,soldeTotalCaisses:N})}catch(p){console.error("Error fetching comptabilite data:",p)}finally{d(!1)}})()},[]);const f=(v,p)=>new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(v)+" "+(p||"XOF"),m=v=>{if(!v)return 0;const p=Math.abs(new Date().getTime()-new Date(v).getTime());return Math.ceil(p/(1e3*60*60*24))};if(u)return a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsxs(me,{className:"animate-pulse",children:[a.jsx(ze,{children:a.jsx("div",{className:"h-5 bg-muted rounded w-1/2"})}),a.jsx(pe,{children:a.jsx("div",{className:"h-32 bg-muted rounded"})})]}),a.jsxs(me,{className:"animate-pulse",children:[a.jsx(ze,{children:a.jsx("div",{className:"h-5 bg-muted rounded w-1/2"})}),a.jsx(pe,{children:a.jsx("div",{className:"h-32 bg-muted rounded"})})]})]});const h=v=>v.solde_actuel-v.solde_initial;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[a.jsx(b4,{className:"h-5 w-5 text-primary"}),"Tableau de bord Comptabilit"]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-4",children:[a.jsx(me,{className:"border-l-4 border-l-emerald-500",children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Solde total caisses"}),a.jsx("p",{className:"text-xl font-bold text-emerald-600",children:f(l.soldeTotalCaisses)})]}),a.jsx(si,{className:"h-8 w-8 text-emerald-500/20"})]})})}),a.jsx(me,{className:"border-l-4 border-l-warning",children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"En attente paiement"}),a.jsx("p",{className:"text-xl font-bold text-warning",children:f(l.enAttente)})]}),a.jsx(Wf,{className:"h-8 w-8 text-warning/20"})]})})}),a.jsx(me,{className:"border-l-4 border-l-primary",children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total dbits (non valids)"}),a.jsx("p",{className:"text-xl font-bold text-primary",children:f(l.debit)})]}),a.jsx(jn,{className:"h-8 w-8 text-primary/20"})]})})}),a.jsx(me,{className:"border-l-4 border-l-success",children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total crdits (non valids)"}),a.jsx("p",{className:"text-xl font-bold text-success",children:f(l.credit)})]}),a.jsx(jn,{className:"h-8 w-8 text-success/20"})]})})})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Ue,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(si,{className:"h-4 w-4 text-emerald-500"}),"Soldes des caisses (",s.length,")"]}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>e("/caisse"),className:"text-xs",children:["Grer ",a.jsx(qf,{className:"ml-1 h-3 w-3"})]})]}),a.jsx(pe,{children:s.length===0?a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(si,{className:"mx-auto h-8 w-8 mb-2 text-muted-foreground/50"}),a.jsx("p",{className:"text-sm",children:"Aucune caisse configure"})]}):a.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:s.map(v=>{const p=h(v);return a.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent/5 cursor-pointer transition-colors",onClick:()=>e("/caisse"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(it,{variant:"outline",className:"text-xs font-mono",children:v.code}),a.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:v.type})]}),p!==0&&a.jsxs("div",{className:`flex items-center text-xs ${p>0?"text-success":"text-destructive"}`,children:[p>0?a.jsx(Uo,{className:"h-3 w-3 mr-1"}):a.jsx(u0,{className:"h-3 w-3 mr-1"}),p>0?"+":"",f(p,v.devise)]})]}),a.jsx("p",{className:"font-medium text-sm truncate",children:v.name}),a.jsx("p",{className:"text-lg font-bold text-foreground mt-1",children:f(v.solde_actuel,v.devise)})]},v.id)})})})]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Ue,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(jn,{className:"h-4 w-4 text-warning"}),"critures  valider (",t.length,")"]}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>e("/comptabilite"),className:"text-xs",children:["Voir tout ",a.jsx(qf,{className:"ml-1 h-3 w-3"})]})]}),a.jsx(pe,{children:t.length===0?a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(Br,{className:"mx-auto h-8 w-8 mb-2 text-success"}),a.jsx("p",{className:"text-sm",children:"Toutes les critures sont valides"})]}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map(v=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md border bg-card hover:bg-accent/5 cursor-pointer transition-colors",onClick:()=>e(`/comptabilite/${v.id}`),children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm",children:v.reference}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:v.libelle})]}),a.jsxs("div",{className:"text-right",children:[v.debit>0&&a.jsxs("p",{className:"text-sm font-medium text-primary",children:["D: ",f(v.debit,v.devise)]}),v.credit>0&&a.jsxs("p",{className:"text-sm font-medium text-success",children:["C: ",f(v.credit,v.devise)]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Ct(new Date(v.date_ecriture),"dd/MM/yyyy")})]})]},v.id))})})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Ue,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Wf,{className:"h-4 w-4 text-warning"}),"Paiements en attente (",n.length,")"]}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>e("/demandes-achat"),className:"text-xs",children:["Voir tout ",a.jsx(qf,{className:"ml-1 h-3 w-3"})]})]}),a.jsx(pe,{children:n.length===0?a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(Br,{className:"mx-auto h-8 w-8 mb-2 text-success"}),a.jsx("p",{className:"text-sm",children:"Aucun paiement en attente"})]}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map(v=>{var g;const p=m(v.validated_finance_at);return a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md border bg-card hover:bg-accent/5 cursor-pointer transition-colors",onClick:()=>e(`/demandes-achat/${v.id}`),children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium text-sm",children:v.reference}),p>7&&a.jsxs(it,{variant:"destructive",className:"text-xs",children:[a.jsx(b_,{className:"mr-1 h-3 w-3"}),p,"j"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((g=v.department)==null?void 0:g.name)||"N/A"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-bold text-warning",children:f(v.total_amount||0,v.currency)}),v.validated_finance_at&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Valid le ",Ct(new Date(v.validated_finance_at),"dd/MM",{locale:Tt})]})]})]},v.id)})})})]})]})]})}var Zue=Array.isArray,na=Zue,Jue=typeof ub=="object"&&ub&&ub.Object===Object&&ub,qz=Jue,Que=qz,ede=typeof self=="object"&&self&&self.Object===Object&&self,tde=Que||ede||Function("return this")(),ql=tde,rde=ql,nde=rde.Symbol,p0=nde,SR=p0,Uz=Object.prototype,ide=Uz.hasOwnProperty,sde=Uz.toString,jv=SR?SR.toStringTag:void 0;function ade(e){var t=ide.call(e,jv),r=e[jv];try{e[jv]=void 0;var n=!0}catch{}var i=sde.call(e);return n&&(t?e[jv]=r:delete e[jv]),i}var ode=ade,lde=Object.prototype,cde=lde.toString;function ude(e){return cde.call(e)}var dde=ude,AR=p0,fde=ode,hde=dde,mde="[object Null]",pde="[object Undefined]",CR=AR?AR.toStringTag:void 0;function gde(e){return e==null?e===void 0?pde:mde:CR&&CR in Object(e)?fde(e):hde(e)}var tu=gde;function vde(e){return e!=null&&typeof e=="object"}var ru=vde,yde=tu,xde=ru,bde="[object Symbol]";function wde(e){return typeof e=="symbol"||xde(e)&&yde(e)==bde}var wg=wde,_de=na,jde=wg,Nde=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sde=/^\w*$/;function Ade(e,t){if(_de(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||jde(e)?!0:Sde.test(e)||!Nde.test(e)||t!=null&&e in Object(t)}var oP=Ade;function Cde(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ld=Cde;const _g=nn(Ld);var kde=tu,Ede=Ld,Pde="[object AsyncFunction]",Ode="[object Function]",Tde="[object GeneratorFunction]",Lde="[object Proxy]";function Rde(e){if(!Ede(e))return!1;var t=kde(e);return t==Ode||t==Tde||t==Pde||t==Lde}var lP=Rde;const Ut=nn(lP);var Ide=ql,Dde=Ide["__core-js_shared__"],Mde=Dde,TN=Mde,kR=function(){var e=/[^.]+$/.exec(TN&&TN.keys&&TN.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $de(e){return!!kR&&kR in e}var Fde=$de,Bde=Function.prototype,zde=Bde.toString;function qde(e){if(e!=null){try{return zde.call(e)}catch{}try{return e+""}catch{}}return""}var Wz=qde,Ude=lP,Wde=Fde,Hde=Ld,Vde=Wz,Gde=/[\\^$.*+?()[\]{}|]/g,Kde=/^\[object .+?Constructor\]$/,Yde=Function.prototype,Xde=Object.prototype,Zde=Yde.toString,Jde=Xde.hasOwnProperty,Qde=RegExp("^"+Zde.call(Jde).replace(Gde,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function efe(e){if(!Hde(e)||Wde(e))return!1;var t=Ude(e)?Qde:Kde;return t.test(Vde(e))}var tfe=efe;function rfe(e,t){return e==null?void 0:e[t]}var nfe=rfe,ife=tfe,sfe=nfe;function afe(e,t){var r=sfe(e,t);return ife(r)?r:void 0}var Nh=afe,ofe=Nh,lfe=ofe(Object,"create"),U_=lfe,ER=U_;function cfe(){this.__data__=ER?ER(null):{},this.size=0}var ufe=cfe;function dfe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ffe=dfe,hfe=U_,mfe="__lodash_hash_undefined__",pfe=Object.prototype,gfe=pfe.hasOwnProperty;function vfe(e){var t=this.__data__;if(hfe){var r=t[e];return r===mfe?void 0:r}return gfe.call(t,e)?t[e]:void 0}var yfe=vfe,xfe=U_,bfe=Object.prototype,wfe=bfe.hasOwnProperty;function _fe(e){var t=this.__data__;return xfe?t[e]!==void 0:wfe.call(t,e)}var jfe=_fe,Nfe=U_,Sfe="__lodash_hash_undefined__";function Afe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Nfe&&t===void 0?Sfe:t,this}var Cfe=Afe,kfe=ufe,Efe=ffe,Pfe=yfe,Ofe=jfe,Tfe=Cfe;function jg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}jg.prototype.clear=kfe;jg.prototype.delete=Efe;jg.prototype.get=Pfe;jg.prototype.has=Ofe;jg.prototype.set=Tfe;var Lfe=jg;function Rfe(){this.__data__=[],this.size=0}var Ife=Rfe;function Dfe(e,t){return e===t||e!==e&&t!==t}var cP=Dfe,Mfe=cP;function $fe(e,t){for(var r=e.length;r--;)if(Mfe(e[r][0],t))return r;return-1}var W_=$fe,Ffe=W_,Bfe=Array.prototype,zfe=Bfe.splice;function qfe(e){var t=this.__data__,r=Ffe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():zfe.call(t,r,1),--this.size,!0}var Ufe=qfe,Wfe=W_;function Hfe(e){var t=this.__data__,r=Wfe(t,e);return r<0?void 0:t[r][1]}var Vfe=Hfe,Gfe=W_;function Kfe(e){return Gfe(this.__data__,e)>-1}var Yfe=Kfe,Xfe=W_;function Zfe(e,t){var r=this.__data__,n=Xfe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Jfe=Zfe,Qfe=Ife,ehe=Ufe,the=Vfe,rhe=Yfe,nhe=Jfe;function Ng(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ng.prototype.clear=Qfe;Ng.prototype.delete=ehe;Ng.prototype.get=the;Ng.prototype.has=rhe;Ng.prototype.set=nhe;var H_=Ng,ihe=Nh,she=ql,ahe=ihe(she,"Map"),uP=ahe,PR=Lfe,ohe=H_,lhe=uP;function che(){this.size=0,this.__data__={hash:new PR,map:new(lhe||ohe),string:new PR}}var uhe=che;function dhe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var fhe=dhe,hhe=fhe;function mhe(e,t){var r=e.__data__;return hhe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var V_=mhe,phe=V_;function ghe(e){var t=phe(this,e).delete(e);return this.size-=t?1:0,t}var vhe=ghe,yhe=V_;function xhe(e){return yhe(this,e).get(e)}var bhe=xhe,whe=V_;function _he(e){return whe(this,e).has(e)}var jhe=_he,Nhe=V_;function She(e,t){var r=Nhe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Ahe=She,Che=uhe,khe=vhe,Ehe=bhe,Phe=jhe,Ohe=Ahe;function Sg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Sg.prototype.clear=Che;Sg.prototype.delete=khe;Sg.prototype.get=Ehe;Sg.prototype.has=Phe;Sg.prototype.set=Ohe;var dP=Sg,Hz=dP,The="Expected a function";function fP(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(The);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(fP.Cache||Hz),r}fP.Cache=Hz;var Vz=fP;const Lhe=nn(Vz);var Rhe=Vz,Ihe=500;function Dhe(e){var t=Rhe(e,function(n){return r.size===Ihe&&r.clear(),n}),r=t.cache;return t}var Mhe=Dhe,$he=Mhe,Fhe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bhe=/\\(\\)?/g,zhe=$he(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Fhe,function(r,n,i,s){t.push(i?s.replace(Bhe,"$1"):n||r)}),t}),qhe=zhe;function Uhe(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var hP=Uhe,OR=p0,Whe=hP,Hhe=na,Vhe=wg,Ghe=1/0,TR=OR?OR.prototype:void 0,LR=TR?TR.toString:void 0;function Gz(e){if(typeof e=="string")return e;if(Hhe(e))return Whe(e,Gz)+"";if(Vhe(e))return LR?LR.call(e):"";var t=e+"";return t=="0"&&1/e==-Ghe?"-0":t}var Khe=Gz,Yhe=Khe;function Xhe(e){return e==null?"":Yhe(e)}var Kz=Xhe,Zhe=na,Jhe=oP,Qhe=qhe,eme=Kz;function tme(e,t){return Zhe(e)?e:Jhe(e,t)?[e]:Qhe(eme(e))}var Yz=tme,rme=wg,nme=1/0;function ime(e){if(typeof e=="string"||rme(e))return e;var t=e+"";return t=="0"&&1/e==-nme?"-0":t}var G_=ime,sme=Yz,ame=G_;function ome(e,t){t=sme(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ame(t[r++])];return r&&r==n?e:void 0}var mP=ome,lme=mP;function cme(e,t,r){var n=e==null?void 0:lme(e,t);return n===void 0?r:n}var Xz=cme;const Pa=nn(Xz);function ume(e){return e==null}var dme=ume;const ur=nn(dme);var fme=tu,hme=na,mme=ru,pme="[object String]";function gme(e){return typeof e=="string"||!hme(e)&&mme(e)&&fme(e)==pme}var vme=gme;const ih=nn(vme);var Zz={exports:{}},mn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP=Symbol.for("react.element"),gP=Symbol.for("react.portal"),K_=Symbol.for("react.fragment"),Y_=Symbol.for("react.strict_mode"),X_=Symbol.for("react.profiler"),Z_=Symbol.for("react.provider"),J_=Symbol.for("react.context"),yme=Symbol.for("react.server_context"),Q_=Symbol.for("react.forward_ref"),ej=Symbol.for("react.suspense"),tj=Symbol.for("react.suspense_list"),rj=Symbol.for("react.memo"),nj=Symbol.for("react.lazy"),xme=Symbol.for("react.offscreen"),Jz;Jz=Symbol.for("react.module.reference");function yo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case pP:switch(e=e.type,e){case K_:case X_:case Y_:case ej:case tj:return e;default:switch(e=e&&e.$$typeof,e){case yme:case J_:case Q_:case nj:case rj:case Z_:return e;default:return t}}case gP:return t}}}mn.ContextConsumer=J_;mn.ContextProvider=Z_;mn.Element=pP;mn.ForwardRef=Q_;mn.Fragment=K_;mn.Lazy=nj;mn.Memo=rj;mn.Portal=gP;mn.Profiler=X_;mn.StrictMode=Y_;mn.Suspense=ej;mn.SuspenseList=tj;mn.isAsyncMode=function(){return!1};mn.isConcurrentMode=function(){return!1};mn.isContextConsumer=function(e){return yo(e)===J_};mn.isContextProvider=function(e){return yo(e)===Z_};mn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===pP};mn.isForwardRef=function(e){return yo(e)===Q_};mn.isFragment=function(e){return yo(e)===K_};mn.isLazy=function(e){return yo(e)===nj};mn.isMemo=function(e){return yo(e)===rj};mn.isPortal=function(e){return yo(e)===gP};mn.isProfiler=function(e){return yo(e)===X_};mn.isStrictMode=function(e){return yo(e)===Y_};mn.isSuspense=function(e){return yo(e)===ej};mn.isSuspenseList=function(e){return yo(e)===tj};mn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===K_||e===X_||e===Y_||e===ej||e===tj||e===xme||typeof e=="object"&&e!==null&&(e.$$typeof===nj||e.$$typeof===rj||e.$$typeof===Z_||e.$$typeof===J_||e.$$typeof===Q_||e.$$typeof===Jz||e.getModuleId!==void 0)};mn.typeOf=yo;Zz.exports=mn;var bme=Zz.exports,wme=tu,_me=ru,jme="[object Number]";function Nme(e){return typeof e=="number"||_me(e)&&wme(e)==jme}var Qz=Nme;const Sme=nn(Qz);var Ame=Qz;function Cme(e){return Ame(e)&&e!=+e}var kme=Cme;const Ag=nn(kme);var Ls=function(t){return t===0?0:t>0?1:-1},Sf=function(t){return ih(t)&&t.indexOf("%")===t.length-1},Xe=function(t){return Sme(t)&&!Ag(t)},Eme=function(t){return ur(t)},Bi=function(t){return Xe(t)||ih(t)},Pme=0,Cg=function(t){var r=++Pme;return"".concat(t||"").concat(r)},Rs=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xe(t)&&!ih(t))return n;var s;if(Sf(t)){var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return Ag(s)&&(s=n),i&&s>r&&(s=r),s},Fu=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Ome=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},Ks=function(t,r){return Xe(t)&&Xe(r)?function(n){return t+n*(r-t)}:function(){return r}};function qw(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Pa(n,t))===r})}var Tme=function(t,r){return Xe(t)&&Xe(r)?t-r:ih(t)&&ih(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Km(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function yC(e){"@babel/helpers - typeof";return yC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yC(e)}var Lme=["viewBox","children"],Rme=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],RR=["points","pathLength"],LN={svg:Lme,polygon:RR,polyline:RR},vP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Uw=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(_.isValidElement(t)&&(n=t.props),!_g(n))return null;var i={};return Object.keys(n).forEach(function(s){vP.includes(s)&&(i[s]=r||function(o){return n[s](n,o)})}),i},Ime=function(t,r,n){return function(i){return t(r,n,i),null}},sh=function(t,r,n){if(!_g(t)||yC(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var o=t[s];vP.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=Ime(o,r,n))}),i},Dme=["children"],Mme=["children"];function IR(e,t){if(e==null)return{};var r=$me(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $me(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xC(e){"@babel/helpers - typeof";return xC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xC(e)}var DR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},kc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},MR=null,RN=null,yP=function e(t){if(t===MR&&Array.isArray(RN))return RN;var r=[];return _.Children.forEach(t,function(n){ur(n)||(bme.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),RN=r,MR=t,r};function ro(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return kc(i)}):n=[kc(t)],yP(e).forEach(function(i){var s=Pa(i,"type.displayName")||Pa(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function xa(e,t){var r=ro(e,t);return r&&r[0]}var $R=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!Xe(n)||n<=0||!Xe(i)||i<=0)},Fme=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Bme=function(t){return t&&t.type&&ih(t.type)&&Fme.indexOf(t.type)>=0},zme=function(t){return t&&xC(t)==="object"&&"clipDot"in t},qme=function(t,r,n,i){var s,o=(s=LN==null?void 0:LN[i])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!Ut(t)&&(i&&o.includes(r)||Rme.includes(r))||n&&vP.includes(r)},Dt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(_.isValidElement(t)&&(i=t.props),!_g(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;qme((l=i)===null||l===void 0?void 0:l[o],o,r,n)&&(s[o]=i[o])}),s},bC=function e(t,r){if(t===r)return!0;var n=_.Children.count(t);if(n!==_.Children.count(r))return!1;if(n===0)return!0;if(n===1)return FR(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=t[i],o=r[i];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!FR(s,o))return!1}return!0},FR=function(t,r){if(ur(t)&&ur(r))return!0;if(!ur(t)&&!ur(r)){var n=t.props||{},i=n.children,s=IR(n,Dme),o=r.props||{},l=o.children,c=IR(o,Mme);return i&&l?Km(s,c)&&bC(i,l):!i&&!l?Km(s,c):!1}return!1},BR=function(t,r){var n=[],i={};return yP(t).forEach(function(s,o){if(Bme(s))n.push(s);else if(s){var l=kc(s.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var f=u(s,l,o);n.push(f),i[l]=!0}}}),n},Ume=function(t){var r=t&&t.type;return r&&DR[r]?DR[r]:null},Wme=function(t,r){return yP(r).indexOf(t)},Hme=["children","width","height","viewBox","className","style","title","desc"];function wC(){return wC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wC.apply(this,arguments)}function Vme(e,t){if(e==null)return{};var r=Gme(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _C(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=Vme(e,Hme),d=i||{width:r,height:n,x:0,y:0},f=cr("recharts-surface",s);return ie.createElement("svg",wC({},Dt(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),ie.createElement("title",null,l),ie.createElement("desc",null,c),t)}var Kme=["children","className"];function jC(){return jC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jC.apply(this,arguments)}function Yme(e,t){if(e==null)return{};var r=Xme(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Rr=ie.forwardRef(function(e,t){var r=e.children,n=e.className,i=Yme(e,Kme),s=cr("recharts-layer",n);return ie.createElement("g",jC({className:s},Dt(i,!0),{ref:t}),r)}),Wo=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]};function Zme(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}var Jme=Zme,Qme=Jme;function epe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Qme(e,t,r)}var tpe=epe,rpe="\\ud800-\\udfff",npe="\\u0300-\\u036f",ipe="\\ufe20-\\ufe2f",spe="\\u20d0-\\u20ff",ape=npe+ipe+spe,ope="\\ufe0e\\ufe0f",lpe="\\u200d",cpe=RegExp("["+lpe+rpe+ape+ope+"]");function upe(e){return cpe.test(e)}var eq=upe;function dpe(e){return e.split("")}var fpe=dpe,tq="\\ud800-\\udfff",hpe="\\u0300-\\u036f",mpe="\\ufe20-\\ufe2f",ppe="\\u20d0-\\u20ff",gpe=hpe+mpe+ppe,vpe="\\ufe0e\\ufe0f",ype="["+tq+"]",NC="["+gpe+"]",SC="\\ud83c[\\udffb-\\udfff]",xpe="(?:"+NC+"|"+SC+")",rq="[^"+tq+"]",nq="(?:\\ud83c[\\udde6-\\uddff]){2}",iq="[\\ud800-\\udbff][\\udc00-\\udfff]",bpe="\\u200d",sq=xpe+"?",aq="["+vpe+"]?",wpe="(?:"+bpe+"(?:"+[rq,nq,iq].join("|")+")"+aq+sq+")*",_pe=aq+sq+wpe,jpe="(?:"+[rq+NC+"?",NC,nq,iq,ype].join("|")+")",Npe=RegExp(SC+"(?="+SC+")|"+jpe+_pe,"g");function Spe(e){return e.match(Npe)||[]}var Ape=Spe,Cpe=fpe,kpe=eq,Epe=Ape;function Ppe(e){return kpe(e)?Epe(e):Cpe(e)}var Ope=Ppe,Tpe=tpe,Lpe=eq,Rpe=Ope,Ipe=Kz;function Dpe(e){return function(t){t=Ipe(t);var r=Lpe(t)?Rpe(t):void 0,n=r?r[0]:t.charAt(0),i=r?Tpe(r,1).join(""):t.slice(1);return n[e]()+i}}var Mpe=Dpe,$pe=Mpe,Fpe=$pe("toUpperCase"),Bpe=Fpe;const ij=nn(Bpe);function En(e){return function(){return e}}const oq=Math.cos,Ww=Math.sin,Jo=Math.sqrt,Hw=Math.PI,sj=2*Hw,AC=Math.PI,CC=2*AC,hf=1e-6,zpe=CC-hf;function lq(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function qpe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return lq;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Upe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?lq:qpe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,o){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=i-r,d=o-t,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>hf)if(!(Math.abs(f*c-u*d)>hf)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,v=i-l,p=c*c+u*u,g=h*h+v*v,y=Math.sqrt(p),b=Math.sqrt(m),x=s*Math.tan((AC-Math.acos((p+m-g)/(2*y*b)))/2),j=x/b,N=x/y;Math.abs(j-1)>hf&&this._append`L${t+j*d},${r+j*f}`,this._append`A${s},${s},0,0,${+(f*h>d*v)},${this._x1=t+N*c},${this._y1=r+N*u}`}}arc(t,r,n,i,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),u=t+l,d=r+c,f=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>hf||Math.abs(this._y1-d)>hf)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%CC+CC),m>zpe?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>hf&&this._append`A${n},${n},0,${+(m>=AC)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function xP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Upe(t)}function bP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cq(e){this._context=e}cq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function aj(e){return new cq(e)}function uq(e){return e[0]}function dq(e){return e[1]}function fq(e,t){var r=En(!0),n=null,i=aj,s=null,o=xP(l);e=typeof e=="function"?e:e===void 0?uq:En(e),t=typeof t=="function"?t:t===void 0?dq:En(t);function l(c){var u,d=(c=bP(c)).length,f,m=!1,h;for(n==null&&(s=i(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+e(f,u,c),+t(f,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:En(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(s=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=s=null:s=i(n=c),l):n},l}function qb(e,t,r){var n=null,i=En(!0),s=null,o=aj,l=null,c=xP(u);e=typeof e=="function"?e:e===void 0?uq:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?dq:En(+r);function u(f){var m,h,v,p=(f=bP(f)).length,g,y=!1,b,x=new Array(p),j=new Array(p);for(s==null&&(l=o(b=c())),m=0;m<=p;++m){if(!(m<p&&i(g=f[m],m,f))===y)if(y=!y)h=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=h;--v)l.point(x[v],j[v]);l.lineEnd(),l.areaEnd()}y&&(x[m]=+e(g,m,f),j[m]=+t(g,m,f),l.point(n?+n(g,m,f):x[m],r?+r(g,m,f):j[m]))}if(b)return l=null,b+""||null}function d(){return fq().defined(i).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:En(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:En(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:En(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class hq{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Wpe(e){return new hq(e,!0)}function Hpe(e){return new hq(e,!1)}const wP={draw(e,t){const r=Jo(t/Hw);e.moveTo(r,0),e.arc(0,0,r,0,sj)}},Vpe={draw(e,t){const r=Jo(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},mq=Jo(1/3),Gpe=mq*2,Kpe={draw(e,t){const r=Jo(t/Gpe),n=r*mq;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Ype={draw(e,t){const r=Jo(t),n=-r/2;e.rect(n,n,r,r)}},Xpe=.8908130915292852,pq=Ww(Hw/10)/Ww(7*Hw/10),Zpe=Ww(sj/10)*pq,Jpe=-oq(sj/10)*pq,Qpe={draw(e,t){const r=Jo(t*Xpe),n=Zpe*r,i=Jpe*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const o=sj*s/5,l=oq(o),c=Ww(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*i,c*n+l*i)}e.closePath()}},IN=Jo(3),ege={draw(e,t){const r=-Jo(t/(IN*3));e.moveTo(0,r*2),e.lineTo(-IN*r,-r),e.lineTo(IN*r,-r),e.closePath()}},Ua=-.5,Wa=Jo(3)/2,kC=1/Jo(12),tge=(kC/2+1)*3,rge={draw(e,t){const r=Jo(t/tge),n=r/2,i=r*kC,s=n,o=r*kC+r,l=-s,c=o;e.moveTo(n,i),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(Ua*n-Wa*i,Wa*n+Ua*i),e.lineTo(Ua*s-Wa*o,Wa*s+Ua*o),e.lineTo(Ua*l-Wa*c,Wa*l+Ua*c),e.lineTo(Ua*n+Wa*i,Ua*i-Wa*n),e.lineTo(Ua*s+Wa*o,Ua*o-Wa*s),e.lineTo(Ua*l+Wa*c,Ua*c-Wa*l),e.closePath()}};function nge(e,t){let r=null,n=xP(i);e=typeof e=="function"?e:En(e||wP),t=typeof t=="function"?t:En(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:En(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:En(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function Vw(){}function Gw(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function gq(e){this._context=e}gq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ige(e){return new gq(e)}function vq(e){this._context=e}vq.prototype={areaStart:Vw,areaEnd:Vw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sge(e){return new vq(e)}function yq(e){this._context=e}yq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function age(e){return new yq(e)}function xq(e){this._context=e}xq.prototype={areaStart:Vw,areaEnd:Vw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function oge(e){return new xq(e)}function zR(e){return e<0?-1:1}function qR(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),l=(s*i+o*n)/(n+i);return(zR(s)+zR(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function UR(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function DN(e,t,r){var n=e._x0,i=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,i+l*t,s-l,o-l*r,s,o)}function Kw(e){this._context=e}Kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:DN(this,this._t0,UR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,DN(this,UR(this,r=qR(this,e,t)),r);break;default:DN(this,this._t0,r=qR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function bq(e){this._context=new wq(e)}(bq.prototype=Object.create(Kw.prototype)).point=function(e,t){Kw.prototype.point.call(this,t,e)};function wq(e){this._context=e}wq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function lge(e){return new Kw(e)}function cge(e){return new bq(e)}function _q(e){this._context=e}_q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=WR(e),i=WR(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function WR(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function uge(e){return new _q(e)}function oj(e,t){this._context=e,this._t=t}oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function dge(e){return new oj(e,.5)}function fge(e){return new oj(e,0)}function hge(e){return new oj(e,1)}function Tp(e,t){if((o=e.length)>1)for(var r=1,n,i,s=e[t[0]],o,l=s.length;r<o;++r)for(i=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function EC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function mge(e,t){return e[t]}function pge(e){const t=[];return t.key=e,t}function gge(){var e=En([]),t=EC,r=Tp,n=mge;function i(s){var o=Array.from(e.apply(this,arguments),pge),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=bP(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:En(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:En(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?EC:typeof s=="function"?s:En(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??Tp,i):r},i}function vge(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,o;i<s;++i){for(o=r=0;r<n;++r)o+=e[r][i][1]||0;if(o)for(r=0;r<n;++r)e[r][i][1]/=o}Tp(e,t)}}function yge(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var o=0,l=0;o<i;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Tp(e,t)}}function xge(e,t){if(!(!((o=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,m=d[n-1][1]||0,h=(f-m)/2,v=0;v<l;++v){var p=e[t[v]],g=p[n][1]||0,y=p[n-1][1]||0;h+=g-y}c+=f,u+=h*f}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Tp(e,t)}}function cx(e){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cx(e)}var bge=["type","size","sizeType"];function PC(){return PC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PC.apply(this,arguments)}function HR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(r),!0).forEach(function(n){wge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wge(e,t,r){return t=_ge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ge(e){var t=jge(e,"string");return cx(t)=="symbol"?t:t+""}function jge(e,t){if(cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nge(e,t){if(e==null)return{};var r=Sge(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Sge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var jq={symbolCircle:wP,symbolCross:Vpe,symbolDiamond:Kpe,symbolSquare:Ype,symbolStar:Qpe,symbolTriangle:ege,symbolWye:rge},Age=Math.PI/180,Cge=function(t){var r="symbol".concat(ij(t));return jq[r]||wP},kge=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*Age;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Ege=function(t,r){jq["symbol".concat(ij(t))]=r},_P=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,s=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=Nge(t,bge),u=VR(VR({},c),{},{type:n,size:s,sizeType:l}),d=function(){var g=Cge(n),y=nge().type(g).size(kge(s,l,n));return y()},f=u.className,m=u.cx,h=u.cy,v=Dt(u,!0);return m===+m&&h===+h&&s===+s?ie.createElement("path",PC({},v,{className:cr("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(h,")"),d:d()})):null};_P.registerSymbol=Ege;function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function OC(){return OC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OC.apply(this,arguments)}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(n){ux(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sq(n.key),n)}}function Lge(e,t,r){return t&&Tge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rge(e,t,r){return t=Yw(t),Ige(e,Nq()?Reflect.construct(t,r||[],Yw(e).constructor):t.apply(e,r))}function Ige(e,t){if(t&&(Lp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dge(e)}function Dge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nq=function(){return!!e})()}function Yw(e){return Yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yw(e)}function Mge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TC(e,t)}function TC(e,t){return TC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},TC(e,t)}function ux(e,t,r){return t=Sq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sq(e){var t=$ge(e,"string");return Lp(t)=="symbol"?t:t+""}function $ge(e,t){if(Lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ha=32,jP=function(e){function t(){return Oge(this,t),Rge(this,t,arguments)}return Mge(t,e),Lge(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=Ha/2,o=Ha/6,l=Ha/3,c=n.inactive?i:n.color;if(n.type==="plainline")return ie.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Ha,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return ie.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Ha,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return ie.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ha/8,"h").concat(Ha,"v").concat(Ha*3/4,"h").concat(-Ha,"z"),className:"recharts-legend-icon"});if(ie.isValidElement(n.legendIcon)){var u=Pge({},n);return delete u.legendIcon,ie.cloneElement(n.legendIcon,u)}return ie.createElement(_P,{fill:c,cx:s,cy:s,size:Ha,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Ha,height:Ha},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(h,v){var p=h.formatter||c,g=cr(ux(ux({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Ut(h.value)?null:h.value;Wo(!Ut(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=h.inactive?u:h.color;return ie.createElement("li",OC({className:g,style:f,key:"legend-item-".concat(v)},sh(n.props,h,v)),ie.createElement(_C,{width:o,height:o,viewBox:d,style:m},n.renderIcon(h)),ie.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(y,h,v):y))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,o=n.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return ie.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(_.PureComponent);ux(jP,"displayName","Legend");ux(jP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Fge=H_;function Bge(){this.__data__=new Fge,this.size=0}var zge=Bge;function qge(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Uge=qge;function Wge(e){return this.__data__.get(e)}var Hge=Wge;function Vge(e){return this.__data__.has(e)}var Gge=Vge,Kge=H_,Yge=uP,Xge=dP,Zge=200;function Jge(e,t){var r=this.__data__;if(r instanceof Kge){var n=r.__data__;if(!Yge||n.length<Zge-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Xge(n)}return r.set(e,t),this.size=r.size,this}var Qge=Jge,eve=H_,tve=zge,rve=Uge,nve=Hge,ive=Gge,sve=Qge;function kg(e){var t=this.__data__=new eve(e);this.size=t.size}kg.prototype.clear=tve;kg.prototype.delete=rve;kg.prototype.get=nve;kg.prototype.has=ive;kg.prototype.set=sve;var Aq=kg,ave="__lodash_hash_undefined__";function ove(e){return this.__data__.set(e,ave),this}var lve=ove;function cve(e){return this.__data__.has(e)}var uve=cve,dve=dP,fve=lve,hve=uve;function Xw(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new dve;++t<r;)this.add(e[t])}Xw.prototype.add=Xw.prototype.push=fve;Xw.prototype.has=hve;var Cq=Xw;function mve(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var kq=mve;function pve(e,t){return e.has(t)}var Eq=pve,gve=Cq,vve=kq,yve=Eq,xve=1,bve=2;function wve(e,t,r,n,i,s){var o=r&xve,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),d=s.get(t);if(u&&d)return u==t&&d==e;var f=-1,m=!0,h=r&bve?new gve:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var v=e[f],p=t[f];if(n)var g=o?n(p,v,f,t,e,s):n(v,p,f,e,t,s);if(g!==void 0){if(g)continue;m=!1;break}if(h){if(!vve(t,function(y,b){if(!yve(h,b)&&(v===y||i(v,y,r,n,s)))return h.push(b)})){m=!1;break}}else if(!(v===p||i(v,p,r,n,s))){m=!1;break}}return s.delete(e),s.delete(t),m}var Pq=wve,_ve=ql,jve=_ve.Uint8Array,Nve=jve;function Sve(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var Ave=Sve;function Cve(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var NP=Cve,KR=p0,YR=Nve,kve=cP,Eve=Pq,Pve=Ave,Ove=NP,Tve=1,Lve=2,Rve="[object Boolean]",Ive="[object Date]",Dve="[object Error]",Mve="[object Map]",$ve="[object Number]",Fve="[object RegExp]",Bve="[object Set]",zve="[object String]",qve="[object Symbol]",Uve="[object ArrayBuffer]",Wve="[object DataView]",XR=KR?KR.prototype:void 0,MN=XR?XR.valueOf:void 0;function Hve(e,t,r,n,i,s,o){switch(r){case Wve:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Uve:return!(e.byteLength!=t.byteLength||!s(new YR(e),new YR(t)));case Rve:case Ive:case $ve:return kve(+e,+t);case Dve:return e.name==t.name&&e.message==t.message;case Fve:case zve:return e==t+"";case Mve:var l=Pve;case Bve:var c=n&Tve;if(l||(l=Ove),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=Lve,o.set(e,t);var d=Eve(l(e),l(t),n,i,s,o);return o.delete(e),d;case qve:if(MN)return MN.call(e)==MN.call(t)}return!1}var Vve=Hve;function Gve(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Oq=Gve,Kve=Oq,Yve=na;function Xve(e,t,r){var n=t(e);return Yve(e)?n:Kve(n,r(e))}var Zve=Xve;function Jve(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}var Qve=Jve;function eye(){return[]}var tye=eye,rye=Qve,nye=tye,iye=Object.prototype,sye=iye.propertyIsEnumerable,ZR=Object.getOwnPropertySymbols,aye=ZR?function(e){return e==null?[]:(e=Object(e),rye(ZR(e),function(t){return sye.call(e,t)}))}:nye,oye=aye;function lye(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var cye=lye,uye=tu,dye=ru,fye="[object Arguments]";function hye(e){return dye(e)&&uye(e)==fye}var mye=hye,JR=mye,pye=ru,Tq=Object.prototype,gye=Tq.hasOwnProperty,vye=Tq.propertyIsEnumerable,yye=JR(function(){return arguments}())?JR:function(e){return pye(e)&&gye.call(e,"callee")&&!vye.call(e,"callee")},SP=yye,Zw={exports:{}};function xye(){return!1}var bye=xye;Zw.exports;(function(e,t){var r=ql,n=bye,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Zw,Zw.exports);var Lq=Zw.exports,wye=9007199254740991,_ye=/^(?:0|[1-9]\d*)$/;function jye(e,t){var r=typeof e;return t=t??wye,!!t&&(r=="number"||r!="symbol"&&_ye.test(e))&&e>-1&&e%1==0&&e<t}var AP=jye,Nye=9007199254740991;function Sye(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nye}var CP=Sye,Aye=tu,Cye=CP,kye=ru,Eye="[object Arguments]",Pye="[object Array]",Oye="[object Boolean]",Tye="[object Date]",Lye="[object Error]",Rye="[object Function]",Iye="[object Map]",Dye="[object Number]",Mye="[object Object]",$ye="[object RegExp]",Fye="[object Set]",Bye="[object String]",zye="[object WeakMap]",qye="[object ArrayBuffer]",Uye="[object DataView]",Wye="[object Float32Array]",Hye="[object Float64Array]",Vye="[object Int8Array]",Gye="[object Int16Array]",Kye="[object Int32Array]",Yye="[object Uint8Array]",Xye="[object Uint8ClampedArray]",Zye="[object Uint16Array]",Jye="[object Uint32Array]",$n={};$n[Wye]=$n[Hye]=$n[Vye]=$n[Gye]=$n[Kye]=$n[Yye]=$n[Xye]=$n[Zye]=$n[Jye]=!0;$n[Eye]=$n[Pye]=$n[qye]=$n[Oye]=$n[Uye]=$n[Tye]=$n[Lye]=$n[Rye]=$n[Iye]=$n[Dye]=$n[Mye]=$n[$ye]=$n[Fye]=$n[Bye]=$n[zye]=!1;function Qye(e){return kye(e)&&Cye(e.length)&&!!$n[Aye(e)]}var exe=Qye;function txe(e){return function(t){return e(t)}}var Rq=txe,Jw={exports:{}};Jw.exports;(function(e,t){var r=qz,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Jw,Jw.exports);var rxe=Jw.exports,nxe=exe,ixe=Rq,QR=rxe,eI=QR&&QR.isTypedArray,sxe=eI?ixe(eI):nxe,Iq=sxe,axe=cye,oxe=SP,lxe=na,cxe=Lq,uxe=AP,dxe=Iq,fxe=Object.prototype,hxe=fxe.hasOwnProperty;function mxe(e,t){var r=lxe(e),n=!r&&oxe(e),i=!r&&!n&&cxe(e),s=!r&&!n&&!i&&dxe(e),o=r||n||i||s,l=o?axe(e.length,String):[],c=l.length;for(var u in e)(t||hxe.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||uxe(u,c)))&&l.push(u);return l}var pxe=mxe,gxe=Object.prototype;function vxe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||gxe;return e===r}var yxe=vxe;function xxe(e,t){return function(r){return e(t(r))}}var Dq=xxe,bxe=Dq,wxe=bxe(Object.keys,Object),_xe=wxe,jxe=yxe,Nxe=_xe,Sxe=Object.prototype,Axe=Sxe.hasOwnProperty;function Cxe(e){if(!jxe(e))return Nxe(e);var t=[];for(var r in Object(e))Axe.call(e,r)&&r!="constructor"&&t.push(r);return t}var kxe=Cxe,Exe=lP,Pxe=CP;function Oxe(e){return e!=null&&Pxe(e.length)&&!Exe(e)}var g0=Oxe,Txe=pxe,Lxe=kxe,Rxe=g0;function Ixe(e){return Rxe(e)?Txe(e):Lxe(e)}var lj=Ixe,Dxe=Zve,Mxe=oye,$xe=lj;function Fxe(e){return Dxe(e,$xe,Mxe)}var Bxe=Fxe,tI=Bxe,zxe=1,qxe=Object.prototype,Uxe=qxe.hasOwnProperty;function Wxe(e,t,r,n,i,s){var o=r&zxe,l=tI(e),c=l.length,u=tI(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var m=l[f];if(!(o?m in t:Uxe.call(t,m)))return!1}var h=s.get(e),v=s.get(t);if(h&&v)return h==t&&v==e;var p=!0;s.set(e,t),s.set(t,e);for(var g=o;++f<c;){m=l[f];var y=e[m],b=t[m];if(n)var x=o?n(b,y,m,t,e,s):n(y,b,m,e,t,s);if(!(x===void 0?y===b||i(y,b,r,n,s):x)){p=!1;break}g||(g=m=="constructor")}if(p&&!g){var j=e.constructor,N=t.constructor;j!=N&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof N=="function"&&N instanceof N)&&(p=!1)}return s.delete(e),s.delete(t),p}var Hxe=Wxe,Vxe=Nh,Gxe=ql,Kxe=Vxe(Gxe,"DataView"),Yxe=Kxe,Xxe=Nh,Zxe=ql,Jxe=Xxe(Zxe,"Promise"),Qxe=Jxe,e0e=Nh,t0e=ql,r0e=e0e(t0e,"Set"),Mq=r0e,n0e=Nh,i0e=ql,s0e=n0e(i0e,"WeakMap"),a0e=s0e,LC=Yxe,RC=uP,IC=Qxe,DC=Mq,MC=a0e,$q=tu,Eg=Wz,rI="[object Map]",o0e="[object Object]",nI="[object Promise]",iI="[object Set]",sI="[object WeakMap]",aI="[object DataView]",l0e=Eg(LC),c0e=Eg(RC),u0e=Eg(IC),d0e=Eg(DC),f0e=Eg(MC),mf=$q;(LC&&mf(new LC(new ArrayBuffer(1)))!=aI||RC&&mf(new RC)!=rI||IC&&mf(IC.resolve())!=nI||DC&&mf(new DC)!=iI||MC&&mf(new MC)!=sI)&&(mf=function(e){var t=$q(e),r=t==o0e?e.constructor:void 0,n=r?Eg(r):"";if(n)switch(n){case l0e:return aI;case c0e:return rI;case u0e:return nI;case d0e:return iI;case f0e:return sI}return t});var h0e=mf,$N=Aq,m0e=Pq,p0e=Vve,g0e=Hxe,oI=h0e,lI=na,cI=Lq,v0e=Iq,y0e=1,uI="[object Arguments]",dI="[object Array]",Ub="[object Object]",x0e=Object.prototype,fI=x0e.hasOwnProperty;function b0e(e,t,r,n,i,s){var o=lI(e),l=lI(t),c=o?dI:oI(e),u=l?dI:oI(t);c=c==uI?Ub:c,u=u==uI?Ub:u;var d=c==Ub,f=u==Ub,m=c==u;if(m&&cI(e)){if(!cI(t))return!1;o=!0,d=!1}if(m&&!d)return s||(s=new $N),o||v0e(e)?m0e(e,t,r,n,i,s):p0e(e,t,c,r,n,i,s);if(!(r&y0e)){var h=d&&fI.call(e,"__wrapped__"),v=f&&fI.call(t,"__wrapped__");if(h||v){var p=h?e.value():e,g=v?t.value():t;return s||(s=new $N),i(p,g,r,n,s)}}return m?(s||(s=new $N),g0e(e,t,r,n,i,s)):!1}var w0e=b0e,_0e=w0e,hI=ru;function Fq(e,t,r,n,i){return e===t?!0:e==null||t==null||!hI(e)&&!hI(t)?e!==e&&t!==t:_0e(e,t,r,n,Fq,i)}var kP=Fq,j0e=Aq,N0e=kP,S0e=1,A0e=2;function C0e(e,t,r,n){var i=r.length,s=i,o=!n;if(e==null)return!s;for(e=Object(e);i--;){var l=r[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<s;){l=r[i];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new j0e;if(n)var m=n(u,d,c,e,t,f);if(!(m===void 0?N0e(d,u,S0e|A0e,n,f):m))return!1}}return!0}var k0e=C0e,E0e=Ld;function P0e(e){return e===e&&!E0e(e)}var Bq=P0e,O0e=Bq,T0e=lj;function L0e(e){for(var t=T0e(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,O0e(i)]}return t}var R0e=L0e;function I0e(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var zq=I0e,D0e=k0e,M0e=R0e,$0e=zq;function F0e(e){var t=M0e(e);return t.length==1&&t[0][2]?$0e(t[0][0],t[0][1]):function(r){return r===e||D0e(r,e,t)}}var B0e=F0e;function z0e(e,t){return e!=null&&t in Object(e)}var q0e=z0e,U0e=Yz,W0e=SP,H0e=na,V0e=AP,G0e=CP,K0e=G_;function Y0e(e,t,r){t=U0e(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=K0e(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&G0e(i)&&V0e(o,i)&&(H0e(e)||W0e(e)))}var X0e=Y0e,Z0e=q0e,J0e=X0e;function Q0e(e,t){return e!=null&&J0e(e,t,Z0e)}var ebe=Q0e,tbe=kP,rbe=Xz,nbe=ebe,ibe=oP,sbe=Bq,abe=zq,obe=G_,lbe=1,cbe=2;function ube(e,t){return ibe(e)&&sbe(t)?abe(obe(e),t):function(r){var n=rbe(r,e);return n===void 0&&n===t?nbe(r,e):tbe(t,n,lbe|cbe)}}var dbe=ube;function fbe(e){return e}var Pg=fbe;function hbe(e){return function(t){return t==null?void 0:t[e]}}var mbe=hbe,pbe=mP;function gbe(e){return function(t){return pbe(t,e)}}var vbe=gbe,ybe=mbe,xbe=vbe,bbe=oP,wbe=G_;function _be(e){return bbe(e)?ybe(wbe(e)):xbe(e)}var jbe=_be,Nbe=B0e,Sbe=dbe,Abe=Pg,Cbe=na,kbe=jbe;function Ebe(e){return typeof e=="function"?e:e==null?Abe:typeof e=="object"?Cbe(e)?Sbe(e[0],e[1]):Nbe(e):kbe(e)}var Ul=Ebe;function Pbe(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var qq=Pbe;function Obe(e){return e!==e}var Tbe=Obe;function Lbe(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var Rbe=Lbe,Ibe=qq,Dbe=Tbe,Mbe=Rbe;function $be(e,t,r){return t===t?Mbe(e,t,r):Ibe(e,Dbe,r)}var Fbe=$be,Bbe=Fbe;function zbe(e,t){var r=e==null?0:e.length;return!!r&&Bbe(e,t,0)>-1}var qbe=zbe;function Ube(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var Wbe=Ube;function Hbe(){}var Vbe=Hbe,FN=Mq,Gbe=Vbe,Kbe=NP,Ybe=1/0,Xbe=FN&&1/Kbe(new FN([,-0]))[1]==Ybe?function(e){return new FN(e)}:Gbe,Zbe=Xbe,Jbe=Cq,Qbe=qbe,e1e=Wbe,t1e=Eq,r1e=Zbe,n1e=NP,i1e=200;function s1e(e,t,r){var n=-1,i=Qbe,s=e.length,o=!0,l=[],c=l;if(r)o=!1,i=e1e;else if(s>=i1e){var u=t?null:r1e(e);if(u)return n1e(u);o=!1,i=t1e,c=new Jbe}else c=t?[]:l;e:for(;++n<s;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var m=c.length;m--;)if(c[m]===f)continue e;t&&c.push(f),l.push(d)}else i(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var a1e=s1e,o1e=Ul,l1e=a1e;function c1e(e,t){return e&&e.length?l1e(e,o1e(t)):[]}var u1e=c1e;const mI=nn(u1e);function Uq(e,t,r){return t===!0?mI(e,r):Ut(t)?mI(e,t):e}function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}var d1e=["ref"];function pI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(r),!0).forEach(function(n){cj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hq(n.key),n)}}function h1e(e,t,r){return t&&gI(e.prototype,t),r&&gI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m1e(e,t,r){return t=Qw(t),p1e(e,Wq()?Reflect.construct(t,r||[],Qw(e).constructor):t.apply(e,r))}function p1e(e,t){if(t&&(Rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g1e(e)}function g1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wq=function(){return!!e})()}function Qw(e){return Qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qw(e)}function v1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$C(e,t)}function $C(e,t){return $C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$C(e,t)}function cj(e,t,r){return t=Hq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hq(e){var t=y1e(e,"string");return Rp(t)=="symbol"?t:t+""}function y1e(e,t){if(Rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x1e(e,t){if(e==null)return{};var r=b1e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function b1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function w1e(e){return e.value}function _1e(e,t){if(ie.isValidElement(e))return ie.cloneElement(e,t);if(typeof e=="function")return ie.createElement(e,t);t.ref;var r=x1e(t,d1e);return ie.createElement(jP,r)}var vI=1,Ec=function(e){function t(){var r;f1e(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=m1e(this,t,[].concat(i)),cj(r,"lastBoundingBox",{width:-1,height:-1}),r}return v1e(t,e),h1e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>vI||Math.abs(i.height-this.lastBoundingBox.height)>vI)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?oc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((d||0)-v.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return oc(oc({},f),m)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=oc(oc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ie.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){n.wrapperNode=h}},_1e(s,oc(oc({},this.props),{},{payload:Uq(d,u,w1e)})))}}],[{key:"getWithHeight",value:function(n,i){var s=oc(oc({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&Xe(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||i}:null}}])}(_.PureComponent);cj(Ec,"displayName","Legend");cj(Ec,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var yI=p0,j1e=SP,N1e=na,xI=yI?yI.isConcatSpreadable:void 0;function S1e(e){return N1e(e)||j1e(e)||!!(xI&&e&&e[xI])}var A1e=S1e,C1e=Oq,k1e=A1e;function Vq(e,t,r,n,i){var s=-1,o=e.length;for(r||(r=k1e),i||(i=[]);++s<o;){var l=e[s];t>0&&r(l)?t>1?Vq(l,t-1,r,n,i):C1e(i,l):n||(i[i.length]=l)}return i}var Gq=Vq;function E1e(e){return function(t,r,n){for(var i=-1,s=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++i];if(r(s[c],c,s)===!1)break}return t}}var P1e=E1e,O1e=P1e,T1e=O1e(),L1e=T1e,R1e=L1e,I1e=lj;function D1e(e,t){return e&&R1e(e,t,I1e)}var Kq=D1e,M1e=g0;function $1e(e,t){return function(r,n){if(r==null)return r;if(!M1e(r))return e(r,n);for(var i=r.length,s=t?i:-1,o=Object(r);(t?s--:++s<i)&&n(o[s],s,o)!==!1;);return r}}var F1e=$1e,B1e=Kq,z1e=F1e,q1e=z1e(B1e),EP=q1e,U1e=EP,W1e=g0;function H1e(e,t){var r=-1,n=W1e(e)?Array(e.length):[];return U1e(e,function(i,s,o){n[++r]=t(i,s,o)}),n}var Yq=H1e;function V1e(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var G1e=V1e,bI=wg;function K1e(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,s=bI(e),o=t!==void 0,l=t===null,c=t===t,u=bI(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!i)return 1;if(!n&&!s&&!u&&e<t||u&&r&&i&&!n&&!s||l&&r&&i||!o&&i||!c)return-1}return 0}var Y1e=K1e,X1e=Y1e;function Z1e(e,t,r){for(var n=-1,i=e.criteria,s=t.criteria,o=i.length,l=r.length;++n<o;){var c=X1e(i[n],s[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var J1e=Z1e,BN=hP,Q1e=mP,ewe=Ul,twe=Yq,rwe=G1e,nwe=Rq,iwe=J1e,swe=Pg,awe=na;function owe(e,t,r){t.length?t=BN(t,function(s){return awe(s)?function(o){return Q1e(o,s.length===1?s[0]:s)}:s}):t=[swe];var n=-1;t=BN(t,nwe(ewe));var i=twe(e,function(s,o,l){var c=BN(t,function(u){return u(s)});return{criteria:c,index:++n,value:s}});return rwe(i,function(s,o){return iwe(s,o,r)})}var lwe=owe;function cwe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var uwe=cwe,dwe=uwe,wI=Math.max;function fwe(e,t,r){return t=wI(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=wI(n.length-t,0),o=Array(s);++i<s;)o[i]=n[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=n[i];return l[t]=r(o),dwe(e,this,l)}}var hwe=fwe;function mwe(e){return function(){return e}}var pwe=mwe,gwe=Nh,vwe=function(){try{var e=gwe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Xq=vwe,ywe=pwe,_I=Xq,xwe=Pg,bwe=_I?function(e,t){return _I(e,"toString",{configurable:!0,enumerable:!1,value:ywe(t),writable:!0})}:xwe,wwe=bwe,_we=800,jwe=16,Nwe=Date.now;function Swe(e){var t=0,r=0;return function(){var n=Nwe(),i=jwe-(n-r);if(r=n,i>0){if(++t>=_we)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Awe=Swe,Cwe=wwe,kwe=Awe,Ewe=kwe(Cwe),Pwe=Ewe,Owe=Pg,Twe=hwe,Lwe=Pwe;function Rwe(e,t){return Lwe(Twe(e,t,Owe),e+"")}var Iwe=Rwe,Dwe=cP,Mwe=g0,$we=AP,Fwe=Ld;function Bwe(e,t,r){if(!Fwe(r))return!1;var n=typeof t;return(n=="number"?Mwe(r)&&$we(t,r.length):n=="string"&&t in r)?Dwe(r[t],e):!1}var uj=Bwe,zwe=Gq,qwe=lwe,Uwe=Iwe,jI=uj,Wwe=Uwe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&jI(e,t[0],t[1])?t=[]:r>2&&jI(t[0],t[1],t[2])&&(t=[t[0]]),qwe(e,zwe(t,1),[])}),Hwe=Wwe;const PP=nn(Hwe);function dx(e){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function FC(){return FC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FC.apply(this,arguments)}function Vwe(e,t){return Xwe(e)||Ywe(e,t)||Kwe(e,t)||Gwe()}function Gwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kwe(e,t){if(e){if(typeof e=="string")return NI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NI(e,t)}}function NI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ywe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Xwe(e){if(Array.isArray(e))return e}function SI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(r),!0).forEach(function(n){Zwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zwe(e,t,r){return t=Jwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jwe(e){var t=Qwe(e,"string");return dx(t)=="symbol"?t:t+""}function Qwe(e,t){if(dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e2e(e){return Array.isArray(e)&&Bi(e[0])&&Bi(e[1])?e.join(" ~ "):e}var t2e=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,s=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,m=t.itemSorter,h=t.wrapperClassName,v=t.labelClassName,p=t.label,g=t.labelFormatter,y=t.accessibilityLayer,b=y===void 0?!1:y,x=function(){if(d&&d.length){var T={padding:0,margin:0},B=(m?PP(d,m):d).map(function(M,G){if(M.type==="none")return null;var z=zN({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),D=M.formatter||f||e2e,q=M.value,K=M.name,ae=q,J=K;if(D&&ae!=null&&J!=null){var I=D(q,K,M,G,d);if(Array.isArray(I)){var $=Vwe(I,2);ae=$[0],J=$[1]}else ae=I}return ie.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:z},Bi(J)?ie.createElement("span",{className:"recharts-tooltip-item-name"},J):null,Bi(J)?ie.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ie.createElement("span",{className:"recharts-tooltip-item-value"},ae),ie.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return ie.createElement("ul",{className:"recharts-tooltip-item-list",style:T},B)}return null},j=zN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),N=zN({margin:0},u),A=!ur(p),C=A?p:"",E=cr("recharts-default-tooltip",h),O=cr("recharts-tooltip-label",v);A&&g&&d!==void 0&&d!==null&&(C=g(p,d));var L=b?{role:"status","aria-live":"assertive"}:{};return ie.createElement("div",FC({className:E,style:j},L),ie.createElement("p",{className:O,style:N},ie.isValidElement(C)?C:"".concat(C)),x())};function fx(e){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fx(e)}function Wb(e,t,r){return t=r2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r2e(e){var t=n2e(e,"string");return fx(t)=="symbol"?t:t+""}function n2e(e,t){if(fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nv="recharts-tooltip-wrapper",i2e={visibility:"hidden"};function s2e(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return cr(Nv,Wb(Wb(Wb(Wb({},"".concat(Nv,"-right"),Xe(r)&&t&&Xe(t.x)&&r>=t.x),"".concat(Nv,"-left"),Xe(r)&&t&&Xe(t.x)&&r<t.x),"".concat(Nv,"-bottom"),Xe(n)&&t&&Xe(t.y)&&n>=t.y),"".concat(Nv,"-top"),Xe(n)&&t&&Xe(t.y)&&n<t.y))}function AI(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&Xe(s[n]))return s[n];var d=r[n]-l-i,f=r[n]+i;if(t[n])return o[n]?d:f;if(o[n]){var m=d,h=c[n];return m<h?Math.max(f,c[n]):Math.max(d,c[n])}var v=f+l,p=c[n]+u;return v>p?Math.max(d,c[n]):Math.max(f,c[n])}function a2e(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function o2e(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=AI({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=AI({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=a2e({translateX:d,translateY:f,useTranslate3d:l})):u=i2e,{cssProperties:u,cssClasses:s2e({translateX:d,translateY:f,coordinate:r})}}function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CI(Object(r),!0).forEach(function(n){zC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jq(n.key),n)}}function u2e(e,t,r){return t&&c2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d2e(e,t,r){return t=e2(t),f2e(e,Zq()?Reflect.construct(t,r||[],e2(e).constructor):t.apply(e,r))}function f2e(e,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h2e(e)}function h2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zq=function(){return!!e})()}function e2(e){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e2(e)}function m2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BC(e,t)}function BC(e,t){return BC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},BC(e,t)}function zC(e,t,r){return t=Jq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jq(e){var t=p2e(e,"string");return Ip(t)=="symbol"?t:t+""}function p2e(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EI=1,g2e=function(e){function t(){var r;l2e(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=d2e(this,t,[].concat(i)),zC(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),zC(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return m2e(t,e),u2e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>EI||Math.abs(n.height-this.state.lastBoundingBox.height)>EI)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,m=i.isAnimationActive,h=i.offset,v=i.position,p=i.reverseDirection,g=i.useTranslate3d,y=i.viewBox,b=i.wrapperStyle,x=o2e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:h,position:v,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),j=x.cssClasses,N=x.cssProperties,A=kI(kI({transition:m&&s?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return ie.createElement("div",{tabIndex:-1,className:j,style:A,ref:function(E){n.wrapperNode=E}},u)}}])}(_.PureComponent),v2e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Tl={isSsr:v2e(),get:function(t){return Tl[t]},set:function(t,r){if(typeof t=="string")Tl[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(i){Tl[i]=t[i]})}}};function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function PI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function OI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PI(Object(r),!0).forEach(function(n){OP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eU(n.key),n)}}function b2e(e,t,r){return t&&x2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function w2e(e,t,r){return t=t2(t),_2e(e,Qq()?Reflect.construct(t,r||[],t2(e).constructor):t.apply(e,r))}function _2e(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j2e(e)}function j2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qq=function(){return!!e})()}function t2(e){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t2(e)}function N2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qC(e,t)}function qC(e,t){return qC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qC(e,t)}function OP(e,t,r){return t=eU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eU(e){var t=S2e(e,"string");return Dp(t)=="symbol"?t:t+""}function S2e(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A2e(e){return e.dataKey}function C2e(e,t){return ie.isValidElement(e)?ie.cloneElement(e,t):typeof e=="function"?ie.createElement(e,t):ie.createElement(t2e,t)}var Os=function(e){function t(){return y2e(this,t),w2e(this,t,arguments)}return N2e(t,e),b2e(t,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,m=i.isAnimationActive,h=i.offset,v=i.payload,p=i.payloadUniqBy,g=i.position,y=i.reverseDirection,b=i.useTranslate3d,x=i.viewBox,j=i.wrapperStyle,N=v??[];f&&N.length&&(N=Uq(v.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),p,A2e));var A=N.length>0;return ie.createElement(g2e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:s,coordinate:d,hasPayload:A,offset:h,position:g,reverseDirection:y,useTranslate3d:b,viewBox:x,wrapperStyle:j},C2e(u,OI(OI({},this.props),{},{payload:N})))}}])}(_.PureComponent);OP(Os,"displayName","Tooltip");OP(Os,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Tl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var k2e=ql,E2e=function(){return k2e.Date.now()},P2e=E2e,O2e=/\s/;function T2e(e){for(var t=e.length;t--&&O2e.test(e.charAt(t)););return t}var L2e=T2e,R2e=L2e,I2e=/^\s+/;function D2e(e){return e&&e.slice(0,R2e(e)+1).replace(I2e,"")}var M2e=D2e,$2e=M2e,TI=Ld,F2e=wg,LI=NaN,B2e=/^[-+]0x[0-9a-f]+$/i,z2e=/^0b[01]+$/i,q2e=/^0o[0-7]+$/i,U2e=parseInt;function W2e(e){if(typeof e=="number")return e;if(F2e(e))return LI;if(TI(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=TI(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=$2e(e);var r=z2e.test(e);return r||q2e.test(e)?U2e(e.slice(2),r?2:8):B2e.test(e)?LI:+e}var tU=W2e,H2e=Ld,qN=P2e,RI=tU,V2e="Expected a function",G2e=Math.max,K2e=Math.min;function Y2e(e,t,r){var n,i,s,o,l,c,u=0,d=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(V2e);t=RI(t)||0,H2e(r)&&(d=!!r.leading,f="maxWait"in r,s=f?G2e(RI(r.maxWait)||0,t):s,m="trailing"in r?!!r.trailing:m);function h(A){var C=n,E=i;return n=i=void 0,u=A,o=e.apply(E,C),o}function v(A){return u=A,l=setTimeout(y,t),d?h(A):o}function p(A){var C=A-c,E=A-u,O=t-C;return f?K2e(O,s-E):O}function g(A){var C=A-c,E=A-u;return c===void 0||C>=t||C<0||f&&E>=s}function y(){var A=qN();if(g(A))return b(A);l=setTimeout(y,p(A))}function b(A){return l=void 0,m&&n?h(A):(n=i=void 0,o)}function x(){l!==void 0&&clearTimeout(l),u=0,n=c=i=l=void 0}function j(){return l===void 0?o:b(qN())}function N(){var A=qN(),C=g(A);if(n=arguments,i=this,c=A,C){if(l===void 0)return v(c);if(f)return clearTimeout(l),l=setTimeout(y,t),h(c)}return l===void 0&&(l=setTimeout(y,t)),o}return N.cancel=x,N.flush=j,N}var X2e=Y2e,Z2e=X2e,J2e=Ld,Q2e="Expected a function";function e_e(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Q2e);return J2e(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Z2e(e,t,{leading:n,maxWait:t,trailing:i})}var t_e=e_e;const rU=nn(t_e);function hx(e){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hx(e)}function II(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Hb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?II(Object(r),!0).forEach(function(n){r_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):II(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r_e(e,t,r){return t=n_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n_e(e){var t=i_e(e,"string");return hx(t)=="symbol"?t:t+""}function i_e(e,t){if(hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s_e(e,t){return c_e(e)||l_e(e,t)||o_e(e,t)||a_e()}function a_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o_e(e,t){if(e){if(typeof e=="string")return DI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DI(e,t)}}function DI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function c_e(e){if(Array.isArray(e))return e}var Ym=_.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,m=e.maxHeight,h=e.children,v=e.debounce,p=v===void 0?0:v,g=e.id,y=e.className,b=e.onResize,x=e.style,j=x===void 0?{}:x,N=_.useRef(null),A=_.useRef();A.current=b,_.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var C=_.useState({containerWidth:i.width,containerHeight:i.height}),E=s_e(C,2),O=E[0],L=E[1],k=_.useCallback(function(B,M){L(function(G){var z=Math.round(B),D=Math.round(M);return G.containerWidth===z&&G.containerHeight===D?G:{containerWidth:z,containerHeight:D}})},[]);_.useEffect(function(){var B=function(K){var ae,J=K[0].contentRect,I=J.width,$=J.height;k(I,$),(ae=A.current)===null||ae===void 0||ae.call(A,I,$)};p>0&&(B=rU(B,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(B),G=N.current.getBoundingClientRect(),z=G.width,D=G.height;return k(z,D),M.observe(N.current),function(){M.disconnect()}},[k,p]);var T=_.useMemo(function(){var B=O.containerWidth,M=O.containerHeight;if(B<0||M<0)return null;Wo(Sf(o)||Sf(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Wo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var G=Sf(o)?B:o,z=Sf(c)?M:c;r&&r>0&&(G?z=G/r:z&&(G=z*r),m&&z>m&&(z=m)),Wo(G>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,z,o,c,d,f,r);var D=!Array.isArray(h)&&kc(h.type).endsWith("Chart");return ie.Children.map(h,function(q){return ie.isValidElement(q)?_.cloneElement(q,Hb({width:G,height:z},D?{style:Hb({height:"100%",width:"100%",maxHeight:z,maxWidth:G},q.props.style)}:{})):q})},[r,h,c,m,f,d,O,o]);return ie.createElement("div",{id:g?"".concat(g):void 0,className:cr("recharts-responsive-container",y),style:Hb(Hb({},j),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:m}),ref:N},T)}),mx=function(t){return null};mx.displayName="Cell";function px(e){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(e)}function MI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(r),!0).forEach(function(n){u_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u_e(e,t,r){return t=d_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d_e(e){var t=f_e(e,"string");return px(t)=="symbol"?t:t+""}function f_e(e,t){if(px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var em={widthCache:{},cacheCount:0},h_e=2e3,m_e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$I="recharts_measurement_span";function p_e(e){var t=UC({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var hy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tl.isSsr)return{width:0,height:0};var n=p_e(r),i=JSON.stringify({text:t,copyStyle:n});if(em.widthCache[i])return em.widthCache[i];try{var s=document.getElementById($I);s||(s=document.createElement("span"),s.setAttribute("id",$I),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=UC(UC({},m_e),n);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return em.widthCache[i]=c,++em.cacheCount>h_e&&(em.cacheCount=0,em.widthCache={}),c}catch{return{width:0,height:0}}},g_e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function gx(e){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gx(e)}function r2(e,t){return b_e(e)||x_e(e,t)||y_e(e,t)||v_e()}function v_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y_e(e,t){if(e){if(typeof e=="string")return FI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FI(e,t)}}function FI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function b_e(e){if(Array.isArray(e))return e}function w_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j_e(n.key),n)}}function __e(e,t,r){return t&&BI(e.prototype,t),r&&BI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j_e(e){var t=N_e(e,"string");return gx(t)=="symbol"?t:t+""}function N_e(e,t){if(gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,S_e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,A_e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},C_e=Object.keys(nU),Em="NaN";function k_e(e,t){return e*nU[t]}var Vb=function(){function e(t,r){w_e(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!S_e.test(r)&&(this.num=NaN,this.unit=""),C_e.includes(r)&&(this.num=k_e(t,r),this.unit="px")}return __e(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=A_e.exec(r))!==null&&n!==void 0?n:[],s=r2(i,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function iU(e){if(e.includes(Em))return Em;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=zI.exec(t))!==null&&r!==void 0?r:[],i=r2(n,4),s=i[1],o=i[2],l=i[3],c=Vb.parse(s??""),u=Vb.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Em;t=t.replace(zI,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=qI.exec(t))!==null&&f!==void 0?f:[],h=r2(m,4),v=h[1],p=h[2],g=h[3],y=Vb.parse(v??""),b=Vb.parse(g??""),x=p==="+"?y.add(b):y.subtract(b);if(x.isNaN())return Em;t=t.replace(qI,x.toString())}return t}var UI=/\(([^()]*)\)/;function E_e(e){for(var t=e;t.includes("(");){var r=UI.exec(t),n=r2(r,2),i=n[1];t=t.replace(UI,iU(i))}return t}function P_e(e){var t=e.replace(/\s+/g,"");return t=E_e(t),t=iU(t),t}function O_e(e){try{return P_e(e)}catch{return Em}}function UN(e){var t=O_e(e.slice(5,-1));return t===Em?"":t}var T_e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],L_e=["dx","dy","angle","className","breakAll"];function WC(){return WC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WC.apply(this,arguments)}function WI(e,t){if(e==null)return{};var r=R_e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function HI(e,t){return $_e(e)||M_e(e,t)||D_e(e,t)||I_e()}function I_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D_e(e,t){if(e){if(typeof e=="string")return VI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VI(e,t)}}function VI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function $_e(e){if(Array.isArray(e))return e}var sU=/[ \f\n\r\t\v\u2028\u2029]+/,aU=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var s=[];ur(r)||(n?s=r.toString().split(""):s=r.toString().split(sU));var o=s.map(function(c){return{word:c,width:hy(c,i).width}}),l=n?0:hy("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},F_e=function(t,r,n,i,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Xe(o),f=l,m=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(z,D){var q=D.word,K=D.width,ae=z[z.length-1];if(ae&&(i==null||s||ae.width+K+n<Number(i)))ae.words.push(q),ae.width+=K+n;else{var J={words:[q],width:K};z.push(J)}return z},[])},h=m(r),v=function(G){return G.reduce(function(z,D){return z.width>D.width?z:D})};if(!d)return h;for(var p="",g=function(G){var z=f.slice(0,G),D=aU({breakAll:u,style:c,children:z+p}).wordsWithComputedWidth,q=m(D),K=q.length>o||v(q).width>Number(i);return[K,q]},y=0,b=f.length-1,x=0,j;y<=b&&x<=f.length-1;){var N=Math.floor((y+b)/2),A=N-1,C=g(A),E=HI(C,2),O=E[0],L=E[1],k=g(N),T=HI(k,1),B=T[0];if(!O&&!B&&(y=N+1),O&&B&&(b=N-1),!O&&B){j=L;break}x++}return j||h},GI=function(t){var r=ur(t)?[]:t.toString().split(sU);return[{words:r}]},B_e=function(t){var r=t.width,n=t.scaleToFit,i=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Tl.isSsr){var c,u,d=aU({breakAll:o,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,m=d.spaceWidth;c=f,u=m}else return GI(i);return F_e({breakAll:o,children:i,maxLines:l,style:s},c,u,r,n)}return GI(i)},KI="#808080",ah=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,m=t.textAnchor,h=m===void 0?"start":m,v=t.verticalAnchor,p=v===void 0?"end":v,g=t.fill,y=g===void 0?KI:g,b=WI(t,T_e),x=_.useMemo(function(){return B_e({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),j=b.dx,N=b.dy,A=b.angle,C=b.className,E=b.breakAll,O=WI(b,L_e);if(!Bi(n)||!Bi(s))return null;var L=n+(Xe(j)?j:0),k=s+(Xe(N)?N:0),T;switch(p){case"start":T=UN("calc(".concat(u,")"));break;case"middle":T=UN("calc(".concat((x.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:T=UN("calc(".concat(x.length-1," * -").concat(l,")"));break}var B=[];if(f){var M=x[0].width,G=b.width;B.push("scale(".concat((Xe(G)?G/M:1)/M,")"))}return A&&B.push("rotate(".concat(A,", ").concat(L,", ").concat(k,")")),B.length&&(O.transform=B.join(" ")),ie.createElement("text",WC({},Dt(O,!0),{x:L,y:k,className:cr("recharts-text",C),textAnchor:h,fill:y.includes("url")?KI:y}),x.map(function(z,D){var q=z.words.join(E?"":" ");return ie.createElement("tspan",{x:L,dy:D===0?T:l,key:"".concat(q,"-").concat(D)},q)}))};function fd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function z_e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function TP(e){let t,r,n;e.length!==2?(t=fd,r=(l,c)=>fd(e(l),c),n=(l,c)=>e(l)-c):(t=e===fd||e===z_e?e:q_e,r=e,n=e);function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:i,center:o,right:s}}function q_e(){return 0}function oU(e){return e===null?NaN:+e}function*U_e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const W_e=TP(fd),v0=W_e.right;TP(oU).center;class YI extends Map{constructor(t,r=G_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(XI(this,t))}has(t){return super.has(XI(this,t))}set(t,r){return super.set(H_e(this,t),r)}delete(t){return super.delete(V_e(this,t))}}function XI({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function H_e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function V_e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function G_e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function K_e(e=fd){if(e===fd)return lU;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function lU(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Y_e=Math.sqrt(50),X_e=Math.sqrt(10),Z_e=Math.sqrt(2);function n2(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=Y_e?10:s>=X_e?5:s>=Z_e?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?n2(e,t,r*2):[l,c,u]}function HC(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,o]=n?n2(t,e,r):n2(e,t,r);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function VC(e,t,r){return t=+t,e=+e,r=+r,n2(e,t,r)[2]}function GC(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?VC(t,e,r):VC(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function ZI(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function JI(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function cU(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?lU:K_e(i);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+m)),v=Math.min(n,Math.floor(t+(c-u)*f/c+m));cU(e,t,h,v,i)}const s=e[t];let o=r,l=n;for(Sv(e,r,t),i(e[n],s)>0&&Sv(e,r,n);o<l;){for(Sv(e,o,l),++o,--l;i(e[o],s)<0;)++o;for(;i(e[l],s)>0;)--l}i(e[r],s)===0?Sv(e,r,l):(++l,Sv(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Sv(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function J_e(e,t,r){if(e=Float64Array.from(U_e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return JI(e);if(t>=1)return ZI(e);var n,i=(n-1)*t,s=Math.floor(i),o=ZI(cU(e,s).subarray(0,s+1)),l=JI(e.subarray(s+1));return o+(l-o)*(i-s)}}function Q_e(e,t,r=oU){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(i-s)}}function eje(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function xo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function nu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const KC=Symbol("implicit");function LP(){var e=new YI,t=[],r=[],n=KC;function i(s){let o=e.get(s);if(o===void 0){if(n!==KC)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new YI;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return LP(t,r).unknown(n)},xo.apply(i,arguments),i}function vx(){var e=LP().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,h=i<n,v=h?i:n,p=h?n:i;s=(p-v)/Math.max(1,m-c+u*2),l&&(s=Math.floor(s)),v+=(p-v-s*(m-c))*d,o=s*(1-c),l&&(v=Math.round(v),o=Math.round(o));var g=eje(m).map(function(y){return v+s*y});return r(h?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,i]=m,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(m){return[n,i]=m,n=+n,i=+i,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return vx(t(),[n,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},xo.apply(f(),arguments)}function uU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return uU(t())},e}function my(){return uU(vx.apply(null,arguments).paddingInner(1))}function RP(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function dU(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function y0(){}var yx=.7,i2=1/yx,Xm="\\s*([+-]?\\d+)\\s*",xx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ll="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tje=/^#([0-9a-f]{3,8})$/,rje=new RegExp(`^rgb\\(${Xm},${Xm},${Xm}\\)$`),nje=new RegExp(`^rgb\\(${Ll},${Ll},${Ll}\\)$`),ije=new RegExp(`^rgba\\(${Xm},${Xm},${Xm},${xx}\\)$`),sje=new RegExp(`^rgba\\(${Ll},${Ll},${Ll},${xx}\\)$`),aje=new RegExp(`^hsl\\(${xx},${Ll},${Ll}\\)$`),oje=new RegExp(`^hsla\\(${xx},${Ll},${Ll},${xx}\\)$`),QI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};RP(y0,bx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:e6,formatHex:e6,formatHex8:lje,formatHsl:cje,formatRgb:t6,toString:t6});function e6(){return this.rgb().formatHex()}function lje(){return this.rgb().formatHex8()}function cje(){return fU(this).formatHsl()}function t6(){return this.rgb().formatRgb()}function bx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=tje.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?r6(t):r===3?new Xs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Gb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Gb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rje.exec(e))?new Xs(t[1],t[2],t[3],1):(t=nje.exec(e))?new Xs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ije.exec(e))?Gb(t[1],t[2],t[3],t[4]):(t=sje.exec(e))?Gb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=aje.exec(e))?s6(t[1],t[2]/100,t[3]/100,1):(t=oje.exec(e))?s6(t[1],t[2]/100,t[3]/100,t[4]):QI.hasOwnProperty(e)?r6(QI[e]):e==="transparent"?new Xs(NaN,NaN,NaN,0):null}function r6(e){return new Xs(e>>16&255,e>>8&255,e&255,1)}function Gb(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xs(e,t,r,n)}function uje(e){return e instanceof y0||(e=bx(e)),e?(e=e.rgb(),new Xs(e.r,e.g,e.b,e.opacity)):new Xs}function YC(e,t,r,n){return arguments.length===1?uje(e):new Xs(e,t,r,n??1)}function Xs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}RP(Xs,YC,dU(y0,{brighter(e){return e=e==null?i2:Math.pow(i2,e),new Xs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yx:Math.pow(yx,e),new Xs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xs(Hf(this.r),Hf(this.g),Hf(this.b),s2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:n6,formatHex:n6,formatHex8:dje,formatRgb:i6,toString:i6}));function n6(){return`#${Af(this.r)}${Af(this.g)}${Af(this.b)}`}function dje(){return`#${Af(this.r)}${Af(this.g)}${Af(this.b)}${Af((isNaN(this.opacity)?1:this.opacity)*255)}`}function i6(){const e=s2(this.opacity);return`${e===1?"rgb(":"rgba("}${Hf(this.r)}, ${Hf(this.g)}, ${Hf(this.b)}${e===1?")":`, ${e})`}`}function s2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Af(e){return e=Hf(e),(e<16?"0":"")+e.toString(16)}function s6(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Bo(e,t,r,n)}function fU(e){if(e instanceof Bo)return new Bo(e.h,e.s,e.l,e.opacity);if(e instanceof y0||(e=bx(e)),!e)return new Bo;if(e instanceof Bo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-i,c=(s+i)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Bo(o,l,c,e.opacity)}function fje(e,t,r,n){return arguments.length===1?fU(e):new Bo(e,t,r,n??1)}function Bo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}RP(Bo,fje,dU(y0,{brighter(e){return e=e==null?i2:Math.pow(i2,e),new Bo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yx:Math.pow(yx,e),new Bo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Xs(WN(e>=240?e-240:e+120,i,n),WN(e,i,n),WN(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Bo(a6(this.h),Kb(this.s),Kb(this.l),s2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=s2(this.opacity);return`${e===1?"hsl(":"hsla("}${a6(this.h)}, ${Kb(this.s)*100}%, ${Kb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function a6(e){return e=(e||0)%360,e<0?e+360:e}function Kb(e){return Math.max(0,Math.min(1,e||0))}function WN(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const IP=e=>()=>e;function hje(e,t){return function(r){return e+r*t}}function mje(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function pje(e){return(e=+e)==1?hU:function(t,r){return r-t?mje(t,r,e):IP(isNaN(t)?r:t)}}function hU(e,t){var r=t-e;return r?hje(e,r):IP(isNaN(e)?t:e)}const o6=function e(t){var r=pje(t);function n(i,s){var o=r((i=YC(i)).r,(s=YC(s)).r),l=r(i.g,s.g),c=r(i.b,s.b),u=hU(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return n.gamma=e,n}(1);function gje(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function vje(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yje(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=Og(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=i[o](l);return s}}function xje(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function a2(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function bje(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Og(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var XC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HN=new RegExp(XC.source,"g");function wje(e){return function(){return e}}function _je(e){return function(t){return e(t)+""}}function jje(e,t){var r=XC.lastIndex=HN.lastIndex=0,n,i,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=XC.exec(e))&&(i=HN.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:a2(n,i)})),r=HN.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?_je(c[0].x):wje(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Og(e,t){var r=typeof t,n;return t==null||r==="boolean"?IP(t):(r==="number"?a2:r==="string"?(n=bx(t))?(t=n,o6):jje:t instanceof bx?o6:t instanceof Date?xje:vje(t)?gje:Array.isArray(t)?yje:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bje:a2)(e,t)}function DP(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Nje(e,t){t===void 0&&(t=e,e=Og);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function Sje(e){return function(){return e}}function o2(e){return+e}var l6=[0,1];function Is(e){return e}function ZC(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Sje(isNaN(t)?NaN:.5)}function Aje(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Cje(e,t,r){var n=e[0],i=e[1],s=t[0],o=t[1];return i<n?(n=ZC(i,n),s=r(o,s)):(n=ZC(n,i),s=r(s,o)),function(l){return s(n(l))}}function kje(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=ZC(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=v0(e,l,1,n)-1;return s[c](i[c](l))}}function x0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dj(){var e=l6,t=l6,r=Og,n,i,s,o=Is,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==Is&&(o=Aje(e[0],e[m-1])),l=m>2?kje:Cje,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?s:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(i((u||(u=l(t,e.map(n),a2)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,o2),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=DP,d()},f.clamp=function(m){return arguments.length?(o=m?!0:Is,d()):o!==Is},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(s=m,f):s},function(m,h){return n=m,i=h,d()}}function MP(){return dj()(Is,Is)}function Eje(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function l2(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Mp(e){return e=l2(Math.abs(e)),e?e[1]:NaN}function Pje(e,t){return function(r,n){for(var i=r.length,s=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Oje(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Tje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wx(e){if(!(t=Tje.exec(e)))throw new Error("invalid format: "+e);var t;return new $P({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}wx.prototype=$P.prototype;function $P(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$P.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Lje(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var mU;function Rje(e,t){var r=l2(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(mU=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+l2(e,Math.max(0,t+s-1))[0]}function c6(e,t){var r=l2(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const u6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Eje,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>c6(e*100,t),r:c6,s:Rje,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function d6(e){return e}var f6=Array.prototype.map,h6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ije(e){var t=e.grouping===void 0||e.thousands===void 0?d6:Pje(f6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?d6:Oje(f6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=wx(f);var m=f.fill,h=f.align,v=f.sign,p=f.symbol,g=f.zero,y=f.width,b=f.comma,x=f.precision,j=f.trim,N=f.type;N==="n"?(b=!0,N="g"):u6[N]||(x===void 0&&(x=12),j=!0,N="g"),(g||m==="0"&&h==="=")&&(g=!0,m="0",h="=");var A=p==="$"?r:p==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",C=p==="$"?n:/[%p]/.test(N)?o:"",E=u6[N],O=/[defgprs%]/.test(N);x=x===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function L(k){var T=A,B=C,M,G,z;if(N==="c")B=E(k)+B,k="";else{k=+k;var D=k<0||1/k<0;if(k=isNaN(k)?c:E(Math.abs(k),x),j&&(k=Lje(k)),D&&+k==0&&v!=="+"&&(D=!1),T=(D?v==="("?v:l:v==="-"||v==="("?"":v)+T,B=(N==="s"?h6[8+mU/3]:"")+B+(D&&v==="("?")":""),O){for(M=-1,G=k.length;++M<G;)if(z=k.charCodeAt(M),48>z||z>57){B=(z===46?i+k.slice(M+1):k.slice(M))+B,k=k.slice(0,M);break}}}b&&!g&&(k=t(k,1/0));var q=T.length+k.length+B.length,K=q<y?new Array(y-q+1).join(m):"";switch(b&&g&&(k=t(K+k,K.length?y-B.length:1/0),K=""),h){case"<":k=T+k+B+K;break;case"=":k=T+K+k+B;break;case"^":k=K.slice(0,q=K.length>>1)+T+k+B+K.slice(q);break;default:k=K+T+k+B;break}return s(k)}return L.toString=function(){return f+""},L}function d(f,m){var h=u((f=wx(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Mp(m)/3)))*3,p=Math.pow(10,-v),g=h6[8+v/3];return function(y){return h(p*y)+g}}return{format:u,formatPrefix:d}}var Yb,FP,pU;Dje({thousands:",",grouping:[3],currency:["$",""]});function Dje(e){return Yb=Ije(e),FP=Yb.format,pU=Yb.formatPrefix,Yb}function Mje(e){return Math.max(0,-Mp(Math.abs(e)))}function $je(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mp(t)/3)))*3-Mp(Math.abs(e)))}function Fje(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mp(t)-Mp(e))+1}function gU(e,t,r,n){var i=GC(e,t,r),s;switch(n=wx(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=$je(i,o))&&(n.precision=s),pU(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=Fje(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Mje(i))&&(n.precision=s-(n.type==="%")*2);break}}return FP(n)}function Rd(e){var t=e.domain;return e.ticks=function(r){var n=t();return HC(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return gU(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,o=n[i],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=VC(o,l,r),u===c)return n[i]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function c2(){var e=MP();return e.copy=function(){return x0(e,c2())},xo.apply(e,arguments),Rd(e)}function vU(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,o2),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return vU(e).unknown(t)},e=arguments.length?Array.from(e,o2):[0,1],Rd(r)}function yU(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),e[r]=t.floor(i),e[n]=t.ceil(s),e}function m6(e){return Math.log(e)}function p6(e){return Math.exp(e)}function Bje(e){return-Math.log(-e)}function zje(e){return-Math.exp(-e)}function qje(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Uje(e){return e===10?qje:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Wje(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function g6(e){return(t,r)=>-e(-t,r)}function BP(e){const t=e(m6,p6),r=t.domain;let n=10,i,s;function o(){return i=Wje(n),s=Uje(n),r()[0]<0?(i=g6(i),s=g6(s),e(Bje,zje)):e(m6,p6),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=i(u),h=i(d),v,p;const g=l==null?10:+l;let y=[];if(!(n%1)&&h-m<g){if(m=Math.floor(m),h=Math.ceil(h),u>0){for(;m<=h;++m)for(v=1;v<n;++v)if(p=m<0?v/s(-m):v*s(m),!(p<u)){if(p>d)break;y.push(p)}}else for(;m<=h;++m)for(v=n-1;v>=1;--v)if(p=m>0?v/s(-m):v*s(m),!(p<u)){if(p>d)break;y.push(p)}y.length*2<g&&(y=HC(u,d,g))}else y=HC(m,h,Math.min(h-m,g)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=wx(c)).precision==null&&(c.trim=!0),c=FP(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(yU(r(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),t}function xU(){const e=BP(dj()).domain([1,10]);return e.copy=()=>x0(e,xU()).base(e.base()),xo.apply(e,arguments),e}function v6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function y6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zP(e){var t=1,r=e(v6(t),y6(t));return r.constant=function(n){return arguments.length?e(v6(t=+n),y6(t)):t},Rd(r)}function bU(){var e=zP(dj());return e.copy=function(){return x0(e,bU()).constant(e.constant())},xo.apply(e,arguments)}function x6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Hje(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Vje(e){return e<0?-e*e:e*e}function qP(e){var t=e(Is,Is),r=1;function n(){return r===1?e(Is,Is):r===.5?e(Hje,Vje):e(x6(r),x6(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Rd(t)}function UP(){var e=qP(dj());return e.copy=function(){return x0(e,UP()).exponent(e.exponent())},xo.apply(e,arguments),e}function Gje(){return UP.apply(null,arguments).exponent(.5)}function b6(e){return Math.sign(e)*e*e}function Kje(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function wU(){var e=MP(),t=[0,1],r=!1,n;function i(s){var o=Kje(e(s));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(s){return e.invert(b6(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,o2)).map(b6)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return wU(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},xo.apply(i,arguments),Rd(i)}function _U(){var e=[],t=[],r=[],n;function i(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Q_e(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[v0(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(fd),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return _U().domain(e).range(t).unknown(n)},xo.apply(s,arguments)}function jU(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[v0(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return jU().domain([e,t]).range(i).unknown(s)},xo.apply(Rd(o),arguments)}function NU(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[v0(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return NU().domain(e).range(t).unknown(r)},xo.apply(i,arguments)}const VN=new Date,GN=new Date;function zi(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},i.filter=s=>zi(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(i.count=(s,o)=>(VN.setTime(+s),GN.setTime(+o),e(VN),e(GN),Math.floor(r(VN,GN))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const u2=zi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);u2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):u2);u2.range;const _c=1e3,eo=_c*60,jc=eo*60,Wc=jc*24,WP=Wc*7,w6=Wc*30,KN=Wc*365,Cf=zi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_c)},(e,t)=>(t-e)/_c,e=>e.getUTCSeconds());Cf.range;const HP=zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_c)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getMinutes());HP.range;const VP=zi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCMinutes());VP.range;const GP=zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_c-e.getMinutes()*eo)},(e,t)=>{e.setTime(+e+t*jc)},(e,t)=>(t-e)/jc,e=>e.getHours());GP.range;const KP=zi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*jc)},(e,t)=>(t-e)/jc,e=>e.getUTCHours());KP.range;const b0=zi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*eo)/Wc,e=>e.getDate()-1);b0.range;const fj=zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Wc,e=>e.getUTCDate()-1);fj.range;const SU=zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Wc,e=>Math.floor(e/Wc));SU.range;function Sh(e){return zi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*eo)/WP)}const hj=Sh(0),d2=Sh(1),Yje=Sh(2),Xje=Sh(3),$p=Sh(4),Zje=Sh(5),Jje=Sh(6);hj.range;d2.range;Yje.range;Xje.range;$p.range;Zje.range;Jje.range;function Ah(e){return zi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/WP)}const mj=Ah(0),f2=Ah(1),Qje=Ah(2),e5e=Ah(3),Fp=Ah(4),t5e=Ah(5),r5e=Ah(6);mj.range;f2.range;Qje.range;e5e.range;Fp.range;t5e.range;r5e.range;const YP=zi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());YP.range;const XP=zi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());XP.range;const Hc=zi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Hc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Hc.range;const Vc=zi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Vc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Vc.range;function AU(e,t,r,n,i,s){const o=[[Cf,1,_c],[Cf,5,5*_c],[Cf,15,15*_c],[Cf,30,30*_c],[s,1,eo],[s,5,5*eo],[s,15,15*eo],[s,30,30*eo],[i,1,jc],[i,3,3*jc],[i,6,6*jc],[i,12,12*jc],[n,1,Wc],[n,2,2*Wc],[r,1,WP],[t,1,w6],[t,3,3*w6],[e,1,KN]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),v=h?h.range(u,+d+1):[];return m?v.reverse():v}function c(u,d,f){const m=Math.abs(d-u)/f,h=TP(([,,g])=>g).right(o,m);if(h===o.length)return e.every(GC(u/KN,d/KN,f));if(h===0)return u2.every(Math.max(GC(u,d,f),1));const[v,p]=o[m/o[h-1][2]<o[h][2]/m?h-1:h];return v.every(p)}return[l,c]}const[n5e,i5e]=AU(Vc,XP,mj,SU,KP,VP),[s5e,a5e]=AU(Hc,YP,hj,b0,GP,HP);function YN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function XN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Av(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function o5e(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Cv(i),d=kv(i),f=Cv(s),m=kv(s),h=Cv(o),v=kv(o),p=Cv(l),g=kv(l),y=Cv(c),b=kv(c),x={a:D,A:q,b:K,B:ae,c:null,d:C6,e:C6,f:P5e,g:B5e,G:q5e,H:C5e,I:k5e,j:E5e,L:CU,m:O5e,M:T5e,p:J,q:I,Q:P6,s:O6,S:L5e,u:R5e,U:I5e,V:D5e,w:M5e,W:$5e,x:null,X:null,y:F5e,Y:z5e,Z:U5e,"%":E6},j={a:$,A:U,b:H,B:re,c:null,d:k6,e:k6,f:G5e,g:nNe,G:sNe,H:W5e,I:H5e,j:V5e,L:EU,m:K5e,M:Y5e,p:X,q:he,Q:P6,s:O6,S:X5e,u:Z5e,U:J5e,V:Q5e,w:eNe,W:tNe,x:null,X:null,y:rNe,Y:iNe,Z:aNe,"%":E6},N={a:L,A:k,b:T,B,c:M,d:S6,e:S6,f:j5e,g:N6,G:j6,H:A6,I:A6,j:x5e,L:_5e,m:y5e,M:b5e,p:O,q:v5e,Q:S5e,s:A5e,S:w5e,u:f5e,U:h5e,V:m5e,w:d5e,W:p5e,x:G,X:z,y:N6,Y:j6,Z:g5e,"%":N5e};x.x=A(r,x),x.X=A(n,x),x.c=A(t,x),j.x=A(r,j),j.X=A(n,j),j.c=A(t,j);function A(se,ue){return function(ge){var ve=[],te=-1,Ne=0,Y=se.length,Le,ye,we;for(ge instanceof Date||(ge=new Date(+ge));++te<Y;)se.charCodeAt(te)===37&&(ve.push(se.slice(Ne,te)),(ye=_6[Le=se.charAt(++te)])!=null?Le=se.charAt(++te):ye=Le==="e"?" ":"0",(we=ue[Le])&&(Le=we(ge,ye)),ve.push(Le),Ne=te+1);return ve.push(se.slice(Ne,te)),ve.join("")}}function C(se,ue){return function(ge){var ve=Av(1900,void 0,1),te=E(ve,se,ge+="",0),Ne,Y;if(te!=ge.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ue&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Ne=XN(Av(ve.y,0,1)),Y=Ne.getUTCDay(),Ne=Y>4||Y===0?f2.ceil(Ne):f2(Ne),Ne=fj.offset(Ne,(ve.V-1)*7),ve.y=Ne.getUTCFullYear(),ve.m=Ne.getUTCMonth(),ve.d=Ne.getUTCDate()+(ve.w+6)%7):(Ne=YN(Av(ve.y,0,1)),Y=Ne.getDay(),Ne=Y>4||Y===0?d2.ceil(Ne):d2(Ne),Ne=b0.offset(Ne,(ve.V-1)*7),ve.y=Ne.getFullYear(),ve.m=Ne.getMonth(),ve.d=Ne.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),Y="Z"in ve?XN(Av(ve.y,0,1)).getUTCDay():YN(Av(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(Y+5)%7:ve.w+ve.U*7-(Y+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,XN(ve)):YN(ve)}}function E(se,ue,ge,ve){for(var te=0,Ne=ue.length,Y=ge.length,Le,ye;te<Ne;){if(ve>=Y)return-1;if(Le=ue.charCodeAt(te++),Le===37){if(Le=ue.charAt(te++),ye=N[Le in _6?ue.charAt(te++):Le],!ye||(ve=ye(se,ge,ve))<0)return-1}else if(Le!=ge.charCodeAt(ve++))return-1}return ve}function O(se,ue,ge){var ve=u.exec(ue.slice(ge));return ve?(se.p=d.get(ve[0].toLowerCase()),ge+ve[0].length):-1}function L(se,ue,ge){var ve=h.exec(ue.slice(ge));return ve?(se.w=v.get(ve[0].toLowerCase()),ge+ve[0].length):-1}function k(se,ue,ge){var ve=f.exec(ue.slice(ge));return ve?(se.w=m.get(ve[0].toLowerCase()),ge+ve[0].length):-1}function T(se,ue,ge){var ve=y.exec(ue.slice(ge));return ve?(se.m=b.get(ve[0].toLowerCase()),ge+ve[0].length):-1}function B(se,ue,ge){var ve=p.exec(ue.slice(ge));return ve?(se.m=g.get(ve[0].toLowerCase()),ge+ve[0].length):-1}function M(se,ue,ge){return E(se,t,ue,ge)}function G(se,ue,ge){return E(se,r,ue,ge)}function z(se,ue,ge){return E(se,n,ue,ge)}function D(se){return o[se.getDay()]}function q(se){return s[se.getDay()]}function K(se){return c[se.getMonth()]}function ae(se){return l[se.getMonth()]}function J(se){return i[+(se.getHours()>=12)]}function I(se){return 1+~~(se.getMonth()/3)}function $(se){return o[se.getUTCDay()]}function U(se){return s[se.getUTCDay()]}function H(se){return c[se.getUTCMonth()]}function re(se){return l[se.getUTCMonth()]}function X(se){return i[+(se.getUTCHours()>=12)]}function he(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ue=A(se+="",x);return ue.toString=function(){return se},ue},parse:function(se){var ue=C(se+="",!1);return ue.toString=function(){return se},ue},utcFormat:function(se){var ue=A(se+="",j);return ue.toString=function(){return se},ue},utcParse:function(se){var ue=C(se+="",!0);return ue.toString=function(){return se},ue}}}var _6={"-":"",_:" ",0:"0"},Zi=/^\s*\d+/,l5e=/^%/,c5e=/[\\^$*+?|[\]().{}]/g;function Vr(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function u5e(e){return e.replace(c5e,"\\$&")}function Cv(e){return new RegExp("^(?:"+e.map(u5e).join("|")+")","i")}function kv(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function d5e(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function f5e(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function h5e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function m5e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function p5e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function j6(e,t,r){var n=Zi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function N6(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function g5e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function v5e(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function y5e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function S6(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function x5e(e,t,r){var n=Zi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function A6(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function b5e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function w5e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function _5e(e,t,r){var n=Zi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function j5e(e,t,r){var n=Zi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function N5e(e,t,r){var n=l5e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function S5e(e,t,r){var n=Zi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function A5e(e,t,r){var n=Zi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function C6(e,t){return Vr(e.getDate(),t,2)}function C5e(e,t){return Vr(e.getHours(),t,2)}function k5e(e,t){return Vr(e.getHours()%12||12,t,2)}function E5e(e,t){return Vr(1+b0.count(Hc(e),e),t,3)}function CU(e,t){return Vr(e.getMilliseconds(),t,3)}function P5e(e,t){return CU(e,t)+"000"}function O5e(e,t){return Vr(e.getMonth()+1,t,2)}function T5e(e,t){return Vr(e.getMinutes(),t,2)}function L5e(e,t){return Vr(e.getSeconds(),t,2)}function R5e(e){var t=e.getDay();return t===0?7:t}function I5e(e,t){return Vr(hj.count(Hc(e)-1,e),t,2)}function kU(e){var t=e.getDay();return t>=4||t===0?$p(e):$p.ceil(e)}function D5e(e,t){return e=kU(e),Vr($p.count(Hc(e),e)+(Hc(e).getDay()===4),t,2)}function M5e(e){return e.getDay()}function $5e(e,t){return Vr(d2.count(Hc(e)-1,e),t,2)}function F5e(e,t){return Vr(e.getFullYear()%100,t,2)}function B5e(e,t){return e=kU(e),Vr(e.getFullYear()%100,t,2)}function z5e(e,t){return Vr(e.getFullYear()%1e4,t,4)}function q5e(e,t){var r=e.getDay();return e=r>=4||r===0?$p(e):$p.ceil(e),Vr(e.getFullYear()%1e4,t,4)}function U5e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vr(t/60|0,"0",2)+Vr(t%60,"0",2)}function k6(e,t){return Vr(e.getUTCDate(),t,2)}function W5e(e,t){return Vr(e.getUTCHours(),t,2)}function H5e(e,t){return Vr(e.getUTCHours()%12||12,t,2)}function V5e(e,t){return Vr(1+fj.count(Vc(e),e),t,3)}function EU(e,t){return Vr(e.getUTCMilliseconds(),t,3)}function G5e(e,t){return EU(e,t)+"000"}function K5e(e,t){return Vr(e.getUTCMonth()+1,t,2)}function Y5e(e,t){return Vr(e.getUTCMinutes(),t,2)}function X5e(e,t){return Vr(e.getUTCSeconds(),t,2)}function Z5e(e){var t=e.getUTCDay();return t===0?7:t}function J5e(e,t){return Vr(mj.count(Vc(e)-1,e),t,2)}function PU(e){var t=e.getUTCDay();return t>=4||t===0?Fp(e):Fp.ceil(e)}function Q5e(e,t){return e=PU(e),Vr(Fp.count(Vc(e),e)+(Vc(e).getUTCDay()===4),t,2)}function eNe(e){return e.getUTCDay()}function tNe(e,t){return Vr(f2.count(Vc(e)-1,e),t,2)}function rNe(e,t){return Vr(e.getUTCFullYear()%100,t,2)}function nNe(e,t){return e=PU(e),Vr(e.getUTCFullYear()%100,t,2)}function iNe(e,t){return Vr(e.getUTCFullYear()%1e4,t,4)}function sNe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Fp(e):Fp.ceil(e),Vr(e.getUTCFullYear()%1e4,t,4)}function aNe(){return"+0000"}function E6(){return"%"}function P6(e){return+e}function O6(e){return Math.floor(+e/1e3)}var tm,OU,TU;oNe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oNe(e){return tm=o5e(e),OU=tm.format,tm.parse,TU=tm.utcFormat,tm.utcParse,tm}function lNe(e){return new Date(e)}function cNe(e){return e instanceof Date?+e:+new Date(+e)}function ZP(e,t,r,n,i,s,o,l,c,u){var d=MP(),f=d.invert,m=d.domain,h=u(".%L"),v=u(":%S"),p=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),b=u("%b %d"),x=u("%B"),j=u("%Y");function N(A){return(c(A)<A?h:l(A)<A?v:o(A)<A?p:s(A)<A?g:n(A)<A?i(A)<A?y:b:r(A)<A?x:j)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?m(Array.from(A,cNe)):m().map(lNe)},d.ticks=function(A){var C=m();return e(C[0],C[C.length-1],A??10)},d.tickFormat=function(A,C){return C==null?N:u(C)},d.nice=function(A){var C=m();return(!A||typeof A.range!="function")&&(A=t(C[0],C[C.length-1],A??10)),A?m(yU(C,A)):d},d.copy=function(){return x0(d,ZP(e,t,r,n,i,s,o,l,c,u))},d}function uNe(){return xo.apply(ZP(s5e,a5e,Hc,YP,hj,b0,GP,HP,Cf,OU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dNe(){return xo.apply(ZP(n5e,i5e,Vc,XP,mj,fj,KP,VP,Cf,TU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pj(){var e=0,t=1,r,n,i,s,o=Is,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(i===0?.5:(f=(s(f)-r)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var h,v;return arguments.length?([h,v]=m,o=f(h,v),u):[o(0),o(1)]}}return u.range=d(Og),u.rangeRound=d(DP),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),u}}function Id(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function LU(){var e=Rd(pj()(Is));return e.copy=function(){return Id(e,LU())},nu.apply(e,arguments)}function RU(){var e=BP(pj()).domain([1,10]);return e.copy=function(){return Id(e,RU()).base(e.base())},nu.apply(e,arguments)}function IU(){var e=zP(pj());return e.copy=function(){return Id(e,IU()).constant(e.constant())},nu.apply(e,arguments)}function JP(){var e=qP(pj());return e.copy=function(){return Id(e,JP()).exponent(e.exponent())},nu.apply(e,arguments)}function fNe(){return JP.apply(null,arguments).exponent(.5)}function DU(){var e=[],t=Is;function r(n){if(n!=null&&!isNaN(n=+n))return t((v0(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(fd),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>J_e(e,s/n))},r.copy=function(){return DU(t).domain(e)},nu.apply(r,arguments)}function gj(){var e=0,t=.5,r=1,n=1,i,s,o,l,c,u=Is,d,f=!1,m;function h(p){return isNaN(p=+p)?m:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,r]=p,i=d(e=+e),s=d(t=+t),o=d(r=+r),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),n=s<i?-1:1,h):[e,t,r]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function v(p){return function(g){var y,b,x;return arguments.length?([y,b,x]=g,u=Nje(p,[y,b,x]),h):[u(0),u(.5),u(1)]}}return h.range=v(Og),h.rangeRound=v(DP),h.unknown=function(p){return arguments.length?(m=p,h):m},function(p){return d=p,i=p(e),s=p(t),o=p(r),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),n=s<i?-1:1,h}}function MU(){var e=Rd(gj()(Is));return e.copy=function(){return Id(e,MU())},nu.apply(e,arguments)}function $U(){var e=BP(gj()).domain([.1,1,10]);return e.copy=function(){return Id(e,$U()).base(e.base())},nu.apply(e,arguments)}function FU(){var e=zP(gj());return e.copy=function(){return Id(e,FU()).constant(e.constant())},nu.apply(e,arguments)}function QP(){var e=qP(gj());return e.copy=function(){return Id(e,QP()).exponent(e.exponent())},nu.apply(e,arguments)}function hNe(){return QP.apply(null,arguments).exponent(.5)}const T6=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:vx,scaleDiverging:MU,scaleDivergingLog:$U,scaleDivergingPow:QP,scaleDivergingSqrt:hNe,scaleDivergingSymlog:FU,scaleIdentity:vU,scaleImplicit:KC,scaleLinear:c2,scaleLog:xU,scaleOrdinal:LP,scalePoint:my,scalePow:UP,scaleQuantile:_U,scaleQuantize:jU,scaleRadial:wU,scaleSequential:LU,scaleSequentialLog:RU,scaleSequentialPow:JP,scaleSequentialQuantile:DU,scaleSequentialSqrt:fNe,scaleSequentialSymlog:IU,scaleSqrt:Gje,scaleSymlog:bU,scaleThreshold:NU,scaleTime:uNe,scaleUtc:dNe,tickFormat:gU},Symbol.toStringTag,{value:"Module"}));var mNe=wg;function pNe(e,t,r){for(var n=-1,i=e.length;++n<i;){var s=e[n],o=t(s);if(o!=null&&(l===void 0?o===o&&!mNe(o):r(o,l)))var l=o,c=s}return c}var vj=pNe;function gNe(e,t){return e>t}var BU=gNe,vNe=vj,yNe=BU,xNe=Pg;function bNe(e){return e&&e.length?vNe(e,xNe,yNe):void 0}var wNe=bNe;const Xu=nn(wNe);function _Ne(e,t){return e<t}var zU=_Ne,jNe=vj,NNe=zU,SNe=Pg;function ANe(e){return e&&e.length?jNe(e,SNe,NNe):void 0}var CNe=ANe;const yj=nn(CNe);var kNe=hP,ENe=Ul,PNe=Yq,ONe=na;function TNe(e,t){var r=ONe(e)?kNe:PNe;return r(e,ENe(t))}var LNe=TNe,RNe=Gq,INe=LNe;function DNe(e,t){return RNe(INe(e,t),1)}var MNe=DNe;const $Ne=nn(MNe);var FNe=kP;function BNe(e,t){return FNe(e,t)}var zNe=BNe;const Bp=nn(zNe);var Tg=1e9,qNe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},tO,Wn=!0,oo="[DecimalError] ",Vf=oo+"Invalid argument: ",eO=oo+"Exponent out of range: ",Lg=Math.floor,pf=Math.pow,UNe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Na,Wi=1e7,Fn=7,qU=9007199254740991,h2=Lg(qU/Fn),ct={};ct.absoluteValue=ct.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ct.comparedTo=ct.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};ct.decimalPlaces=ct.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Fn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ct.dividedBy=ct.div=function(e){return Pc(this,new this.constructor(e))};ct.dividedToIntegerBy=ct.idiv=function(e){var t=this,r=t.constructor;return _n(Pc(t,new r(e),0,1),r.precision)};ct.equals=ct.eq=function(e){return!this.cmp(e)};ct.exponent=function(){return Si(this)};ct.greaterThan=ct.gt=function(e){return this.cmp(e)>0};ct.greaterThanOrEqualTo=ct.gte=function(e){return this.cmp(e)>=0};ct.isInteger=ct.isint=function(){return this.e>this.d.length-2};ct.isNegative=ct.isneg=function(){return this.s<0};ct.isPositive=ct.ispos=function(){return this.s>0};ct.isZero=function(){return this.s===0};ct.lessThan=ct.lt=function(e){return this.cmp(e)<0};ct.lessThanOrEqualTo=ct.lte=function(e){return this.cmp(e)<1};ct.logarithm=ct.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Na))throw Error(oo+"NaN");if(r.s<1)throw Error(oo+(r.s?"NaN":"-Infinity"));return r.eq(Na)?new n(0):(Wn=!1,t=Pc(_x(r,s),_x(e,s),s),Wn=!0,_n(t,i))};ct.minus=ct.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?HU(t,e):UU(t,(e.s=-e.s,e))};ct.modulo=ct.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(oo+"NaN");return r.s?(Wn=!1,t=Pc(r,e,0,1).times(e),Wn=!0,r.minus(t)):_n(new n(r),i)};ct.naturalExponential=ct.exp=function(){return WU(this)};ct.naturalLogarithm=ct.ln=function(){return _x(this)};ct.negated=ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ct.plus=ct.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UU(t,e):HU(t,(e.s=-e.s,e))};ct.precision=ct.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Vf+e);if(t=Si(i)+1,n=i.d.length-1,r=n*Fn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ct.squareRoot=ct.sqrt=function(){var e,t,r,n,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(oo+"NaN")}for(e=Si(l),Wn=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=jl(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Lg((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(i.toString()),r=c.precision,i=o=r+3;;)if(s=n,n=s.plus(Pc(l,s,o+2)).times(.5),jl(s.d).slice(0,o)===(t=jl(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(_n(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return Wn=!0,_n(n,r)};ct.times=ct.mul=function(e){var t,r,n,i,s,o,l,c,u,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=h.length,c<u&&(s=m,m=h,h=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,i=c+n;i>n;)l=s[i]+h[n]*m[i-n-1]+t,s[i--]=l%Wi|0,t=l/Wi|0;s[i]=(s[i]+t)%Wi|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Wn?_n(e,f.precision):e};ct.toDecimalPlaces=ct.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:($l(e,0,Tg),t===void 0?t=n.rounding:$l(t,0,8),_n(r,e+Si(r)+1,t))};ct.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=oh(n,!0):($l(e,0,Tg),t===void 0?t=i.rounding:$l(t,0,8),n=_n(new i(n),e+1,t),r=oh(n,!0,e+1)),r};ct.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?oh(i):($l(e,0,Tg),t===void 0?t=s.rounding:$l(t,0,8),n=_n(new s(i),e+Si(i)+1,t),r=oh(n.abs(),!1,e+Si(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};ct.toInteger=ct.toint=function(){var e=this,t=e.constructor;return _n(new t(e),Si(e)+1,t.rounding)};ct.toNumber=function(){return+this};ct.toPower=ct.pow=function(e){var t,r,n,i,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Na);if(l=new c(l),!l.s){if(e.s<1)throw Error(oo+"Infinity");return l}if(l.eq(Na))return l;if(n=c.precision,e.eq(Na))return _n(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=qU){for(i=new c(Na),t=Math.ceil(n/Fn+4),Wn=!1;r%2&&(i=i.times(l),R6(i.d,t)),r=Lg(r/2),r!==0;)l=l.times(l),R6(l.d,t);return Wn=!0,e.s<0?new c(Na).div(i):_n(i,n)}}else if(s<0)throw Error(oo+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Wn=!1,i=e.times(_x(l,n+u)),Wn=!0,i=WU(i),i.s=s,i};ct.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=Si(i),n=oh(i,r<=s.toExpNeg||r>=s.toExpPos)):($l(e,1,Tg),t===void 0?t=s.rounding:$l(t,0,8),i=_n(new s(i),e,t),r=Si(i),n=oh(i,e<=r||r<=s.toExpNeg,e)),n};ct.toSignificantDigits=ct.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):($l(e,1,Tg),t===void 0?t=n.rounding:$l(t,0,8)),_n(new n(r),e,t)};ct.toString=ct.valueOf=ct.val=ct.toJSON=ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Si(e),r=e.constructor;return oh(e,t<=r.toExpNeg||t>=r.toExpPos)};function UU(e,t){var r,n,i,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Wn?_n(t,f):t;if(c=e.d,u=t.d,o=e.e,i=t.e,c=c.slice(),s=o-i,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,i=o,l=c.length),o=Math.ceil(f/Fn),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Wi|0,c[s]%=Wi;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,Wn?_n(t,f):t}function $l(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Vf+e)}function jl(e){var t,r,n,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)n=e[t]+"",r=Fn-n.length,r&&(s+=Ru(r)),s+=n;o=e[t],n=o+"",r=Fn-n.length,r&&(s+=Ru(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Pc=function(){function e(n,i){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+o,n[l]=s%Wi|0,o=s/Wi|0;return o&&n.unshift(o),n}function t(n,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function r(n,i,s){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*Wi+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o){var l,c,u,d,f,m,h,v,p,g,y,b,x,j,N,A,C,E,O=n.constructor,L=n.s==i.s?1:-1,k=n.d,T=i.d;if(!n.s)return new O(n);if(!i.s)throw Error(oo+"Division by zero");for(c=n.e-i.e,C=T.length,N=k.length,h=new O(L),v=h.d=[],u=0;T[u]==(k[u]||0);)++u;if(T[u]>(k[u]||0)&&--c,s==null?b=s=O.precision:o?b=s+(Si(n)-Si(i))+1:b=s,b<0)return new O(0);if(b=b/Fn+2|0,u=0,C==1)for(d=0,T=T[0],b++;(u<N||d)&&b--;u++)x=d*Wi+(k[u]||0),v[u]=x/T|0,d=x%T|0;else{for(d=Wi/(T[0]+1)|0,d>1&&(T=e(T,d),k=e(k,d),C=T.length,N=k.length),j=C,p=k.slice(0,C),g=p.length;g<C;)p[g++]=0;E=T.slice(),E.unshift(0),A=T[0],T[1]>=Wi/2&&++A;do d=0,l=t(T,p,C,g),l<0?(y=p[0],C!=g&&(y=y*Wi+(p[1]||0)),d=y/A|0,d>1?(d>=Wi&&(d=Wi-1),f=e(T,d),m=f.length,g=p.length,l=t(f,p,m,g),l==1&&(d--,r(f,C<m?E:T,m))):(d==0&&(l=d=1),f=T.slice()),m=f.length,m<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=t(T,p,C,g),l<1&&(d++,r(p,C<g?E:T,g))),g=p.length):l===0&&(d++,p=[0]),v[u++]=d,l&&p[0]?p[g++]=k[j]||0:(p=[k[j]],g=1);while((j++<N||p[0]!==void 0)&&b--)}return v[0]||v.shift(),h.e=c,_n(h,o?s+Si(h)+1:s)}}();function WU(e,t){var r,n,i,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Si(e)>16)throw Error(eO+Si(e));if(!e.s)return new d(Na);for(t==null?(Wn=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(pf(2,u))/Math.LN10*2+5|0,l+=n,r=i=s=new d(Na),d.precision=l;;){if(i=_n(i.times(e),l),r=r.times(++c),o=s.plus(Pc(i,r,l)),jl(o.d).slice(0,l)===jl(s.d).slice(0,l)){for(;u--;)s=_n(s.times(s),l);return d.precision=f,t==null?(Wn=!0,_n(s,f)):s}s=o}}function Si(e){for(var t=e.e*Fn,r=e.d[0];r>=10;r/=10)t++;return t}function ZN(e,t,r){if(t>e.LN10.sd())throw Wn=!0,r&&(e.precision=r),Error(oo+"LN10 precision limit exceeded");return _n(new e(e.LN10),t)}function Ru(e){for(var t="";e--;)t+="0";return t}function _x(e,t){var r,n,i,s,o,l,c,u,d,f=1,m=10,h=e,v=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(oo+(h.s?"NaN":"-Infinity"));if(h.eq(Na))return new p(0);if(t==null?(Wn=!1,u=g):u=t,h.eq(10))return t==null&&(Wn=!0),ZN(p,u);if(u+=m,p.precision=u,r=jl(v),n=r.charAt(0),s=Si(h),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=jl(h.d),n=r.charAt(0),f++;s=Si(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1))}else return c=ZN(p,u+2,g).times(s+""),h=_x(new p(n+"."+r.slice(1)),u-m).plus(c),p.precision=g,t==null?(Wn=!0,_n(h,g)):h;for(l=o=h=Pc(h.minus(Na),h.plus(Na),u),d=_n(h.times(h),u),i=3;;){if(o=_n(o.times(d),u),c=l.plus(Pc(o,new p(i),u)),jl(c.d).slice(0,u)===jl(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(ZN(p,u+2,g).times(s+""))),l=Pc(l,new p(f),u),p.precision=g,t==null?(Wn=!0,_n(l,g)):l;l=c,i+=2}}function L6(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=Lg(r/Fn),e.d=[],n=(r+1)%Fn,r<0&&(n+=Fn),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Fn;n<i;)e.d.push(+t.slice(n,n+=Fn));t=t.slice(n),n=Fn-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Wn&&(e.e>h2||e.e<-h2))throw Error(eO+r)}else e.s=0,e.e=0,e.d=[0];return e}function _n(e,t,r){var n,i,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=Fn,i=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Fn),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=Fn,i=n-Fn+o}if(r!==void 0&&(s=pf(10,o-i-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?i>0?u/pf(10,o-i):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=Si(e),f.length=1,t=t-s-1,f[0]=pf(10,(Fn-t%Fn)%Fn),e.e=Lg(-t/Fn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=pf(10,Fn-n),f[d]=i>0?(u/pf(10,o-i)%pf(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Wi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Wi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Wn&&(e.e>h2||e.e<-h2))throw Error(eO+Si(e));return e}function HU(e,t){var r,n,i,s,o,l,c,u,d,f,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Wn?_n(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),i=Math.max(Math.ceil(h/Fn),l)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>o;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=Wi-1;--c[s],c[i]+=Wi}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Wn?_n(t,h):t):new m(0)}function oh(e,t,r){var n,i=Si(e),s=jl(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ru(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ru(-i-1)+s,r&&(n=r-o)>0&&(s+=Ru(n))):i>=o?(s+=Ru(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+Ru(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=Ru(n))),e.s<0?"-"+s:s}function R6(e,t){if(e.length>t)return e.length=t,!0}function VU(e){var t,r,n;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Vf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return L6(o,s.toString())}else if(typeof s!="string")throw Error(Vf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,UNe.test(s))L6(o,s);else throw Error(Vf+s)}if(i.prototype=ct,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=VU,i.config=i.set=WNe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function WNe(e){if(!e||typeof e!="object")throw Error(oo+"Object expected");var t,r,n,i=["precision",1,Tg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(Lg(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Vf+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Vf+r+": "+n);return this}var tO=VU(qNe);Na=new tO(1);const gn=tO;function HNe(e){return YNe(e)||KNe(e)||GNe(e)||VNe()}function VNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GNe(e,t){if(e){if(typeof e=="string")return JC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JC(e,t)}}function KNe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function YNe(e){if(Array.isArray(e))return JC(e)}function JC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var XNe=function(t){return t},GU={"@@functional/placeholder":!0},KU=function(t){return t===GU},I6=function(t){return function r(){return arguments.length===0||arguments.length===1&&KU(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},ZNe=function e(t,r){return t===1?r:I6(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==GU}).length;return o>=t?r.apply(void 0,i):e(t-o,I6(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(f){return KU(f)?c.shift():f});return r.apply(void 0,HNe(d).concat(c))}))})},xj=function(t){return ZNe(t.length,t)},QC=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},JNe=xj(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),QNe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return XNe;var i=r.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},ek=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},YU=function(t){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r&&s.every(function(l,c){return l===r[c]})||(r=s,n=t.apply(void 0,s)),n}};function eSe(e){var t;return e===0?t=1:t=Math.floor(new gn(e).abs().log(10).toNumber())+1,t}function tSe(e,t,r){for(var n=new gn(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var rSe=xj(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),nSe=xj(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),iSe=xj(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const bj={rangeStep:tSe,getDigitCount:eSe,interpolateNumber:rSe,uninterpolateNumber:nSe,uninterpolateTruncation:iSe};function tk(e){return oSe(e)||aSe(e)||XU(e)||sSe()}function sSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aSe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function oSe(e){if(Array.isArray(e))return rk(e)}function jx(e,t){return uSe(e)||cSe(e,t)||XU(e,t)||lSe()}function lSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XU(e,t){if(e){if(typeof e=="string")return rk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rk(e,t)}}function rk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cSe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,s=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw s}}return r}}function uSe(e){if(Array.isArray(e))return e}function ZU(e){var t=jx(e,2),r=t[0],n=t[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function JU(e,t,r){if(e.lte(0))return new gn(0);var n=bj.getDigitCount(e.toNumber()),i=new gn(10).pow(n),s=e.div(i),o=n!==1?.05:.1,l=new gn(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(i);return t?c:new gn(Math.ceil(c))}function dSe(e,t,r){var n=1,i=new gn(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new gn(10).pow(bj.getDigitCount(e)-1),i=new gn(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new gn(Math.floor(e)))}else e===0?i=new gn(Math.floor((t-1)/2)):r||(i=new gn(Math.floor(e)));var o=Math.floor((t-1)/2),l=QNe(JNe(function(c){return i.add(new gn(c-o).mul(n)).toNumber()}),QC);return l(0,t)}function QU(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new gn(0),tickMin:new gn(0),tickMax:new gn(0)};var s=JU(new gn(t).sub(e).div(r-1),n,i),o;e<=0&&t>=0?o=new gn(0):(o=new gn(e).add(t).div(2),o=o.sub(new gn(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new gn(t).sub(o).div(s).toNumber()),u=l+c+1;return u>r?QU(e,t,r,n,i+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:s,tickMin:o.sub(new gn(l).mul(s)),tickMax:o.add(new gn(c).mul(s))})}function fSe(e){var t=jx(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=ZU([r,n]),c=jx(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(tk(QC(0,i-1).map(function(){return 1/0}))):[].concat(tk(QC(0,i-1).map(function(){return-1/0})),[d]);return r>n?ek(f):f}if(u===d)return dSe(u,i,s);var m=QU(u,d,o,s),h=m.step,v=m.tickMin,p=m.tickMax,g=bj.rangeStep(v,p.add(new gn(.1).mul(h)),h);return r>n?ek(g):g}function hSe(e,t){var r=jx(e,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=ZU([n,i]),l=jx(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var d=Math.max(t,2),f=JU(new gn(u).sub(c).div(d-1),s,0),m=[].concat(tk(bj.rangeStep(new gn(c),new gn(u).sub(new gn(.99).mul(f)),f)),[u]);return n>i?ek(m):m}var mSe=YU(fSe),pSe=YU(hSe),gSe="Invariant failed";function lh(e,t){throw new Error(gSe)}var vSe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function zp(e){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}function m2(){return m2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m2.apply(this,arguments)}function ySe(e,t){return _Se(e)||wSe(e,t)||bSe(e,t)||xSe()}function xSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bSe(e,t){if(e){if(typeof e=="string")return D6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D6(e,t)}}function D6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function _Se(e){if(Array.isArray(e))return e}function jSe(e,t){if(e==null)return{};var r=NSe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function SSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ASe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rW(n.key),n)}}function CSe(e,t,r){return t&&ASe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kSe(e,t,r){return t=p2(t),ESe(e,eW()?Reflect.construct(t,r||[],p2(e).constructor):t.apply(e,r))}function ESe(e,t){if(t&&(zp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PSe(e)}function PSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eW=function(){return!!e})()}function p2(e){return p2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p2(e)}function OSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nk(e,t)}function nk(e,t){return nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nk(e,t)}function tW(e,t,r){return t=rW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rW(e){var t=TSe(e,"string");return zp(t)=="symbol"?t:t+""}function TSe(e,t){if(zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wj=function(e){function t(){return SSe(this,t),kSe(this,t,arguments)}return OSe(t,e),CSe(t,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,m=jSe(n,vSe),h=Dt(m,!1);this.props.direction==="x"&&d.type!=="number"&&lh();var v=c.map(function(p){var g=u(p,l),y=g.x,b=g.y,x=g.value,j=g.errorVal;if(!j)return null;var N=[],A,C;if(Array.isArray(j)){var E=ySe(j,2);A=E[0],C=E[1]}else A=C=j;if(s==="vertical"){var O=d.scale,L=b+i,k=L+o,T=L-o,B=O(x-A),M=O(x+C);N.push({x1:M,y1:k,x2:M,y2:T}),N.push({x1:B,y1:L,x2:M,y2:L}),N.push({x1:B,y1:k,x2:B,y2:T})}else if(s==="horizontal"){var G=f.scale,z=y+i,D=z-o,q=z+o,K=G(x-A),ae=G(x+C);N.push({x1:D,y1:ae,x2:q,y2:ae}),N.push({x1:z,y1:K,x2:z,y2:ae}),N.push({x1:D,y1:K,x2:q,y2:K})}return ie.createElement(Rr,m2({className:"recharts-errorBar",key:"bar-".concat(N.map(function(J){return"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))},h),N.map(function(J){return ie.createElement("line",m2({},J,{key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))}))});return ie.createElement(Rr,{className:"recharts-errorBars"},v)}}])}(ie.Component);tW(wj,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});tW(wj,"displayName","ErrorBar");function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function M6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M6(Object(r),!0).forEach(function(n){LSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LSe(e,t,r){return t=RSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RSe(e){var t=ISe(e,"string");return Nx(t)=="symbol"?t:t+""}function ISe(e,t){if(Nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nW=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,o=xa(r,Ec);if(!o)return null;var l=Ec.defaultProps,c=l!==void 0?nf(nf({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(n||[]).reduce(function(d,f){var m=f.item,h=f.props,v=h.sectors||h.data||[];return d.concat(v.map(function(p){return{type:o.props.iconType||m.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,m=f.type.defaultProps,h=m!==void 0?nf(nf({},m),f.props):{},v=h.dataKey,p=h.name,g=h.legendType,y=h.hide;return{inactive:y,dataKey:v,type:c.iconType||g||"square",color:rO(f),value:p||v,payload:h}}),nf(nf(nf({},c),Ec.getWithHeight(o,i)),{},{payload:u,item:o})};function Sx(e){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sx(e)}function $6(e){return FSe(e)||$Se(e)||MSe(e)||DSe()}function DSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MSe(e,t){if(e){if(typeof e=="string")return ik(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ik(e,t)}}function $Se(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FSe(e){if(Array.isArray(e))return ik(e)}function ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ii(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F6(Object(r),!0).forEach(function(n){Zm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zm(e,t,r){return t=BSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BSe(e){var t=zSe(e,"string");return Sx(t)=="symbol"?t:t+""}function zSe(e,t){if(Sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $i(e,t,r){return ur(e)||ur(t)?r:Bi(t)?Pa(e,t,r):Ut(t)?t(e):r}function py(e,t,r,n){var i=$Ne(e,function(l){return $i(l,t)});if(r==="number"){var s=i.filter(function(l){return Xe(l)||parseFloat(l)});return s.length?[yj(s),Xu(s)]:[1/0,-1/0]}var o=n?i.filter(function(l){return!ur(l)}):i;return o.map(function(l){return Bi(l)||l instanceof Date?l:""})}var qSe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,f=i[u].coordinate,m=u>=l-1?i[0].coordinate:i[u+1].coordinate,h=void 0;if(Ls(f-d)!==Ls(m-f)){var v=[];if(Ls(m-f)===Ls(c[1]-c[0])){h=m;var p=f+c[1]-c[0];v[0]=Math.min(p,(p+d)/2),v[1]=Math.max(p,(p+d)/2)}else{h=d;var g=m+c[1]-c[0];v[0]=Math.min(f,(g+f)/2),v[1]=Math.max(f,(g+f)/2)}var y=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(t>y[0]&&t<=y[1]||t>=v[0]&&t<=v[1]){o=i[u].index;break}}else{var b=Math.min(d,m),x=Math.max(d,m);if(t>(b+f)/2&&t<=(x+f)/2){o=i[u].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<l-1&&t>(n[j].coordinate+n[j-1].coordinate)/2&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j===l-1&&t>(n[j].coordinate+n[j-1].coordinate)/2){o=n[j].index;break}return o},rO=function(t){var r,n=t,i=n.type.displayName,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ii(ii({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},USe=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),m=0,h=f.length;m<h;m++){var v=d[f[m]],p=v.items,g=v.cateAxisId,y=p.filter(function(C){return kc(C.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,x=b!==void 0?ii(ii({},b),y[0].props):y[0].props,j=x.barSize,N=x[g];o[N]||(o[N]=[]);var A=ur(j)?r:j;o[N].push({item:y[0],stackList:y.slice(1),barSize:ur(A)?void 0:Rs(A,n,0)})}}return o},WSe=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Rs(r,i,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,h=i/c,v=o.reduce(function(j,N){return j+N.barSize||0},0);v+=(c-1)*u,v>=i&&(v-=(c-1)*u,u=0),v>=i&&h>0&&(m=!0,h*=.9,v=c*h);var p=(i-v)/2>>0,g={offset:p-u,size:0};d=o.reduce(function(j,N){var A={item:N.item,position:{offset:g.offset+g.size+u,size:m?h:N.barSize}},C=[].concat($6(j),[A]);return g=C[C.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(E){C.push({item:E,position:g})}),C},f)}else{var y=Rs(n,i,0,!0);i-2*y-(c-1)*u<=0&&(u=0);var b=(i-2*y-(c-1)*u)/c;b>1&&(b>>=0);var x=l===+l?Math.min(b,l):b;d=o.reduce(function(j,N,A){var C=[].concat($6(j),[{item:N.item,position:{offset:y+(b+u)*A+(b-x)/2,size:x}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(E){C.push({item:E,position:C[C.length-1].position})}),C},f)}return d},HSe=function(t,r,n,i){var s=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=nW({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,m=d.height,h=u.align,v=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&v==="middle")&&h!=="center"&&Xe(t[h]))return ii(ii({},t),{},Zm({},h,t[h]+(f||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&v!=="middle"&&Xe(t[v]))return ii(ii({},t),{},Zm({},v,t[v]+(m||0)))}return t},VSe=function(t,r,n){return ur(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},iW=function(t,r,n,i,s){var o=r.props.children,l=ro(o,wj).filter(function(u){return VSe(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=$i(d,n);if(ur(f))return u;var m=Array.isArray(f)?[yj(f),Xu(f)]:[f,f],h=c.reduce(function(v,p){var g=$i(d,p,0),y=m[0]-Math.abs(Array.isArray(g)?g[0]:g),b=m[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,v[0]),Math.max(b,v[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},GSe=function(t,r,n,i,s){var o=r.map(function(l){return iW(t,l,n,s,i)}).filter(function(l){return!ur(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},sW=function(t,r,n,i,s){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&iW(t,c,u,i)||py(t,u,n,s)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},aW=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},oW=function(t,r,n,i){if(i)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate});return s||l.push(r),o||l.push(n),l},Nc=function(t,r,n){if(!t)return null;var i=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ls(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var m=s?s.indexOf(f):f;return{coordinate:i(m)+u,value:f,offset:u}});return d.filter(function(f){return!Ag(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:i(f)+u,value:f,index:m,offset:u}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,m){return{coordinate:i(f)+u,value:s?s[f]:f,index:m,offset:u}})},JN=new WeakMap,Xb=function(t,r){if(typeof r!="function")return t;JN.has(t)||JN.set(t,new WeakMap);var n=JN.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},lW=function(t,r,n){var i=t.scale,s=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:vx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:c2(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:my(),realScaleType:"point"}:s==="category"?{scale:vx(),realScaleType:"band"}:{scale:c2(),realScaleType:"linear"};if(ih(i)){var c="scale".concat(ij(i));return{scale:(T6[c]||my)(),realScaleType:T6[c]?c:"point"}}return Ut(i)?{scale:i}:{scale:my(),realScaleType:"point"}},B6=1e-4,cW=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),s=Math.min(i[0],i[1])-B6,o=Math.max(i[0],i[1])+B6,l=t(r[0]),c=t(r[n-1]);(l<s||l>o||c<s||c>o)&&t.domain([r[0],r[n-1]])}},KSe=function(t,r){if(!t)return null;for(var n=0,i=t.length;n<i;n++)if(t[n].item===r)return t[n].position;return null},YSe=function(t,r){if(!r||r.length!==2||!Xe(r[0])||!Xe(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[t[0],t[1]];return(!Xe(t[0])||t[0]<n)&&(s[0]=n),(!Xe(t[1])||t[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<n&&(s[1]=n),s},XSe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,o=0,l=0;l<r;++l){var c=Ag(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},ZSe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,o=0;o<r;++o){var l=Ag(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=s,t[o][n][1]=s+l,s=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},JSe={sign:XSe,expand:vge,none:Tp,silhouette:yge,wiggle:xge,positive:ZSe},QSe=function(t,r,n){var i=r.map(function(l){return l.props.dataKey}),s=JSe[n],o=gge().keys(i).value(function(l,c){return+$i(l,c,0)}).order(EC).offset(s);return o(t)},eAe=function(t,r,n,i,s,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,m){var h,v=(h=m.type)!==null&&h!==void 0&&h.defaultProps?ii(ii({},m.type.defaultProps),m.props):m.props,p=v.stackId,g=v.hide;if(g)return f;var y=v[n],b=f[y]||{hasStack:!1,stackGroups:{}};if(Bi(p)){var x=b.stackGroups[p]||{numericAxisId:n,cateAxisId:i,items:[]};x.items.push(m),b.hasStack=!0,b.stackGroups[p]=x}else b.stackGroups[Cg("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[m]};return ii(ii({},f),{},Zm({},y,b))},c),d={};return Object.keys(u).reduce(function(f,m){var h=u[m];if(h.hasStack){var v={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,g){var y=h.stackGroups[g];return ii(ii({},p),{},Zm({},g,{numericAxisId:n,cateAxisId:i,items:y.items,stackedData:QSe(t,y.items,s)}))},v)}return ii(ii({},f),{},Zm({},m,h))},d)},uW=function(t,r){var n=r.realScaleType,i=r.type,s=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=mSe(u,s,l);return t.domain([yj(d),Xu(d)]),{niceTicks:d}}if(s&&i==="number"){var f=t.domain(),m=pSe(f,s,l);return{niceTicks:m}}return null};function z6(e){var t=e.axis,r=e.ticks,n=e.bandSize,i=e.entry,s=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ur(i[t.dataKey])){var l=qw(r,"value",i[t.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=$i(i,ur(o)?t.dataKey:o);return ur(c)?null:t.scale(c)}var q6=function(t){var r=t.axis,n=t.ticks,i=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+i:null;var c=$i(o,r.dataKey,r.domain[l]);return ur(c)?null:r.scale(c)-s/2+i},tAe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return i<=0&&s>=0?0:s<0?s:i}return n[0]},rAe=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ii(ii({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(Bi(s)){var o=r[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},nAe=function(t){return t.reduce(function(r,n){return[yj(n.concat([r[0]]).filter(Xe)),Xu(n.concat([r[1]]).filter(Xe))]},[1/0,-1/0])},dW=function(t,r,n){return Object.keys(t).reduce(function(i,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,d){var f=nAe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},U6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,W6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sk=function(t,r,n){if(Ut(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(Xe(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(U6.test(t[0])){var s=+U6.exec(t[0])[1];i[0]=r[0]-s}else Ut(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(Xe(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(W6.test(t[1])){var o=+W6.exec(t[1])[1];i[1]=r[1]+o}else Ut(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},g2=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var s=PP(r,function(f){return f.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},H6=function(t,r,n){return!t||!t.length||Bp(t,Pa(n,"type.defaultProps.domain"))?r:t},fW=function(t,r){var n=t.type.defaultProps?ii(ii({},t.type.defaultProps),t.props):t.props,i=n.dataKey,s=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return ii(ii({},Dt(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:rO(t),value:$i(r,i),type:c,payload:r,chartType:u,hide:d})};function Ax(e){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ax(e)}function V6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V6(Object(r),!0).forEach(function(n){hW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hW(e,t,r){return t=iAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iAe(e){var t=sAe(e,"string");return Ax(t)=="symbol"?t:t+""}function sAe(e,t){if(Ax(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aAe(e,t){return uAe(e)||cAe(e,t)||lAe(e,t)||oAe()}function oAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lAe(e,t){if(e){if(typeof e=="string")return G6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G6(e,t)}}function G6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function uAe(e){if(Array.isArray(e))return e}var v2=Math.PI/180,dAe=function(t){return t*180/Math.PI},On=function(t,r,n,i){return{x:t+Math.cos(-v2*i)*n,y:r+Math.sin(-v2*i)*n}},mW=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},fAe=function(t,r,n,i,s){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Rs(t.cx,o,o/2),f=Rs(t.cy,l,l/2),m=mW(o,l,n),h=Rs(t.innerRadius,m,0),v=Rs(t.outerRadius,m,m*.8),p=Object.keys(r);return p.reduce(function(g,y){var b=r[y],x=b.domain,j=b.reversed,N;if(ur(b.range))i==="angleAxis"?N=[c,u]:i==="radiusAxis"&&(N=[h,v]),j&&(N=[N[1],N[0]]);else{N=b.range;var A=N,C=aAe(A,2);c=C[0],u=C[1]}var E=lW(b,s),O=E.realScaleType,L=E.scale;L.domain(x).range(N),cW(L);var k=uW(L,hc(hc({},b),{},{realScaleType:O})),T=hc(hc(hc({},b),k),{},{range:N,radius:v,realScaleType:O,scale:L,cx:d,cy:f,innerRadius:h,outerRadius:v,startAngle:c,endAngle:u});return hc(hc({},g),{},hW({},y,T))},{})},hAe=function(t,r){var n=t.x,i=t.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-o,2))},mAe=function(t,r){var n=t.x,i=t.y,s=r.cx,o=r.cy,l=hAe({x:n,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(n-s)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:dAe(u),angleInRadian:u}},pAe=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(i,s);return{startAngle:r-o*360,endAngle:n-o*360}},gAe=function(t,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),o=Math.floor(i/360),l=Math.min(s,o);return t+l*360},K6=function(t,r){var n=t.x,i=t.y,s=mAe({x:n,y:i},r),o=s.radius,l=s.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=pAe(r),f=d.startAngle,m=d.endAngle,h=l,v;if(f<=m){for(;h>m;)h-=360;for(;h<f;)h+=360;v=h>=f&&h<=m}else{for(;h>f;)h-=360;for(;h<m;)h+=360;v=h>=m&&h<=f}return v?hc(hc({},r),{},{radius:o,angle:gAe(h,r)}):null},pW=function(t){return!_.isValidElement(t)&&!Ut(t)&&typeof t!="boolean"?t.className:""};function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}var vAe=["offset"];function yAe(e){return _Ae(e)||wAe(e)||bAe(e)||xAe()}function xAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bAe(e,t){if(e){if(typeof e=="string")return ak(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ak(e,t)}}function wAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _Ae(e){if(Array.isArray(e))return ak(e)}function ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jAe(e,t){if(e==null)return{};var r=NAe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Li(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y6(Object(r),!0).forEach(function(n){SAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SAe(e,t,r){return t=AAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AAe(e){var t=CAe(e,"string");return Cx(t)=="symbol"?t:t+""}function CAe(e,t){if(Cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kx.apply(this,arguments)}var kAe=function(t){var r=t.value,n=t.formatter,i=ur(t.children)?r:t.children;return Ut(n)?n(i):i},EAe=function(t,r){var n=Ls(r-t),i=Math.min(Math.abs(r-t),360);return n*i},PAe=function(t,r,n){var i=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,m=c.outerRadius,h=c.startAngle,v=c.endAngle,p=c.clockWise,g=(f+m)/2,y=EAe(h,v),b=y>=0?1:-1,x,j;i==="insideStart"?(x=h+b*o,j=p):i==="insideEnd"?(x=v-b*o,j=!p):i==="end"&&(x=v+b*o,j=p),j=y<=0?j:!j;var N=On(u,d,g,x),A=On(u,d,g,x+(j?1:-1)*359),C="M".concat(N.x,",").concat(N.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(j?0:1,`,
    `).concat(A.x,",").concat(A.y),E=ur(t.id)?Cg("recharts-radial-line-"):t.id;return ie.createElement("text",kx({},n,{dominantBaseline:"central",className:cr("recharts-radial-bar-label",l)}),ie.createElement("defs",null,ie.createElement("path",{id:E,d:C})),ie.createElement("textPath",{xlinkHref:"#".concat(E)},r))},OAe=function(t){var r=t.viewBox,n=t.offset,i=t.position,s=r,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,m=(d+f)/2;if(i==="outside"){var h=On(o,l,u+n,m),v=h.x,p=h.y;return{x:v,y:p,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,y=On(o,l,g,m),b=y.x,x=y.y;return{x:b,y:x,textAnchor:"middle",verticalAnchor:"middle"}},TAe=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,s=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,m=f*i,h=f>0?"end":"start",v=f>0?"start":"end",p=u>=0?1:-1,g=p*i,y=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var x={x:l+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:h};return Li(Li({},x),n?{height:Math.max(c-n.y,0),width:u}:{})}if(s==="bottom"){var j={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:v};return Li(Li({},j),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(s==="left"){var N={x:l-g,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return Li(Li({},N),n?{width:Math.max(N.x-n.x,0),height:d}:{})}if(s==="right"){var A={x:l+u+g,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Li(Li({},A),n?{width:Math.max(n.x+n.width-A.x,0),height:d}:{})}var C=n?{width:u,height:d}:{};return s==="insideLeft"?Li({x:l+g,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},C):s==="insideRight"?Li({x:l+u-g,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},C):s==="insideTop"?Li({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:v},C):s==="insideBottom"?Li({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:h},C):s==="insideTopLeft"?Li({x:l+g,y:c+m,textAnchor:b,verticalAnchor:v},C):s==="insideTopRight"?Li({x:l+u-g,y:c+m,textAnchor:y,verticalAnchor:v},C):s==="insideBottomLeft"?Li({x:l+g,y:c+d-m,textAnchor:b,verticalAnchor:h},C):s==="insideBottomRight"?Li({x:l+u-g,y:c+d-m,textAnchor:y,verticalAnchor:h},C):_g(s)&&(Xe(s.x)||Sf(s.x))&&(Xe(s.y)||Sf(s.y))?Li({x:l+Rs(s.x,u),y:c+Rs(s.y,d),textAnchor:"end",verticalAnchor:"end"},C):Li({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},LAe=function(t){return"cx"in t&&Xe(t.cx)};function Gi(e){var t=e.offset,r=t===void 0?5:t,n=jAe(e,vAe),i=Li({offset:r},n),s=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,m=i.textBreakAll;if(!s||ur(l)&&ur(c)&&!_.isValidElement(u)&&!Ut(u))return null;if(_.isValidElement(u))return _.cloneElement(u,i);var h;if(Ut(u)){if(h=_.createElement(u,i),_.isValidElement(h))return h}else h=kAe(i);var v=LAe(s),p=Dt(i,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return PAe(i,h,p);var g=v?OAe(i):TAe(i);return ie.createElement(ah,kx({className:cr("recharts-label",f)},p,g,{breakAll:m}),h)}Gi.displayName="Label";var gW=function(t){var r=t.cx,n=t.cy,i=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,m=t.y,h=t.top,v=t.left,p=t.width,g=t.height,y=t.clockWise,b=t.labelViewBox;if(b)return b;if(Xe(p)&&Xe(g)){if(Xe(f)&&Xe(m))return{x:f,y:m,width:p,height:g};if(Xe(h)&&Xe(v))return{x:h,y:v,width:p,height:g}}return Xe(f)&&Xe(m)?{x:f,y:m,width:0,height:0}:Xe(r)&&Xe(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},RAe=function(t,r){return t?t===!0?ie.createElement(Gi,{key:"label-implicit",viewBox:r}):Bi(t)?ie.createElement(Gi,{key:"label-implicit",viewBox:r,value:t}):_.isValidElement(t)?t.type===Gi?_.cloneElement(t,{key:"label-implicit",viewBox:r}):ie.createElement(Gi,{key:"label-implicit",content:t,viewBox:r}):Ut(t)?ie.createElement(Gi,{key:"label-implicit",content:t,viewBox:r}):_g(t)?ie.createElement(Gi,kx({viewBox:r},t,{key:"label-implicit"})):null:null},IAe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,s=gW(t),o=ro(i,Gi).map(function(c,u){return _.cloneElement(c,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return o;var l=RAe(t.label,r||s);return[l].concat(yAe(o))};Gi.parseViewBox=gW;Gi.renderCallByParent=IAe;function DAe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var MAe=DAe;const $Ae=nn(MAe);function Ex(e){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ex(e)}var FAe=["valueAccessor"],BAe=["data","dataKey","clockWise","id","textBreakAll"];function zAe(e){return HAe(e)||WAe(e)||UAe(e)||qAe()}function qAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UAe(e,t){if(e){if(typeof e=="string")return ok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ok(e,t)}}function WAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HAe(e){if(Array.isArray(e))return ok(e)}function ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y2(){return y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y2.apply(this,arguments)}function X6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Z6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X6(Object(r),!0).forEach(function(n){VAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VAe(e,t,r){return t=GAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GAe(e){var t=KAe(e,"string");return Ex(t)=="symbol"?t:t+""}function KAe(e,t){if(Ex(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J6(e,t){if(e==null)return{};var r=YAe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function YAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var XAe=function(t){return Array.isArray(t.value)?$Ae(t.value):t.value};function Oc(e){var t=e.valueAccessor,r=t===void 0?XAe:t,n=J6(e,FAe),i=n.data,s=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=J6(n,BAe);return!i||!i.length?null:ie.createElement(Rr,{className:"recharts-label-list"},i.map(function(d,f){var m=ur(s)?r(d,f):$i(d&&d.payload,s),h=ur(l)?{}:{id:"".concat(l,"-").concat(f)};return ie.createElement(Gi,y2({},Dt(d,!0),u,h,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:Gi.parseViewBox(ur(o)?d:Z6(Z6({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Oc.displayName="LabelList";function ZAe(e,t){return e?e===!0?ie.createElement(Oc,{key:"labelList-implicit",data:t}):ie.isValidElement(e)||Ut(e)?ie.createElement(Oc,{key:"labelList-implicit",data:t,content:e}):_g(e)?ie.createElement(Oc,y2({data:t},e,{key:"labelList-implicit"})):null:null}function JAe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=ro(n,Oc).map(function(o,l){return _.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return i;var s=ZAe(e.label,t);return[s].concat(zAe(i))}Oc.renderCallByParent=JAe;function Px(e){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(e)}function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lk.apply(this,arguments)}function Q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q6(Object(r),!0).forEach(function(n){QAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QAe(e,t,r){return t=eCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eCe(e){var t=tCe(e,"string");return Px(t)=="symbol"?t:t+""}function tCe(e,t){if(Px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rCe=function(t,r){var n=Ls(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},Zb=function(t){var r=t.cx,n=t.cy,i=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+i,f=Math.asin(c/d)/v2,m=u?s:s+o*f,h=On(r,n,d,m),v=On(r,n,i,m),p=u?s-o*f:s,g=On(r,n,d*Math.cos(f*v2),p);return{center:h,circleTangency:v,lineTangency:g,theta:f}},vW=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=rCe(o,l),u=o+c,d=On(r,n,s,o),f=On(r,n,s,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var h=On(r,n,i,o),v=On(r,n,i,u);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},nCe=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Ls(d-u),m=Zb({cx:r,cy:n,radius:s,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),h=m.circleTangency,v=m.lineTangency,p=m.theta,g=Zb({cx:r,cy:n,radius:s,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=g.circleTangency,b=g.lineTangency,x=g.theta,j=c?Math.abs(u-d):Math.abs(u-d)-p-x;if(j<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):vW({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var A=Zb({cx:r,cy:n,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=A.circleTangency,E=A.lineTangency,O=A.theta,L=Zb({cx:r,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=L.circleTangency,T=L.lineTangency,B=L.theta,M=c?Math.abs(u-d):Math.abs(u-d)-O-B;if(M<0&&o===0)return"".concat(N,"L").concat(r,",").concat(n,"Z");N+="L".concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else N+="L".concat(r,",").concat(n,"Z");return N},iCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yW=function(t){var r=eD(eD({},iCe),t),n=r.cx,i=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,m=r.className;if(o<s||d===f)return null;var h=cr("recharts-sector",m),v=o-s,p=Rs(l,v,0,!0),g;return p>0&&Math.abs(d-f)<360?g=nCe({cx:n,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(p,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):g=vW({cx:n,cy:i,innerRadius:s,outerRadius:o,startAngle:d,endAngle:f}),ie.createElement("path",lk({},Dt(r,!0),{className:h,d:g,role:"img"}))};function Ox(e){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ox(e)}function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ck.apply(this,arguments)}function tD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tD(Object(r),!0).forEach(function(n){sCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sCe(e,t,r){return t=aCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aCe(e){var t=oCe(e,"string");return Ox(t)=="symbol"?t:t+""}function oCe(e,t){if(Ox(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ox(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nD={curveBasisClosed:sge,curveBasisOpen:age,curveBasis:ige,curveBumpX:Wpe,curveBumpY:Hpe,curveLinearClosed:oge,curveLinear:aj,curveMonotoneX:lge,curveMonotoneY:cge,curveNatural:uge,curveStep:dge,curveStepAfter:hge,curveStepBefore:fge},Jb=function(t){return t.x===+t.x&&t.y===+t.y},Ev=function(t){return t.x},Pv=function(t){return t.y},lCe=function(t,r){if(Ut(t))return t;var n="curve".concat(ij(t));return(n==="curveMonotone"||n==="curveBump")&&r?nD["".concat(n).concat(r==="vertical"?"Y":"X")]:nD[n]||aj},cCe=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,s=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=lCe(n,l),f=u?s.filter(function(p){return Jb(p)}):s,m;if(Array.isArray(o)){var h=u?o.filter(function(p){return Jb(p)}):o,v=f.map(function(p,g){return rD(rD({},p),{},{base:h[g]})});return l==="vertical"?m=qb().y(Pv).x1(Ev).x0(function(p){return p.base.x}):m=qb().x(Ev).y1(Pv).y0(function(p){return p.base.y}),m.defined(Jb).curve(d),m(v)}return l==="vertical"&&Xe(o)?m=qb().y(Pv).x1(Ev).x0(o):Xe(o)?m=qb().x(Ev).y1(Pv).y0(o):m=fq().x(Ev).y(Pv),m.defined(Jb).curve(d),m(f)},Jm=function(t){var r=t.className,n=t.points,i=t.path,s=t.pathRef;if((!n||!n.length)&&!i)return null;var o=n&&n.length?cCe(t):i;return _.createElement("path",ck({},Dt(t,!1),Uw(t),{className:cr("recharts-curve",r),d:o,ref:s}))},xW={exports:{}},uCe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",dCe=uCe,fCe=dCe;function bW(){}function wW(){}wW.resetWarningCache=bW;var hCe=function(){function e(n,i,s,o,l,c){if(c!==fCe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wW,resetWarningCache:bW};return r.PropTypes=r,r};xW.exports=hCe();var mCe=xW.exports;const Qr=nn(mCe);var pCe=Object.getOwnPropertyNames,gCe=Object.getOwnPropertySymbols,vCe=Object.prototype.hasOwnProperty;function iD(e,t){return function(n,i,s){return e(n,i,s)&&t(n,i,s)}}function Qb(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var s=i.cache,o=s.get(r),l=s.get(n);if(o&&l)return o===n&&l===r;s.set(r,n),s.set(n,r);var c=e(r,n,i);return s.delete(r),s.delete(n),c}}function sD(e){return pCe(e).concat(gCe(e))}var yCe=Object.hasOwn||function(e,t){return vCe.call(e,t)};function Ch(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var xCe="__v",bCe="__o",wCe="_owner",aD=Object.getOwnPropertyDescriptor,oD=Object.keys;function _Ce(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function jCe(e,t){return Ch(e.getTime(),t.getTime())}function NCe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function SCe(e,t){return e===t}function lD(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(i[f]){f++;continue}var m=o.value,h=l.value;if(r.equals(m[0],h[0],c,f,e,t,r)&&r.equals(m[1],h[1],m[0],h[0],e,t,r)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var ACe=Ch;function CCe(e,t,r){var n=oD(e),i=n.length;if(oD(t).length!==i)return!1;for(;i-- >0;)if(!_W(e,t,r,n[i]))return!1;return!0}function Ov(e,t,r){var n=sD(e),i=n.length;if(sD(t).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=n[i],!_W(e,t,r,s)||(o=aD(e,s),l=aD(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function kCe(e,t){return Ch(e.valueOf(),t.valueOf())}function ECe(e,t){return e.source===t.source&&e.flags===t.flags}function cD(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function PCe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function OCe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function _W(e,t,r,n){return(n===wCe||n===bCe||n===xCe)&&(e.$$typeof||t.$$typeof)?!0:yCe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var TCe="[object Arguments]",LCe="[object Boolean]",RCe="[object Date]",ICe="[object Error]",DCe="[object Map]",MCe="[object Number]",$Ce="[object Object]",FCe="[object RegExp]",BCe="[object Set]",zCe="[object String]",qCe="[object URL]",UCe=Array.isArray,uD=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,dD=Object.assign,WCe=Object.prototype.toString.call.bind(Object.prototype.toString);function HCe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(v,p,g){if(v===p)return!0;if(v==null||p==null)return!1;var y=typeof v;if(y!==typeof p)return!1;if(y!=="object")return y==="number"?o(v,p,g):y==="function"?i(v,p,g):!1;var b=v.constructor;if(b!==p.constructor)return!1;if(b===Object)return l(v,p,g);if(UCe(v))return t(v,p,g);if(uD!=null&&uD(v))return f(v,p,g);if(b===Date)return r(v,p,g);if(b===RegExp)return u(v,p,g);if(b===Map)return s(v,p,g);if(b===Set)return d(v,p,g);var x=WCe(v);return x===RCe?r(v,p,g):x===FCe?u(v,p,g):x===DCe?s(v,p,g):x===BCe?d(v,p,g):x===$Ce?typeof v.then!="function"&&typeof p.then!="function"&&l(v,p,g):x===qCe?m(v,p,g):x===ICe?n(v,p,g):x===TCe?l(v,p,g):x===LCe||x===MCe||x===zCe?c(v,p,g):!1}}function VCe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?Ov:_Ce,areDatesEqual:jCe,areErrorsEqual:NCe,areFunctionsEqual:SCe,areMapsEqual:n?iD(lD,Ov):lD,areNumbersEqual:ACe,areObjectsEqual:n?Ov:CCe,arePrimitiveWrappersEqual:kCe,areRegExpsEqual:ECe,areSetsEqual:n?iD(cD,Ov):cD,areTypedArraysEqual:n?Ov:PCe,areUrlsEqual:OCe};if(r&&(i=dD({},i,r(i))),t){var s=Qb(i.areArraysEqual),o=Qb(i.areMapsEqual),l=Qb(i.areObjectsEqual),c=Qb(i.areSetsEqual);i=dD({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function GCe(e){return function(t,r,n,i,s,o,l){return e(t,r,l)}}function KCe(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,s=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,m=f===void 0?t?new WeakMap:void 0:f,h=d.meta;return r(c,u,{cache:m,equals:i,meta:h,strict:s})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return r(c,u,o)}}var YCe=Dd();Dd({strict:!0});Dd({circular:!0});Dd({circular:!0,strict:!0});Dd({createInternalComparator:function(){return Ch}});Dd({strict:!0,createInternalComparator:function(){return Ch}});Dd({circular:!0,createInternalComparator:function(){return Ch}});Dd({circular:!0,createInternalComparator:function(){return Ch},strict:!0});function Dd(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,s=e.strict,o=s===void 0?!1:s,l=VCe(e),c=HCe(l),u=n?n(c):GCe(c);return KCe({circular:r,comparator:c,createState:i,equals:u,strict:o})}function XCe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function fD(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>t?(e(s),r=-1):XCe(i)};requestAnimationFrame(n)}function uk(e){"@babel/helpers - typeof";return uk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uk(e)}function ZCe(e){return tke(e)||eke(e)||QCe(e)||JCe()}function JCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QCe(e,t){if(e){if(typeof e=="string")return hD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hD(e,t)}}function hD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tke(e){if(Array.isArray(e))return e}function rke(){var e={},t=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,l=ZCe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){fD(i.bind(null,u),c);return}i(c),fD(i.bind(null,u));return}uk(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Tx(e){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tx(e)}function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mD(Object(r),!0).forEach(function(n){jW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jW(e,t,r){return t=nke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nke(e){var t=ike(e,"string");return Tx(t)==="symbol"?t:String(t)}function ike(e,t){if(Tx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ske=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},ake=function(t){return t},oke=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},gy=function(t,r){return Object.keys(r).reduce(function(n,i){return pD(pD({},n),{},jW({},i,t(i,r[i])))},{})},gD=function(t,r,n){return t.map(function(i){return"".concat(oke(i)," ").concat(r,"ms ").concat(n)}).join(",")};function lke(e,t){return dke(e)||uke(e,t)||NW(e,t)||cke()}function cke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function dke(e){if(Array.isArray(e))return e}function fke(e){return pke(e)||mke(e)||NW(e)||hke()}function hke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NW(e,t){if(e){if(typeof e=="string")return dk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dk(e,t)}}function mke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pke(e){if(Array.isArray(e))return dk(e)}function dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x2=1e-4,SW=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},AW=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},vD=function(t,r){return function(n){var i=SW(t,r);return AW(i,n)}},gke=function(t,r){return function(n){var i=SW(t,r),s=[].concat(fke(i.map(function(o,l){return o*l}).slice(1)),[0]);return AW(s,n)}},yD=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],s=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),d=lke(u,4);i=d[0],s=d[1],o=d[2],l=d[3]}}}var f=vD(i,o),m=vD(s,l),h=gke(i,o),v=function(y){return y>1?1:y<0?0:y},p=function(y){for(var b=y>1?1:y,x=b,j=0;j<8;++j){var N=f(x)-b,A=h(x);if(Math.abs(N-b)<x2||A<x2)return m(x);x=v(x-N/A)}return m(x)};return p.isStepper=!1,p},vke=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,s=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(d,f,m){var h=-(d-f)*n,v=m*s,p=m+(h-v)*l/1e3,g=m*l/1e3+d;return Math.abs(g-f)<x2&&Math.abs(p)<x2?[f,0]:[g,p]};return c.isStepper=!0,c.dt=l,c},yke=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yD(i);case"spring":return vke();default:if(i.split("(")[0]==="cubic-bezier")return yD(i)}return typeof i=="function"?i:null};function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}function xD(e){return wke(e)||bke(e)||CW(e)||xke()}function xke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wke(e){if(Array.isArray(e))return hk(e)}function bD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function as(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bD(Object(r),!0).forEach(function(n){fk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fk(e,t,r){return t=_ke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ke(e){var t=jke(e,"string");return Lx(t)==="symbol"?t:String(t)}function jke(e,t){if(Lx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nke(e,t){return Cke(e)||Ake(e,t)||CW(e,t)||Ske()}function Ske(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CW(e,t){if(e){if(typeof e=="string")return hk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hk(e,t)}}function hk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ake(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Cke(e){if(Array.isArray(e))return e}var b2=function(t,r,n){return t+(r-t)*n},mk=function(t){var r=t.from,n=t.to;return r!==n},kke=function e(t,r,n){var i=gy(function(s,o){if(mk(o)){var l=t(o.from,o.to,o.velocity),c=Nke(l,2),u=c[0],d=c[1];return as(as({},o),{},{from:u,velocity:d})}return o},r);return n<1?gy(function(s,o){return mk(o)?as(as({},o),{},{velocity:b2(o.velocity,i[s].velocity,n),from:b2(o.from,i[s].from,n)}):o},r):e(t,i,n-1)};const Eke=function(e,t,r,n,i){var s=ske(e,t),o=s.reduce(function(g,y){return as(as({},g),{},fk({},y,[e[y],t[y]]))},{}),l=s.reduce(function(g,y){return as(as({},g),{},fk({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,f=function(){return null},m=function(){return gy(function(y,b){return b.from},l)},h=function(){return!Object.values(l).filter(mk).length},v=function(y){u||(u=y);var b=y-u,x=b/r.dt;l=kke(r,l,x),i(as(as(as({},e),t),m())),u=y,h()||(c=requestAnimationFrame(f))},p=function(y){d||(d=y);var b=(y-d)/n,x=gy(function(N,A){return b2.apply(void 0,xD(A).concat([r(b)]))},o);if(i(as(as(as({},e),t),x)),b<1)c=requestAnimationFrame(f);else{var j=gy(function(N,A){return b2.apply(void 0,xD(A).concat([r(1)]))},o);i(as(as(as({},e),t),j))}};return f=r.isStepper?v:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}var Pke=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Oke(e,t){if(e==null)return{};var r=Tke(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tke(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function QN(e){return Dke(e)||Ike(e)||Rke(e)||Lke()}function Lke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rke(e,t){if(e){if(typeof e=="string")return pk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pk(e,t)}}function Ike(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dke(e){if(Array.isArray(e))return pk(e)}function pk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(n){Hv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hv(e,t,r){return t=kW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kW(n.key),n)}}function Fke(e,t,r){return t&&$ke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kW(e){var t=Bke(e,"string");return qp(t)==="symbol"?t:String(t)}function Bke(e,t){if(qp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gk(e,t)}function gk(e,t){return gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gk(e,t)}function qke(e){var t=Uke();return function(){var n=w2(e),i;if(t){var s=w2(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return vk(this,i)}}function vk(e,t){if(t&&(qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yk(e)}function yk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uke(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w2(e){return w2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w2(e)}var Fl=function(e){zke(r,e);var t=qke(r);function r(n,i){var s;Mke(this,r),s=t.call(this,n,i);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,m=o.children,h=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(yk(s)),s.changeStyle=s.changeStyle.bind(yk(s)),!l||h<=0)return s.state={style:{}},typeof m=="function"&&(s.state={style:d}),vk(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof m=="function")return s.state={style:u},vk(s);s.state={style:c?Hv({},c,u):u}}else s.state={style:{}};return s}return Fke(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,m=this.state.style;if(l){if(!o){var h={style:c?Hv({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(h);return}if(!(YCe(i.to,d)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=v||u?f:i.to;if(this.state&&m){var g={style:c?Hv({},c,p):p};(c&&m[c]!==p||!c&&m!==p)&&this.setState(g)}this.runAnimation(Co(Co({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,m=i.onAnimationStart,h=Eke(o,l,yke(u),c,this.changeStyle),v=function(){s.stopJSAnimation=h()};this.manager.start([m,d,v,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,f=u.duration,m=f===void 0?0:f,h=function(p,g,y){if(y===0)return p;var b=g.duration,x=g.easing,j=x===void 0?"ease":x,N=g.style,A=g.properties,C=g.onAnimationEnd,E=y>0?o[y-1]:g,O=A||Object.keys(N);if(typeof j=="function"||j==="spring")return[].concat(QN(p),[s.runJSAnimation.bind(s,{from:E.style,to:N,duration:b,easing:j}),b]);var L=gD(O,b,j),k=Co(Co(Co({},E.style),N),{},{transition:L});return[].concat(QN(p),[k,b,C]).filter(ake)};return this.manager.start([c].concat(QN(o.reduce(h,[d,Math.max(m,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=rke());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,m=i.steps,h=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(i);return}if(m.length>1){this.runStepAnimation(i);return}var p=l?Hv({},l,c):c,g=gD(Object.keys(p),o,u);v.start([d,s,Co(Co({},p),{},{transition:g}),o,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=Oke(i,Pke),u=_.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var f=function(h){var v=h.props,p=v.style,g=p===void 0?{}:p,y=v.className,b=_.cloneElement(h,Co(Co({},c),{},{style:Co(Co({},g),d),className:y}));return b};return u===1?f(_.Children.only(s)):ie.createElement("div",null,_.Children.map(s,function(m){return f(m)}))}}]),r}(_.PureComponent);Fl.displayName="Animate";Fl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Fl.propTypes={from:Qr.oneOfType([Qr.object,Qr.string]),to:Qr.oneOfType([Qr.object,Qr.string]),attributeName:Qr.string,duration:Qr.number,begin:Qr.number,easing:Qr.oneOfType([Qr.string,Qr.func]),steps:Qr.arrayOf(Qr.shape({duration:Qr.number.isRequired,style:Qr.object.isRequired,easing:Qr.oneOfType([Qr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Qr.func]),properties:Qr.arrayOf("string"),onAnimationEnd:Qr.func})),children:Qr.oneOfType([Qr.node,Qr.func]),isActive:Qr.bool,canBegin:Qr.bool,onAnimationEnd:Qr.func,shouldReAnimate:Qr.bool,onAnimationStart:Qr.func,onAnimationReStart:Qr.func};function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}function _2(){return _2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_2.apply(this,arguments)}function Wke(e,t){return Kke(e)||Gke(e,t)||Vke(e,t)||Hke()}function Hke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vke(e,t){if(e){if(typeof e=="string")return _D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _D(e,t)}}function _D(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Kke(e){if(Array.isArray(e))return e}function jD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ND(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jD(Object(r),!0).forEach(function(n){Yke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yke(e,t,r){return t=Xke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xke(e){var t=Zke(e,"string");return Rx(t)=="symbol"?t:t+""}function Zke(e,t){if(Rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SD=function(t,r,n,i,s){var o=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],m=0,h=4;m<h;m++)f[m]=s[m]>o?o:s[m];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+i-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+i)),d+="L ".concat(t+c*f[3],",").concat(r+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-l*f[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var v=Math.min(o,s);d="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*v,`
            L `).concat(t+n,",").concat(r+i-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n-c*v,",").concat(r+i,`
            L `).concat(t+c*v,",").concat(r+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+i-l*v," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},Jke=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,s=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(o,o+c),m=Math.max(o,o+c);return n>=u&&n<=d&&i>=f&&i<=m}return!1},Qke={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nO=function(t){var r=ND(ND({},Qke),t),n=_.useRef(),i=_.useState(-1),s=Wke(i,2),o=s[0],l=s[1];_.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,m=r.radius,h=r.className,v=r.animationEasing,p=r.animationDuration,g=r.animationBegin,y=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var x=cr("recharts-rectangle",h);return b?ie.createElement(Fl,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:v,isActive:b},function(j){var N=j.width,A=j.height,C=j.x,E=j.y;return ie.createElement(Fl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:y,easing:v},ie.createElement("path",_2({},Dt(r,!0),{className:x,d:SD(C,E,N,A,m),ref:n})))}):ie.createElement("path",_2({},Dt(r,!0),{className:x,d:SD(c,u,d,f,m)}))},eEe=["points","className","baseLinePoints","connectNulls"];function Pm(){return Pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pm.apply(this,arguments)}function tEe(e,t){if(e==null)return{};var r=rEe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function AD(e){return aEe(e)||sEe(e)||iEe(e)||nEe()}function nEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iEe(e,t){if(e){if(typeof e=="string")return xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xk(e,t)}}function sEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aEe(e){if(Array.isArray(e))return xk(e)}function xk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var CD=function(t){return t&&t.x===+t.x&&t.y===+t.y},oEe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){CD(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),CD(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},vy=function(t,r){var n=oEe(t);r&&(n=[n.reduce(function(s,o){return[].concat(AD(s),AD(o))},[])]);var i=n.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},lEe=function(t,r,n){var i=vy(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(vy(r.reverse(),n).slice(1))},cEe=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,s=t.connectNulls,o=tEe(t,eEe);if(!r||!r.length)return null;var l=cr("recharts-polygon",n);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=lEe(r,i,s);return ie.createElement("g",{className:l},ie.createElement("path",Pm({},Dt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?ie.createElement("path",Pm({},Dt(o,!0),{fill:"none",d:vy(r,s)})):null,c?ie.createElement("path",Pm({},Dt(o,!0),{fill:"none",d:vy(i,s)})):null)}var d=vy(r,s);return ie.createElement("path",Pm({},Dt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bk.apply(this,arguments)}var _j=function(t){var r=t.cx,n=t.cy,i=t.r,s=t.className,o=cr("recharts-dot",s);return r===+r&&n===+n&&i===+i?_.createElement("circle",bk({},Dt(t,!1),Uw(t),{className:o,cx:r,cy:n,r:i})):null};function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}var uEe=["x","y","top","left","width","height","className"];function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wk.apply(this,arguments)}function kD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dEe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kD(Object(r),!0).forEach(function(n){fEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fEe(e,t,r){return t=hEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hEe(e){var t=mEe(e,"string");return Ix(t)=="symbol"?t:t+""}function mEe(e,t){if(Ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ix(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pEe(e,t){if(e==null)return{};var r=gEe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vEe=function(t,r,n,i,s,o){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(n)},yEe=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,m=t.height,h=m===void 0?0:m,v=t.className,p=pEe(t,uEe),g=dEe({x:n,y:s,top:l,left:u,width:f,height:h},p);return!Xe(n)||!Xe(s)||!Xe(f)||!Xe(h)||!Xe(l)||!Xe(u)?null:ie.createElement("path",wk({},Dt(g,!0),{className:cr("recharts-cross",v),d:vEe(n,s,f,h,l,u)}))},xEe=vj,bEe=BU,wEe=Ul;function _Ee(e,t){return e&&e.length?xEe(e,wEe(t),bEe):void 0}var jEe=_Ee;const NEe=nn(jEe);var SEe=vj,AEe=Ul,CEe=zU;function kEe(e,t){return e&&e.length?SEe(e,AEe(t),CEe):void 0}var EEe=kEe;const PEe=nn(EEe);var OEe=["cx","cy","angle","ticks","axisLine"],TEe=["ticks","tick","angle","tickFormatter","stroke"];function Up(e){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yy.apply(this,arguments)}function ED(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ED(Object(r),!0).forEach(function(n){jj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ED(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PD(e,t){if(e==null)return{};var r=LEe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function REe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PW(n.key),n)}}function IEe(e,t,r){return t&&OD(e.prototype,t),r&&OD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DEe(e,t,r){return t=j2(t),MEe(e,EW()?Reflect.construct(t,r||[],j2(e).constructor):t.apply(e,r))}function MEe(e,t){if(t&&(Up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Ee(e)}function $Ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EW=function(){return!!e})()}function j2(e){return j2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},j2(e)}function FEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_k(e,t)}function _k(e,t){return _k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_k(e,t)}function jj(e,t,r){return t=PW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PW(e){var t=BEe(e,"string");return Up(t)=="symbol"?t:t+""}function BEe(e,t){if(Up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nj=function(e){function t(){return REe(this,t),DEe(this,t,arguments)}return FEe(t,e),IEe(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return On(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=NEe(l,function(d){return d.coordinate||0}),u=PEe(l,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=PD(n,OEe),d=l.reduce(function(v,p){return[Math.min(v[0],p.coordinate),Math.max(v[1],p.coordinate)]},[1/0,-1/0]),f=On(i,s,d[0],o),m=On(i,s,d[1],o),h=sf(sf(sf({},Dt(u,!1)),{},{fill:"none"},Dt(c,!1)),{},{x1:f.x,y1:f.y,x2:m.x,y2:m.y});return ie.createElement("line",yy({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=PD(i,TEe),f=this.getTickTextAnchor(),m=Dt(d,!1),h=Dt(o,!1),v=s.map(function(p,g){var y=n.getTickValueCoord(p),b=sf(sf(sf(sf({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},m),{},{stroke:"none",fill:u},h),{},{index:g},y),{},{payload:p});return ie.createElement(Rr,yy({className:cr("recharts-polar-radius-axis-tick",pW(o)),key:"tick-".concat(p.coordinate)},sh(n.props,p,g)),t.renderTickItem(o,b,c?c(p.value,g):p.value))});return ie.createElement(Rr,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.axisLine,o=n.tick;return!i||!i.length?null:ie.createElement(Rr,{className:cr("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Gi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,s){var o;return ie.isValidElement(n)?o=ie.cloneElement(n,i):Ut(n)?o=n(i):o=ie.createElement(ah,yy({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(_.PureComponent);jj(Nj,"displayName","PolarRadiusAxis");jj(Nj,"axisType","radiusAxis");jj(Nj,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function xf(){return xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xf.apply(this,arguments)}function TD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function af(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TD(Object(r),!0).forEach(function(n){Sj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TW(n.key),n)}}function qEe(e,t,r){return t&&LD(e.prototype,t),r&&LD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UEe(e,t,r){return t=N2(t),WEe(e,OW()?Reflect.construct(t,r||[],N2(e).constructor):t.apply(e,r))}function WEe(e,t){if(t&&(Wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HEe(e)}function HEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OW=function(){return!!e})()}function N2(e){return N2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N2(e)}function VEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jk(e,t)}function jk(e,t){return jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},jk(e,t)}function Sj(e,t,r){return t=TW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=GEe(e,"string");return Wp(t)=="symbol"?t:t+""}function GEe(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KEe=Math.PI/180,RD=1e-5,Aj=function(e){function t(){return zEe(this,t),UEe(this,t,arguments)}return VEe(t,e),qEe(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=On(s,o,l,n.coordinate),m=On(s,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,s=Math.cos(-n.coordinate*KEe),o;return s>RD?o=i==="outer"?"start":"end":s<-RD?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=af(af({},Dt(this.props,!1)),{},{fill:"none"},Dt(l,!1));if(c==="circle")return ie.createElement(_j,xf({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var d=this.props.ticks,f=d.map(function(m){return On(i,s,o,m.coordinate)});return ie.createElement(cEe,xf({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=Dt(this.props,!1),f=Dt(o,!1),m=af(af({},d),{},{fill:"none"},Dt(l,!1)),h=s.map(function(v,p){var g=n.getTickLineCoord(v),y=n.getTickTextAnchor(v),b=af(af(af({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:v,x:g.x2,y:g.y2});return ie.createElement(Rr,xf({className:cr("recharts-polar-angle-axis-tick",pW(o)),key:"tick-".concat(v.coordinate)},sh(n.props,v,p)),l&&ie.createElement("line",xf({className:"recharts-polar-angle-axis-tick-line"},m,g)),o&&t.renderTickItem(o,b,c?c(v.value,p):v.value))});return ie.createElement(Rr,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!i||!i.length?null:ie.createElement(Rr,{className:cr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,s){var o;return ie.isValidElement(n)?o=ie.cloneElement(n,i):Ut(n)?o=n(i):o=ie.createElement(ah,xf({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(_.PureComponent);Sj(Aj,"displayName","PolarAngleAxis");Sj(Aj,"axisType","angleAxis");Sj(Aj,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var YEe=Dq,XEe=YEe(Object.getPrototypeOf,Object),ZEe=XEe,JEe=tu,QEe=ZEe,e4e=ru,t4e="[object Object]",r4e=Function.prototype,n4e=Object.prototype,LW=r4e.toString,i4e=n4e.hasOwnProperty,s4e=LW.call(Object);function a4e(e){if(!e4e(e)||JEe(e)!=t4e)return!1;var t=QEe(e);if(t===null)return!0;var r=i4e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&LW.call(r)==s4e}var o4e=a4e;const l4e=nn(o4e);var c4e=tu,u4e=ru,d4e="[object Boolean]";function f4e(e){return e===!0||e===!1||u4e(e)&&c4e(e)==d4e}var h4e=f4e;const m4e=nn(h4e);function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}function S2(){return S2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S2.apply(this,arguments)}function p4e(e,t){return x4e(e)||y4e(e,t)||v4e(e,t)||g4e()}function g4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v4e(e,t){if(e){if(typeof e=="string")return ID(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ID(e,t)}}function ID(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function x4e(e){if(Array.isArray(e))return e}function DD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DD(Object(r),!0).forEach(function(n){b4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b4e(e,t,r){return t=w4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w4e(e){var t=_4e(e,"string");return Dx(t)=="symbol"?t:t+""}function _4e(e,t){if(Dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $D=function(t,r,n,i,s){var o=n-i,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+s),l+="L ".concat(t+n-o/2-i,",").concat(r+s),l+="L ".concat(t,",").concat(r," Z"),l},j4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},N4e=function(t){var r=MD(MD({},j4e),t),n=_.useRef(),i=_.useState(-1),s=p4e(i,2),o=s[0],l=s[1];_.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&l(x)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,m=r.height,h=r.className,v=r.animationEasing,p=r.animationDuration,g=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||m!==+m||d===0&&f===0||m===0)return null;var b=cr("recharts-trapezoid",h);return y?ie.createElement(Fl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:m,x:c,y:u},duration:p,animationEasing:v,isActive:y},function(x){var j=x.upperWidth,N=x.lowerWidth,A=x.height,C=x.x,E=x.y;return ie.createElement(Fl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:v},ie.createElement("path",S2({},Dt(r,!0),{className:b,d:$D(C,E,j,N,A),ref:n})))}):ie.createElement("g",null,ie.createElement("path",S2({},Dt(r,!0),{className:b,d:$D(c,u,d,f,m)})))},S4e=["option","shapeType","propTransformer","activeClassName","isActive"];function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function A4e(e,t){if(e==null)return{};var r=C4e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function FD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function A2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FD(Object(r),!0).forEach(function(n){k4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k4e(e,t,r){return t=E4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E4e(e){var t=P4e(e,"string");return Mx(t)=="symbol"?t:t+""}function P4e(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O4e(e,t){return A2(A2({},t),e)}function T4e(e,t){return e==="symbols"}function BD(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ie.createElement(nO,r);case"trapezoid":return ie.createElement(N4e,r);case"sector":return ie.createElement(yW,r);case"symbols":if(T4e(t))return ie.createElement(_P,r);break;default:return null}}function L4e(e){return _.isValidElement(e)?e.props:e}function RW(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?O4e:n,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=A4e(e,S4e),u;if(_.isValidElement(t))u=_.cloneElement(t,A2(A2({},c),L4e(t)));else if(Ut(t))u=t(c);else if(l4e(t)&&!m4e(t)){var d=i(t,c);u=ie.createElement(BD,{shapeType:r,elementProps:d})}else{var f=c;u=ie.createElement(BD,{shapeType:r,elementProps:f})}return l?ie.createElement(Rr,{className:o},u):u}function Cj(e,t){return t!=null&&"trapezoids"in e.props}function kj(e,t){return t!=null&&"sectors"in e.props}function $x(e,t){return t!=null&&"points"in e.props}function R4e(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,s=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&s}function I4e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function D4e(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function M4e(e,t){var r;return Cj(e,t)?r=R4e:kj(e,t)?r=I4e:$x(e,t)&&(r=D4e),r}function $4e(e,t){var r;return Cj(e,t)?r="trapezoids":kj(e,t)?r="sectors":$x(e,t)&&(r="points"),r}function F4e(e,t){if(Cj(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(kj(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return $x(e,t)?t.payload:{}}function B4e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=$4e(r,t),s=F4e(r,t),o=n.filter(function(c,u){var d=Bp(s,c),f=r.props[i].filter(function(v){var p=M4e(r,t);return p(v,t)}),m=r.props[i].indexOf(f[f.length-1]),h=u===m;return d&&h}),l=n.indexOf(o[o.length-1]);return l}var W1;function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function Om(){return Om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Om.apply(this,arguments)}function zD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zD(Object(r),!0).forEach(function(n){Za(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DW(n.key),n)}}function q4e(e,t,r){return t&&qD(e.prototype,t),r&&qD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function U4e(e,t,r){return t=C2(t),W4e(e,IW()?Reflect.construct(t,r||[],C2(e).constructor):t.apply(e,r))}function W4e(e,t){if(t&&(Hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H4e(e)}function H4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IW=function(){return!!e})()}function C2(e){return C2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C2(e)}function V4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nk(e,t)}function Nk(e,t){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Nk(e,t)}function Za(e,t,r){return t=DW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DW(e){var t=G4e(e,"string");return Hp(t)=="symbol"?t:t+""}function G4e(e,t){if(Hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iu=function(e){function t(r){var n;return z4e(this,t),n=U4e(this,t,[r]),Za(n,"pieRef",null),Za(n,"sectorRefs",[]),Za(n,"id",Cg("recharts-pie-")),Za(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ut(i)&&i()}),Za(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ut(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return V4e(t,e),q4e(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,d=Dt(this.props,!1),f=Dt(o,!1),m=Dt(l,!1),h=o&&o.offsetRadius||20,v=n.map(function(p,g){var y=(p.startAngle+p.endAngle)/2,b=On(p.cx,p.cy,p.outerRadius+h,y),x=kn(kn(kn(kn({},d),p),{},{stroke:"none"},f),{},{index:g,textAnchor:t.getTextAnchor(b.x,p.cx)},b),j=kn(kn(kn(kn({},d),p),{},{fill:"none",stroke:p.fill},m),{},{index:g,points:[On(p.cx,p.cy,p.outerRadius,y),b]}),N=c;return ur(c)&&ur(u)?N="value":ur(c)&&(N=u),ie.createElement(Rr,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},l&&t.renderLabelLineItem(l,j,"line"),t.renderLabelItem(o,x,$i(p,N)))});return ie.createElement(Rr,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=i.isActiveIndex(d),m=c&&i.hasActiveIndex()?c:null,h=f?o:m,v=kn(kn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return ie.createElement(Rr,Om({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},sh(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),ie.createElement(RW,Om({option:h,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,m=f.prevSectors,h=f.prevIsAnimationActive;return ie.createElement(Fl,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var p=v.t,g=[],y=s&&s[0],b=y.startAngle;return s.forEach(function(x,j){var N=m&&m[j],A=j>0?Pa(x,"paddingAngle",0):0;if(N){var C=Ks(N.endAngle-N.startAngle,x.endAngle-x.startAngle),E=kn(kn({},x),{},{startAngle:b+A,endAngle:b+C(p)+A});g.push(E),b=E.endAngle}else{var O=x.endAngle,L=x.startAngle,k=Ks(0,O-L),T=k(p),B=kn(kn({},x),{},{startAngle:b+A,endAngle:b+T+A});g.push(B),b=B.endAngle}}),ie.createElement(Rr,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!Bp(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,m=i.outerRadius,h=i.isAnimationActive,v=this.state.isAnimationFinished;if(s||!o||!o.length||!Xe(u)||!Xe(d)||!Xe(f)||!Xe(m))return null;var p=cr("recharts-pie",l);return ie.createElement(Rr,{tabIndex:this.props.rootTabIndex,className:p,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(o),Gi.renderCallByParent(this.props,null,!1),(!h||v)&&Oc.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,s){if(ie.isValidElement(n))return ie.cloneElement(n,i);if(Ut(n))return n(i);var o=cr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ie.createElement(Jm,Om({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,i,s){if(ie.isValidElement(n))return ie.cloneElement(n,i);var o=s;if(Ut(n)&&(o=n(i),ie.isValidElement(o)))return o;var l=cr("recharts-pie-label-text",typeof n!="boolean"&&!Ut(n)?n.className:"");return ie.createElement(ah,Om({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(_.PureComponent);W1=iu;Za(iu,"displayName","Pie");Za(iu,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Tl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Za(iu,"parseDeltaAngle",function(e,t){var r=Ls(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Za(iu,"getRealPieData",function(e){var t=e.data,r=e.children,n=Dt(e,!1),i=ro(r,mx);return t&&t.length?t.map(function(s,o){return kn(kn(kn({payload:s},n),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return kn(kn({},n),s.props)}):[]});Za(iu,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,s=t.height,o=mW(i,s),l=n+Rs(e.cx,i,i/2),c=r+Rs(e.cy,s,s/2),u=Rs(e.innerRadius,o,0),d=Rs(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Za(iu,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?kn(kn({},t.type.defaultProps),t.props):t.props,i=W1.getRealPieData(n);if(!i||!i.length)return null;var s=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,m=n.tooltipType,h=Math.abs(n.minAngle),v=W1.parseCoordinateOfPie(n,r),p=W1.parseDeltaAngle(o,l),g=Math.abs(p),y=u;ur(u)&&ur(f)?(Wo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):ur(u)&&(Wo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var b=i.filter(function(E){return $i(E,y,0)!==0}).length,x=(g>=360?b:b-1)*c,j=g-b*h-x,N=i.reduce(function(E,O){var L=$i(O,y,0);return E+(Xe(L)?L:0)},0),A;if(N>0){var C;A=i.map(function(E,O){var L=$i(E,y,0),k=$i(E,d,O),T=(Xe(L)?L:0)/N,B;O?B=C.endAngle+Ls(p)*c*(L!==0?1:0):B=o;var M=B+Ls(p)*((L!==0?h:0)+T*j),G=(B+M)/2,z=(v.innerRadius+v.outerRadius)/2,D=[{name:k,value:L,payload:E,dataKey:y,type:m}],q=On(v.cx,v.cy,z,G);return C=kn(kn(kn({percent:T,cornerRadius:s,name:k,tooltipPayload:D,midAngle:G,middleRadius:z,tooltipPosition:q},E),v),{},{value:$i(E,y),startAngle:B,endAngle:M,payload:E,paddingAngle:Ls(p)*c}),C})}return kn(kn({},v),{},{sectors:A,data:i})});var K4e=Math.ceil,Y4e=Math.max;function X4e(e,t,r,n){for(var i=-1,s=Y4e(K4e((t-e)/(r||1)),0),o=Array(s);s--;)o[n?s:++i]=e,e+=r;return o}var Z4e=X4e,J4e=tU,UD=1/0,Q4e=17976931348623157e292;function ePe(e){if(!e)return e===0?e:0;if(e=J4e(e),e===UD||e===-UD){var t=e<0?-1:1;return t*Q4e}return e===e?e:0}var MW=ePe,tPe=Z4e,rPe=uj,eS=MW;function nPe(e){return function(t,r,n){return n&&typeof n!="number"&&rPe(t,r,n)&&(r=n=void 0),t=eS(t),r===void 0?(r=t,t=0):r=eS(r),n=n===void 0?t<r?1:-1:eS(n),tPe(t,r,n,e)}}var iPe=nPe,sPe=iPe,aPe=sPe(),oPe=aPe;const k2=nn(oPe);function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}function WD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WD(Object(r),!0).forEach(function(n){$W(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $W(e,t,r){return t=lPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lPe(e){var t=cPe(e,"string");return Fx(t)=="symbol"?t:t+""}function cPe(e,t){if(Fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uPe=["Webkit","Moz","O","ms"],dPe=function(t,r){var n=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=uPe.reduce(function(s,o){return HD(HD({},s),{},$W({},o+n,r))},{});return i[t]=r,i};function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}function E2(){return E2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E2.apply(this,arguments)}function VD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VD(Object(r),!0).forEach(function(n){ga(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BW(n.key),n)}}function hPe(e,t,r){return t&&GD(e.prototype,t),r&&GD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mPe(e,t,r){return t=P2(t),pPe(e,FW()?Reflect.construct(t,r||[],P2(e).constructor):t.apply(e,r))}function pPe(e,t){if(t&&(Vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gPe(e)}function gPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FW=function(){return!!e})()}function P2(e){return P2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P2(e)}function vPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sk(e,t)}function Sk(e,t){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Sk(e,t)}function ga(e,t,r){return t=BW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BW(e){var t=yPe(e,"string");return Vp(t)=="symbol"?t:t+""}function yPe(e,t){if(Vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xPe=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=my().domain(k2(0,c)).range([s,s+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},KD=function(t){return t.changedTouches&&!!t.changedTouches.length},Gp=function(e){function t(r){var n;return fPe(this,t),n=mPe(this,t,[r]),ga(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),ga(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),ga(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),n.detachDragEndListener()}),ga(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ga(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ga(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ga(n,"handleSlideDragStart",function(i){var s=KD(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return vPe(t,e),hPe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(i,s),m=Math.max(i,s),h=t.getIndexInRange(o,f),v=t.getIndexInRange(o,m);return{startIndex:h-h%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=$i(s[n],l,n);return Ut(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,m=c.startIndex,h=c.endIndex,v=c.onChange,p=n.pageX-s;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var g=this.getIndex({startX:o+p,endX:l+p});(g.startIndex!==m||g.endIndex!==h)&&v&&v(g),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=KD(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],d=this.props,f=d.x,m=d.width,h=d.travellerWidth,v=d.onChange,p=d.gap,g=d.data,y={startX:this.state.startX,endX:this.state.endX},b=n.pageX-s;b>0?b=Math.min(b,f+m-h-u):b<0&&(b=Math.max(b,f-u)),y[o]=u+b;var x=this.getIndex(y),j=x.startIndex,N=x.endIndex,A=function(){var E=g.length-1;return o==="startX"&&(l>c?j%p===0:N%p===0)||l<c&&N===E||o==="endX"&&(l>c?N%p===0:j%p===0)||l>c&&N===E};this.setState(ga(ga({},o,u+b),"brushMoveStartX",n.pageX),function(){v&&A()&&v(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],f=l.indexOf(d);if(f!==-1){var m=f+n;if(!(m===-1||m>=l.length)){var h=l[m];i==="startX"&&h>=u||i==="endX"&&h<=c||this.setState(ga({},i,h),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return ie.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=_.Children.only(u);return f?ie.cloneElement(f,{x:i,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,m=c.traveller,h=c.ariaLabel,v=c.data,p=c.startIndex,g=c.endIndex,y=Math.max(n,this.props.x),b=tS(tS({},Dt(this.props,!1)),{},{x:y,y:u,width:d,height:f}),x=h||"Min value: ".concat((s=v[p])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return ie.createElement(Rr,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,b))}},{key:"renderSlide",value:function(n,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(n,i)+u,f=Math.max(Math.abs(i-n)-u,0);return ie.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,m=d.endX,h=5,v={pointerEvents:"none",fill:u};return ie.createElement(Rr,{className:"recharts-brush-texts"},ie.createElement(ah,E2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-h,y:o+l/2},v),this.getTextOfTick(i)),ie.createElement(ah,E2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+h,y:o+l/2},v),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,m=this.state,h=m.startX,v=m.endX,p=m.isTextActive,g=m.isSlideMoving,y=m.isTravellerMoving,b=m.isTravellerFocused;if(!i||!i.length||!Xe(l)||!Xe(c)||!Xe(u)||!Xe(d)||u<=0||d<=0)return null;var x=cr("recharts-brush",s),j=ie.Children.count(o)===1,N=dPe("userSelect","none");return ie.createElement(Rr,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(h,v),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(v,"endX"),(p||g||y||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(s+l/2)-1;return ie.createElement(ie.Fragment,null,ie.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),ie.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),ie.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return ie.isValidElement(n)?s=ie.cloneElement(n,i):Ut(n)?s=n(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return tS({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?xPe({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var m=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>i?l=c:o=c}return i>=n[l]?l:o}}])}(_.PureComponent);ga(Gp,"displayName","Brush");ga(Gp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var bPe=EP;function wPe(e,t){var r;return bPe(e,function(n,i,s){return r=t(n,i,s),!r}),!!r}var _Pe=wPe,jPe=kq,NPe=Ul,SPe=_Pe,APe=na,CPe=uj;function kPe(e,t,r){var n=APe(e)?jPe:SPe;return r&&CPe(e,t,r)&&(t=void 0),n(e,NPe(t))}var EPe=kPe;const PPe=nn(EPe);var Rl=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},YD=Xq;function OPe(e,t,r){t=="__proto__"&&YD?YD(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var TPe=OPe,LPe=TPe,RPe=Kq,IPe=Ul;function DPe(e,t){var r={};return t=IPe(t),RPe(e,function(n,i,s){LPe(r,i,t(n,i,s))}),r}var MPe=DPe;const $Pe=nn(MPe);function FPe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var BPe=FPe,zPe=EP;function qPe(e,t){var r=!0;return zPe(e,function(n,i,s){return r=!!t(n,i,s),r}),r}var UPe=qPe,WPe=BPe,HPe=UPe,VPe=Ul,GPe=na,KPe=uj;function YPe(e,t,r){var n=GPe(e)?WPe:HPe;return r&&KPe(e,t,r)&&(t=void 0),n(e,VPe(t))}var XPe=YPe;const zW=nn(XPe);var ZPe=["x","y"];function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function Ak(){return Ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ak.apply(this,arguments)}function XD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Tv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XD(Object(r),!0).forEach(function(n){JPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JPe(e,t,r){return t=QPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QPe(e){var t=eOe(e,"string");return Bx(t)=="symbol"?t:t+""}function eOe(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tOe(e,t){if(e==null)return{};var r=rOe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nOe(e,t){var r=e.x,n=e.y,i=tOe(e,ZPe),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||i.height),d=parseInt(u,10),f="".concat(t.width||i.width),m=parseInt(f,10);return Tv(Tv(Tv(Tv(Tv({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function ZD(e){return ie.createElement(RW,Ak({shapeType:"rectangle",propTransformer:nOe,activeClassName:"recharts-active-bar"},e))}var iOe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof t=="number")return t;var s=Xe(n)||Eme(n);return s?t(n,i):(s||lh(),r)}},sOe=["value","background"],qW;function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function aOe(e,t){if(e==null)return{};var r=oOe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function O2(){return O2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O2.apply(this,arguments)}function JD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JD(Object(r),!0).forEach(function(n){Zu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WW(n.key),n)}}function cOe(e,t,r){return t&&QD(e.prototype,t),r&&QD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uOe(e,t,r){return t=T2(t),dOe(e,UW()?Reflect.construct(t,r||[],T2(e).constructor):t.apply(e,r))}function dOe(e,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fOe(e)}function fOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UW=function(){return!!e})()}function T2(e){return T2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T2(e)}function hOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ck(e,t)}function Ck(e,t){return Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ck(e,t)}function Zu(e,t,r){return t=WW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WW(e){var t=mOe(e,"string");return Kp(t)=="symbol"?t:t+""}function mOe(e,t){if(Kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gc=function(e){function t(){var r;lOe(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=uOe(this,t,[].concat(i)),Zu(r,"state",{isAnimationFinished:!1}),Zu(r,"id",Cg("recharts-bar-")),Zu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Zu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return hOe(t,e),cOe(t,[{key:"renderRectanglesStatically",value:function(n){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=Dt(this.props,!1);return n&&n.map(function(f,m){var h=m===c,v=h?u:o,p=_i(_i(_i({},d),f),{},{isActive:h,option:v,index:m,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ie.createElement(Rr,O2({className:"recharts-bar-rectangle"},sh(i.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(m)}),ie.createElement(ZD,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,m=this.state.prevData;return ie.createElement(Fl,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var v=h.t,p=s.map(function(g,y){var b=m&&m[y];if(b){var x=Ks(b.x,g.x),j=Ks(b.y,g.y),N=Ks(b.width,g.width),A=Ks(b.height,g.height);return _i(_i({},g),{},{x:x(v),y:j(v),width:N(v),height:A(v)})}if(o==="horizontal"){var C=Ks(0,g.height),E=C(v);return _i(_i({},g),{},{y:g.y+g.height-E,height:E})}var O=Ks(0,g.width),L=O(v);return _i(_i({},g),{},{width:L})});return ie.createElement(Rr,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!Bp(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=Dt(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,m=aOe(u,sOe);if(!f)return null;var h=_i(_i(_i(_i(_i({},m),{},{fill:"#eee"},f),c),sh(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return ie.createElement(ZD,O2({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},h))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=ro(d,wj);if(!f)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,h=function(g,y){var b=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:b,errorVal:$i(g,y)}},v={clipPath:n?"url(#clipPath-".concat(i,")"):null};return ie.createElement(Rr,v,f.map(function(p){return ie.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,m=n.height,h=n.isAnimationActive,v=n.background,p=n.id;if(i||!s||!s.length)return null;var g=this.state.isAnimationFinished,y=cr("recharts-bar",o),b=l&&l.allowDataOverflow,x=c&&c.allowDataOverflow,j=b||x,N=ur(p)?this.id:p;return ie.createElement(Rr,{className:y},b||x?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(N)},ie.createElement("rect",{x:b?u:u-f/2,y:x?d:d-m/2,width:b?f:f*2,height:x?m:m*2}))):null,ie.createElement(Rr,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(N,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,N),(!h||g)&&Oc.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(_.PureComponent);qW=Gc;Zu(Gc,"displayName","Bar");Zu(Gc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Tl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Zu(Gc,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,m=e.offset,h=KSe(n,r);if(!h)return null;var v=t.layout,p=r.type.defaultProps,g=p!==void 0?_i(_i({},p),r.props):r.props,y=g.dataKey,b=g.children,x=g.minPointSize,j=v==="horizontal"?o:s,N=u?j.scale.domain():null,A=tAe({numericAxis:j}),C=ro(b,mx),E=f.map(function(O,L){var k,T,B,M,G,z;u?k=YSe(u[d+L],N):(k=$i(O,y),Array.isArray(k)||(k=[A,k]));var D=iOe(x,qW.defaultProps.minPointSize)(k[1],L);if(v==="horizontal"){var q,K=[o.scale(k[0]),o.scale(k[1])],ae=K[0],J=K[1];T=q6({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:O,index:L}),B=(q=J??ae)!==null&&q!==void 0?q:void 0,M=h.size;var I=ae-J;if(G=Number.isNaN(I)?0:I,z={x:T,y:o.y,width:M,height:o.height},Math.abs(D)>0&&Math.abs(G)<Math.abs(D)){var $=Ls(G||D)*(Math.abs(D)-Math.abs(G));B-=$,G+=$}}else{var U=[s.scale(k[0]),s.scale(k[1])],H=U[0],re=U[1];if(T=H,B=q6({axis:o,ticks:c,bandSize:i,offset:h.offset,entry:O,index:L}),M=re-H,G=h.size,z={x:s.x,y:B,width:s.width,height:G},Math.abs(D)>0&&Math.abs(M)<Math.abs(D)){var X=Ls(M||D)*(Math.abs(D)-Math.abs(M));M+=X}}return _i(_i(_i({},O),{},{x:T,y:B,width:M,height:G,value:u?k:k[1],payload:O,background:z},C&&C[L]&&C[L].props),{},{tooltipPayload:[fW(r,O)],tooltipPosition:{x:T+M/2,y:B+G/2}})});return _i({data:E,layout:v},m)});function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function pOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HW(n.key),n)}}function gOe(e,t,r){return t&&eM(e.prototype,t),r&&eM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tM(Object(r),!0).forEach(function(n){Ej(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ej(e,t,r){return t=HW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HW(e){var t=vOe(e,"string");return zx(t)=="symbol"?t:t+""}function vOe(e,t){if(zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VW=function(t,r,n,i,s){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!xa(u,Gc);return d.reduce(function(h,v){var p=r[v],g=p.orientation,y=p.domain,b=p.padding,x=b===void 0?{}:b,j=p.mirror,N=p.reversed,A="".concat(g).concat(j?"Mirror":""),C,E,O,L,k;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var T=y[1]-y[0],B=1/0,M=p.categoricalDomain.sort(Tme);if(M.forEach(function(U,H){H>0&&(B=Math.min((U||0)-(M[H-1]||0),B))}),Number.isFinite(B)){var G=B/T,z=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(C=G*z/2),p.padding==="no-gap"){var D=Rs(t.barCategoryGap,G*z),q=G*z/2;C=q-D-(q-D)/z*D}}}i==="xAxis"?E=[n.left+(x.left||0)+(C||0),n.left+n.width-(x.right||0)-(C||0)]:i==="yAxis"?E=c==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(C||0),n.top+n.height-(x.bottom||0)-(C||0)]:E=p.range,N&&(E=[E[1],E[0]]);var K=lW(p,s,m),ae=K.scale,J=K.realScaleType;ae.domain(y).range(E),cW(ae);var I=uW(ae,$o($o({},p),{},{realScaleType:J}));i==="xAxis"?(k=g==="top"&&!j||g==="bottom"&&j,O=n.left,L=f[A]-k*p.height):i==="yAxis"&&(k=g==="left"&&!j||g==="right"&&j,O=f[A]-k*p.width,L=n.top);var $=$o($o($o({},p),I),{},{realScaleType:J,x:O,y:L,scale:ae,width:i==="xAxis"?n.width:p.width,height:i==="yAxis"?n.height:p.height});return $.bandSize=g2($,I),!p.hide&&i==="xAxis"?f[A]+=(k?-1:1)*$.height:p.hide||(f[A]+=(k?-1:1)*$.width),$o($o({},h),{},Ej({},v,$))},{})},GW=function(t,r){var n=t.x,i=t.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(i,o),width:Math.abs(s-n),height:Math.abs(o-i)}},yOe=function(t){var r=t.x1,n=t.y1,i=t.x2,s=t.y2;return GW({x:r,y:n},{x:i,y:s})},KW=function(){function e(t){pOe(this,e),this.scale=t}return gOe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();Ej(KW,"EPS",1e-4);var iO=function(t){var r=Object.keys(t).reduce(function(n,i){return $o($o({},n),{},Ej({},i,KW.create(t[i])))},{});return $o($o({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return $Pe(i,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return zW(i,function(s,o){return r[o].isInRange(s)})}})};function xOe(e){return(e%180+180)%180}var bOe=function(t){var r=t.width,n=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=xOe(i),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},wOe=Ul,_Oe=g0,jOe=lj;function NOe(e){return function(t,r,n){var i=Object(t);if(!_Oe(t)){var s=wOe(r);t=jOe(t),r=function(l){return s(i[l],l,i)}}var o=e(t,r,n);return o>-1?i[s?t[o]:o]:void 0}}var SOe=NOe,AOe=MW;function COe(e){var t=AOe(e),r=t%1;return t===t?r?t-r:t:0}var kOe=COe,EOe=qq,POe=Ul,OOe=kOe,TOe=Math.max;function LOe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:OOe(r);return i<0&&(i=TOe(n+i,0)),EOe(e,POe(t),i)}var ROe=LOe,IOe=SOe,DOe=ROe,MOe=IOe(DOe),$Oe=MOe;const FOe=nn($Oe);var BOe=Lhe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),sO=_.createContext(void 0),aO=_.createContext(void 0),YW=_.createContext(void 0),XW=_.createContext({}),ZW=_.createContext(void 0),JW=_.createContext(0),QW=_.createContext(0),rM=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=BOe(s);return ie.createElement(sO.Provider,{value:n},ie.createElement(aO.Provider,{value:i},ie.createElement(XW.Provider,{value:s},ie.createElement(YW.Provider,{value:d},ie.createElement(ZW.Provider,{value:o},ie.createElement(JW.Provider,{value:u},ie.createElement(QW.Provider,{value:c},l)))))))},zOe=function(){return _.useContext(ZW)},eH=function(t){var r=_.useContext(sO);r==null&&lh();var n=r[t];return n==null&&lh(),n},qOe=function(){var t=_.useContext(sO);return Fu(t)},UOe=function(){var t=_.useContext(aO),r=FOe(t,function(n){return zW(n.domain,Number.isFinite)});return r||Fu(t)},tH=function(t){var r=_.useContext(aO);r==null&&lh();var n=r[t];return n==null&&lh(),n},WOe=function(){var t=_.useContext(YW);return t},HOe=function(){return _.useContext(XW)},oO=function(){return _.useContext(QW)},lO=function(){return _.useContext(JW)};function Yp(e){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function VOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GOe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nH(n.key),n)}}function KOe(e,t,r){return t&&GOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YOe(e,t,r){return t=L2(t),XOe(e,rH()?Reflect.construct(t,r||[],L2(e).constructor):t.apply(e,r))}function XOe(e,t){if(t&&(Yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZOe(e)}function ZOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rH=function(){return!!e})()}function L2(e){return L2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},L2(e)}function JOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kk(e,t)}function kk(e,t){return kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},kk(e,t)}function nM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nM(Object(r),!0).forEach(function(n){cO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cO(e,t,r){return t=nH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nH(e){var t=QOe(e,"string");return Yp(t)=="symbol"?t:t+""}function QOe(e,t){if(Yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e3e(e,t){return i3e(e)||n3e(e,t)||r3e(e,t)||t3e()}function t3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r3e(e,t){if(e){if(typeof e=="string")return sM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sM(e,t)}}function sM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function i3e(e){if(Array.isArray(e))return e}function Ek(){return Ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ek.apply(this,arguments)}var s3e=function(t,r){var n;return ie.isValidElement(t)?n=ie.cloneElement(t,r):Ut(t)?n=t(r):n=ie.createElement("line",Ek({},r,{className:"recharts-reference-line-line"})),n},a3e=function(t,r,n,i,s,o,l,c,u){var d=s.x,f=s.y,m=s.width,h=s.height;if(n){var v=u.y,p=t.y.apply(v,{position:o});if(Rl(u,"discard")&&!t.y.isInRange(p))return null;var g=[{x:d+m,y:p},{x:d,y:p}];return c==="left"?g.reverse():g}if(r){var y=u.x,b=t.x.apply(y,{position:o});if(Rl(u,"discard")&&!t.x.isInRange(b))return null;var x=[{x:b,y:f+h},{x:b,y:f}];return l==="top"?x.reverse():x}if(i){var j=u.segment,N=j.map(function(A){return t.apply(A,{position:o})});return Rl(u,"discard")&&PPe(N,function(A){return!t.isInRange(A)})?null:N}return null};function o3e(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=zOe(),d=eH(i),f=tH(s),m=WOe();if(!u||!m)return null;Wo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=iO({x:d.scale,y:f.scale}),v=Bi(t),p=Bi(r),g=n&&n.length===2,y=a3e(h,v,p,g,m,e.position,d.orientation,f.orientation,e);if(!y)return null;var b=e3e(y,2),x=b[0],j=x.x,N=x.y,A=b[1],C=A.x,E=A.y,O=Rl(e,"hidden")?"url(#".concat(u,")"):void 0,L=iM(iM({clipPath:O},Dt(e,!0)),{},{x1:j,y1:N,x2:C,y2:E});return ie.createElement(Rr,{className:cr("recharts-reference-line",l)},s3e(o,L),Gi.renderCallByParent(e,yOe({x1:j,y1:N,x2:C,y2:E})))}var uO=function(e){function t(){return VOe(this,t),YOe(this,t,arguments)}return JOe(t,e),KOe(t,[{key:"render",value:function(){return ie.createElement(o3e,this.props)}}])}(ie.Component);cO(uO,"displayName","ReferenceLine");cO(uO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Pk(){return Pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pk.apply(this,arguments)}function Xp(e){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xp(e)}function aM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aM(Object(r),!0).forEach(function(n){Pj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c3e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sH(n.key),n)}}function u3e(e,t,r){return t&&c3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d3e(e,t,r){return t=R2(t),f3e(e,iH()?Reflect.construct(t,r||[],R2(e).constructor):t.apply(e,r))}function f3e(e,t){if(t&&(Xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h3e(e)}function h3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iH=function(){return!!e})()}function R2(e){return R2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},R2(e)}function m3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ok(e,t)}function Ok(e,t){return Ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ok(e,t)}function Pj(e,t,r){return t=sH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sH(e){var t=p3e(e,"string");return Xp(t)=="symbol"?t:t+""}function p3e(e,t){if(Xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g3e=function(t){var r=t.x,n=t.y,i=t.xAxis,s=t.yAxis,o=iO({x:i.scale,y:s.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Rl(t,"discard")&&!o.isInRange(l)?null:l},Oj=function(e){function t(){return l3e(this,t),d3e(this,t,arguments)}return m3e(t,e),u3e(t,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Bi(i),d=Bi(s);if(Wo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=g3e(this.props);if(!f)return null;var m=f.x,h=f.y,v=this.props,p=v.shape,g=v.className,y=Rl(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=oM(oM({clipPath:y},Dt(this.props,!0)),{},{cx:m,cy:h});return ie.createElement(Rr,{className:cr("recharts-reference-dot",g)},t.renderDot(p,b),Gi.renderCallByParent(this.props,{x:m-o,y:h-o,width:2*o,height:2*o}))}}])}(ie.Component);Pj(Oj,"displayName","ReferenceDot");Pj(Oj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Pj(Oj,"renderDot",function(e,t){var r;return ie.isValidElement(e)?r=ie.cloneElement(e,t):Ut(e)?r=e(t):r=ie.createElement(_j,Pk({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tk.apply(this,arguments)}function Zp(e){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zp(e)}function lM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lM(Object(r),!0).forEach(function(n){Tj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y3e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oH(n.key),n)}}function x3e(e,t,r){return t&&y3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b3e(e,t,r){return t=I2(t),w3e(e,aH()?Reflect.construct(t,r||[],I2(e).constructor):t.apply(e,r))}function w3e(e,t){if(t&&(Zp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _3e(e)}function _3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aH=function(){return!!e})()}function I2(e){return I2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I2(e)}function j3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lk(e,t)}function Lk(e,t){return Lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Lk(e,t)}function Tj(e,t,r){return t=oH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oH(e){var t=N3e(e,"string");return Zp(t)=="symbol"?t:t+""}function N3e(e,t){if(Zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S3e=function(t,r,n,i,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var m=iO({x:d.scale,y:f.scale}),h={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},v={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:i?m.y.apply(u,{position:"end"}):m.y.rangeMax};return Rl(s,"discard")&&(!m.isInRange(h)||!m.isInRange(v))?null:GW(h,v)},Lj=function(e){function t(){return v3e(this,t),b3e(this,t,arguments)}return j3e(t,e),x3e(t,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Wo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Bi(i),m=Bi(s),h=Bi(o),v=Bi(l),p=this.props.shape;if(!f&&!m&&!h&&!v&&!p)return null;var g=S3e(f,m,h,v,this.props);if(!g&&!p)return null;var y=Rl(this.props,"hidden")?"url(#".concat(d,")"):void 0;return ie.createElement(Rr,{className:cr("recharts-reference-area",c)},t.renderRect(p,cM(cM({clipPath:y},Dt(this.props,!0)),g)),Gi.renderCallByParent(this.props,g))}}])}(ie.Component);Tj(Lj,"displayName","ReferenceArea");Tj(Lj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Tj(Lj,"renderRect",function(e,t){var r;return ie.isValidElement(e)?r=ie.cloneElement(e,t):Ut(e)?r=e(t):r=ie.createElement(nO,Tk({},t,{className:"recharts-reference-area-rect"})),r});function lH(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function A3e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return bOe(n,r)}function C3e(e,t,r){var n=r==="width",i=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:n?i:s,end:n?i+o:s+l}:{start:n?i+o:s+l,end:n?i:s}}function D2(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function k3e(e,t){return lH(e,t+1)}function E3e(e,t,r,n,i){for(var s=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:lH(n,u)};var p=c,g,y=function(){return g===void 0&&(g=r(v,p)),g},b=v.coordinate,x=c===0||D2(e,b,y,d,l);x||(c=0,d=o,u+=1),x&&(d=b+e*(y()/2+i),c+=u)},m;u<=s.length;)if(m=f(),m)return m.v;return[]}function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function uM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uM(Object(r),!0).forEach(function(n){P3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P3e(e,t,r){return t=O3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O3e(e){var t=T3e(e,"string");return qx(t)=="symbol"?t:t+""}function T3e(e,t){if(qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L3e(e,t,r,n,i){for(var s=(n||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(m){var h=s[m],v,p=function(){return v===void 0&&(v=r(h,m)),v};if(m===o-1){var g=e*(h.coordinate+e*p()/2-c);s[m]=h=ws(ws({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate})}else s[m]=h=ws(ws({},h),{},{tickCoord:h.coordinate});var y=D2(e,h.tickCoord,p,l,c);y&&(c=h.tickCoord-e*(p()/2+i),s[m]=ws(ws({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function R3e(e,t,r,n,i,s){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var d=n[l-1],f=r(d,l-1),m=e*(d.coordinate+e*f/2-u);o[l-1]=d=ws(ws({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var h=D2(e,d.tickCoord,function(){return f},c,u);h&&(u=d.tickCoord-e*(f/2+i),o[l-1]=ws(ws({},d),{},{isShow:!0}))}for(var v=s?l-1:l,p=function(b){var x=o[b],j,N=function(){return j===void 0&&(j=r(x,b)),j};if(b===0){var A=e*(x.coordinate-e*N()/2-c);o[b]=x=ws(ws({},x),{},{tickCoord:A<0?x.coordinate-A*e:x.coordinate})}else o[b]=x=ws(ws({},x),{},{tickCoord:x.coordinate});var C=D2(e,x.tickCoord,N,c,u);C&&(c=x.tickCoord+e*(N()/2+i),o[b]=ws(ws({},x),{},{isShow:!0}))},g=0;g<v;g++)p(g);return o}function dO(e,t,r){var n=e.tick,i=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!i||!i.length||!n)return[];if(Xe(c)||Tl.isSsr)return k3e(i,typeof c=="number"&&Xe(c)?c:0);var m=[],h=l==="top"||l==="bottom"?"width":"height",v=d&&h==="width"?hy(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(x,j){var N=Ut(u)?u(x.value,j):x.value;return h==="width"?A3e(hy(N,{fontSize:t,letterSpacing:r}),v,f):hy(N,{fontSize:t,letterSpacing:r})[h]},g=i.length>=2?Ls(i[1].coordinate-i[0].coordinate):1,y=C3e(s,g,h);return c==="equidistantPreserveStart"?E3e(g,y,p,i,o):(c==="preserveStart"||c==="preserveStartEnd"?m=R3e(g,y,p,i,o,c==="preserveStartEnd"):m=L3e(g,y,p,i,o),m.filter(function(b){return b.isShow}))}var I3e=["viewBox"],D3e=["viewBox"],M3e=["ticks"];function Jp(e){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(e)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tm.apply(this,arguments)}function dM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ti(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(r),!0).forEach(function(n){fO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rS(e,t){if(e==null)return{};var r=$3e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function F3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uH(n.key),n)}}function B3e(e,t,r){return t&&fM(e.prototype,t),r&&fM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function z3e(e,t,r){return t=M2(t),q3e(e,cH()?Reflect.construct(t,r||[],M2(e).constructor):t.apply(e,r))}function q3e(e,t){if(t&&(Jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U3e(e)}function U3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cH=function(){return!!e})()}function M2(e){return M2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},M2(e)}function W3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rk(e,t)}function Rk(e,t){return Rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Rk(e,t)}function fO(e,t,r){return t=uH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uH(e){var t=H3e(e,"string");return Jp(t)=="symbol"?t:t+""}function H3e(e,t){if(Jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rg=function(e){function t(r){var n;return F3e(this,t),n=z3e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return W3e(t,e),B3e(t,[{key:"shouldComponentUpdate",value:function(n,i){var s=n.viewBox,o=rS(n,I3e),l=this.props,c=l.viewBox,u=rS(l,D3e);return!Km(s,c)||!Km(o,u)||!Km(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,m=i.tickMargin,h,v,p,g,y,b,x=f?-1:1,j=n.tickSize||d,N=Xe(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":h=v=n.coordinate,g=o+ +!f*c,p=g-x*j,b=p-x*m,y=N;break;case"left":p=g=n.coordinate,v=s+ +!f*l,h=v-x*j,y=h-x*m,b=N;break;case"right":p=g=n.coordinate,v=s+ +f*l,h=v+x*j,y=h+x*m,b=N;break;default:h=v=n.coordinate,g=o+ +f*c,p=g+x*j,b=p+x*m,y=N;break}return{line:{x1:h,y1:p,x2:v,y2:g},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Ti(Ti(Ti({},Dt(this.props,!1)),Dt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);f=Ti(Ti({},f),{},{x1:i,y1:s+m*l,x2:i+o,y2:s+m*l})}else{var h=+(c==="left"&&!u||c==="right"&&u);f=Ti(Ti({},f),{},{x1:i+h*o,y1:s,x2:i+h*o,y2:s+l})}return ie.createElement("line",Tm({},f,{className:cr("recharts-cartesian-axis-line",Pa(d,"className"))}))}},{key:"renderTicks",value:function(n,i,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,m=l.unit,h=dO(Ti(Ti({},this.props),{},{ticks:n}),i,s),v=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=Dt(this.props,!1),y=Dt(d,!1),b=Ti(Ti({},g),{},{fill:"none"},Dt(c,!1)),x=h.map(function(j,N){var A=o.getTickLineCoord(j),C=A.line,E=A.tick,O=Ti(Ti(Ti(Ti({textAnchor:v,verticalAnchor:p},g),{},{stroke:"none",fill:u},y),E),{},{index:N,payload:j,visibleTicksCount:h.length,tickFormatter:f});return ie.createElement(Rr,Tm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},sh(o.props,j,N)),c&&ie.createElement("line",Tm({},b,C,{className:cr("recharts-cartesian-axis-tick-line",Pa(c,"className"))})),d&&t.renderTickItem(d,O,"".concat(Ut(f)?f(j.value,N):j.value).concat(m||"")))});return ie.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,m=f.ticks,h=rS(f,M3e),v=m;return Ut(c)&&(v=m&&m.length>0?c(this.props):c(h)),o<=0||l<=0||!v||!v.length?null:ie.createElement(Rr,{className:cr("recharts-cartesian-axis",u),ref:function(g){n.layerReference=g}},s&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Gi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,s){var o,l=cr(i.className,"recharts-cartesian-axis-tick-value");return ie.isValidElement(n)?o=ie.cloneElement(n,Ti(Ti({},i),{},{className:l})):Ut(n)?o=n(Ti(Ti({},i),{},{className:l})):o=ie.createElement(ah,Tm({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(_.Component);fO(Rg,"displayName","CartesianAxis");fO(Rg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var V3e=["x1","y1","x2","y2","key"],G3e=["offset"];function ch(e){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}function hM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(r),!0).forEach(function(n){K3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K3e(e,t,r){return t=Y3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y3e(e){var t=X3e(e,"string");return ch(t)=="symbol"?t:t+""}function X3e(e,t){if(ch(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kf(){return kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kf.apply(this,arguments)}function mM(e,t){if(e==null)return{};var r=Z3e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var J3e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,i=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return ie.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function dH(e,t){var r;if(ie.isValidElement(e))r=ie.cloneElement(e,t);else if(Ut(e))r=e(t);else{var n=t.x1,i=t.y1,s=t.x2,o=t.y2,l=t.key,c=mM(t,V3e),u=Dt(c,!1);u.offset;var d=mM(u,G3e);r=ie.createElement("line",kf({},d,{x1:n,y1:i,x2:s,y2:o,fill:"none",key:l}))}return r}function Q3e(e){var t=e.x,r=e.width,n=e.horizontal,i=n===void 0?!0:n,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=js(js({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return dH(i,u)});return ie.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function eTe(e){var t=e.y,r=e.height,n=e.vertical,i=n===void 0?!0:n,s=e.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=js(js({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return dH(i,u)});return ie.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function tTe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,i=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+i-i)}).sort(function(m,h){return m-h});i!==d[0]&&d.unshift(0);var f=d.map(function(m,h){var v=!d[h+1],p=v?i+o-m:d[h+1]-m;if(p<=0)return null;var g=h%t.length;return ie.createElement("rect",{key:"react-".concat(h),y:m,x:n,height:p,width:s,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function rTe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,i=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(m){return Math.round(m+s-s)}).sort(function(m,h){return m-h});s!==d[0]&&d.unshift(0);var f=d.map(function(m,h){var v=!d[h+1],p=v?s+l-m:d[h+1]-m;if(p<=0)return null;var g=h%n.length;return ie.createElement("rect",{key:"react-".concat(h),x:m,y:o,width:p,height:c,stroke:"none",fill:n[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var nTe=function(t,r){var n=t.xAxis,i=t.width,s=t.height,o=t.offset;return oW(dO(js(js(js({},Rg.defaultProps),n),{},{ticks:Nc(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,r)},iTe=function(t,r){var n=t.yAxis,i=t.width,s=t.height,o=t.offset;return oW(dO(js(js(js({},Rg.defaultProps),n),{},{ticks:Nc(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,r)},rm={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Qp(e){var t,r,n,i,s,o,l=oO(),c=lO(),u=HOe(),d=js(js({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:rm.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:rm.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:rm.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:rm.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:rm.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:rm.verticalFill,x:Xe(e.x)?e.x:u.left,y:Xe(e.y)?e.y:u.top,width:Xe(e.width)?e.width:u.width,height:Xe(e.height)?e.height:u.height}),f=d.x,m=d.y,h=d.width,v=d.height,p=d.syncWithTicks,g=d.horizontalValues,y=d.verticalValues,b=qOe(),x=UOe();if(!Xe(h)||h<=0||!Xe(v)||v<=0||!Xe(f)||f!==+f||!Xe(m)||m!==+m)return null;var j=d.verticalCoordinatesGenerator||nTe,N=d.horizontalCoordinatesGenerator||iTe,A=d.horizontalPoints,C=d.verticalPoints;if((!A||!A.length)&&Ut(N)){var E=g&&g.length,O=N({yAxis:x?js(js({},x),{},{ticks:E?g:x.ticks}):void 0,width:l,height:c,offset:u},E?!0:p);Wo(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ch(O),"]")),Array.isArray(O)&&(A=O)}if((!C||!C.length)&&Ut(j)){var L=y&&y.length,k=j({xAxis:b?js(js({},b),{},{ticks:L?y:b.ticks}):void 0,width:l,height:c,offset:u},L?!0:p);Wo(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ch(k),"]")),Array.isArray(k)&&(C=k)}return ie.createElement("g",{className:"recharts-cartesian-grid"},ie.createElement(J3e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),ie.createElement(Q3e,kf({},d,{offset:u,horizontalPoints:A,xAxis:b,yAxis:x})),ie.createElement(eTe,kf({},d,{offset:u,verticalPoints:C,xAxis:b,yAxis:x})),ie.createElement(tTe,kf({},d,{horizontalPoints:A})),ie.createElement(rTe,kf({},d,{verticalPoints:C})))}Qp.displayName="CartesianGrid";var sTe=["layout","type","stroke","connectNulls","isRange","ref"],aTe=["key"],fH;function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function hH(e,t){if(e==null)return{};var r=oTe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ef(){return Ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ef.apply(this,arguments)}function pM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Eu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pM(Object(r),!0).forEach(function(n){Nl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pH(n.key),n)}}function cTe(e,t,r){return t&&gM(e.prototype,t),r&&gM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uTe(e,t,r){return t=$2(t),dTe(e,mH()?Reflect.construct(t,r||[],$2(e).constructor):t.apply(e,r))}function dTe(e,t){if(t&&(eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fTe(e)}function fTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mH=function(){return!!e})()}function $2(e){return $2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$2(e)}function hTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ik(e,t)}function Ik(e,t){return Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ik(e,t)}function Nl(e,t,r){return t=pH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pH(e){var t=mTe(e,"string");return eg(t)=="symbol"?t:t+""}function mTe(e,t){if(eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var no=function(e){function t(){var r;lTe(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=uTe(this,t,[].concat(i)),Nl(r,"state",{isAnimationFinished:!0}),Nl(r,"id",Cg("recharts-area-")),Nl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ut(o)&&o()}),Nl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ut(o)&&o()}),r}return hTe(t,e),cTe(t,[{key:"renderDots",value:function(n,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,m=Dt(this.props,!1),h=Dt(u,!0),v=d.map(function(g,y){var b=Eu(Eu(Eu({key:"dot-".concat(y),r:3},m),h),{},{index:y,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:d});return t.renderDotItem(u,b)}),p={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return ie.createElement(Rr,Ef({className:"recharts-area-dots"},p),v)}},{key:"renderHorizontalRect",value:function(n){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=Xu(o.map(function(m){return m.y||0}));return Xe(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Xu(s.map(function(m){return m.y||0})),f)),Xe(f)?ie.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=Xu(o.map(function(m){return m.x||0}));return Xe(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Xu(s.map(function(m){return m.x||0})),f)),Xe(f)?ie.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,i,s,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,m=l.isRange;l.ref;var h=hH(l,sTe);return ie.createElement(Rr,{clipPath:s?"url(#clipPath-".concat(o,")"):null},ie.createElement(Jm,Ef({},Dt(h,!0),{points:n,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&ie.createElement(Jm,Ef({},Dt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&m&&ie.createElement(Jm,Ef({},Dt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(n,i){var s=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,m=o.animationEasing,h=o.animationId,v=this.state,p=v.prevPoints,g=v.prevBaseLine;return ie.createElement(Fl,{begin:d,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t;if(p){var x=p.length/l.length,j=l.map(function(E,O){var L=Math.floor(O*x);if(p[L]){var k=p[L],T=Ks(k.x,E.x),B=Ks(k.y,E.y);return Eu(Eu({},E),{},{x:T(b),y:B(b)})}return E}),N;if(Xe(c)&&typeof c=="number"){var A=Ks(g,c);N=A(b)}else if(ur(c)||Ag(c)){var C=Ks(g,0);N=C(b)}else N=c.map(function(E,O){var L=Math.floor(O*x);if(g[L]){var k=g[L],T=Ks(k.x,E.x),B=Ks(k.y,E.y);return Eu(Eu({},E),{},{x:T(b),y:B(b)})}return E});return s.renderAreaStatically(j,N,n,i)}return ie.createElement(Rr,null,ie.createElement("defs",null,ie.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(b))),ie.createElement(Rr,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,n,i)))})}},{key:"renderArea",value:function(n,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!d&&m>0||!Bp(d,o)||!Bp(f,l))?this.renderAreaWithAnimation(n,i):this.renderAreaStatically(o,l,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,m=i.yAxis,h=i.width,v=i.height,p=i.isAnimationActive,g=i.id;if(s||!l||!l.length)return null;var y=this.state.isAnimationFinished,b=l.length===1,x=cr("recharts-area",c),j=f&&f.allowDataOverflow,N=m&&m.allowDataOverflow,A=j||N,C=ur(g)?this.id:g,E=(n=Dt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=E.r,L=O===void 0?3:O,k=E.strokeWidth,T=k===void 0?2:k,B=zme(o)?o:{},M=B.clipDot,G=M===void 0?!0:M,z=L*2+T;return ie.createElement(Rr,{className:x},j||N?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(C)},ie.createElement("rect",{x:j?d:d-h/2,y:N?u:u-v/2,width:j?h:h*2,height:N?v:v*2})),!G&&ie.createElement("clipPath",{id:"clipPath-dots-".concat(C)},ie.createElement("rect",{x:d-z/2,y:u-z/2,width:h+z,height:v+z}))):null,b?null:this.renderArea(A,C),(o||b)&&this.renderDots(A,G,C),(!p||y)&&Oc.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:n.points!==i.curPoints||n.baseLine!==i.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(_.PureComponent);fH=no;Nl(no,"displayName","Area");Nl(no,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Tl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Nl(no,"getBaseValue",function(e,t,r,n){var i=e.layout,s=e.baseValue,o=t.props.baseValue,l=o??s;if(Xe(l)&&typeof l=="number")return l;var c=i==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Nl(no,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,i=e.yAxis,s=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,m=e.offset,h=t.layout,v=u&&u.length,p=fH.getBaseValue(t,r,n,i),g=h==="horizontal",y=!1,b=f.map(function(j,N){var A;v?A=u[d+N]:(A=$i(j,c),Array.isArray(A)?y=!0:A=[p,A]);var C=A[1]==null||v&&$i(j,c)==null;return g?{x:z6({axis:n,ticks:s,bandSize:l,entry:j,index:N}),y:C?null:i.scale(A[1]),value:A,payload:j}:{x:C?null:n.scale(A[1]),y:z6({axis:i,ticks:o,bandSize:l,entry:j,index:N}),value:A,payload:j}}),x;return v||y?x=b.map(function(j){var N=Array.isArray(j.value)?j.value[0]:null;return g?{x:j.x,y:N!=null&&j.y!=null?i.scale(N):null}:{x:N!=null?n.scale(N):null,y:j.y}}):x=g?i.scale(p):n.scale(p),Eu({points:b,baseLine:x,layout:h,isRange:y},m)});Nl(no,"renderDotItem",function(e,t){var r;if(ie.isValidElement(e))r=ie.cloneElement(e,t);else if(Ut(e))r=e(t);else{var n=cr("recharts-area-dot",typeof e!="boolean"?e.className:""),i=t.key,s=hH(t,aTe);r=ie.createElement(_j,Ef({},s,{key:i,className:n}))}return r});function tg(e){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tg(e)}function pTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gTe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yH(n.key),n)}}function vTe(e,t,r){return t&&gTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yTe(e,t,r){return t=F2(t),xTe(e,gH()?Reflect.construct(t,r||[],F2(e).constructor):t.apply(e,r))}function xTe(e,t){if(t&&(tg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bTe(e)}function bTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gH=function(){return!!e})()}function F2(e){return F2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},F2(e)}function wTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dk(e,t)}function Dk(e,t){return Dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Dk(e,t)}function vH(e,t,r){return t=yH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yH(e){var t=_Te(e,"string");return tg(t)=="symbol"?t:t+""}function _Te(e,t){if(tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mk(){return Mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mk.apply(this,arguments)}function jTe(e){var t=e.xAxisId,r=oO(),n=lO(),i=eH(t);return i==null?null:_.createElement(Rg,Mk({},i,{className:cr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Nc(o,!0)}}))}var Kc=function(e){function t(){return pTe(this,t),yTe(this,t,arguments)}return wTe(t,e),vTe(t,[{key:"render",value:function(){return _.createElement(jTe,this.props)}}])}(_.Component);vH(Kc,"displayName","XAxis");vH(Kc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}function NTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function STe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wH(n.key),n)}}function ATe(e,t,r){return t&&STe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CTe(e,t,r){return t=B2(t),kTe(e,xH()?Reflect.construct(t,r||[],B2(e).constructor):t.apply(e,r))}function kTe(e,t){if(t&&(rg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ETe(e)}function ETe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xH=function(){return!!e})()}function B2(e){return B2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},B2(e)}function PTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$k(e,t)}function $k(e,t){return $k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$k(e,t)}function bH(e,t,r){return t=wH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wH(e){var t=OTe(e,"string");return rg(t)=="symbol"?t:t+""}function OTe(e,t){if(rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fk(){return Fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fk.apply(this,arguments)}var TTe=function(t){var r=t.yAxisId,n=oO(),i=lO(),s=tH(r);return s==null?null:_.createElement(Rg,Fk({},s,{className:cr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(l){return Nc(l,!0)}}))},Yc=function(e){function t(){return NTe(this,t),CTe(this,t,arguments)}return PTe(t,e),ATe(t,[{key:"render",value:function(){return _.createElement(TTe,this.props)}}])}(_.Component);bH(Yc,"displayName","YAxis");bH(Yc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function vM(e){return DTe(e)||ITe(e)||RTe(e)||LTe()}function LTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RTe(e,t){if(e){if(typeof e=="string")return Bk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bk(e,t)}}function ITe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DTe(e){if(Array.isArray(e))return Bk(e)}function Bk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zk=function(t,r,n,i,s){var o=ro(t,uO),l=ro(t,Oj),c=[].concat(vM(o),vM(l)),u=ro(t,Lj),d="".concat(i,"Id"),f=i[0],m=r;if(c.length&&(m=c.reduce(function(p,g){if(g.props[d]===n&&Rl(g.props,"extendDomain")&&Xe(g.props[f])){var y=g.props[f];return[Math.min(p[0],y),Math.max(p[1],y)]}return p},m)),u.length){var h="".concat(f,"1"),v="".concat(f,"2");m=u.reduce(function(p,g){if(g.props[d]===n&&Rl(g.props,"extendDomain")&&Xe(g.props[h])&&Xe(g.props[v])){var y=g.props[h],b=g.props[v];return[Math.min(p[0],y,b),Math.max(p[1],y,b)]}return p},m)}return s&&s.length&&(m=s.reduce(function(p,g){return Xe(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},m)),m},_H={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,f||c,m),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],h]:c._events[v].push(h):(c._events[v]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,h=f.length,v=new Array(h);m<h;m++)v[m]=f[m].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,h,v){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,b,x;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,m),!0;case 5:return g.fn.call(g.context,d,f,m,h),!0;case 6:return g.fn.call(g.context,d,f,m,h,v),!0}for(x=1,b=new Array(y-1);x<y;x++)b[x-1]=arguments[x];g.fn.apply(g.context,b)}else{var j=g.length,N;for(x=0;x<j;x++)switch(g[x].once&&this.removeListener(u,g[x].fn,void 0,!0),y){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,d);break;case 3:g[x].fn.call(g[x].context,d,f);break;case 4:g[x].fn.call(g[x].context,d,f,m);break;default:if(!b)for(N=1,b=new Array(y-1);N<y;N++)b[N-1]=arguments[N];g[x].fn.apply(g[x].context,b)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var v=this._events[h];if(v.fn)v.fn===d&&(!m||v.once)&&(!f||v.context===f)&&o(this,h);else{for(var p=0,g=[],y=v.length;p<y;p++)(v[p].fn!==d||m&&!v[p].once||f&&v[p].context!==f)&&g.push(v[p]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(_H);var MTe=_H.exports;const $Te=nn(MTe);var nS=new $Te,iS="recharts.syncMouseEvents";function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function FTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BTe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jH(n.key),n)}}function zTe(e,t,r){return t&&BTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sS(e,t,r){return t=jH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jH(e){var t=qTe(e,"string");return Ux(t)=="symbol"?t:t+""}function qTe(e,t){if(Ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var UTe=function(){function e(){FTe(this,e),sS(this,"activeIndex",0),sS(this,"coordinateList",[]),sS(this,"layout","horizontal")}return zTe(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,m=r.mouseHandlerCallback,h=m===void 0?null:m;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=s+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function WTe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&Xe(n)&&Xe(i))return!0}return!1}function HTe(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function NH(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,s=e.endAngle,o=On(t,r,n,i),l=On(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}function VTe(e,t,r){var n,i,s,o;if(e==="horizontal")n=t.x,s=n,i=r.top,o=r.top+r.height;else if(e==="vertical")i=t.y,o=i,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,m=On(l,c,u,f),h=On(l,c,d,f);n=m.x,i=m.y,s=h.x,o=h.y}else return NH(t);return[{x:n,y:i},{x:s,y:o}]}function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function yM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function e1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yM(Object(r),!0).forEach(function(n){GTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GTe(e,t,r){return t=KTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KTe(e){var t=YTe(e,"string");return Wx(t)=="symbol"?t:t+""}function YTe(e,t){if(Wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XTe(e){var t,r,n=e.element,i=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,h=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!s||!o||m!=="ScatterChart"&&i!=="axis")return null;var v,p=Jm;if(m==="ScatterChart")v=o,p=yEe;else if(m==="BarChart")v=HTe(f,o,c,d),p=nO;else if(f==="radial"){var g=NH(o),y=g.cx,b=g.cy,x=g.radius,j=g.startAngle,N=g.endAngle;v={cx:y,cy:b,startAngle:j,endAngle:N,innerRadius:x,outerRadius:x},p=yW}else v={points:VTe(f,o,c)},p=Jm;var A=e1(e1(e1(e1({stroke:"#ccc",pointerEvents:"none"},c),v),Dt(h,!1)),{},{payload:l,payloadIndex:u,className:cr("recharts-tooltip-cursor",h.className)});return _.isValidElement(h)?_.cloneElement(h,A):_.createElement(p,A)}var ZTe=["item"],JTe=["children","className","width","height","style","compact","title","desc"];function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lm.apply(this,arguments)}function xM(e,t){return tLe(e)||eLe(e,t)||AH(e,t)||QTe()}function QTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function tLe(e){if(Array.isArray(e))return e}function bM(e,t){if(e==null)return{};var r=rLe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iLe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CH(n.key),n)}}function sLe(e,t,r){return t&&iLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aLe(e,t,r){return t=z2(t),oLe(e,SH()?Reflect.construct(t,r||[],z2(e).constructor):t.apply(e,r))}function oLe(e,t){if(t&&(ng(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lLe(e)}function lLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SH=function(){return!!e})()}function z2(e){return z2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z2(e)}function cLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qk(e,t)}function qk(e,t){return qk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qk(e,t)}function ig(e){return fLe(e)||dLe(e)||AH(e)||uLe()}function uLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AH(e,t){if(e){if(typeof e=="string")return Uk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uk(e,t)}}function dLe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fLe(e){if(Array.isArray(e))return Uk(e)}function Uk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wM(Object(r),!0).forEach(function(n){Ft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ft(e,t,r){return t=CH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=hLe(e,"string");return ng(t)=="symbol"?t:t+""}function hLe(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mLe={xAxis:["bottom","top"],yAxis:["left","right"]},pLe={width:"100%",height:"100%"},kH={x:0,y:0};function t1(e){return e}var gLe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},vLe=function(t,r,n,i){var s=r.find(function(d){return d&&d.index===n});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=i.radius;return Me(Me(Me({},i),On(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=i.angle;return Me(Me(Me({},i),On(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return kH},Rj=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(ig(l),ig(u)):l},[]);return o.length>0?o:t&&t.length&&Xe(i)&&Xe(s)?t.slice(i,s+1):[]};function EH(e){return e==="number"?[0,"auto"]:void 0}var Wk=function(t,r,n,i){var s=t.graphicalItems,o=t.tooltipAxis,l=Rj(r,t);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var h=f===void 0?l:f;m=qw(h,o.dataKey,i)}else m=f&&f[n]||l[n];return m?[].concat(ig(c),[fW(u,m)]):c},[])},_M=function(t,r,n,i){var s=i||{x:t.chartX,y:t.chartY},o=gLe(s,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=qSe(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,m=Wk(t,r,d,f),h=vLe(n,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:m,activeCoordinate:h}}return null},yLe=function(t,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=t.stackOffset,h=aW(d,s);return n.reduce(function(v,p){var g,y=p.type.defaultProps!==void 0?Me(Me({},p.type.defaultProps),p.props):p.props,b=y.type,x=y.dataKey,j=y.allowDataOverflow,N=y.allowDuplicatedCategory,A=y.scale,C=y.ticks,E=y.includeHidden,O=y[o];if(v[O])return v;var L=Rj(t.data,{graphicalItems:i.filter(function(I){var $,U=o in I.props?I.props[o]:($=I.type.defaultProps)===null||$===void 0?void 0:$[o];return U===O}),dataStartIndex:c,dataEndIndex:u}),k=L.length,T,B,M;WTe(y.domain,j,b)&&(T=sk(y.domain,null,j),h&&(b==="number"||A!=="auto")&&(M=py(L,x,"category")));var G=EH(b);if(!T||T.length===0){var z,D=(z=y.domain)!==null&&z!==void 0?z:G;if(x){if(T=py(L,x,b),b==="category"&&h){var q=Ome(T);N&&q?(B=T,T=k2(0,k)):N||(T=H6(D,T,p).reduce(function(I,$){return I.indexOf($)>=0?I:[].concat(ig(I),[$])},[]))}else if(b==="category")N?T=T.filter(function(I){return I!==""&&!ur(I)}):T=H6(D,T,p).reduce(function(I,$){return I.indexOf($)>=0||$===""||ur($)?I:[].concat(ig(I),[$])},[]);else if(b==="number"){var K=GSe(L,i.filter(function(I){var $,U,H=o in I.props?I.props[o]:($=I.type.defaultProps)===null||$===void 0?void 0:$[o],re="hide"in I.props?I.props.hide:(U=I.type.defaultProps)===null||U===void 0?void 0:U.hide;return H===O&&(E||!re)}),x,s,d);K&&(T=K)}h&&(b==="number"||A!=="auto")&&(M=py(L,x,"category"))}else h?T=k2(0,k):l&&l[O]&&l[O].hasStack&&b==="number"?T=m==="expand"?[0,1]:dW(l[O].stackGroups,c,u):T=sW(L,i.filter(function(I){var $=o in I.props?I.props[o]:I.type.defaultProps[o],U="hide"in I.props?I.props.hide:I.type.defaultProps.hide;return $===O&&(E||!U)}),b,d,!0);if(b==="number")T=zk(f,T,O,s,C),D&&(T=sk(D,T,j));else if(b==="category"&&D){var ae=D,J=T.every(function(I){return ae.indexOf(I)>=0});J&&(T=ae)}}return Me(Me({},v),{},Ft({},O,Me(Me({},y),{},{axisType:s,domain:T,categoricalDomain:M,duplicateDomain:B,originalDomain:(g=y.domain)!==null&&g!==void 0?g:G,isCategorical:h,layout:d})))},{})},xLe=function(t,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=Rj(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),h=m.length,v=aW(d,s),p=-1;return n.reduce(function(g,y){var b=y.type.defaultProps!==void 0?Me(Me({},y.type.defaultProps),y.props):y.props,x=b[o],j=EH("number");if(!g[x]){p++;var N;return v?N=k2(0,h):l&&l[x]&&l[x].hasStack?(N=dW(l[x].stackGroups,c,u),N=zk(f,N,x,s)):(N=sk(j,sW(m,n.filter(function(A){var C,E,O=o in A.props?A.props[o]:(C=A.type.defaultProps)===null||C===void 0?void 0:C[o],L="hide"in A.props?A.props.hide:(E=A.type.defaultProps)===null||E===void 0?void 0:E.hide;return O===x&&!L}),"number",d),i.defaultProps.allowDataOverflow),N=zk(f,N,x,s)),Me(Me({},g),{},Ft({},x,Me(Me({axisType:s},i.defaultProps),{},{hide:!0,orientation:Pa(mLe,"".concat(s,".").concat(p%2),null),domain:N,originalDomain:j,isCategorical:v,layout:d})))}return g},{})},bLe=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(i,"Id"),m=ro(d,s),h={};return m&&m.length?h=yLe(t,{axes:m,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(h=xLe(t,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),h},wLe=function(t){var r=Fu(t),n=Nc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:PP(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:g2(r,n)}},jM=function(t){var r=t.children,n=t.defaultShowTooltip,i=xa(r,Gp),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},_Le=function(t){return!t||!t.length?!1:t.some(function(r){var n=kc(r&&r.type);return n&&n.indexOf("Bar")>=0})},NM=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},jLe=function(t,r){var n=t.props,i=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,m=n.margin||{},h=xa(f,Gp),v=xa(f,Ec),p=Object.keys(c).reduce(function(N,A){var C=c[A],E=C.orientation;return!C.mirror&&!C.hide?Me(Me({},N),{},Ft({},E,N[E]+C.width)):N},{left:m.left||0,right:m.right||0}),g=Object.keys(o).reduce(function(N,A){var C=o[A],E=C.orientation;return!C.mirror&&!C.hide?Me(Me({},N),{},Ft({},E,Pa(N,"".concat(E))+C.height)):N},{top:m.top||0,bottom:m.bottom||0}),y=Me(Me({},g),p),b=y.bottom;h&&(y.bottom+=h.props.height||Gp.defaultProps.height),v&&r&&(y=HSe(y,i,n,r));var x=u-y.left-y.right,j=d-y.top-y.bottom;return Me(Me({brushBottom:b},y),{},{width:Math.max(x,0),height:Math.max(j,0)})},NLe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},hO=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,m=function(y,b){var x=b.graphicalItems,j=b.stackGroups,N=b.offset,A=b.updateId,C=b.dataStartIndex,E=b.dataEndIndex,O=y.barSize,L=y.layout,k=y.barGap,T=y.barCategoryGap,B=y.maxBarSize,M=NM(L),G=M.numericAxisName,z=M.cateAxisName,D=_Le(x),q=[];return x.forEach(function(K,ae){var J=Rj(y.data,{graphicalItems:[K],dataStartIndex:C,dataEndIndex:E}),I=K.type.defaultProps!==void 0?Me(Me({},K.type.defaultProps),K.props):K.props,$=I.dataKey,U=I.maxBarSize,H=I["".concat(G,"Id")],re=I["".concat(z,"Id")],X={},he=c.reduce(function(We,Ge){var Ke=b["".concat(Ge.axisType,"Map")],Pt=I["".concat(Ge.axisType,"Id")];Ke&&Ke[Pt]||Ge.axisType==="zAxis"||lh();var Lt=Ke[Pt];return Me(Me({},We),{},Ft(Ft({},Ge.axisType,Lt),"".concat(Ge.axisType,"Ticks"),Nc(Lt)))},X),se=he[z],ue=he["".concat(z,"Ticks")],ge=j&&j[H]&&j[H].hasStack&&rAe(K,j[H].stackGroups),ve=kc(K.type).indexOf("Bar")>=0,te=g2(se,ue),Ne=[],Y=D&&USe({barSize:O,stackGroups:j,totalSize:NLe(he,z)});if(ve){var Le,ye,we=ur(U)?B:U,_e=(Le=(ye=g2(se,ue,!0))!==null&&ye!==void 0?ye:we)!==null&&Le!==void 0?Le:0;Ne=WSe({barGap:k,barCategoryGap:T,bandSize:_e!==te?_e:te,sizeList:Y[re],maxBarSize:we}),_e!==te&&(Ne=Ne.map(function(We){return Me(Me({},We),{},{position:Me(Me({},We.position),{},{offset:We.position.offset-_e/2})})}))}var Qe=K&&K.type&&K.type.getComposedData;Qe&&q.push({props:Me(Me({},Qe(Me(Me({},he),{},{displayedData:J,props:y,dataKey:$,item:K,bandSize:te,barPosition:Ne,offset:N,stackedData:ge,layout:L,dataStartIndex:C,dataEndIndex:E}))),{},Ft(Ft(Ft({key:K.key||"item-".concat(ae)},G,he[G]),z,he[z]),"animationId",A)),childIndex:Wme(K,y.children),item:K})}),q},h=function(y,b){var x=y.props,j=y.dataStartIndex,N=y.dataEndIndex,A=y.updateId;if(!$R({props:x}))return null;var C=x.children,E=x.layout,O=x.stackOffset,L=x.data,k=x.reverseStackOrder,T=NM(E),B=T.numericAxisName,M=T.cateAxisName,G=ro(C,n),z=eAe(L,G,"".concat(B,"Id"),"".concat(M,"Id"),O,k),D=c.reduce(function(I,$){var U="".concat($.axisType,"Map");return Me(Me({},I),{},Ft({},U,bLe(x,Me(Me({},$),{},{graphicalItems:G,stackGroups:$.axisType===B&&z,dataStartIndex:j,dataEndIndex:N}))))},{}),q=jLe(Me(Me({},D),{},{props:x,graphicalItems:G}),b==null?void 0:b.legendBBox);Object.keys(D).forEach(function(I){D[I]=d(x,D[I],q,I.replace("Map",""),r)});var K=D["".concat(M,"Map")],ae=wLe(K),J=m(x,Me(Me({},D),{},{dataStartIndex:j,dataEndIndex:N,updateId:A,graphicalItems:G,stackGroups:z,offset:q}));return Me(Me({formattedGraphicalItems:J,graphicalItems:G,offset:q,stackGroups:z},ae),D)},v=function(g){function y(b){var x,j,N;return nLe(this,y),N=aLe(this,y,[b]),Ft(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ft(N,"accessibilityManager",new UTe),Ft(N,"handleLegendBBoxUpdate",function(A){if(A){var C=N.state,E=C.dataStartIndex,O=C.dataEndIndex,L=C.updateId;N.setState(Me({legendBBox:A},h({props:N.props,dataStartIndex:E,dataEndIndex:O,updateId:L},Me(Me({},N.state),{},{legendBBox:A}))))}}),Ft(N,"handleReceiveSyncEvent",function(A,C,E){if(N.props.syncId===A){if(E===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(C)}}),Ft(N,"handleBrushChange",function(A){var C=A.startIndex,E=A.endIndex;if(C!==N.state.dataStartIndex||E!==N.state.dataEndIndex){var O=N.state.updateId;N.setState(function(){return Me({dataStartIndex:C,dataEndIndex:E},h({props:N.props,dataStartIndex:C,dataEndIndex:E,updateId:O},N.state))}),N.triggerSyncEvent({dataStartIndex:C,dataEndIndex:E})}}),Ft(N,"handleMouseEnter",function(A){var C=N.getMouseInfo(A);if(C){var E=Me(Me({},C),{},{isTooltipActive:!0});N.setState(E),N.triggerSyncEvent(E);var O=N.props.onMouseEnter;Ut(O)&&O(E,A)}}),Ft(N,"triggeredAfterMouseMove",function(A){var C=N.getMouseInfo(A),E=C?Me(Me({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(E),N.triggerSyncEvent(E);var O=N.props.onMouseMove;Ut(O)&&O(E,A)}),Ft(N,"handleItemMouseEnter",function(A){N.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),Ft(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Ft(N,"handleMouseMove",function(A){A.persist(),N.throttleTriggeredAfterMouseMove(A)}),Ft(N,"handleMouseLeave",function(A){N.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};N.setState(C),N.triggerSyncEvent(C);var E=N.props.onMouseLeave;Ut(E)&&E(C,A)}),Ft(N,"handleOuterEvent",function(A){var C=Ume(A),E=Pa(N.props,"".concat(C));if(C&&Ut(E)){var O,L;/.*touch.*/i.test(C)?L=N.getMouseInfo(A.changedTouches[0]):L=N.getMouseInfo(A),E((O=L)!==null&&O!==void 0?O:{},A)}}),Ft(N,"handleClick",function(A){var C=N.getMouseInfo(A);if(C){var E=Me(Me({},C),{},{isTooltipActive:!0});N.setState(E),N.triggerSyncEvent(E);var O=N.props.onClick;Ut(O)&&O(E,A)}}),Ft(N,"handleMouseDown",function(A){var C=N.props.onMouseDown;if(Ut(C)){var E=N.getMouseInfo(A);C(E,A)}}),Ft(N,"handleMouseUp",function(A){var C=N.props.onMouseUp;if(Ut(C)){var E=N.getMouseInfo(A);C(E,A)}}),Ft(N,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),Ft(N,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&N.handleMouseDown(A.changedTouches[0])}),Ft(N,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&N.handleMouseUp(A.changedTouches[0])}),Ft(N,"handleDoubleClick",function(A){var C=N.props.onDoubleClick;if(Ut(C)){var E=N.getMouseInfo(A);C(E,A)}}),Ft(N,"handleContextMenu",function(A){var C=N.props.onContextMenu;if(Ut(C)){var E=N.getMouseInfo(A);C(E,A)}}),Ft(N,"triggerSyncEvent",function(A){N.props.syncId!==void 0&&nS.emit(iS,N.props.syncId,A,N.eventEmitterSymbol)}),Ft(N,"applySyncEvent",function(A){var C=N.props,E=C.layout,O=C.syncMethod,L=N.state.updateId,k=A.dataStartIndex,T=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)N.setState(Me({dataStartIndex:k,dataEndIndex:T},h({props:N.props,dataStartIndex:k,dataEndIndex:T,updateId:L},N.state)));else if(A.activeTooltipIndex!==void 0){var B=A.chartX,M=A.chartY,G=A.activeTooltipIndex,z=N.state,D=z.offset,q=z.tooltipTicks;if(!D)return;if(typeof O=="function")G=O(q,A);else if(O==="value"){G=-1;for(var K=0;K<q.length;K++)if(q[K].value===A.activeLabel){G=K;break}}var ae=Me(Me({},D),{},{x:D.left,y:D.top}),J=Math.min(B,ae.x+ae.width),I=Math.min(M,ae.y+ae.height),$=q[G]&&q[G].value,U=Wk(N.state,N.props.data,G),H=q[G]?{x:E==="horizontal"?q[G].coordinate:J,y:E==="horizontal"?I:q[G].coordinate}:kH;N.setState(Me(Me({},A),{},{activeLabel:$,activeCoordinate:H,activePayload:U,activeTooltipIndex:G}))}else N.setState(A)}),Ft(N,"renderCursor",function(A){var C,E=N.state,O=E.isTooltipActive,L=E.activeCoordinate,k=E.activePayload,T=E.offset,B=E.activeTooltipIndex,M=E.tooltipAxisBandSize,G=N.getTooltipEventType(),z=(C=A.props.active)!==null&&C!==void 0?C:O,D=N.props.layout,q=A.key||"_recharts-cursor";return ie.createElement(XTe,{key:q,activeCoordinate:L,activePayload:k,activeTooltipIndex:B,chartName:r,element:A,isActive:z,layout:D,offset:T,tooltipAxisBandSize:M,tooltipEventType:G})}),Ft(N,"renderPolarAxis",function(A,C,E){var O=Pa(A,"type.axisType"),L=Pa(N.state,"".concat(O,"Map")),k=A.type.defaultProps,T=k!==void 0?Me(Me({},k),A.props):A.props,B=L&&L[T["".concat(O,"Id")]];return _.cloneElement(A,Me(Me({},B),{},{className:cr(O,B.className),key:A.key||"".concat(C,"-").concat(E),ticks:Nc(B,!0)}))}),Ft(N,"renderPolarGrid",function(A){var C=A.props,E=C.radialLines,O=C.polarAngles,L=C.polarRadius,k=N.state,T=k.radiusAxisMap,B=k.angleAxisMap,M=Fu(T),G=Fu(B),z=G.cx,D=G.cy,q=G.innerRadius,K=G.outerRadius;return _.cloneElement(A,{polarAngles:Array.isArray(O)?O:Nc(G,!0).map(function(ae){return ae.coordinate}),polarRadius:Array.isArray(L)?L:Nc(M,!0).map(function(ae){return ae.coordinate}),cx:z,cy:D,innerRadius:q,outerRadius:K,key:A.key||"polar-grid",radialLines:E})}),Ft(N,"renderLegend",function(){var A=N.state.formattedGraphicalItems,C=N.props,E=C.children,O=C.width,L=C.height,k=N.props.margin||{},T=O-(k.left||0)-(k.right||0),B=nW({children:E,formattedGraphicalItems:A,legendWidth:T,legendContent:u});if(!B)return null;var M=B.item,G=bM(B,ZTe);return _.cloneElement(M,Me(Me({},G),{},{chartWidth:O,chartHeight:L,margin:k,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Ft(N,"renderTooltip",function(){var A,C=N.props,E=C.children,O=C.accessibilityLayer,L=xa(E,Os);if(!L)return null;var k=N.state,T=k.isTooltipActive,B=k.activeCoordinate,M=k.activePayload,G=k.activeLabel,z=k.offset,D=(A=L.props.active)!==null&&A!==void 0?A:T;return _.cloneElement(L,{viewBox:Me(Me({},z),{},{x:z.left,y:z.top}),active:D,label:G,payload:D?M:[],coordinate:B,accessibilityLayer:O})}),Ft(N,"renderBrush",function(A){var C=N.props,E=C.margin,O=C.data,L=N.state,k=L.offset,T=L.dataStartIndex,B=L.dataEndIndex,M=L.updateId;return _.cloneElement(A,{key:A.key||"_recharts-brush",onChange:Xb(N.handleBrushChange,A.props.onChange),data:O,x:Xe(A.props.x)?A.props.x:k.left,y:Xe(A.props.y)?A.props.y:k.top+k.height+k.brushBottom-(E.bottom||0),width:Xe(A.props.width)?A.props.width:k.width,startIndex:T,endIndex:B,updateId:"brush-".concat(M)})}),Ft(N,"renderReferenceElement",function(A,C,E){if(!A)return null;var O=N,L=O.clipPathId,k=N.state,T=k.xAxisMap,B=k.yAxisMap,M=k.offset,G=A.type.defaultProps||{},z=A.props,D=z.xAxisId,q=D===void 0?G.xAxisId:D,K=z.yAxisId,ae=K===void 0?G.yAxisId:K;return _.cloneElement(A,{key:A.key||"".concat(C,"-").concat(E),xAxis:T[q],yAxis:B[ae],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:L})}),Ft(N,"renderActivePoints",function(A){var C=A.item,E=A.activePoint,O=A.basePoint,L=A.childIndex,k=A.isRange,T=[],B=C.props.key,M=C.item.type.defaultProps!==void 0?Me(Me({},C.item.type.defaultProps),C.item.props):C.item.props,G=M.activeDot,z=M.dataKey,D=Me(Me({index:L,dataKey:z,cx:E.x,cy:E.y,r:4,fill:rO(C.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Dt(G,!1)),Uw(G));return T.push(y.renderActiveDot(G,D,"".concat(B,"-activePoint-").concat(L))),O?T.push(y.renderActiveDot(G,Me(Me({},D),{},{cx:O.x,cy:O.y}),"".concat(B,"-basePoint-").concat(L))):k&&T.push(null),T}),Ft(N,"renderGraphicChild",function(A,C,E){var O=N.filterFormatItem(A,C,E);if(!O)return null;var L=N.getTooltipEventType(),k=N.state,T=k.isTooltipActive,B=k.tooltipAxis,M=k.activeTooltipIndex,G=k.activeLabel,z=N.props.children,D=xa(z,Os),q=O.props,K=q.points,ae=q.isRange,J=q.baseLine,I=O.item.type.defaultProps!==void 0?Me(Me({},O.item.type.defaultProps),O.item.props):O.item.props,$=I.activeDot,U=I.hide,H=I.activeBar,re=I.activeShape,X=!!(!U&&T&&D&&($||H||re)),he={};L!=="axis"&&D&&D.props.trigger==="click"?he={onClick:Xb(N.handleItemMouseEnter,A.props.onClick)}:L!=="axis"&&(he={onMouseLeave:Xb(N.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:Xb(N.handleItemMouseEnter,A.props.onMouseEnter)});var se=_.cloneElement(A,Me(Me({},O.props),he));function ue(Ge){return typeof B.dataKey=="function"?B.dataKey(Ge.payload):null}if(X)if(M>=0){var ge,ve;if(B.dataKey&&!B.allowDuplicatedCategory){var te=typeof B.dataKey=="function"?ue:"payload.".concat(B.dataKey.toString());ge=qw(K,te,G),ve=ae&&J&&qw(J,te,G)}else ge=K==null?void 0:K[M],ve=ae&&J&&J[M];if(re||H){var Ne=A.props.activeIndex!==void 0?A.props.activeIndex:M;return[_.cloneElement(A,Me(Me(Me({},O.props),he),{},{activeIndex:Ne})),null,null]}if(!ur(ge))return[se].concat(ig(N.renderActivePoints({item:O,activePoint:ge,basePoint:ve,childIndex:M,isRange:ae})))}else{var Y,Le=(Y=N.getItemByXY(N.state.activeCoordinate))!==null&&Y!==void 0?Y:{graphicalItem:se},ye=Le.graphicalItem,we=ye.item,_e=we===void 0?A:we,Qe=ye.childIndex,We=Me(Me(Me({},O.props),he),{},{activeIndex:Qe});return[_.cloneElement(_e,We),null,null]}return ae?[se,null,null]:[se,null]}),Ft(N,"renderCustomized",function(A,C,E){return _.cloneElement(A,Me(Me({key:"recharts-customized-".concat(E)},N.props),N.state))}),Ft(N,"renderMap",{CartesianGrid:{handler:t1,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:t1},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:t1},YAxis:{handler:t1},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((x=b.id)!==null&&x!==void 0?x:Cg("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=rU(N.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),N.state={},N}return cLe(y,g),sLe(y,[{key:"componentDidMount",value:function(){var x,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,j=x.children,N=x.data,A=x.height,C=x.layout,E=xa(j,Os);if(E){var O=E.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var L=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,k=Wk(this.state,N,O,L),T=this.state.tooltipTicks[O].coordinate,B=(this.state.offset.top+A)/2,M=C==="horizontal",G=M?{x:T,y:B}:{y:T,x:B},z=this.state.formattedGraphicalItems.find(function(q){var K=q.item;return K.type.name==="Scatter"});z&&(G=Me(Me({},G),z.props.points[O].tooltipPosition),k=z.props.points[O].tooltipPayload);var D={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:L,activePayload:k,activeCoordinate:G};this.setState(D),this.renderCursor(E),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var N,A;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(x){bC([xa(x.children,Os)],[xa(this.props.children,Os)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=xa(this.props.children,Os);if(x&&typeof x.props.shared=="boolean"){var j=x.props.shared?"axis":"item";return l.indexOf(j)>=0?j:s}return s}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var j=this.container,N=j.getBoundingClientRect(),A=g_e(N),C={chartX:Math.round(x.pageX-A.left),chartY:Math.round(x.pageY-A.top)},E=N.width/j.offsetWidth||1,O=this.inRange(C.chartX,C.chartY,E);if(!O)return null;var L=this.state,k=L.xAxisMap,T=L.yAxisMap,B=this.getTooltipEventType(),M=_M(this.state,this.props.data,this.props.layout,O);if(B!=="axis"&&k&&T){var G=Fu(k).scale,z=Fu(T).scale,D=G&&G.invert?G.invert(C.chartX):null,q=z&&z.invert?z.invert(C.chartY):null;return Me(Me({},C),{},{xValue:D,yValue:q},M)}return M?Me(Me({},C),M):null}},{key:"inRange",value:function(x,j){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,C=x/N,E=j/N;if(A==="horizontal"||A==="vertical"){var O=this.state.offset,L=C>=O.left&&C<=O.left+O.width&&E>=O.top&&E<=O.top+O.height;return L?{x:C,y:E}:null}var k=this.state,T=k.angleAxisMap,B=k.radiusAxisMap;if(T&&B){var M=Fu(T);return K6({x:C,y:E},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,j=this.getTooltipEventType(),N=xa(x,Os),A={};N&&j==="axis"&&(N.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Uw(this.props,this.handleOuterEvent);return Me(Me({},C),A)}},{key:"addListener",value:function(){nS.on(iS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){nS.removeListener(iS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,j,N){for(var A=this.state.formattedGraphicalItems,C=0,E=A.length;C<E;C++){var O=A[C];if(O.item===x||O.props.key===x.key||j===kc(O.item.type)&&N===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,j=this.state.offset,N=j.left,A=j.top,C=j.height,E=j.width;return ie.createElement("defs",null,ie.createElement("clipPath",{id:x},ie.createElement("rect",{x:N,y:A,height:C,width:E})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(j,N){var A=xM(N,2),C=A[0],E=A[1];return Me(Me({},j),{},Ft({},C,E.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(j,N){var A=xM(N,2),C=A[0],E=A[1];return Me(Me({},j),{},Ft({},C,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[x])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(x){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[x])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(x){var j=this.state,N=j.formattedGraphicalItems,A=j.activeItem;if(N&&N.length)for(var C=0,E=N.length;C<E;C++){var O=N[C],L=O.props,k=O.item,T=k.type.defaultProps!==void 0?Me(Me({},k.type.defaultProps),k.props):k.props,B=kc(k.type);if(B==="Bar"){var M=(L.data||[]).find(function(q){return Jke(x,q)});if(M)return{graphicalItem:O,payload:M}}else if(B==="RadialBar"){var G=(L.data||[]).find(function(q){return K6(x,q)});if(G)return{graphicalItem:O,payload:G}}else if(Cj(O,A)||kj(O,A)||$x(O,A)){var z=B4e({graphicalItem:O,activeTooltipItem:A,itemData:T.data}),D=T.activeIndex===void 0?z:T.activeIndex;return{graphicalItem:Me(Me({},O),{},{childIndex:D}),payload:$x(O,A)?T.data[z]:O.props.data[z]}}}return null}},{key:"render",value:function(){var x=this;if(!$R(this))return null;var j=this.props,N=j.children,A=j.className,C=j.width,E=j.height,O=j.style,L=j.compact,k=j.title,T=j.desc,B=bM(j,JTe),M=Dt(B,!1);if(L)return ie.createElement(rM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement(_C,Lm({},M,{width:C,height:E,title:k,desc:T}),this.renderClipPath(),BR(N,this.renderMap)));if(this.props.accessibilityLayer){var G,z;M.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,M.role=(z=this.props.role)!==null&&z!==void 0?z:"application",M.onKeyDown=function(q){x.accessibilityManager.keyboardEvent(q)},M.onFocus=function(){x.accessibilityManager.focus()}}var D=this.parseEventsOfWrapper();return ie.createElement(rM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement("div",Lm({className:cr("recharts-wrapper",A),style:Me({position:"relative",cursor:"default",width:C,height:E},O)},D,{ref:function(K){x.container=K}}),ie.createElement(_C,Lm({},M,{width:C,height:E,title:k,desc:T,style:pLe}),this.renderClipPath(),BR(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(_.Component);Ft(v,"displayName",r),Ft(v,"defaultProps",Me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ft(v,"getDerivedStateFromProps",function(g,y){var b=g.dataKey,x=g.data,j=g.children,N=g.width,A=g.height,C=g.layout,E=g.stackOffset,O=g.margin,L=y.dataStartIndex,k=y.dataEndIndex;if(y.updateId===void 0){var T=jM(g);return Me(Me(Me({},T),{},{updateId:0},h(Me(Me({props:g},T),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:x,prevWidth:N,prevHeight:A,prevLayout:C,prevStackOffset:E,prevMargin:O,prevChildren:j})}if(b!==y.prevDataKey||x!==y.prevData||N!==y.prevWidth||A!==y.prevHeight||C!==y.prevLayout||E!==y.prevStackOffset||!Km(O,y.prevMargin)){var B=jM(g),M={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},G=Me(Me({},_M(y,x,C)),{},{updateId:y.updateId+1}),z=Me(Me(Me({},B),M),G);return Me(Me(Me({},z),h(Me({props:g},z),y)),{},{prevDataKey:b,prevData:x,prevWidth:N,prevHeight:A,prevLayout:C,prevStackOffset:E,prevMargin:O,prevChildren:j})}if(!bC(j,y.prevChildren)){var D,q,K,ae,J=xa(j,Gp),I=J&&(D=(q=J.props)===null||q===void 0?void 0:q.startIndex)!==null&&D!==void 0?D:L,$=J&&(K=(ae=J.props)===null||ae===void 0?void 0:ae.endIndex)!==null&&K!==void 0?K:k,U=I!==L||$!==k,H=!ur(x),re=H&&!U?y.updateId:y.updateId+1;return Me(Me({updateId:re},h(Me(Me({props:g},y),{},{updateId:re,dataStartIndex:I,dataEndIndex:$}),y)),{},{prevChildren:j,dataStartIndex:I,dataEndIndex:$})}return null}),Ft(v,"renderActiveDot",function(g,y,b){var x;return _.isValidElement(g)?x=_.cloneElement(g,y):Ut(g)?x=g(y):x=ie.createElement(_j,y),ie.createElement(Rr,{className:"recharts-active-dot",key:b},x)});var p=_.forwardRef(function(y,b){return ie.createElement(v,Lm({},y,{ref:b}))});return p.displayName=v.displayName,p},PH=hO({chartName:"BarChart",GraphicalChild:Gc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Kc},{axisType:"yAxis",AxisComp:Yc}],formatAxisMap:VW}),SLe=hO({chartName:"PieChart",GraphicalChild:iu,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Aj},{axisType:"radiusAxis",AxisComp:Nj}],formatAxisMap:fAe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),mO=hO({chartName:"AreaChart",GraphicalChild:no,axisComponents:[{axisType:"xAxis",AxisComp:Kc},{axisType:"yAxis",AxisComp:Yc}],formatAxisMap:VW});const r1={primary:"hsl(32, 93%, 54%)",success:"hsl(142, 71%, 35%)",danger:"hsl(0, 65%, 51%)",warning:"hsl(32, 93%, 45%)"},ALe={fournitures:"Fournitures",equipement:"quipement",service:"Service",maintenance:"Maintenance",informatique:"Informatique",autre:"Autre"};function CLe(){const[e,t]=_.useState({montantEnAttente:0,nombreEnAttente:0,daValidesMois:0,montantValidesMois:0,daPayeesMois:0,montantPayesMois:0,daRefuseesMois:0,tauxValidation:0,evolutionMensuelle:[],repartitionCategorie:[]}),[r,n]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const c=new Date,u=vC(c),d=zw(c),f=Oz(c),{data:m}=await fe.from("demandes_achat").select("id, total_amount, category").eq("status","soumise_validation"),h=(m==null?void 0:m.reduce((T,B)=>T+(B.total_amount||0),0))||0,v=(m==null?void 0:m.length)||0,{data:p}=await fe.from("demandes_achat").select("id, total_amount, validated_finance_at").eq("status","validee_finance").gte("validated_finance_at",u.toISOString()).lte("validated_finance_at",d.toISOString()),{data:g}=await fe.from("demandes_achat").select("id, total_amount, validated_finance_at").eq("status","payee").gte("validated_finance_at",u.toISOString()).lte("validated_finance_at",d.toISOString()),y=[...p||[],...g||[]],b=y.reduce((T,B)=>T+(B.total_amount||0),0),{data:x}=await fe.from("demandes_achat").select("id, total_amount, comptabilise_at").eq("status","payee").gte("comptabilise_at",u.toISOString()).lte("comptabilise_at",d.toISOString()),j=(x==null?void 0:x.reduce((T,B)=>T+(B.total_amount||0),0))||0,{count:N}=await fe.from("demandes_achat").select("*",{count:"exact",head:!0}).in("status",["refusee_finance","rejetee_comptabilite"]).gte("updated_at",u.toISOString()).lte("updated_at",d.toISOString()),A=y.length+(N||0),C=A>0?Math.round(y.length/A*100):100,E=[];for(let T=5;T>=0;T--){const B=Mz(c,T),M=vC(B),G=zw(B),z=Ct(B,"MMM",{locale:Tt}),{data:D}=await fe.from("demandes_achat").select("id, total_amount").in("status",["validee_finance","payee"]).gte("validated_finance_at",M.toISOString()).lte("validated_finance_at",G.toISOString()),{count:q}=await fe.from("demandes_achat").select("*",{count:"exact",head:!0}).in("status",["refusee_finance","rejetee_comptabilite"]).gte("updated_at",M.toISOString()).lte("updated_at",G.toISOString());E.push({mois:z,valide:(D==null?void 0:D.length)||0,refuse:q||0,montant:(D==null?void 0:D.reduce((K,ae)=>K+(ae.total_amount||0),0))||0})}const{data:O}=await fe.from("demandes_achat").select("category, total_amount").in("status",["validee_finance","payee"]).gte("validated_finance_at",f.toISOString()),L=new Map;O==null||O.forEach(T=>{const B=T.category,M=L.get(B)||{montant:0,count:0};L.set(B,{montant:M.montant+(T.total_amount||0),count:M.count+1})});const k=Array.from(L.entries()).map(([T,B])=>({categorie:ALe[T]||T,montant:B.montant,count:B.count})).sort((T,B)=>B.montant-T.montant);t({montantEnAttente:h,nombreEnAttente:v,daValidesMois:y.length,montantValidesMois:b,daPayeesMois:(x==null?void 0:x.length)||0,montantPayesMois:j,daRefuseesMois:N||0,tauxValidation:C,evolutionMensuelle:E,repartitionCategorie:k})}catch(c){console.error("Error fetching DAF stats:",c)}finally{n(!1)}})()},[]);const i=l=>new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)+" XOF",s=l=>l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(0)+"K":l.toString(),o=({active:l,payload:c,label:u})=>l&&c&&c.length?a.jsxs("div",{className:"rounded-md border bg-card p-3 shadow-md",children:[a.jsx("p",{className:"font-medium text-sm mb-1",children:u}),c.map((d,f)=>a.jsxs("p",{className:"text-sm",style:{color:d.color},children:[d.name,": ",d.name==="Montant"?i(d.value):d.value]},f))]}):null;return r?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-8 w-48 bg-muted animate-pulse rounded"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((l,c)=>a.jsx(me,{children:a.jsx(pe,{className:"p-6",children:a.jsx("div",{className:"h-20 bg-muted animate-pulse rounded"})})},c))})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[a.jsx(xd,{className:"h-5 w-5 text-primary"}),"Tableau de bord DAF"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Vue financire et suivi des validations"})]}),a.jsx(de,{asChild:!0,variant:"outline",size:"sm",children:a.jsxs($t,{to:"/demandes-achat",children:["Voir toutes les DA",a.jsx(PQ,{className:"ml-1 h-4 w-4"})]})})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(me,{className:"border-l-4 border-l-warning bg-warning/5",children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"En attente de validation"}),a.jsx(Yn,{className:"h-4 w-4 text-warning"})]}),a.jsxs(pe,{children:[a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold",children:e.nombreEnAttente}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"DA"})]}),a.jsx("div",{className:"mt-1 text-lg font-semibold text-warning",children:i(e.montantEnAttente)}),e.nombreEnAttente>0&&a.jsx(de,{asChild:!0,variant:"link",className:"mt-2 h-auto p-0 text-xs text-warning",children:a.jsx($t,{to:"/demandes-achat?status=soumise_validation",children:"Traiter maintenant "})})]})]}),a.jsxs(me,{className:"border-l-4 border-l-success",children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Valides ce mois"}),a.jsx(Br,{className:"h-4 w-4 text-success"})]}),a.jsxs(pe,{children:[a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold",children:e.daValidesMois}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"DA"})]}),a.jsx("div",{className:"mt-1 text-lg font-semibold text-success",children:i(e.montantValidesMois)}),a.jsx("div",{className:"mt-2 flex items-center gap-1 text-xs text-muted-foreground",children:a.jsxs(it,{variant:"outline",className:"text-success border-success/30",children:[e.tauxValidation,"% taux de validation"]})})]})]}),a.jsxs(me,{className:"border-l-4 border-l-primary",children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Payes ce mois"}),a.jsx(si,{className:"h-4 w-4 text-primary"})]}),a.jsxs(pe,{children:[a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold",children:e.daPayeesMois}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"DA"})]}),a.jsx("div",{className:"mt-1 text-lg font-semibold text-primary",children:i(e.montantPayesMois)}),a.jsx(de,{asChild:!0,variant:"link",className:"mt-2 h-auto p-0 text-xs",children:a.jsx($t,{to:"/comptabilite",children:"Voir comptabilit "})})]})]}),a.jsxs(me,{className:"border-l-4 border-l-destructive",children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Refuses ce mois"}),a.jsx(b_,{className:"h-4 w-4 text-destructive"})]}),a.jsxs(pe,{children:[a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold",children:e.daRefuseesMois}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"DA"})]}),a.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:e.daRefuseesMois===0?"Aucun refus ce mois":"Demandes non conformes ou hors budget"})]})]})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-base",children:[a.jsx(Uo,{className:"h-4 w-4"}),"volution des dpenses (6 mois)"]})}),a.jsx(pe,{children:a.jsx("div",{className:"h-[280px]",children:a.jsx(Ym,{width:"100%",height:"100%",children:a.jsxs(mO,{data:e.evolutionMensuelle,children:[a.jsx(Qp,{strokeDasharray:"3 3",className:"stroke-muted"}),a.jsx(Kc,{dataKey:"mois",className:"text-xs"}),a.jsx(Yc,{tickFormatter:s,className:"text-xs"}),a.jsx(Os,{content:a.jsx(o,{})}),a.jsx(no,{type:"monotone",dataKey:"montant",name:"Montant",stroke:r1.primary,fill:r1.primary,fillOpacity:.3})]})})})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-base",children:[a.jsx(xd,{className:"h-4 w-4"}),"Dcisions par mois"]})}),a.jsx(pe,{children:a.jsx("div",{className:"h-[280px]",children:a.jsx(Ym,{width:"100%",height:"100%",children:a.jsxs(PH,{data:e.evolutionMensuelle,children:[a.jsx(Qp,{strokeDasharray:"3 3",className:"stroke-muted"}),a.jsx(Kc,{dataKey:"mois",className:"text-xs"}),a.jsx(Yc,{className:"text-xs"}),a.jsx(Os,{content:a.jsx(o,{})}),a.jsx(Ec,{}),a.jsx(Gc,{dataKey:"valide",name:"Valides",fill:r1.success,radius:[4,4,0,0]}),a.jsx(Gc,{dataKey:"refuse",name:"Refuses",fill:r1.danger,radius:[4,4,0,0]})]})})})})]})]}),e.repartitionCategorie.length>0&&a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-base",children:[a.jsx(jn,{className:"h-4 w-4"}),"Rpartition par catgorie (anne en cours)"]})}),a.jsx(pe,{children:a.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:e.repartitionCategorie.map((l,c)=>a.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:l.categorie}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.count," DA"]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"font-semibold text-primary",children:[s(l.montant)," XOF"]})})]},l.categorie))})})]})]})}const Ii={primary:"hsl(32, 93%, 54%)",secondary:"hsl(24, 58%, 27%)",success:"hsl(142, 71%, 35%)",warning:"hsl(32, 93%, 45%)",danger:"hsl(0, 65%, 51%)",muted:"hsl(40, 24%, 70%)",accent:"hsl(32, 93%, 70%)"},SM=[Ii.muted,Ii.primary,Ii.warning,Ii.accent,Ii.secondary,Ii.success,Ii.success,Ii.danger],kLe=5*60*1e3;let n1=null;function ELe(){const{user:e,profile:t,roles:r,isAdmin:n,hasAnyRole:i}=yr(),[s,o]=_.useState({totalUsers:0,totalDepartments:0,activeDepartments:0,besoins:{total:0,cree:0,pris_en_charge:0,accepte:0,refuse:0},da:{total:0,brouillon:0,soumise:0,en_analyse:0,chiffree:0,soumise_validation:0,validee_finance:0,payee:0,rejetee:0},bl:{total:0,prepare:0,valide:0,livre:0,livree_partiellement:0},montants:{engage:0,paye:0,en_attente:0},stock:{total:0,critique:0,epuise:0}}),[l,c]=_.useState([]),[u,d]=_.useState(!0),f=i(["admin","dg","daf","responsable_logistique","responsable_achats","comptable"]),m=_.useCallback(async()=>{if(e!=null&&e.id){if(n1&&Date.now()-n1.timestamp<kLe){const y=n1.data;o(y.stats),c(y.trends),d(!1);return}try{const[y,b,x,j,N]=await Promise.all([fe.rpc("dashboard_summary_by_role",{_user_id:e.id}),fe.from("departments").select("*",{count:"exact",head:!0}),fe.from("departments").select("*",{count:"exact",head:!0}).eq("is_active",!0),n?fe.from("profiles").select("*",{count:"exact",head:!0}):Promise.resolve({count:0}),fe.from("demandes_achat").select("status, total_amount")]),A=y.data||{},C=A.besoins||{},E=A.demandes_achat||{},O=A.bons_livraison||{},L=A.stock||{},k=N.data||[],T=k.filter(K=>["soumise_validation","validee_finance","payee"].includes(K.status)).reduce((K,ae)=>K+(ae.total_amount||0),0),B=k.filter(K=>K.status==="payee").reduce((K,ae)=>K+(ae.total_amount||0),0),M=k.filter(K=>K.status==="validee_finance").reduce((K,ae)=>K+(ae.total_amount||0),0),G={totalUsers:j.count||0,totalDepartments:b.count||0,activeDepartments:x.count||0,besoins:{total:C.total||0,cree:C.cree||0,pris_en_charge:C.pris_en_charge||0,accepte:C.accepte||0,refuse:C.refuse||0},da:{total:E.total||0,brouillon:E.brouillon||0,soumise:E.soumise||0,en_analyse:E.en_analyse||0,chiffree:E.chiffree||0,soumise_validation:E.soumise_validation||0,validee_finance:E.validee_finance||0,payee:E.payee||0,rejetee:0},bl:{total:O.total||0,prepare:O.prepare||0,valide:O.valide||O.en_attente_validation||0,livre:O.livre||0,livree_partiellement:0},montants:{engage:T,paye:B,en_attente:M},stock:{total:L.total_articles||0,critique:L.low_stock||0,epuise:L.epuise||0}};o(G);const z=new Date,D=Array.from({length:6},(K,ae)=>{const J=Mz(z,5-ae),I=vC(J).toISOString(),$=zw(J).toISOString(),U=Ct(J,"MMM",{locale:Tt});return Promise.all([fe.from("besoins").select("*",{count:"exact",head:!0}).gte("created_at",I).lte("created_at",$),fe.from("demandes_achat").select("*",{count:"exact",head:!0}).gte("created_at",I).lte("created_at",$),fe.from("bons_livraison").select("*",{count:"exact",head:!0}).gte("created_at",I).lte("created_at",$)]).then(([H,re,X])=>({month:U,besoins:H.count||0,da:re.count||0,bl:X.count||0}))}),q=await Promise.all(D);c(q),n1={data:{stats:G,trends:q},timestamp:Date.now()}}catch(y){console.error("Error fetching dashboard stats:",y)}finally{d(!1)}}},[e==null?void 0:e.id,n]);_.useEffect(()=>{m()},[m]);const h=_.useCallback(y=>new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(y)+" XOF",[]),v=_.useMemo(()=>[{name:"Crs",value:s.besoins.cree,color:Ii.primary},{name:"Pris en charge",value:s.besoins.pris_en_charge,color:Ii.warning},{name:"Accepts",value:s.besoins.accepte,color:Ii.success},{name:"Refuss",value:s.besoins.refuse,color:Ii.danger}].filter(y=>y.value>0),[s.besoins]),p=_.useMemo(()=>[{name:"Brouillon",value:s.da.brouillon},{name:"Soumises",value:s.da.soumise},{name:"En analyse",value:s.da.en_analyse},{name:"Chiffres",value:s.da.chiffree},{name:"En validation",value:s.da.soumise_validation},{name:"Valides",value:s.da.validee_finance},{name:"Payes",value:s.da.payee},{name:"Rejetes",value:s.da.rejetee}],[s.da]),g=({active:y,payload:b,label:x})=>y&&b&&b.length?a.jsxs("div",{className:"rounded-md border bg-card p-2 shadow-md",children:[a.jsx("p",{className:"font-medium text-sm",children:x}),b.map((j,N)=>a.jsxs("p",{className:"text-sm",style:{color:j.color},children:[j.name,": ",j.value]},N))]}):null;return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Tableau de bord"}),a.jsxs("p",{className:"text-muted-foreground",children:["Bienvenue, ",(t==null?void 0:t.first_name)||"Utilisateur"]})]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(y=>a.jsx("span",{className:"inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary",children:Cc[y]},y))})]}),u?a.jsx(Vue,{}):a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Besoins internes"}),a.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:u?"...":s.besoins.total}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center text-success",children:[a.jsx(Br,{className:"mr-1 h-3 w-3"}),s.besoins.accepte," accepts"]}),a.jsxs("span",{className:"flex items-center text-warning",children:[a.jsx(Yn,{className:"mr-1 h-3 w-3"}),s.besoins.cree+s.besoins.pris_en_charge," en cours"]})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Demandes d'achat"}),a.jsx(jp,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:u?"...":s.da.total}),a.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:a.jsxs("span",{className:"flex items-center text-primary",children:[a.jsx(Uo,{className:"mr-1 h-3 w-3"}),s.da.soumise+s.da.en_analyse+s.da.chiffree+s.da.soumise_validation," en traitement"]})})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Bons de livraison"}),a.jsx(th,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:u?"...":s.bl.total}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center text-success",children:[a.jsx(Br,{className:"mr-1 h-3 w-3"}),s.bl.livre," livrs"]}),a.jsxs("span",{className:"flex items-center text-warning",children:[a.jsx(Yn,{className:"mr-1 h-3 w-3"}),s.bl.prepare+s.bl.valide," en attente"]})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Articles en stock"}),a.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:u?"...":s.stock.total}),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.stock.critique>0&&a.jsxs("span",{className:"flex items-center text-warning",children:[a.jsx(zr,{className:"mr-1 h-3 w-3"}),s.stock.critique," critique"]}),s.stock.epuise>0&&a.jsxs("span",{className:"flex items-center text-destructive",children:[a.jsx(Er,{className:"mr-1 h-3 w-3"}),s.stock.epuise," puis"]}),s.stock.critique===0&&s.stock.epuise===0&&a.jsx("span",{className:"text-muted-foreground",children:"Stock normal"})]})]})]})]}),f&&a.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[a.jsxs(me,{className:"border-l-4 border-l-primary",children:[a.jsx(ze,{className:"pb-2",children:a.jsxs(Ue,{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(Wf,{className:"h-4 w-4"}),"Montants engags"]})}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:u?"...":h(s.montants.engage)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total des DA valides et payes"})]})]}),a.jsxs(me,{className:"border-l-4 border-l-success",children:[a.jsx(ze,{className:"pb-2",children:a.jsxs(Ue,{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(Br,{className:"h-4 w-4"}),"Montants pays"]})}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold text-success",children:u?"...":h(s.montants.paye)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paiements effectus"})]})]}),a.jsxs(me,{className:"border-l-4 border-l-warning",children:[a.jsx(ze,{className:"pb-2",children:a.jsxs(Ue,{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(Yn,{className:"h-4 w-4"}),"En attente de paiement"]})}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold text-warning",children:u?"...":h(s.montants.en_attente)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"DA valides non payes"})]})]})]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{className:"text-base",children:"Rpartition des besoins"})}),a.jsx(pe,{children:v.length>0?a.jsx(Ym,{width:"100%",height:250,children:a.jsxs(SLe,{children:[a.jsx(iu,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:2,dataKey:"value",label:({name:y,value:b})=>`${y}: ${b}`,labelLine:!1,children:v.map((y,b)=>a.jsx(mx,{fill:y.color},`cell-${b}`))}),a.jsx(Os,{content:a.jsx(g,{})}),a.jsx(Ec,{})]})}):a.jsx("div",{className:"flex h-[250px] items-center justify-center text-muted-foreground",children:"Aucune donne disponible"})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{className:"text-base",children:"tat des demandes d'achat"})}),a.jsx(pe,{children:a.jsx(Ym,{width:"100%",height:250,children:a.jsxs(PH,{data:p,layout:"vertical",children:[a.jsx(Qp,{strokeDasharray:"3 3",horizontal:!1}),a.jsx(Kc,{type:"number"}),a.jsx(Yc,{type:"category",dataKey:"name",width:100,tick:{fontSize:11}}),a.jsx(Os,{content:a.jsx(g,{})}),a.jsx(Gc,{dataKey:"value",fill:Ii.primary,radius:[0,4,4,0],children:p.map((y,b)=>a.jsx(mx,{fill:SM[b%SM.length]},`cell-${b}`))})]})})})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{className:"text-base",children:"Tendances mensuelles (6 derniers mois)"})}),a.jsx(pe,{children:a.jsx(Ym,{width:"100%",height:300,children:a.jsxs(mO,{data:l,children:[a.jsx(Qp,{strokeDasharray:"3 3"}),a.jsx(Kc,{dataKey:"month"}),a.jsx(Yc,{}),a.jsx(Os,{content:a.jsx(g,{})}),a.jsx(Ec,{}),a.jsx(no,{type:"monotone",dataKey:"besoins",name:"Besoins",stroke:Ii.primary,fill:Ii.primary,fillOpacity:.3}),a.jsx(no,{type:"monotone",dataKey:"da",name:"DA",stroke:Ii.secondary,fill:Ii.secondary,fillOpacity:.3}),a.jsx(no,{type:"monotone",dataKey:"bl",name:"BL",stroke:Ii.success,fill:Ii.success,fillOpacity:.3})]})})})]}),i(["responsable_logistique","agent_logistique"])&&a.jsx(Kue,{}),i(["responsable_achats","agent_achats"])&&a.jsx(Yue,{}),i(["comptable"])&&a.jsx(Xue,{}),i(["daf"])&&!n&&a.jsx(CLe,{}),n&&a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Utilisateurs"}),a.jsx(fg,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:u?"...":s.totalUsers}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Comptes enregistrs"})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Dpartements"}),a.jsx(zs,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:u?"...":s.activeDepartments}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["sur ",s.totalDepartments," total"]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ue,{className:"text-sm font-medium",children:"Taux de rejet DA"}),a.jsx(Er,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:u?"...":s.da.total>0?`${Math.round(s.da.rejetee/s.da.total*100)}%`:"0%"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.da.rejetee," sur ",s.da.total," DA"]})]})]})]})]})})}function Ji({message:e}){const t=yi();return a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-8 text-center",children:[a.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:a.jsx(XQ,{className:"h-8 w-8 text-muted-foreground"})}),a.jsx("h2",{className:"font-serif text-lg font-bold text-foreground",children:"Action non autorise"}),a.jsx("p",{className:"max-w-sm text-sm text-muted-foreground",children:e||"Vous n'avez pas les permissions ncessaires pour accder  cette ressource."}),a.jsx(de,{variant:"outline",onClick:()=>t("/dashboard"),children:"Retour au tableau de bord"})]})}function pO(e){const t=_.useRef({value:e,previous:e});return _.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var PLe=[" ","Enter","ArrowUp","ArrowDown"],OLe=[" ","Enter"],uh="Select",[Ij,Dj,TLe]=g4(uh),[Ig,f7e]=Ia(uh,[TLe,vg]),Mj=vg(),[LLe,Md]=Ig(uh),[RLe,ILe]=Ig(uh),OH=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:h,form:v}=e,p=Mj(t),[g,y]=_.useState(null),[b,x]=_.useState(null),[j,N]=_.useState(!1),A=B_(u),[C,E]=Dc({prop:n,defaultProp:i??!1,onChange:s,caller:uh}),[O,L]=Dc({prop:o,defaultProp:l,onChange:c,caller:uh}),k=_.useRef(null),T=g?v||!!g.closest("form"):!0,[B,M]=_.useState(new Set),G=Array.from(B).map(z=>z.props.value).join(";");return a.jsx(ZB,{...p,children:a.jsxs(LLe,{required:h,scope:t,trigger:g,onTriggerChange:y,valueNode:b,onValueNodeChange:x,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:$s(),value:O,onValueChange:L,open:C,onOpenChange:E,dir:A,triggerPointerDownPosRef:k,disabled:m,children:[a.jsx(Ij.Provider,{scope:t,children:a.jsx(RLe,{scope:e.__scopeSelect,onNativeOptionAdd:_.useCallback(z=>{M(D=>new Set(D).add(z))},[]),onNativeOptionRemove:_.useCallback(z=>{M(D=>{const q=new Set(D);return q.delete(z),q})},[]),children:r})}),T?a.jsxs(tV,{"aria-hidden":!0,required:h,tabIndex:-1,name:d,autoComplete:f,value:O,onChange:z=>L(z.target.value),disabled:m,form:v,children:[O===void 0?a.jsx("option",{value:""}):null,Array.from(B)]},G):null]})})};OH.displayName=uh;var TH="SelectTrigger",LH=_.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,s=Mj(r),o=Md(TH,r),l=o.disabled||n,c=vr(t,o.onTriggerChange),u=Dj(r),d=_.useRef("touch"),[f,m,h]=nV(p=>{const g=u().filter(x=>!x.disabled),y=g.find(x=>x.value===o.value),b=iV(g,p,y);b!==void 0&&o.onValueChange(b.value)}),v=p=>{l||(o.onOpenChange(!0),h()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return a.jsx(k_,{asChild:!0,...s,children:a.jsx(jt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":rV(o.value)?"":void 0,...i,ref:c,onClick:lt(i.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&v(p)}),onPointerDown:lt(i.onPointerDown,p=>{d.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:lt(i.onKeyDown,p=>{const g=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(g&&p.key===" ")&&PLe.includes(p.key)&&(v(),p.preventDefault())})})})});LH.displayName=TH;var RH="SelectValue",IH=_.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:o="",...l}=e,c=Md(RH,r),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,f=vr(t,c.onValueNodeChange);return Yi(()=>{u(d)},[u,d]),a.jsx(jt.span,{...l,ref:f,style:{pointerEvents:"none"},children:rV(c.value)?a.jsx(a.Fragment,{children:o}):s})});IH.displayName=RH;var DLe="SelectIcon",DH=_.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return a.jsx(jt.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});DH.displayName=DLe;var MLe="SelectPortal",MH=e=>a.jsx(l0,{asChild:!0,...e});MH.displayName=MLe;var dh="SelectContent",$H=_.forwardRef((e,t)=>{const r=Md(dh,e.__scopeSelect),[n,i]=_.useState();if(Yi(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?bh.createPortal(a.jsx(FH,{scope:e.__scopeSelect,children:a.jsx(Ij.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),s):null}return a.jsx(BH,{...e,ref:t})});$H.displayName=dh;var Po=10,[FH,$d]=Ig(dh),$Le="SelectContentImpl",FLe=eh("SelectContent.RemoveScroll"),BH=_.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:h,sticky:v,hideWhenDetached:p,avoidCollisions:g,...y}=e,b=Md(dh,r),[x,j]=_.useState(null),[N,A]=_.useState(null),C=vr(t,X=>j(X)),[E,O]=_.useState(null),[L,k]=_.useState(null),T=Dj(r),[B,M]=_.useState(!1),G=_.useRef(!1);_.useEffect(()=>{if(x)return eP(x)},[x]),Q4();const z=_.useCallback(X=>{const[he,...se]=T().map(ve=>ve.ref.current),[ue]=se.slice(-1),ge=document.activeElement;for(const ve of X)if(ve===ge||(ve==null||ve.scrollIntoView({block:"nearest"}),ve===he&&N&&(N.scrollTop=0),ve===ue&&N&&(N.scrollTop=N.scrollHeight),ve==null||ve.focus(),document.activeElement!==ge))return},[T,N]),D=_.useCallback(()=>z([E,x]),[z,E,x]);_.useEffect(()=>{B&&D()},[B,D]);const{onOpenChange:q,triggerPointerDownPosRef:K}=b;_.useEffect(()=>{if(x){let X={x:0,y:0};const he=ue=>{var ge,ve;X={x:Math.abs(Math.round(ue.pageX)-(((ge=K.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(ue.pageY)-(((ve=K.current)==null?void 0:ve.y)??0))}},se=ue=>{X.x<=10&&X.y<=10?ue.preventDefault():x.contains(ue.target)||q(!1),document.removeEventListener("pointermove",he),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",se,{capture:!0})}}},[x,q,K]),_.useEffect(()=>{const X=()=>q(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[q]);const[ae,J]=nV(X=>{const he=T().filter(ge=>!ge.disabled),se=he.find(ge=>ge.ref.current===document.activeElement),ue=iV(he,X,se);ue&&setTimeout(()=>ue.ref.current.focus())}),I=_.useCallback((X,he,se)=>{const ue=!G.current&&!se;(b.value!==void 0&&b.value===he||ue)&&(O(X),ue&&(G.current=!0))},[b.value]),$=_.useCallback(()=>x==null?void 0:x.focus(),[x]),U=_.useCallback((X,he,se)=>{const ue=!G.current&&!se;(b.value!==void 0&&b.value===he||ue)&&k(X)},[b.value]),H=n==="popper"?Hk:zH,re=H===Hk?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:h,sticky:v,hideWhenDetached:p,avoidCollisions:g}:{};return a.jsx(FH,{scope:r,content:x,viewport:N,onViewportChange:A,itemRefCallback:I,selectedItem:E,onItemLeave:$,itemTextRefCallback:U,focusSelectedItem:D,selectedItemText:L,position:n,isPositioned:B,searchRef:ae,children:a.jsx($_,{as:FLe,allowPinchZoom:!0,children:a.jsx(D_,{asChild:!0,trapped:b.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:lt(i,X=>{var he;(he=b.trigger)==null||he.focus({preventScroll:!0}),X.preventDefault()}),children:a.jsx(dg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:a.jsx(H,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:X=>X.preventDefault(),...y,...re,onPlaced:()=>M(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:lt(y.onKeyDown,X=>{const he=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!he&&X.key.length===1&&J(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let ue=T().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(X.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const ge=X.target,ve=ue.indexOf(ge);ue=ue.slice(ve+1)}setTimeout(()=>z(ue)),X.preventDefault()}})})})})})})});BH.displayName=$Le;var BLe="SelectItemAlignedPosition",zH=_.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,s=Md(dh,r),o=$d(dh,r),[l,c]=_.useState(null),[u,d]=_.useState(null),f=vr(t,C=>d(C)),m=Dj(r),h=_.useRef(!1),v=_.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:y,focusSelectedItem:b}=o,x=_.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&p&&g&&y){const C=s.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),O=s.valueNode.getBoundingClientRect(),L=y.getBoundingClientRect();if(s.dir!=="rtl"){const ge=L.left-E.left,ve=O.left-ge,te=C.left-ve,Ne=C.width+te,Y=Math.max(Ne,E.width),Le=window.innerWidth-Po,ye=gC(ve,[Po,Math.max(Po,Le-Y)]);l.style.minWidth=Ne+"px",l.style.left=ye+"px"}else{const ge=E.right-L.right,ve=window.innerWidth-O.right-ge,te=window.innerWidth-C.right-ve,Ne=C.width+te,Y=Math.max(Ne,E.width),Le=window.innerWidth-Po,ye=gC(ve,[Po,Math.max(Po,Le-Y)]);l.style.minWidth=Ne+"px",l.style.right=ye+"px"}const k=m(),T=window.innerHeight-Po*2,B=p.scrollHeight,M=window.getComputedStyle(u),G=parseInt(M.borderTopWidth,10),z=parseInt(M.paddingTop,10),D=parseInt(M.borderBottomWidth,10),q=parseInt(M.paddingBottom,10),K=G+z+B+q+D,ae=Math.min(g.offsetHeight*5,K),J=window.getComputedStyle(p),I=parseInt(J.paddingTop,10),$=parseInt(J.paddingBottom,10),U=C.top+C.height/2-Po,H=T-U,re=g.offsetHeight/2,X=g.offsetTop+re,he=G+z+X,se=K-he;if(he<=U){const ge=k.length>0&&g===k[k.length-1].ref.current;l.style.bottom="0px";const ve=u.clientHeight-p.offsetTop-p.offsetHeight,te=Math.max(H,re+(ge?$:0)+ve+D),Ne=he+te;l.style.height=Ne+"px"}else{const ge=k.length>0&&g===k[0].ref.current;l.style.top="0px";const te=Math.max(U,G+p.offsetTop+(ge?I:0)+re)+se;l.style.height=te+"px",p.scrollTop=he-U+p.offsetTop}l.style.margin=`${Po}px 0`,l.style.minHeight=ae+"px",l.style.maxHeight=T+"px",n==null||n(),requestAnimationFrame(()=>h.current=!0)}},[m,s.trigger,s.valueNode,l,u,p,g,y,s.dir,n]);Yi(()=>x(),[x]);const[j,N]=_.useState();Yi(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const A=_.useCallback(C=>{C&&v.current===!0&&(x(),b==null||b(),v.current=!1)},[x,b]);return a.jsx(qLe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:A,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:a.jsx(jt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});zH.displayName=BLe;var zLe="SelectPopperPosition",Hk=_.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=Po,...s}=e,o=Mj(r);return a.jsx(M4,{...o,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hk.displayName=zLe;var[qLe,gO]=Ig(dh,{}),Vk="SelectViewport",qH=_.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,s=$d(Vk,r),o=gO(Vk,r),l=vr(t,s.onViewportChange),c=_.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Ij.Slot,{scope:r,children:a.jsx(jt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:lt(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const h=Math.abs(c.current-d.scrollTop);if(h>0){const v=window.innerHeight-Po*2,p=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),y=Math.max(p,g);if(y<v){const b=y+h,x=Math.min(v,b),j=b-x;f.style.height=x+"px",f.style.bottom==="0px"&&(d.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});qH.displayName=Vk;var UH="SelectGroup",[ULe,WLe]=Ig(UH),HLe=_.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=$s();return a.jsx(ULe,{scope:r,id:i,children:a.jsx(jt.div,{role:"group","aria-labelledby":i,...n,ref:t})})});HLe.displayName=UH;var WH="SelectLabel",HH=_.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=WLe(WH,r);return a.jsx(jt.div,{id:i.id,...n,ref:t})});HH.displayName=WH;var q2="SelectItem",[VLe,VH]=Ig(q2),GH=_.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...o}=e,l=Md(q2,r),c=$d(q2,r),u=l.value===n,[d,f]=_.useState(s??""),[m,h]=_.useState(!1),v=vr(t,b=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,b,n,i)}),p=$s(),g=_.useRef("touch"),y=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(VLe,{scope:r,value:n,disabled:i,textId:p,isSelected:u,onItemTextChange:_.useCallback(b=>{f(x=>x||((b==null?void 0:b.textContent)??"").trim())},[]),children:a.jsx(Ij.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:a.jsx(jt.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:lt(o.onFocus,()=>h(!0)),onBlur:lt(o.onBlur,()=>h(!1)),onClick:lt(o.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:lt(o.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:lt(o.onPointerDown,b=>{g.current=b.pointerType}),onPointerMove:lt(o.onPointerMove,b=>{var x;g.current=b.pointerType,i?(x=c.onItemLeave)==null||x.call(c):g.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:lt(o.onPointerLeave,b=>{var x;b.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:lt(o.onKeyDown,b=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&b.key===" "||(OLe.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});GH.displayName=q2;var Vv="SelectItemText",KH=_.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...s}=e,o=Md(Vv,r),l=$d(Vv,r),c=VH(Vv,r),u=ILe(Vv,r),[d,f]=_.useState(null),m=vr(t,y=>f(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,c.value,c.disabled)}),h=d==null?void 0:d.textContent,v=_.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=u;return Yi(()=>(p(v),()=>g(v)),[p,g,v]),a.jsxs(a.Fragment,{children:[a.jsx(jt.span,{id:c.textId,...s,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?bh.createPortal(s.children,o.valueNode):null]})});KH.displayName=Vv;var YH="SelectItemIndicator",XH=_.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return VH(YH,r).isSelected?a.jsx(jt.span,{"aria-hidden":!0,...n,ref:t}):null});XH.displayName=YH;var Gk="SelectScrollUpButton",ZH=_.forwardRef((e,t)=>{const r=$d(Gk,e.__scopeSelect),n=gO(Gk,e.__scopeSelect),[i,s]=_.useState(!1),o=vr(t,n.onScrollButtonChange);return Yi(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?a.jsx(QH,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ZH.displayName=Gk;var Kk="SelectScrollDownButton",JH=_.forwardRef((e,t)=>{const r=$d(Kk,e.__scopeSelect),n=gO(Kk,e.__scopeSelect),[i,s]=_.useState(!1),o=vr(t,n.onScrollButtonChange);return Yi(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?a.jsx(QH,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});JH.displayName=Kk;var QH=_.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,s=$d("SelectScrollButton",r),o=_.useRef(null),l=Dj(r),c=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>c(),[c]),Yi(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(jt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:lt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:lt(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:lt(i.onPointerLeave,()=>{c()})})}),GLe="SelectSeparator",eV=_.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return a.jsx(jt.div,{"aria-hidden":!0,...n,ref:t})});eV.displayName=GLe;var Yk="SelectArrow",KLe=_.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Mj(r),s=Md(Yk,r),o=$d(Yk,r);return s.open&&o.position==="popper"?a.jsx($4,{...i,...n,ref:t}):null});KLe.displayName=Yk;var YLe="SelectBubbleInput",tV=_.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const i=_.useRef(null),s=vr(n,i),o=pO(t);return _.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),a.jsx(jt.select,{...r,style:{...W7,...r.style},ref:s,defaultValue:t})});tV.displayName=YLe;function rV(e){return e===""||e===void 0}function nV(e){const t=Mi(e),r=_.useRef(""),n=_.useRef(0),i=_.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=_.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function iV(e,t,r){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let o=XLe(e,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function XLe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var ZLe=OH,sV=LH,JLe=IH,QLe=DH,eRe=MH,aV=$H,tRe=qH,oV=HH,lV=GH,rRe=KH,nRe=XH,cV=ZH,uV=JH,dV=eV;const Kt=ZLe,Yt=JLe,Wt=_.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(sV,{ref:n,className:rt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,a.jsx(QLe,{asChild:!0,children:a.jsx(w4,{className:"h-4 w-4 opacity-50"})})]}));Wt.displayName=sV.displayName;const fV=_.forwardRef(({className:e,...t},r)=>a.jsx(cV,{ref:r,className:rt("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(RQ,{className:"h-4 w-4"})}));fV.displayName=cV.displayName;const hV=_.forwardRef(({className:e,...t},r)=>a.jsx(uV,{ref:r,className:rt("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(w4,{className:"h-4 w-4"})}));hV.displayName=uV.displayName;const Xt=_.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>a.jsx(eRe,{children:a.jsxs(aV,{ref:i,className:rt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[a.jsx(fV,{}),a.jsx(tRe,{className:rt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(hV,{})]})}));Xt.displayName=aV.displayName;const iRe=_.forwardRef(({className:e,...t},r)=>a.jsx(oV,{ref:r,className:rt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));iRe.displayName=oV.displayName;const et=_.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(lV,{ref:n,className:rt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(nRe,{children:a.jsx($c,{className:"h-4 w-4"})})}),a.jsx(rRe,{children:t})]}));et.displayName=lV.displayName;const sRe=_.forwardRef(({className:e,...t},r)=>a.jsx(dV,{ref:r,className:rt("-mx-1 my-1 h-px bg-muted",e),...t}));sRe.displayName=dV.displayName;const tn=_.forwardRef(({className:e,...t},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:rt("w-full caption-bottom text-sm",e),...t})}));tn.displayName="Table";const hn=_.forwardRef(({className:e,...t},r)=>a.jsx("thead",{ref:r,className:rt("[&_tr]:border-b",e),...t}));hn.displayName="TableHeader";const rn=_.forwardRef(({className:e,...t},r)=>a.jsx("tbody",{ref:r,className:rt("[&_tr:last-child]:border-0",e),...t}));rn.displayName="TableBody";const aRe=_.forwardRef(({className:e,...t},r)=>a.jsx("tfoot",{ref:r,className:rt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));aRe.displayName="TableFooter";const gt=_.forwardRef(({className:e,...t},r)=>a.jsx("tr",{ref:r,className:rt("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));gt.displayName="TableRow";const Ee=_.forwardRef(({className:e,...t},r)=>a.jsx("th",{ref:r,className:rt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ee.displayName="TableHead";const Se=_.forwardRef(({className:e,...t},r)=>a.jsx("td",{ref:r,className:rt("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Se.displayName="TableCell";const oRe=_.forwardRef(({className:e,...t},r)=>a.jsx("caption",{ref:r,className:rt("mt-4 text-sm text-muted-foreground",e),...t}));oRe.displayName="TableCaption";var $j="Dialog",[mV,pV]=Ia($j),[lRe,Qo]=mV($j),gV=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=_.useRef(null),c=_.useRef(null),[u,d]=Dc({prop:n,defaultProp:i??!1,onChange:s,caller:$j});return a.jsx(lRe,{scope:t,triggerRef:l,contentRef:c,contentId:$s(),titleId:$s(),descriptionId:$s(),open:u,onOpenChange:d,onOpenToggle:_.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};gV.displayName=$j;var vV="DialogTrigger",yV=_.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Qo(vV,r),s=vr(t,i.triggerRef);return a.jsx(jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":xO(i.open),...n,ref:s,onClick:lt(e.onClick,i.onOpenToggle)})});yV.displayName=vV;var vO="DialogPortal",[cRe,xV]=mV(vO,{forceMount:void 0}),bV=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,s=Qo(vO,t);return a.jsx(cRe,{scope:t,forceMount:r,children:_.Children.map(n,o=>a.jsx(ta,{present:r||s.open,children:a.jsx(l0,{asChild:!0,container:i,children:o})}))})};bV.displayName=vO;var U2="DialogOverlay",wV=_.forwardRef((e,t)=>{const r=xV(U2,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=Qo(U2,e.__scopeDialog);return s.modal?a.jsx(ta,{present:n||s.open,children:a.jsx(dRe,{...i,ref:t})}):null});wV.displayName=U2;var uRe=eh("DialogOverlay.RemoveScroll"),dRe=_.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Qo(U2,r);return a.jsx($_,{as:uRe,allowPinchZoom:!0,shards:[i.contentRef],children:a.jsx(jt.div,{"data-state":xO(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),fh="DialogContent",_V=_.forwardRef((e,t)=>{const r=xV(fh,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=Qo(fh,e.__scopeDialog);return a.jsx(ta,{present:n||s.open,children:s.modal?a.jsx(fRe,{...i,ref:t}):a.jsx(hRe,{...i,ref:t})})});_V.displayName=fh;var fRe=_.forwardRef((e,t)=>{const r=Qo(fh,e.__scopeDialog),n=_.useRef(null),i=vr(t,r.contentRef,n);return _.useEffect(()=>{const s=n.current;if(s)return eP(s)},[]),a.jsx(jV,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lt(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:lt(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:lt(e.onFocusOutside,s=>s.preventDefault())})}),hRe=_.forwardRef((e,t)=>{const r=Qo(fh,e.__scopeDialog),n=_.useRef(!1),i=_.useRef(!1);return a.jsx(jV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),jV=_.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=e,l=Qo(fh,r),c=_.useRef(null),u=vr(t,c);return Q4(),a.jsxs(a.Fragment,{children:[a.jsx(D_,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:a.jsx(dg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":xO(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(pRe,{titleId:l.titleId}),a.jsx(vRe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),yO="DialogTitle",NV=_.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Qo(yO,r);return a.jsx(jt.h2,{id:i.titleId,...n,ref:t})});NV.displayName=yO;var SV="DialogDescription",AV=_.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Qo(SV,r);return a.jsx(jt.p,{id:i.descriptionId,...n,ref:t})});AV.displayName=SV;var CV="DialogClose",kV=_.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Qo(CV,r);return a.jsx(jt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,()=>i.onOpenChange(!1))})});kV.displayName=CV;function xO(e){return e?"open":"closed"}var EV="DialogTitleWarning",[mRe,PV]=IJ(EV,{contentName:fh,titleName:yO,docsSlug:"dialog"}),pRe=({titleId:e})=>{const t=PV(EV),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return _.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},gRe="DialogDescriptionWarning",vRe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${PV(gRe).contentName}}.`;return _.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},bO=gV,OV=yV,wO=bV,Fj=wV,Bj=_V,_O=NV,jO=AV,NO=kV;const kr=bO,zj=OV,yRe=wO,TV=_.forwardRef(({className:e,...t},r)=>a.jsx(Fj,{ref:r,className:rt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));TV.displayName=Fj.displayName;const _r=_.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(yRe,{children:[a.jsx(TV,{}),a.jsxs(Bj,{ref:n,className:rt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,a.jsxs(NO,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(hg,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_r.displayName=Bj.displayName;const jr=({className:e,...t})=>a.jsx("div",{className:rt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});jr.displayName="DialogHeader";const Fr=({className:e,...t})=>a.jsx("div",{className:rt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Fr.displayName="DialogFooter";const Nr=_.forwardRef(({className:e,...t},r)=>a.jsx(_O,{ref:r,className:rt("text-lg font-semibold leading-none tracking-tight",e),...t}));Nr.displayName=_O.displayName;const Yr=_.forwardRef(({className:e,...t},r)=>a.jsx(jO,{ref:r,className:rt("text-sm text-muted-foreground",e),...t}));Yr.displayName=jO.displayName;const i1={INSERT:{label:"Cration",color:"bg-success/10 text-success"},UPDATE:{label:"Modification",color:"bg-primary/10 text-primary"},DELETE:{label:"Suppression",color:"bg-destructive/10 text-destructive"},LOGIN:{label:"Connexion",color:"bg-muted text-muted-foreground"},LOGOUT:{label:"Dconnexion",color:"bg-muted text-muted-foreground"}},s1={besoins:"Besoins",demandes_achat:"Demandes d'achat",bons_livraison:"Bons de livraison",articles_stock:"Stock",stock_movements:"Mouvements stock",ecritures_comptables:"critures comptables",fournisseurs:"Fournisseurs",profiles:"Profils",user_roles:"Rles",departments:"Dpartements"};function xRe(){var j,N;const{roles:e,isAdmin:t}=yr(),{toast:r}=qr(),[n,i]=_.useState([]),[s,o]=_.useState(!0),[l,c]=_.useState(""),[u,d]=_.useState("all"),[f,m]=_.useState("all"),[h,v]=_.useState(null),p=t||e.some(A=>["dg","daf","comptable"].includes(A));_.useEffect(()=>{p&&g()},[p]);const g=async()=>{try{const{data:A,error:C}=await fe.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(500);if(C)throw C;const E=[...new Set((A||[]).filter(k=>k.user_id).map(k=>k.user_id))];let O={};if(E.length>0){const{data:k,error:T}=await fe.rpc("get_public_profiles",{_user_ids:E});!T&&k&&k.forEach(B=>{O[B.id]={first_name:B.first_name,last_name:B.last_name,email:B.email||""}})}const L=(A||[]).map(k=>({...k,profile:k.user_id&&O[k.user_id]||null}));i(L)}catch(A){console.error("Error fetching logs:",A),r({title:"Erreur",description:A.message,variant:"destructive"})}finally{o(!1)}},y=()=>{const A=["Date","Utilisateur","Action","Table","Enregistrement","IP"],C=b.map(k=>{var T;return[Ct(new Date(k.created_at),"dd/MM/yyyy HH:mm:ss"),k.profile?`${k.profile.first_name||""} ${k.profile.last_name||""}`.trim()||k.profile.email:"Systme",((T=i1[k.action])==null?void 0:T.label)||k.action,s1[k.table_name||""]||k.table_name||"-",k.record_id||"-",k.ip_address||"-"]}),E=[A,...C].map(k=>k.join(";")).join(`
`),O=new Blob([E],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a");L.href=URL.createObjectURL(O),L.download=`audit_${Ct(new Date,"yyyy-MM-dd")}.csv`,L.click()},b=n.filter(A=>{var L,k,T;const C=(((L=A.profile)==null?void 0:L.email)||"").toLowerCase().includes(l.toLowerCase())||(((k=A.profile)==null?void 0:k.first_name)||"").toLowerCase().includes(l.toLowerCase())||(((T=A.profile)==null?void 0:T.last_name)||"").toLowerCase().includes(l.toLowerCase())||(A.record_id||"").toLowerCase().includes(l.toLowerCase()),E=u==="all"||A.action===u,O=f==="all"||A.table_name===f;return C&&E&&O}),x={total:n.length,creates:n.filter(A=>A.action==="INSERT").length,updates:n.filter(A=>A.action==="UPDATE").length,deletes:n.filter(A=>A.action==="DELETE").length};return p?a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Journal d'audit"}),a.jsx("p",{className:"text-muted-foreground",children:"Traabilit complte des actions systme"})]}),a.jsxs(de,{variant:"outline",onClick:y,children:[a.jsx(bd,{className:"mr-2 h-4 w-4"}),"Exporter CSV"]})]}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(_p,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Donnes immuables"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ce journal enregistre toutes les actions. Aucune entre ne peut tre modifie ou supprime."})]})]})}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(kQ,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:x.total}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total actions"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-success/10",children:a.jsx(jn,{className:"h-6 w-6 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:x.creates}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Crations"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(jn,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:x.updates}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Modifications"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-destructive/10",children:a.jsx(jn,{className:"h-6 w-6 text-destructive"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:x.deletes}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Suppressions"})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-4",children:a.jsx(Ue,{className:"text-lg",children:"Filtres"})}),a.jsx(pe,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par utilisateur ou ID...",value:l,onChange:A=>c(A.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:u,onValueChange:d,children:[a.jsx(Wt,{className:"w-full sm:w-40",children:a.jsx(Yt,{placeholder:"Action"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Toutes actions"}),a.jsx(et,{value:"INSERT",children:"Cration"}),a.jsx(et,{value:"UPDATE",children:"Modification"}),a.jsx(et,{value:"DELETE",children:"Suppression"})]})]}),a.jsxs(Kt,{value:f,onValueChange:m,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Table"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Toutes tables"}),Object.entries(s1).map(([A,C])=>a.jsx(et,{value:A,children:C},A))]})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:[b.length," entre",b.length!==1?"s":""]})}),a.jsx(pe,{children:s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):b.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucune entre d'audit trouve."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Date"}),a.jsx(Ee,{children:"Utilisateur"}),a.jsx(Ee,{children:"Action"}),a.jsx(Ee,{children:"Table"}),a.jsx(Ee,{children:"IP"}),a.jsx(Ee,{className:"text-right",children:"Dtails"})]})}),a.jsx(rn,{children:b.map(A=>{const C=i1[A.action]||{label:A.action,color:"bg-muted"};return a.jsxs(gt,{children:[a.jsx(Se,{className:"whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"}),Ct(new Date(A.created_at),"dd MMM yyyy HH:mm",{locale:Tt})]})}),a.jsx(Se,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_h,{className:"h-4 w-4 text-muted-foreground"}),A.profile?a.jsxs("span",{children:[A.profile.first_name," ",A.profile.last_name]}):a.jsx("span",{className:"text-muted-foreground",children:"Systme"})]})}),a.jsx(Se,{children:a.jsx(it,{className:C.color,children:C.label})}),a.jsx(Se,{children:s1[A.table_name||""]||A.table_name||"-"}),a.jsx(Se,{className:"font-mono text-xs text-muted-foreground",children:A.ip_address||"-"}),a.jsx(Se,{className:"text-right",children:a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>v(A),children:a.jsx(wp,{className:"h-4 w-4"})})})]},A.id)})})]})})})]})]}),a.jsx(kr,{open:!!h,onOpenChange:()=>v(null),children:a.jsxs(_r,{className:"max-w-2xl",children:[a.jsx(jr,{children:a.jsx(Nr,{children:"Dtail de l'action"})}),h&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),a.jsx("p",{className:"font-medium",children:Ct(new Date(h.created_at),"dd MMMM yyyy  HH:mm:ss",{locale:Tt})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Utilisateur"}),a.jsx("p",{className:"font-medium",children:h.profile?`${h.profile.first_name} ${h.profile.last_name} (${h.profile.email})`:"Systme"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Action"}),a.jsx(it,{className:((j=i1[h.action])==null?void 0:j.color)||"bg-muted",children:((N=i1[h.action])==null?void 0:N.label)||h.action})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Table"}),a.jsx("p",{className:"font-medium",children:s1[h.table_name||""]||h.table_name||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"ID Enregistrement"}),a.jsx("p",{className:"font-mono text-sm",children:h.record_id||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Adresse IP"}),a.jsx("p",{className:"font-mono text-sm",children:h.ip_address||"-"})]})]}),h.user_agent&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"User Agent"}),a.jsx("p",{className:"font-mono text-xs text-muted-foreground",children:h.user_agent})]}),h.old_values&&a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Valeurs avant"}),a.jsx("pre",{className:"max-h-48 overflow-auto rounded-lg bg-muted p-3 text-xs",children:JSON.stringify(h.old_values,null,2)})]}),h.new_values&&a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Valeurs aprs"}),a.jsx("pre",{className:"max-h-48 overflow-auto rounded-lg bg-muted p-3 text-xs",children:JSON.stringify(h.new_values,null,2)})]})]})]})})]}):a.jsx(st,{children:a.jsx(Ji,{message:"Seuls les administrateurs, DG, DAF et Comptables peuvent consulter le journal d'audit."})})}var aS="rovingFocusGroup.onEntryFocus",bRe={bubbles:!1,cancelable:!0},w0="RovingFocusGroup",[Xk,LV,wRe]=g4(w0),[_Re,RV]=Ia(w0,[wRe]),[jRe,NRe]=_Re(w0),IV=_.forwardRef((e,t)=>a.jsx(Xk.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Xk.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(SRe,{...e,ref:t})})}));IV.displayName=w0;var SRe=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=_.useRef(null),h=vr(t,m),v=B_(s),[p,g]=Dc({prop:o,defaultProp:l??null,onChange:c,caller:w0}),[y,b]=_.useState(!1),x=Mi(u),j=LV(r),N=_.useRef(!1),[A,C]=_.useState(0);return _.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(aS,x),()=>E.removeEventListener(aS,x)},[x]),a.jsx(jRe,{scope:r,orientation:n,dir:v,loop:i,currentTabStopId:p,onItemFocus:_.useCallback(E=>g(E),[g]),onItemShiftTab:_.useCallback(()=>b(!0),[]),onFocusableItemAdd:_.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:_.useCallback(()=>C(E=>E-1),[]),children:a.jsx(jt.div,{tabIndex:y||A===0?-1:0,"data-orientation":n,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:lt(e.onMouseDown,()=>{N.current=!0}),onFocus:lt(e.onFocus,E=>{const O=!N.current;if(E.target===E.currentTarget&&O&&!y){const L=new CustomEvent(aS,bRe);if(E.currentTarget.dispatchEvent(L),!L.defaultPrevented){const k=j().filter(z=>z.focusable),T=k.find(z=>z.active),B=k.find(z=>z.id===p),G=[T,B,...k].filter(Boolean).map(z=>z.ref.current);$V(G,d)}}N.current=!1}),onBlur:lt(e.onBlur,()=>b(!1))})})}),DV="RovingFocusGroupItem",MV=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:o,...l}=e,c=$s(),u=s||c,d=NRe(DV,r),f=d.currentTabStopId===u,m=LV(r),{onFocusableItemAdd:h,onFocusableItemRemove:v,currentTabStopId:p}=d;return _.useEffect(()=>{if(n)return h(),()=>v()},[n,h,v]),a.jsx(Xk.ItemSlot,{scope:r,id:u,focusable:n,active:i,children:a.jsx(jt.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:lt(e.onMouseDown,g=>{n?d.onItemFocus(u):g.preventDefault()}),onFocus:lt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:lt(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=kRe(g,d.orientation,d.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=m().filter(j=>j.focusable).map(j=>j.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const j=x.indexOf(g.currentTarget);x=d.loop?ERe(x,j+1):x.slice(j+1)}setTimeout(()=>$V(x))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:p!=null}):o})})});MV.displayName=DV;var ARe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function CRe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function kRe(e,t,r){const n=CRe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ARe[n]}function $V(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function ERe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var PRe=IV,ORe=MV,qj="Tabs",[TRe,h7e]=Ia(qj,[RV]),FV=RV(),[LRe,SO]=TRe(qj),BV=_.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=B_(l),[f,m]=Dc({prop:n,onChange:i,defaultProp:s??"",caller:qj});return a.jsx(LRe,{scope:r,baseId:$s(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:c,children:a.jsx(jt.div,{dir:d,"data-orientation":o,...u,ref:t})})});BV.displayName=qj;var zV="TabsList",qV=_.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,s=SO(zV,r),o=FV(r);return a.jsx(PRe,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:a.jsx(jt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});qV.displayName=zV;var UV="TabsTrigger",WV=_.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,o=SO(UV,r),l=FV(r),c=GV(o.baseId,n),u=KV(o.baseId,n),d=n===o.value;return a.jsx(ORe,{asChild:!0,...l,focusable:!i,active:d,children:a.jsx(jt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:t,onMouseDown:lt(e.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:lt(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:lt(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!i&&f&&o.onValueChange(n)})})})});WV.displayName=UV;var HV="TabsContent",VV=_.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...o}=e,l=SO(HV,r),c=GV(l.baseId,n),u=KV(l.baseId,n),d=n===l.value,f=_.useRef(d);return _.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(ta,{present:i||d,children:({present:m})=>a.jsx(jt.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&s})})});VV.displayName=HV;function GV(e,t){return`${e}-trigger-${t}`}function KV(e,t){return`${e}-content-${t}`}var RRe=BV,YV=qV,XV=WV,ZV=VV;const W2=RRe,Hx=_.forwardRef(({className:e,...t},r)=>a.jsx(YV,{ref:r,className:rt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Hx.displayName=YV.displayName;const wa=_.forwardRef(({className:e,...t},r)=>a.jsx(XV,{ref:r,className:rt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));wa.displayName=XV.displayName;const Pf=_.forwardRef(({className:e,...t},r)=>a.jsx(ZV,{ref:r,className:rt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Pf.displayName=ZV.displayName;function IRe(){const{roles:e,isAdmin:t}=yr(),{toast:r}=qr(),[n,i]=_.useState(null),[s,o]=_.useState(!0),[l,c]=_.useState([]),[u,d]=_.useState([]),f=t||e.some(p=>["dg","daf"].includes(p)),m=e.some(p=>["daf","comptable"].includes(p))||t;e.some(p=>["responsable_logistique","agent_logistique"].includes(p)),_.useEffect(()=>{f&&h()},[f]);const h=async()=>{try{const{data:p}=await fe.from("besoins").select("id, status, department_id"),{data:g}=await fe.from("departments").select("id, name"),y={},b={};(p||[]).forEach(H=>{y[H.status]=(y[H.status]||0)+1,b[H.department_id]=(b[H.department_id]||0)+1});const x=Object.fromEntries((g||[]).map(H=>[H.id,H.name])),j=Object.entries(b).map(([H,re])=>({name:x[H]||"Inconnu",count:re})).sort((H,re)=>re.count-H.count),{data:N}=await fe.from("demandes_achat").select("id, status, total_amount, created_at, submitted_at"),A={};let C=0,E=0,O=0;(N||[]).forEach(H=>{if(A[H.status]=(A[H.status]||0)+1,H.total_amount&&(C+=H.total_amount),H.submitted_at&&H.created_at){const re=Math.floor((new Date(H.submitted_at).getTime()-new Date(H.created_at).getTime())/864e5);re>=0&&(E+=re,O++)}});const{data:L}=await fe.from("bons_livraison").select("id, status"),k={total:(L||[]).length,delivered:(L||[]).filter(H=>H.status==="livre").length,partial:(L||[]).filter(H=>H.status==="livree_partiellement").length,pending:(L||[]).filter(H=>["prepare","en_attente_validation","valide"].includes(H.status)).length},{data:T}=await fe.from("articles_stock").select("id, status, quantity_available, quantity_min"),B={total:(T||[]).length,lowStock:(T||[]).filter(H=>H.quantity_min&&H.quantity_available<=H.quantity_min&&H.quantity_available>0).length,outOfStock:(T||[]).filter(H=>H.quantity_available<=0).length},{data:M}=await fe.from("ecritures_comptables").select("classe_syscohada, debit, credit, is_validated"),G={};let z=0;(M||[]).forEach(H=>{const re=H.debit||H.credit||0;G[H.classe_syscohada]=(G[H.classe_syscohada]||0)+re,H.is_validated&&(z+=re)});const D=(N||[]).filter(H=>H.status==="validee_finance").reduce((H,re)=>H+(re.total_amount||0),0),q=fue(new Date,30),K=(N||[]).filter(H=>H.status==="brouillon"&&new Date(H.created_at)<q).length,ae=(N||[]).filter(H=>["rejetee","refusee_finance","rejetee_comptabilite"].includes(H.status)).length,{data:J}=await fe.from("demandes_achat").select("id, reference, status, total_amount, created_at").order("created_at",{ascending:!1}).limit(10);c(J||[]);const{data:I}=await fe.from("bl_articles").select("designation"),$={};(I||[]).forEach(H=>{$[H.designation]=($[H.designation]||0)+1});const U=Object.entries($).map(([H,re])=>({designation:H,count:re})).sort((H,re)=>re.count-H.count).slice(0,5);d(U),i({besoins:{total:(p||[]).length,byStatus:y,byDepartment:j},da:{total:(N||[]).length,byStatus:A,totalAmount:C,avgProcessingDays:O>0?Math.round(E/O):0},bl:k,stock:B,finance:{byClass:Object.entries(G).map(([H,re])=>({class:parseInt(H),amount:re})),pendingPayments:D,totalPaid:z},anomalies:{longPending:K,frequentRejections:ae,stockDiscrepancies:0}})}catch(p){console.error("Error fetching stats:",p),r({title:"Erreur",description:p.message,variant:"destructive"})}finally{o(!1)}},v=()=>{if(!n)return;const p=[`Rapport KPM SYSTEME - ${Ct(new Date,"dd MMMM yyyy",{locale:Tt})}`,"","=== BESOINS ===",`Total: ${n.besoins.total}`,...Object.entries(n.besoins.byStatus).map(([b,x])=>`- ${b}: ${x}`),"","=== DEMANDES D'ACHAT ===",`Total: ${n.da.total}`,`Montant total: ${n.da.totalAmount.toLocaleString("fr-FR")} XOF`,`Dlai moyen: ${n.da.avgProcessingDays} jours`,...Object.entries(n.da.byStatus).map(([b,x])=>`- ${Ol[b]||b}: ${x}`),"","=== LIVRAISONS ===",`Total: ${n.bl.total}`,`Livres: ${n.bl.delivered}`,`Partielles: ${n.bl.partial}`,`En attente: ${n.bl.pending}`,"","=== STOCK ===",`Articles: ${n.stock.total}`,`Stock bas: ${n.stock.lowStock}`,`puiss: ${n.stock.outOfStock}`,"","=== FINANCE ===",`Pay: ${n.finance.totalPaid.toLocaleString("fr-FR")} XOF`,`En attente: ${n.finance.pendingPayments.toLocaleString("fr-FR")} XOF`,"","=== ANOMALIES ===",`DA en attente > 30j: ${n.anomalies.longPending}`,`Rejets frquents: ${n.anomalies.frequentRejections}`],g=new Blob([p.join(`
`)],{type:"text/plain;charset=utf-8;"}),y=document.createElement("a");y.href=URL.createObjectURL(g),y.download=`rapport_kpm_${Ct(new Date,"yyyy-MM-dd")}.txt`,y.click()};return f?a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Rapports & Gouvernance"}),a.jsx("p",{className:"text-muted-foreground",children:"Synthse et indicateurs cls de l'activit"})]}),a.jsxs(de,{variant:"outline",onClick:v,disabled:!n,children:[a.jsx(bd,{className:"mr-2 h-4 w-4"}),"Exporter rapport"]})]}),s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):n&&a.jsxs(W2,{defaultValue:"overview",className:"space-y-6",children:[a.jsxs(Hx,{children:[a.jsx(wa,{value:"overview",children:"Vue d'ensemble"}),a.jsx(wa,{value:"operations",children:"Oprations"}),m&&a.jsx(wa,{value:"finance",children:"Finance"}),a.jsx(wa,{value:"anomalies",children:"Anomalies"})]}),a.jsxs(Pf,{value:"overview",className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(jn,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:n.besoins.total}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Besoins"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-success/10",children:a.jsx(Uo,{className:"h-6 w-6 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:n.da.total}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes d'achat"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-warning/10",children:a.jsx(Tn,{className:"h-6 w-6 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:n.bl.delivered}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Livraisons"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-destructive/10",children:a.jsx(si,{className:"h-6 w-6 text-destructive"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold",children:[(n.da.totalAmount/1e6).toFixed(1),"M"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"XOF engags"})]})]})})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"h-5 w-5"}),"Dernires demandes d'achat"]})}),a.jsx(pe,{children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Rfrence"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{className:"text-right",children:"Montant"})]})}),a.jsx(rn,{children:l.map(p=>a.jsxs(gt,{children:[a.jsx(Se,{className:"font-medium",children:p.reference}),a.jsx(Se,{children:a.jsx(it,{variant:"outline",className:"text-xs",children:Ol[p.status]||p.status})}),a.jsx(Se,{className:"text-right font-mono",children:p.total_amount?`${p.total_amount.toLocaleString("fr-FR")}`:"-"})]},p.id))})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx(xd,{className:"h-5 w-5"}),"Articles les plus demands"]})}),a.jsx(pe,{children:a.jsxs("div",{className:"space-y-4",children:[u.map((p,g)=>{var y;return a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-sm font-bold text-primary",children:g+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:p.designation}),a.jsx("div",{className:"mt-1 h-2 overflow-hidden rounded-full bg-muted",children:a.jsx("div",{className:"h-full bg-primary",style:{width:`${p.count/(((y=u[0])==null?void 0:y.count)||1)*100}%`}})})]}),a.jsx("span",{className:"font-mono text-sm text-muted-foreground",children:p.count})]},p.designation)}),u.length===0&&a.jsx("p",{className:"text-center text-muted-foreground",children:"Aucun article"})]})})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx(fg,{className:"h-5 w-5"}),"Besoins par dpartement"]})}),a.jsx(pe,{children:a.jsx("div",{className:"space-y-3",children:n.besoins.byDepartment.slice(0,5).map(p=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:p.name}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-2 w-32 overflow-hidden rounded-full bg-muted",children:a.jsx("div",{className:"h-full bg-primary",style:{width:`${p.count/n.besoins.total*100}%`}})}),a.jsx("span",{className:"font-mono text-sm",children:p.count})]})]},p.name))})})]})]}),a.jsxs(Pf,{value:"operations",className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{children:"Demandes d'achat par statut"}),a.jsx(wn,{children:"Rpartition actuelle"})]}),a.jsx(pe,{children:a.jsx("div",{className:"space-y-3",children:Object.entries(n.da.byStatus).map(([p,g])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:Ol[p]||p}),a.jsx(it,{variant:"outline",children:g})]},p))})})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{children:"Performance"}),a.jsx(wn,{children:"Indicateurs cls"})]}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-muted/50 p-4",children:[a.jsx("span",{children:"Dlai moyen de traitement"}),a.jsxs("span",{className:"text-2xl font-bold",children:[n.da.avgProcessingDays," jours"]})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-muted/50 p-4",children:[a.jsx("span",{children:"Taux de livraison complte"}),a.jsxs("span",{className:"text-2xl font-bold",children:[n.bl.total>0?Math.round(n.bl.delivered/n.bl.total*100):0,"%"]})]})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"tat du stock"})}),a.jsx(pe,{children:a.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[a.jsxs("div",{className:"rounded-lg border p-4 text-center",children:[a.jsx(Br,{className:"mx-auto h-8 w-8 text-success"}),a.jsx("p",{className:"mt-2 text-2xl font-bold",children:n.stock.total-n.stock.lowStock-n.stock.outOfStock}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"En stock"})]}),a.jsxs("div",{className:"rounded-lg border border-warning/50 bg-warning/5 p-4 text-center",children:[a.jsx(zr,{className:"mx-auto h-8 w-8 text-warning"}),a.jsx("p",{className:"mt-2 text-2xl font-bold",children:n.stock.lowStock}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Stock bas"})]}),a.jsxs("div",{className:"rounded-lg border border-destructive/50 bg-destructive/5 p-4 text-center",children:[a.jsx(Er,{className:"mx-auto h-8 w-8 text-destructive"}),a.jsx("p",{className:"mt-2 text-2xl font-bold",children:n.stock.outOfStock}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"puiss"})]})]})})]})]}),m&&a.jsxs(Pf,{value:"finance",className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsx(me,{className:"border-success/50 bg-success/5",children:a.jsxs(pe,{className:"py-6 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total pay"}),a.jsxs("p",{className:"text-3xl font-bold text-success",children:[n.finance.totalPaid.toLocaleString("fr-FR")," XOF"]})]})}),a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"py-6 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente de paiement"}),a.jsxs("p",{className:"text-3xl font-bold text-warning",children:[n.finance.pendingPayments.toLocaleString("fr-FR")," XOF"]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Rpartition par classe SYSCOHADA"})}),a.jsx(pe,{children:a.jsxs("div",{className:"space-y-3",children:[n.finance.byClass.map(p=>a.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"font-bold",children:["Classe ",p.class]}),a.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:zz[p.class]})]}),a.jsxs("span",{className:"font-mono font-medium",children:[p.amount.toLocaleString("fr-FR")," XOF"]})]},p.class)),n.finance.byClass.length===0&&a.jsx("p",{className:"text-center text-muted-foreground",children:"Aucune criture comptable"})]})})]})]}),a.jsxs(Pf,{value:"anomalies",className:"space-y-6",children:[a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(zr,{className:"mt-0.5 h-5 w-5 shrink-0 text-warning"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Dtection d'anomalies"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ces indicateurs signalent des situations ncessitant une attention particulire."})]})]})}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[a.jsx(me,{className:n.anomalies.longPending>0?"border-warning/50":"",children:a.jsxs(pe,{className:"py-6 text-center",children:[a.jsx(Yn,{className:`mx-auto h-8 w-8 ${n.anomalies.longPending>0?"text-warning":"text-muted-foreground"}`}),a.jsx("p",{className:"mt-2 text-3xl font-bold",children:n.anomalies.longPending}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"DA en attente > 30 jours"})]})}),a.jsx(me,{className:n.anomalies.frequentRejections>5?"border-destructive/50":"",children:a.jsxs(pe,{className:"py-6 text-center",children:[a.jsx(Er,{className:`mx-auto h-8 w-8 ${n.anomalies.frequentRejections>5?"text-destructive":"text-muted-foreground"}`}),a.jsx("p",{className:"mt-2 text-3xl font-bold",children:n.anomalies.frequentRejections}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"DA rejetes"})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"py-6 text-center",children:[a.jsx(Tn,{className:"mx-auto h-8 w-8 text-muted-foreground"}),a.jsx("p",{className:"mt-2 text-3xl font-bold",children:n.bl.partial}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Livraisons partielles"})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Recommandations"})}),a.jsxs(pe,{className:"space-y-3",children:[n.anomalies.longPending>0&&a.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-warning/50 bg-warning/5 p-4",children:[a.jsx(zr,{className:"mt-0.5 h-5 w-5 shrink-0 text-warning"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"DA bloques"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.anomalies.longPending," demande(s) d'achat sont en brouillon depuis plus de 30 jours. Vrifiez leur pertinence."]})]})]}),n.stock.lowStock>0&&a.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-warning/50 bg-warning/5 p-4",children:[a.jsx(Tn,{className:"mt-0.5 h-5 w-5 shrink-0 text-warning"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Stock critique"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.stock.lowStock," article(s) ont atteint leur seuil minimum. Planifiez un rapprovisionnement."]})]})]}),n.anomalies.longPending===0&&n.stock.lowStock===0&&a.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-success/50 bg-success/5 p-4",children:[a.jsx(Br,{className:"h-5 w-5 text-success"}),a.jsx("p",{className:"font-medium text-success",children:"Aucune anomalie dtecte"})]})]})]})]})]})]})}):a.jsx(st,{children:a.jsx(Ji,{message:"Vous n'avez pas les permissions ncessaires pour accder aux rapports."})})}var JV="AlertDialog",[DRe,m7e]=Ia(JV,[pV]),su=pV(),QV=e=>{const{__scopeAlertDialog:t,...r}=e,n=su(t);return a.jsx(bO,{...n,...r,modal:!0})};QV.displayName=JV;var MRe="AlertDialogTrigger",$Re=_.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=su(r);return a.jsx(OV,{...i,...n,ref:t})});$Re.displayName=MRe;var FRe="AlertDialogPortal",eG=e=>{const{__scopeAlertDialog:t,...r}=e,n=su(t);return a.jsx(wO,{...n,...r})};eG.displayName=FRe;var BRe="AlertDialogOverlay",tG=_.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=su(r);return a.jsx(Fj,{...i,...n,ref:t})});tG.displayName=BRe;var Qm="AlertDialogContent",[zRe,qRe]=DRe(Qm),URe=F7("AlertDialogContent"),rG=_.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...i}=e,s=su(r),o=_.useRef(null),l=vr(t,o),c=_.useRef(null);return a.jsx(mRe,{contentName:Qm,titleName:nG,docsSlug:"alert-dialog",children:a.jsx(zRe,{scope:r,cancelRef:c,children:a.jsxs(Bj,{role:"alertdialog",...s,...i,ref:l,onOpenAutoFocus:lt(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(URe,{children:n}),a.jsx(HRe,{contentRef:o})]})})})});rG.displayName=Qm;var nG="AlertDialogTitle",iG=_.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=su(r);return a.jsx(_O,{...i,...n,ref:t})});iG.displayName=nG;var sG="AlertDialogDescription",aG=_.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=su(r);return a.jsx(jO,{...i,...n,ref:t})});aG.displayName=sG;var WRe="AlertDialogAction",oG=_.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=su(r);return a.jsx(NO,{...i,...n,ref:t})});oG.displayName=WRe;var lG="AlertDialogCancel",cG=_.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:i}=qRe(lG,r),s=su(r),o=vr(t,i);return a.jsx(NO,{...s,...n,ref:o})});cG.displayName=lG;var HRe=({contentRef:e})=>{const t=`\`${Qm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Qm}\` by passing a \`${sG}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Qm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},VRe=QV,GRe=eG,uG=tG,dG=rG,fG=oG,hG=cG,mG=iG,pG=aG;const Yo=VRe,KRe=GRe,gG=_.forwardRef(({className:e,...t},r)=>a.jsx(uG,{className:rt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));gG.displayName=uG.displayName;const lo=_.forwardRef(({className:e,...t},r)=>a.jsxs(KRe,{children:[a.jsx(gG,{}),a.jsx(dG,{ref:r,className:rt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));lo.displayName=dG.displayName;const co=({className:e,...t})=>a.jsx("div",{className:rt("flex flex-col space-y-2 text-center sm:text-left",e),...t});co.displayName="AlertDialogHeader";const uo=({className:e,...t})=>a.jsx("div",{className:rt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});uo.displayName="AlertDialogFooter";const fo=_.forwardRef(({className:e,...t},r)=>a.jsx(mG,{ref:r,className:rt("text-lg font-semibold",e),...t}));fo.displayName=mG.displayName;const ho=_.forwardRef(({className:e,...t},r)=>a.jsx(pG,{ref:r,className:rt("text-sm text-muted-foreground",e),...t}));ho.displayName=pG.displayName;const Xo=_.forwardRef(({className:e,...t},r)=>a.jsx(fG,{ref:r,className:rt(Z4(),e),...t}));Xo.displayName=fG.displayName;const mo=_.forwardRef(({className:e,...t},r)=>a.jsx(hG,{ref:r,className:rt(Z4({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));mo.displayName=hG.displayName;const AM=["admin","dg","daf","comptable","responsable_logistique","agent_logistique","responsable_achats","agent_achats","responsable_departement","employe","lecture_seule"];function YRe(){const{isAdmin:e,user:t}=yr(),{toast:r}=qr(),[n,i]=_.useState([]),[s,o]=_.useState([]),[l,c]=_.useState(!0),[u,d]=_.useState(""),[f,m]=_.useState(null),[h,v]=_.useState({first_name:"",last_name:"",department_id:"",status:"active",roles:["employe"]}),[p,g]=_.useState(!1),[y,b]=_.useState(!1),[x,j]=_.useState({email:"",password:"",first_name:"",last_name:"",department_id:"",roles:["employe"]}),[N,A]=_.useState(!1),[C,E]=_.useState(null),[O,L]=_.useState(!1),[k,T]=_.useState(!1),[B,M]=_.useState(null),[G,z]=_.useState("email"),[D,q]=_.useState(""),[K,ae]=_.useState(""),[J,I]=_.useState(""),[$,U]=_.useState(!1),H=async()=>{if(C){L(!0);try{const ye=await fe.functions.invoke("delete-user",{body:{user_id:C.id}});if(ye.error)throw new Error(ye.error.message);if(!ye.data.success)throw new Error(ye.data.error||"Erreur lors de la suppression");r({title:"Utilisateur supprim",description:`${C.first_name} ${C.last_name} a t supprim.`}),E(null),se()}catch(ye){r({title:"Erreur",description:ye.message,variant:"destructive"})}finally{L(!1)}}},re=async()=>{if(!(!B||!J.trim())){U(!0);try{const ye={user_id:B.id,reason:J.trim()};G==="email"&&D&&(ye.email=D),G==="password"&&K&&(ye.password=K);const we=await fe.functions.invoke("admin-update-user",{body:ye});if(we.error)throw new Error(we.error.message);if(!we.data.success)throw new Error(we.data.error||"Erreur");r({title:G==="email"?"Email modifi":"Mot de passe rinitialis",description:`Action effectue pour ${B.first_name} ${B.last_name}.`}),he(),se()}catch(ye){r({title:"Erreur",description:ye.message,variant:"destructive"})}finally{U(!1)}}},X=(ye,we)=>{M(ye),z(we),q(we==="email"?ye.email:""),ae(""),I(""),T(!0)},he=()=>{T(!1),M(null),q(""),ae(""),I("")},se=async()=>{try{const{data:ye}=await fe.from("departments").select("*").eq("is_active",!0).order("name");o(ye||[]);const{data:we,error:_e}=await fe.from("profiles").select("*, department:departments(*)").order("created_at",{ascending:!1});if(_e){console.error("Error fetching profiles:",_e);return}const{data:Qe,error:We}=await fe.from("user_roles").select("*");if(We){console.error("Error fetching roles:",We);return}const Ge=(we||[]).map(Ke=>{const Pt=(Qe||[]).filter(Lt=>Lt.user_id===Ke.id).map(Lt=>Lt.role);return{...Ke,roles:Pt}});i(Ge)}catch(ye){console.error("Error fetching data:",ye)}finally{c(!1)}};_.useEffect(()=>{e&&se()},[e]);const ue=ye=>{m(ye),v({first_name:ye.first_name||"",last_name:ye.last_name||"",department_id:ye.department_id||"",status:ye.status,roles:ye.roles.length>0?ye.roles:["employe"]})},ge=()=>{j({email:"",password:"",first_name:"",last_name:"",department_id:"",roles:["employe"]})},ve=(ye,we)=>{if(we==="edit"){const _e=h.roles;_e.includes(ye)?_e.length>1&&v({...h,roles:_e.filter(Qe=>Qe!==ye)}):v({...h,roles:[..._e,ye]})}else{const _e=x.roles;_e.includes(ye)?_e.length>1&&j({...x,roles:_e.filter(Qe=>Qe!==ye)}):j({...x,roles:[..._e,ye]})}},te=async()=>{if(!x.email||!x.password||!x.first_name||!x.last_name){r({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}if(x.password.length<6){r({title:"Erreur",description:"Le mot de passe doit contenir au moins 6 caractres.",variant:"destructive"});return}A(!0);try{const{data:ye}=await fe.auth.getSession(),we=await fe.functions.invoke("create-user",{body:{email:x.email,password:x.password,first_name:x.first_name,last_name:x.last_name,department_id:x.department_id||null,roles:x.roles}});if(we.error)throw new Error(we.error.message);if(!we.data.success)throw new Error(we.data.error||"Erreur lors de la cration");r({title:"Utilisateur cr",description:`${x.first_name} ${x.last_name} a t cr avec succs.`}),b(!1),ge(),se()}catch(ye){console.error("Error creating user:",ye),r({title:"Erreur",description:ye.message||"Impossible de crer l'utilisateur.",variant:"destructive"})}finally{A(!1)}},Ne=()=>{m(null),v({first_name:"",last_name:"",department_id:"",status:"active",roles:["employe"]})},Y=async()=>{if(f){g(!0);try{const{error:ye}=await fe.from("profiles").update({first_name:h.first_name,last_name:h.last_name,department_id:h.department_id||null,status:h.status}).eq("id",f.id);if(ye)throw ye;const{error:we}=await fe.from("user_roles").delete().eq("user_id",f.id);if(we)throw we;const _e=h.roles.map(We=>({user_id:f.id,role:We,assigned_by:t==null?void 0:t.id})),{error:Qe}=await fe.from("user_roles").insert(_e);if(Qe)throw Qe;r({title:"Utilisateur mis  jour",description:`Les informations de ${h.first_name} ${h.last_name} ont t enregistres.`}),Ne(),se()}catch(ye){console.error("Error saving user:",ye),r({title:"Erreur",description:ye.message||"Impossible de sauvegarder les modifications.",variant:"destructive"})}finally{g(!1)}}},Le=n.filter(ye=>{var _e,Qe;const we=u.toLowerCase();return ye.email.toLowerCase().includes(we)||(((_e=ye.first_name)==null?void 0:_e.toLowerCase())||"").includes(we)||(((Qe=ye.last_name)==null?void 0:Qe.toLowerCase())||"").includes(we)});return e?a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Gestion des utilisateurs"}),a.jsxs("p",{className:"text-muted-foreground",children:[n.length," utilisateur(s) enregistr(s)"]})]}),a.jsxs(de,{onClick:()=>b(!0),children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouvel utilisateur"]})]}),a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par nom ou email...",value:u,onChange:ye=>d(ye.target.value),className:"pl-10"})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"p-0",children:l?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):Le.length===0?a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:u?"Aucun utilisateur trouv.":"Aucun utilisateur enregistr."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Utilisateur"}),a.jsx(Ee,{children:"Dpartement"}),a.jsx(Ee,{children:"Rle"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{className:"w-[100px]",children:"Actions"})]})}),a.jsx(rn,{children:Le.map(ye=>{var we;return a.jsxs(gt,{children:[a.jsx(Se,{children:a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:[ye.first_name," ",ye.last_name]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:ye.email})]})}),a.jsx(Se,{children:((we=ye.department)==null?void 0:we.name)||a.jsx("span",{className:"text-muted-foreground",children:"Non assign"})}),a.jsx(Se,{children:a.jsx("div",{className:"flex flex-wrap gap-1",children:ye.roles.map(_e=>a.jsx("span",{className:"inline-flex items-center rounded-md bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary",children:Cc[_e]},_e))})}),a.jsx(Se,{children:a.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-0.5 text-xs font-medium ${ye.status==="active"?"bg-success/10 text-success":ye.status==="suspended"?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}`,children:Wue[ye.status]})}),a.jsx(Se,{children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>ue(ye),children:a.jsx(Hy,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>X(ye,"email"),disabled:ye.id===(t==null?void 0:t.id),children:a.jsx(gB,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>X(ye,"password"),children:a.jsx(BQ,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>E(ye),disabled:ye.id===(t==null?void 0:t.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:a.jsx(ds,{className:"h-4 w-4"})})]})})]},ye.id)})})]})})})})]}),a.jsx(kr,{open:!!f,onOpenChange:ye=>!ye&&Ne(),children:a.jsxs(_r,{className:"sm:max-w-[500px]",children:[a.jsxs(jr,{children:[a.jsx(Nr,{className:"font-serif",children:"Modifier l'utilisateur"}),a.jsx(Yr,{children:"Modifiez les informations, le rle et le dpartement de l'utilisateur."})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"first_name",children:"Prnom"}),a.jsx(De,{id:"first_name",value:h.first_name,onChange:ye=>v({...h,first_name:ye.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"last_name",children:"Nom"}),a.jsx(De,{id:"last_name",value:h.last_name,onChange:ye=>v({...h,last_name:ye.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"department",children:"Dpartement"}),a.jsxs(Kt,{value:h.department_id||"none",onValueChange:ye=>v({...h,department_id:ye==="none"?"":ye}),children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner un dpartement"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"none",children:"Aucun dpartement"}),s.map(ye=>a.jsx(et,{value:ye.id,children:ye.name},ye.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Rles (slection multiple)"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border rounded-md p-3",children:AM.map(ye=>a.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors ${h.roles.includes(ye)?"bg-primary/10 border border-primary":"bg-muted/50 hover:bg-muted"}`,children:[a.jsx("input",{type:"checkbox",checked:h.roles.includes(ye),onChange:()=>ve(ye,"edit"),className:"h-4 w-4 rounded border-border"}),a.jsx("span",{className:"text-sm",children:Cc[ye]})]},ye))}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.roles.length," rle(s) slectionn(s)"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"status",children:"Statut"}),a.jsxs(Kt,{value:h.status,onValueChange:ye=>v({...h,status:ye}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"active",children:"Actif"}),a.jsx(et,{value:"inactive",children:"Inactif"}),a.jsx(et,{value:"suspended",children:"Suspendu"})]})]})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:Ne,disabled:p,children:"Annuler"}),a.jsx(de,{onClick:Y,disabled:p,children:p?"Enregistrement...":"Enregistrer"})]})]})}),a.jsx(kr,{open:y,onOpenChange:ye=>{b(ye),ye||ge()},children:a.jsxs(_r,{className:"sm:max-w-[500px]",children:[a.jsxs(jr,{children:[a.jsx(Nr,{className:"font-serif",children:"Crer un utilisateur"}),a.jsx(Yr,{children:"Remplissez les informations pour crer un nouvel utilisateur."})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"create_email",children:"Email *"}),a.jsx(De,{id:"create_email",type:"email",placeholder:"email@exemple.com",value:x.email,onChange:ye=>j({...x,email:ye.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"create_password",children:"Mot de passe * (min. 6 caractres)"}),a.jsx(De,{id:"create_password",type:"password",placeholder:"",value:x.password,onChange:ye=>j({...x,password:ye.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"create_first_name",children:"Prnom *"}),a.jsx(De,{id:"create_first_name",value:x.first_name,onChange:ye=>j({...x,first_name:ye.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"create_last_name",children:"Nom *"}),a.jsx(De,{id:"create_last_name",value:x.last_name,onChange:ye=>j({...x,last_name:ye.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"create_department",children:"Dpartement"}),a.jsxs(Kt,{value:x.department_id||"none",onValueChange:ye=>j({...x,department_id:ye==="none"?"":ye}),children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner un dpartement"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"none",children:"Aucun dpartement"}),s.map(ye=>a.jsx(et,{value:ye.id,children:ye.name},ye.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Rles * (slection multiple)"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border rounded-md p-3",children:AM.map(ye=>a.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors ${x.roles.includes(ye)?"bg-primary/10 border border-primary":"bg-muted/50 hover:bg-muted"}`,children:[a.jsx("input",{type:"checkbox",checked:x.roles.includes(ye),onChange:()=>ve(ye,"create"),className:"h-4 w-4 rounded border-border"}),a.jsx("span",{className:"text-sm",children:Cc[ye]})]},ye))}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.roles.length," rle(s) slectionn(s)"]})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>b(!1),disabled:N,children:"Annuler"}),a.jsx(de,{onClick:te,disabled:N,children:N?"Cration...":"Crer l'utilisateur"})]})]})}),a.jsx(Yo,{open:!!C,onOpenChange:ye=>!ye&&E(null),children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(fo,{children:"Supprimer l'utilisateur ?"}),a.jsxs(ho,{children:["tes-vous sr de vouloir supprimer ",a.jsxs("strong",{children:[C==null?void 0:C.first_name," ",C==null?void 0:C.last_name]})," (",C==null?void 0:C.email,") ? Cette action est irrversible."]})]}),a.jsxs(uo,{children:[a.jsx(mo,{disabled:O,children:"Annuler"}),a.jsx(Xo,{onClick:H,disabled:O,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:O?"Suppression...":"Supprimer"})]})]})}),a.jsx(kr,{open:k,onOpenChange:ye=>!ye&&he(),children:a.jsxs(_r,{className:"sm:max-w-[500px]",children:[a.jsxs(jr,{children:[a.jsx(Nr,{className:"font-serif",children:G==="email"?"Modifier l'email":"Rinitialiser le mot de passe"}),a.jsx(Yr,{children:G==="email"?`Modifier l'adresse email de ${B==null?void 0:B.first_name} ${B==null?void 0:B.last_name}.`:`Dfinir un nouveau mot de passe pour ${B==null?void 0:B.first_name} ${B==null?void 0:B.last_name}.`})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[G==="email"?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"new_email",children:"Nouvel email"}),a.jsx(De,{id:"new_email",type:"email",placeholder:"nouveau@email.com",value:D,onChange:ye=>q(ye.target.value)})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"new_password",children:"Nouveau mot de passe (min. 6 caractres)"}),a.jsx(De,{id:"new_password",type:"password",placeholder:"",value:K,onChange:ye=>ae(ye.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"admin_reason",children:"Motif de l'action (obligatoire)"}),a.jsx(De,{id:"admin_reason",placeholder:"Ex: Demande de l'utilisateur, correction d'erreur...",value:J,onChange:ye=>I(ye.target.value)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Cette action sera journalise avec le motif indiqu."})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:he,disabled:$,children:"Annuler"}),a.jsx(de,{onClick:re,disabled:$||!J.trim()||(G==="email"?!D:!K||K.length<6),children:$?"En cours...":G==="email"?"Modifier l'email":"Rinitialiser"})]})]})})]}):a.jsx(st,{children:a.jsx(Ji,{message:"Seuls les administrateurs peuvent grer les utilisateurs."})})}const Kr=_.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:rt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Kr.displayName="Textarea";var Uj="Switch",[XRe,p7e]=Ia(Uj),[ZRe,JRe]=XRe(Uj),vG=_.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,h]=_.useState(null),v=vr(t,x=>h(x)),p=_.useRef(!1),g=m?d||!!m.closest("form"):!0,[y,b]=Dc({prop:i,defaultProp:s??!1,onChange:u,caller:Uj});return a.jsxs(ZRe,{scope:r,checked:y,disabled:l,children:[a.jsx(jt.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":wG(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:lt(e.onClick,x=>{b(j=>!j),g&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})}),g&&a.jsx(bG,{control:m,bubbles:!p.current,name:n,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});vG.displayName=Uj;var yG="SwitchThumb",xG=_.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,i=JRe(yG,r);return a.jsx(jt.span,{"data-state":wG(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});xG.displayName=yG;var QRe="SwitchBubbleInput",bG=_.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...i},s)=>{const o=_.useRef(null),l=vr(o,s),c=pO(r),u=R4(t);return _.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&h){const v=new Event("click",{bubbles:n});h.call(d,r),d.dispatchEvent(v)}},[c,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});bG.displayName=QRe;function wG(e){return e?"checked":"unchecked"}var _G=vG,eIe=xG;const hh=_.forwardRef(({className:e,...t},r)=>a.jsx(_G,{className:rt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:a.jsx(eIe,{className:rt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));hh.displayName=_G.displayName;function tIe(){const{isAdmin:e}=yr(),{toast:t}=qr(),[r,n]=_.useState([]),[i,s]=_.useState(!0),[o,l]=_.useState(!1),[c,u]=_.useState(null),[d,f]=_.useState({name:"",description:"",is_active:!0}),[m,h]=_.useState(!1),v=async()=>{try{const{data:x,error:j}=await fe.from("departments").select("*").order("name");if(j)throw j;n(x||[])}catch(x){console.error("Error fetching departments:",x)}finally{s(!1)}};_.useEffect(()=>{e&&v()},[e]);const p=()=>{u(null),f({name:"",description:"",is_active:!0}),l(!0)},g=x=>{u(x),f({name:x.name,description:x.description||"",is_active:x.is_active}),l(!0)},y=()=>{l(!1),u(null),f({name:"",description:"",is_active:!0})},b=async()=>{if(!d.name.trim()){t({title:"Erreur",description:"Le nom du dpartement est requis.",variant:"destructive"});return}h(!0);try{if(c){const{error:x}=await fe.from("departments").update({name:d.name.trim(),description:d.description.trim()||null,is_active:d.is_active}).eq("id",c.id);if(x)throw x;t({title:"Dpartement mis  jour",description:`Le dpartement "${d.name}" a t modifi.`})}else{const{error:x}=await fe.from("departments").insert({name:d.name.trim(),description:d.description.trim()||null,is_active:d.is_active});if(x)throw x.code==="23505"?new Error("Un dpartement avec ce nom existe dj."):x;t({title:"Dpartement cr",description:`Le dpartement "${d.name}" a t ajout.`})}y(),v()}catch(x){t({title:"Erreur",description:x.message||"Impossible de sauvegarder le dpartement.",variant:"destructive"})}finally{h(!1)}};return e?a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Gestion des dpartements"}),a.jsxs("p",{className:"text-muted-foreground",children:[r.length," dpartement(s) configur(s)"]})]}),a.jsxs(de,{onClick:p,children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouveau dpartement"]})]}),a.jsx(me,{children:a.jsx(pe,{className:"p-0",children:i?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):r.length===0?a.jsxs("div",{className:"flex flex-col items-center gap-4 p-8 text-center",children:[a.jsx(zs,{className:"h-12 w-12 text-muted-foreground/50"}),a.jsx("p",{className:"text-muted-foreground",children:"Aucun dpartement configur."}),a.jsxs(de,{onClick:p,children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Crer le premier dpartement"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Nom"}),a.jsx(Ee,{children:"Description"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{className:"w-[100px]",children:"Actions"})]})}),a.jsx(rn,{children:r.map(x=>a.jsxs(gt,{children:[a.jsx(Se,{className:"font-medium",children:x.name}),a.jsx(Se,{className:"text-muted-foreground",children:x.description||""}),a.jsx(Se,{children:a.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-0.5 text-xs font-medium ${x.is_active?"bg-success/10 text-success":"bg-muted text-muted-foreground"}`,children:x.is_active?"Actif":"Inactif"})}),a.jsx(Se,{children:a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>g(x),children:a.jsx(Hy,{className:"h-4 w-4"})})})]},x.id))})]})})})})]}),a.jsx(kr,{open:o,onOpenChange:x=>!x&&y(),children:a.jsxs(_r,{className:"sm:max-w-[500px]",children:[a.jsxs(jr,{children:[a.jsx(Nr,{className:"font-serif",children:c?"Modifier le dpartement":"Nouveau dpartement"}),a.jsx(Yr,{children:c?"Modifiez les informations du dpartement.":"Crez un nouveau dpartement dans l'organisation."})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"name",children:"Nom du dpartement *"}),a.jsx(De,{id:"name",value:d.name,onChange:x=>f({...d,name:x.target.value}),placeholder:"Ex: Direction Logistique"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"description",children:"Description"}),a.jsx(Kr,{id:"description",value:d.description,onChange:x=>f({...d,description:x.target.value}),placeholder:"Description du dpartement...",rows:3})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-md border p-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Dpartement actif"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Les dpartements inactifs ne sont pas proposs lors de l'assignation."})]}),a.jsx(hh,{checked:d.is_active,onCheckedChange:x=>f({...d,is_active:x})})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:y,disabled:m,children:"Annuler"}),a.jsx(de,{onClick:b,disabled:m,children:m?"Enregistrement...":c?"Enregistrer":"Crer"})]})]})})]}):a.jsx(st,{children:a.jsx(Ji,{message:"Seuls les administrateurs peuvent grer les dpartements."})})}function rIe(){const{isAdmin:e,user:t}=yr(),{toast:r}=qr(),[n,i]=_.useState([]),[s,o]=_.useState({}),[l,c]=_.useState(!0),[u,d]=_.useState(!1),f=async()=>{try{const{data:y,error:b}=await fe.from("settings").select("*").order("category").order("key");if(b)throw b;i(y||[]);const x={};(y||[]).forEach(j=>{x[j.key]=j.value||""}),o(x)}catch(y){console.error("Error fetching settings:",y)}finally{c(!1)}};_.useEffect(()=>{e&&f()},[e]);const m=async()=>{d(!0);try{const y=n.filter(b=>s[b.key]!==b.value);for(const b of y){const{error:x}=await fe.from("settings").update({value:s[b.key],updated_by:t==null?void 0:t.id}).eq("id",b.id);if(x)throw x}r({title:"Paramtres enregistrs",description:`${y.length} paramtre(s) mis  jour.`}),f()}catch(y){r({title:"Erreur",description:y.message||"Impossible de sauvegarder les paramtres.",variant:"destructive"})}finally{d(!1)}},h=y=>{switch(y){case"general":return HT;case"thresholds":return w_;case"references":return jn;case"notifications":return zm;default:return HT}},v=y=>{switch(y){case"general":return"Gnral";case"thresholds":return"Seuils de validation";case"references":return"Formats de rfrences";case"notifications":return"Notifications";default:return y}},p=n.reduce((y,b)=>{const x=b.category;return y[x]||(y[x]=[]),y[x].push(b),y},{}),g=n.some(y=>s[y.key]!==y.value);return e?a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Paramtres systme"}),a.jsx("p",{className:"text-muted-foreground",children:"Configuration globale de KPM SYSTEME"})]}),a.jsxs(de,{onClick:m,disabled:!g||u,children:[a.jsx(N4,{className:"mr-2 h-4 w-4"}),u?"Enregistrement...":"Enregistrer"]})]}),l?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):a.jsx("div",{className:"grid gap-6",children:Object.entries(p).map(([y,b])=>{const x=h(y);return a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-primary/10",children:a.jsx(x,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx(Ue,{className:"text-lg",children:v(y)}),a.jsxs(wn,{children:[y==="thresholds"&&"Dfinissez les montants de validation par niveau.",y==="general"&&"Informations gnrales de l'entreprise.",y==="references"&&"Prfixes pour la gnration des rfrences."]})]})]})}),a.jsx(pe,{children:a.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:b.map(j=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:j.key,children:j.description||j.key}),a.jsx(De,{id:j.key,value:s[j.key]||"",onChange:N=>o({...s,[j.key]:N.target.value}),placeholder:j.description||""})]},j.id))})})]},y)})})]})}):a.jsx(st,{children:a.jsx(Ji,{message:"Seuls les administrateurs peuvent modifier les paramtres systme."})})}const of=["admin","dg","daf","comptable","responsable_logistique","agent_logistique","responsable_achats","agent_achats","responsable_departement","employe","lecture_seule"],CM=["voir","lire","ecrire","supprimer"];function nIe(){const{isAdmin:e}=yr(),[t,r]=_.useState([]),[n,i]=_.useState([]),[s,o]=_.useState(!0),[l,c]=_.useState(!1),[u,d]=_.useState(null),[f,m]=_.useState(new Map);_.useEffect(()=>{h()},[]);const h=async()=>{o(!0);try{const[L,k]=await Promise.all([fe.from("permissions").select("*").order("module").order("code"),fe.from("role_permissions").select("*")]);if(L.error)throw L.error;if(k.error)throw k.error;r(L.data||[]),i(k.data||[])}catch(L){console.error("Error fetching data:",L),fi.error("Erreur lors du chargement des permissions")}finally{o(!1)}},v=Object.entries(t.reduce((L,k)=>(L[k.module]||(L[k.module]=[]),L[k.module].push(k),L),{})).map(([L,k])=>({module:L,label:oR[L]||L,permissions:k})),p=(L,k)=>`${L}::${k}`,g=(L,k)=>`${L}-${k}`,y=L=>{if(L.includes("::")){const[M,G]=L.split("::"),z=M;return!z||!G||!of.includes(z)?null:{role:z,permissionId:G}}const k=L.indexOf("-");if(k<=0)return null;const T=L.slice(0,k),B=L.slice(k+1);return!T||!B||!of.includes(T)?null:{role:T,permissionId:B}},b=(L,k)=>{const T=p(L,k),B=g(L,k);return f.has(T)?f.get(T):f.has(B)?f.get(B):n.some(M=>M.role===L&&M.permission_id===k)},x=(L,k)=>{if(L==="admin"){fi.error("Les permissions Admin ne peuvent pas tre modifies");return}const T=p(L,k),B=g(L,k),M=b(L,k);m(G=>{const z=new Map(G);return z.delete(B),z.set(T,!M),z})},j=async()=>{if(f.size===0){fi.info("Aucune modification  enregistrer");return}c(!0);try{const L=[],k=[];if(f.forEach((T,B)=>{const M=y(B);if(!M)return;const{role:G,permissionId:z}=M,D=n.some(q=>q.role===G&&q.permission_id===z);T&&!D?L.push({role:G,permission_id:z}):!T&&D&&k.push({role:G,permission_id:z})}),L.length>0){const{error:T}=await fe.from("role_permissions").insert(L);if(T)throw T}for(const T of k){const{error:B}=await fe.from("role_permissions").delete().eq("role",T.role).eq("permission_id",T.permission_id);if(B)throw B}m(new Map),await h(),fi.success(`${L.length+k.length} modifications enregistres`)}catch(L){console.error("Error saving changes:",L),fi.error("Erreur lors de l'enregistrement")}finally{c(!1)}},N=()=>{m(new Map),fi.info("Modifications annules")},A=()=>{const L={exportDate:new Date().toISOString(),version:"1.0",permissions:t.map(M=>({code:M.code,name:M.name,module:M.module,description:M.description})),rolePermissions:of.reduce((M,G)=>(M[G]=t.filter(z=>b(G,z.id)).map(z=>z.code),M),{})},k=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),T=URL.createObjectURL(k),B=document.createElement("a");B.href=T,B.download=`kpm-roles-config-${new Date().toISOString().split("T")[0]}.json`,B.click(),URL.revokeObjectURL(T),fi.success("Configuration exporte")},C=async()=>{confirm("tes-vous sr de vouloir rinitialiser les permissions aux valeurs par dfaut Kimbo ? Cette action est irrversible.")&&(fi.info("Rinitialisation en cours... Veuillez patienter."),await h(),fi.success("Permissions rinitialises"))},E=(L,k,T)=>{const B=t.find(M=>M.code===`${L}.${k}`);return B?b(T,B.id):!1},O=L=>t.filter(k=>k.module===L&&!CM.includes(k.code.split(".")[1]));return e?s?a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(Xa,{className:"h-8 w-64"}),a.jsx(Xa,{className:"h-4 w-96 mt-2"})]}),a.jsx(Xa,{className:"h-[500px] w-full"})]})}):a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Rles & Permissions"}),a.jsxs("p",{className:"text-muted-foreground",children:["Grez les permissions par rle (",t.length," permissions, ",of.length," rles)"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:A,children:[a.jsx(bd,{className:"mr-2 h-4 w-4"}),"Exporter"]}),a.jsxs(de,{variant:"outline",size:"sm",onClick:C,children:[a.jsx(j_,{className:"mr-2 h-4 w-4"}),"Rinitialiser"]})]})]}),f.size>0&&a.jsx(me,{className:"border-warning bg-warning/10",children:a.jsxs(pe,{className:"flex items-center justify-between py-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qy,{className:"h-5 w-5 text-warning"}),a.jsxs("span",{className:"text-sm font-medium",children:[f.size," modification(s) en attente"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(de,{variant:"ghost",size:"sm",onClick:N,children:"Annuler"}),a.jsx(de,{size:"sm",onClick:j,disabled:l,children:l?"Enregistrement...":"Enregistrer"})]})]})}),a.jsxs(W2,{defaultValue:"matrix",className:"w-full",children:[a.jsxs(Hx,{children:[a.jsx(wa,{value:"matrix",children:"Matrice rapide"}),a.jsx(wa,{value:"detailed",children:"Dtails avancs"})]}),a.jsxs(Pf,{value:"matrix",className:"mt-4",children:[a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-primary/10",children:a.jsx(_p,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx(Ue,{className:"text-lg",children:"Matrice des permissions"}),a.jsx(wn,{children:"Cliquez sur une cellule pour activer/dsactiver. Les icnes indiquent les permissions mtier."})]})]})}),a.jsx(pe,{className:"p-0",children:a.jsx(uy,{className:"w-full",children:a.jsx("div",{className:"min-w-[1000px]",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b bg-muted/50",children:[a.jsx("th",{className:"sticky left-0 z-10 bg-muted/50 px-4 py-3 text-left font-medium w-48",children:"Module"}),of.map(L=>a.jsx("th",{className:"min-w-[90px] px-2 py-3 text-center text-xs font-medium",children:a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("span",{className:"whitespace-nowrap",children:Cc[L].split(" ").slice(0,2).join(" ")}),L==="admin"&&a.jsx(it,{variant:"secondary",className:"text-[10px] px-1",children:"Tous"})]})},L))]})}),a.jsx("tbody",{children:v.map(L=>a.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[a.jsx("td",{className:"sticky left-0 z-10 bg-background px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:L.label}),O(L.module).length>0&&a.jsxs(it,{variant:"outline",className:"text-[10px]",children:["+",O(L.module).length]})]})}),of.map(k=>{const T=E(L.module,"voir",k);E(L.module,"lire",k);const B=E(L.module,"ecrire",k),M=E(L.module,"supprimer",k),G=O(L.module).filter(z=>b(k,z.id));return a.jsx("td",{className:"px-2 py-2 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx("button",{onClick:()=>{const z=t.find(D=>D.code===`${L.module}.voir`);z&&x(k,z.id)},disabled:k==="admin",className:`p-1 rounded transition-colors ${T?"text-success hover:bg-success/20":"text-muted-foreground/30 hover:bg-muted"} ${k==="admin"?"cursor-not-allowed":"cursor-pointer"}`,title:"Voir",children:a.jsx(wp,{className:"h-3.5 w-3.5"})}),a.jsx("button",{onClick:()=>{const z=t.find(D=>D.code===`${L.module}.ecrire`);z&&x(k,z.id)},disabled:k==="admin",className:`p-1 rounded transition-colors ${B?"text-primary hover:bg-primary/20":"text-muted-foreground/30 hover:bg-muted"} ${k==="admin"?"cursor-not-allowed":"cursor-pointer"}`,title:"crire",children:a.jsx(Bc,{className:"h-3.5 w-3.5"})}),a.jsx("button",{onClick:()=>{const z=t.find(D=>D.code===`${L.module}.supprimer`);z&&x(k,z.id)},disabled:k==="admin",className:`p-1 rounded transition-colors ${M?"text-destructive hover:bg-destructive/20":"text-muted-foreground/30 hover:bg-muted"} ${k==="admin"?"cursor-not-allowed":"cursor-pointer"}`,title:"Supprimer",children:a.jsx(ds,{className:"h-3.5 w-3.5"})}),G.length>0&&a.jsx(it,{variant:"secondary",className:"ml-1 text-[10px] px-1 bg-accent text-accent-foreground",children:G.length})]})},k)})]},L.module))})]})})})})]}),a.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(wp,{className:"h-3.5 w-3.5 text-success"}),a.jsx("span",{children:"Voir"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Bc,{className:"h-3.5 w-3.5 text-primary"}),a.jsx("span",{children:"crire"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ds,{className:"h-3.5 w-3.5 text-destructive"}),a.jsx("span",{children:"Supprimer"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(it,{variant:"secondary",className:"text-[10px] px-1",children:"N"}),a.jsx("span",{children:"Permissions mtier"})]})]})]}),a.jsx(Pf,{value:"detailed",className:"mt-4",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(me,{className:"md:col-span-1",children:[a.jsx(ze,{className:"pb-2",children:a.jsx(Ue,{className:"text-sm",children:"Modules"})}),a.jsx(pe,{className:"p-0",children:a.jsx(uy,{className:"h-[500px]",children:v.map(L=>a.jsxs("button",{onClick:()=>d(L.module),className:`w-full flex items-center justify-between px-4 py-3 text-left transition-colors hover:bg-muted/50 ${u===L.module?"bg-muted":""}`,children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:L.label}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[L.permissions.length," permissions"]})]}),a.jsx(LQ,{className:"h-4 w-4 text-muted-foreground"})]},L.module))})})]}),a.jsxs(me,{className:"md:col-span-2",children:[a.jsx(ze,{className:"pb-2",children:a.jsx(Ue,{className:"text-sm",children:u?`Permissions: ${oR[u]||u}`:"Slectionnez un module"})}),a.jsx(pe,{children:u?a.jsx(uy,{className:"h-[460px]",children:a.jsx("div",{className:"space-y-4",children:t.filter(L=>L.module===u).map(L=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:L.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:L.code}),L.description&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:L.description})]}),!CM.includes(L.code.split(".")[1])&&a.jsx(it,{variant:"secondary",children:"Mtier"})]}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:of.map(k=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hh,{checked:b(k,L.id),onCheckedChange:()=>x(k,L.id),disabled:k==="admin",className:"scale-75"}),a.jsx("span",{className:"text-xs truncate",title:Cc[k],children:Cc[k].split(" ")[0]})]},k))})]},L.id))})}):a.jsx("div",{className:"h-[460px] flex items-center justify-center text-muted-foreground",children:a.jsxs("div",{className:"text-center",children:[a.jsx(_p,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"Slectionnez un module pour voir ses permissions"})]})})})]})]})})]}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(qy,{className:"h-5 w-5 text-primary mt-0.5"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("p",{className:"font-medium text-foreground mb-1",children:" propos des permissions"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Les permissions Admin sont fixes et ne peuvent pas tre modifies"}),a.jsx("li",{children:"Les modifications prennent effet immdiatement aprs enregistrement"}),a.jsx("li",{children:"Exportez rgulirement votre configuration pour sauvegarde"}),a.jsx("li",{children:'La suppression de "Voir" masque le module dans le menu latral'})]})]})]})})})]})}):a.jsx(st,{children:a.jsx(Ji,{message:"Seuls les administrateurs peuvent grer les rles et permissions."})})}function iIe(){const{isAdmin:e}=yr(),{toast:t}=qr(),[r,n]=_.useState([]),[i,s]=_.useState(!0),[o,l]=_.useState(!1),[c,u]=_.useState(null),[d,f]=_.useState(!1),[m,h]=_.useState({code:"",label:"",sort_order:0});_.useEffect(()=>{e&&v()},[e]);const v=async()=>{try{const{data:j,error:N}=await fe.from("units").select("*").order("sort_order");if(N)throw N;n(j||[])}catch(j){t({title:"Erreur",description:j.message,variant:"destructive"})}finally{s(!1)}},p=()=>{h({code:"",label:"",sort_order:0}),u(null),l(!1)},g=j=>{h({code:j.code,label:j.label,sort_order:j.sort_order}),u(j.id),l(!0)},y=async()=>{if(!m.code.trim()||!m.label.trim()){t({title:"Erreur",description:"Le code et le libell sont obligatoires.",variant:"destructive"});return}f(!0);try{if(c){const{error:j}=await fe.from("units").update({code:m.code.trim(),label:m.label.trim(),sort_order:m.sort_order}).eq("id",c);if(j)throw j;t({title:"Unit modifie"})}else{const j=Math.max(...r.map(A=>A.sort_order),0),{error:N}=await fe.from("units").insert({code:m.code.trim(),label:m.label.trim(),sort_order:m.sort_order||j+1});if(N)throw N;t({title:"Unit cre"})}p(),v()}catch(j){t({title:"Erreur",description:j.message,variant:"destructive"})}finally{f(!1)}},b=async j=>{try{const{error:N}=await fe.from("units").update({is_active:!j.is_active}).eq("id",j.id);if(N)throw N;v()}catch(N){t({title:"Erreur",description:N.message,variant:"destructive"})}},x=async j=>{if(confirm("Supprimer cette unit ?"))try{const{error:N}=await fe.from("units").delete().eq("id",j);if(N)throw N;t({title:"Unit supprime"}),v()}catch(N){t({title:"Erreur",description:N.message,variant:"destructive"})}};return e?a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Units de mesure"}),a.jsx("p",{className:"text-muted-foreground",children:"Grez les units disponibles dans l'application"})]}),a.jsxs(de,{onClick:()=>l(!0),children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouvelle unit"]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx(yB,{className:"h-5 w-5"}),r.length," unit(s)"]})}),a.jsx(pe,{children:i?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):r.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucune unit configure."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{className:"w-12",children:"Ordre"}),a.jsx(Ee,{children:"Code"}),a.jsx(Ee,{children:"Libell"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{className:"text-right",children:"Actions"})]})}),a.jsx(rn,{children:r.map(j=>a.jsxs(gt,{className:j.is_active?void 0:"opacity-50",children:[a.jsx(Se,{className:"font-mono text-muted-foreground",children:j.sort_order}),a.jsx(Se,{className:"font-mono font-medium",children:j.code}),a.jsx(Se,{children:j.label}),a.jsx(Se,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hh,{checked:j.is_active,onCheckedChange:()=>b(j)}),a.jsx(it,{className:j.is_active?"bg-success/10 text-success":"bg-muted text-muted-foreground",children:j.is_active?"Actif":"Inactif"})]})}),a.jsx(Se,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>g(j),children:a.jsx(Bc,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10",onClick:()=>x(j.id),children:a.jsx(ds,{className:"h-4 w-4"})})]})})]},j.id))})]})})})]})]}),a.jsx(kr,{open:o,onOpenChange:j=>{j||p()},children:a.jsxs(_r,{className:"max-w-md",children:[a.jsxs(jr,{children:[a.jsxs(Nr,{children:[c?"Modifier":"Nouvelle"," unit"]}),a.jsx(Yr,{children:"Les units sont utilises dans les formulaires de besoin et de stock."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Code *"}),a.jsx(De,{placeholder:"Ex: kg, m, pice",value:m.code,onChange:j=>h({...m,code:j.target.value})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Code court utilis dans les formulaires"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Libell *"}),a.jsx(De,{placeholder:"Ex: Kilogramme (kg)",value:m.label,onChange:j=>h({...m,label:j.target.value})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Nom complet affich dans les listes droulantes"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Ordre d'affichage"}),a.jsx(De,{type:"number",min:"0",value:m.sort_order,onChange:j=>h({...m,sort_order:parseInt(j.target.value)||0})})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:p,children:"Annuler"}),a.jsx(de,{onClick:y,disabled:d,children:d?"Enregistrement...":"Enregistrer"})]})]})})]}):a.jsx(st,{children:a.jsx(Ji,{message:"Seuls les administrateurs peuvent grer les units de mesure."})})}function sIe(){const{isAdmin:e}=yr(),{toast:t}=qr(),[r,n]=_.useState([]),[i,s]=_.useState([]),[o,l]=_.useState(!0),[c,u]=_.useState(!1),[d,f]=_.useState(!1),[m,h]=_.useState(null),[v,p]=_.useState(null),[g,y]=_.useState(null),[b,x]=_.useState({code:"",label:""}),[j,N]=_.useState({code:"",label:""});_.useEffect(()=>{e?A():l(!1)},[e]);const A=async()=>{l(!0);const[L,k]=await Promise.all([fe.from("payment_categories").select("*").order("sort_order"),fe.from("payment_methods").select("*").order("sort_order")]);L.data&&n(L.data),k.data&&s(k.data),l(!1)},C=async()=>{!b.code.trim()||!b.label.trim()||(m?await fe.from("payment_categories").update({code:b.code,label:b.label}).eq("id",m.id):await fe.from("payment_categories").insert({code:b.code,label:b.label,sort_order:r.length+1}),t({title:"Catgorie enregistre"}),u(!1),x({code:"",label:""}),h(null),A())},E=async()=>{!j.code.trim()||!j.label.trim()||!g||(v?await fe.from("payment_methods").update({code:j.code,label:j.label}).eq("id",v.id):await fe.from("payment_methods").insert({code:j.code,label:j.label,category_id:g,sort_order:i.filter(L=>L.category_id===g).length+1}),t({title:"Mthode enregistre"}),f(!1),N({code:"",label:""}),p(null),A())},O=async(L,k,T)=>{L==="cat"?await fe.from("payment_categories").update({is_active:!T}).eq("id",k):await fe.from("payment_methods").update({is_active:!T}).eq("id",k),A()};return e?a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold",children:"Modes de paiement"}),a.jsx("p",{className:"text-muted-foreground",children:"Grer les catgories et mthodes de paiement"})]}),a.jsxs(de,{onClick:()=>{h(null),x({code:"",label:""}),u(!0)},children:[a.jsx(ai,{className:"mr-2 h-4 w-4"})," Catgorie"]})]}),o?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(L=>a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[a.jsx(si,{className:"h-5 w-5"}),L.label]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hh,{checked:L.is_active,onCheckedChange:()=>O("cat",L.id,L.is_active)}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>{h(L),x({code:L.code,label:L.label}),u(!0)},children:a.jsx(Hy,{className:"h-4 w-4"})})]})]}),a.jsxs(pe,{children:[a.jsxs("div",{className:"mb-2 flex justify-between",children:[a.jsxs("span",{className:"text-sm text-muted-foreground",children:["Code: ",L.code]}),a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{y(L.id),p(null),N({code:"",label:""}),f(!0)},children:[a.jsx(ai,{className:"mr-1 h-3 w-3"})," Mthode"]})]}),a.jsx(tn,{children:a.jsx(rn,{children:i.filter(k=>k.category_id===L.id).map(k=>a.jsxs(gt,{children:[a.jsx(Se,{className:"py-1",children:k.label}),a.jsxs(Se,{className:"py-1 text-right",children:[a.jsx(hh,{checked:k.is_active,onCheckedChange:()=>O("method",k.id,k.is_active)}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{y(L.id),p(k),N({code:k.code,label:k.label}),f(!0)},children:a.jsx(Hy,{className:"h-3 w-3"})})]})]},k.id))})})]})]},L.id))})]}),a.jsx(kr,{open:c,onOpenChange:u,children:a.jsxs(_r,{children:[a.jsx(jr,{children:a.jsxs(Nr,{children:[m?"Modifier":"Nouvelle"," catgorie"]})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Code"}),a.jsx(De,{value:b.code,onChange:L=>x({...b,code:L.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Libell"}),a.jsx(De,{value:b.label,onChange:L=>x({...b,label:L.target.value})})]})]}),a.jsx(Fr,{children:a.jsx(de,{onClick:C,children:"Enregistrer"})})]})}),a.jsx(kr,{open:d,onOpenChange:f,children:a.jsxs(_r,{children:[a.jsx(jr,{children:a.jsxs(Nr,{children:[v?"Modifier":"Nouvelle"," mthode"]})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Code"}),a.jsx(De,{value:j.code,onChange:L=>N({...j,code:L.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Libell"}),a.jsx(De,{value:j.label,onChange:L=>N({...j,label:L.target.value})})]})]}),a.jsx(Fr,{children:a.jsx(de,{onClick:E,children:"Enregistrer"})})]})})]}):a.jsx(st,{children:a.jsx(Ji,{})})}const Lv={1:"Comptes de ressources durables",2:"Comptes d'actif immobilis",3:"Comptes de stocks",4:"Comptes de tiers",5:"Comptes de trsorerie",6:"Comptes de charges",7:"Comptes de produits"};function aIe(){const{isAdmin:e}=yr(),{toast:t}=qr(),[r,n]=_.useState([]),[i,s]=_.useState(!0),[o,l]=_.useState(!1),[c,u]=_.useState(null),[d,f]=_.useState({code:"",libelle:"",classe:"6"}),[m,h]=_.useState(""),[v,p]=_.useState("all"),[g,y]=_.useState(!1);_.useEffect(()=>{e?b():s(!1)},[e]);const b=async()=>{s(!0);try{const{data:L,error:k}=await fe.from("comptes_comptables").select("*").order("code");if(k)throw k;n(L||[])}catch(L){console.error("Error fetching comptes:",L),t({title:"Impossible de charger les comptes",description:"Veuillez ressayer dans quelques instants.",variant:"destructive"})}finally{s(!1)}},x=async()=>{if(!d.code.trim()||!d.libelle.trim()){t({title:"Informations incompltes",description:"Le code et le libell sont obligatoires."});return}if(!/^\d+$/.test(d.code)){t({title:"Format de code invalide",description:"Le code comptable doit tre numrique."});return}const L=parseInt(d.code.charAt(0));L!==parseInt(d.classe)&&f({...d,classe:L.toString()}),y(!0);try{if(c){const{error:k}=await fe.from("comptes_comptables").update({code:d.code,libelle:d.libelle,classe:parseInt(d.classe)}).eq("id",c.id);if(k)throw k;t({title:"Compte mis  jour avec succs"})}else{if(r.find(B=>B.code===d.code)){t({title:"Code dj utilis",description:"Un compte avec ce code existe dj."}),y(!1);return}const{error:T}=await fe.from("comptes_comptables").insert({code:d.code,libelle:d.libelle,classe:parseInt(d.classe)});if(T)throw T;t({title:"Compte cr avec succs"})}l(!1),f({code:"",libelle:"",classe:"6"}),u(null),b()}catch(k){console.error("Error saving compte:",k),t({title:"Erreur lors de l'enregistrement",description:k.message||"Veuillez ressayer.",variant:"destructive"})}finally{y(!1)}},j=async(L,k)=>{try{const{error:T}=await fe.from("comptes_comptables").update({is_active:!k}).eq("id",L);if(T)throw T;t({title:k?"Compte dsactiv":"Compte activ"}),b()}catch(T){console.error("Error toggling compte:",T),t({title:"Action non effectue",description:"Veuillez ressayer.",variant:"destructive"})}},N=L=>{u(L),f({code:L.code,libelle:L.libelle,classe:L.classe.toString()}),l(!0)},A=()=>{u(null),f({code:"",libelle:"",classe:"6"}),l(!0)},C=r.filter(L=>{const k=m===""||L.code.toLowerCase().includes(m.toLowerCase())||L.libelle.toLowerCase().includes(m.toLowerCase()),T=v==="all"||L.classe===parseInt(v);return k&&T}),E=C.reduce((L,k)=>(L[k.classe]||(L[k.classe]=[]),L[k.classe].push(k),L),{}),O=Object.keys(Lv).map(L=>({classe:parseInt(L),count:r.filter(k=>k.classe===parseInt(L)).length,activeCount:r.filter(k=>k.classe===parseInt(L)&&k.is_active).length}));return e?a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"font-serif text-2xl font-bold flex items-center gap-2",children:[a.jsx(Mc,{className:"h-6 w-6"}),"Plan comptable SYSCOHADA"]}),a.jsx("p",{className:"text-muted-foreground",children:"Grer les comptes comptables par classe"})]}),a.jsxs(de,{onClick:A,children:[a.jsx(ai,{className:"mr-2 h-4 w-4"})," Nouveau compte"]})]}),a.jsx("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-4 lg:grid-cols-7",children:O.map(L=>{var k;return a.jsx(me,{className:`cursor-pointer transition-all hover:ring-2 hover:ring-primary/50 ${v===L.classe.toString()?"ring-2 ring-primary":""}`,onClick:()=>p(v===L.classe.toString()?"all":L.classe.toString()),children:a.jsxs(pe,{className:"pt-4 pb-3 px-3 text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:L.classe}),a.jsx("div",{className:"text-xs text-muted-foreground truncate",children:((k=Lv[L.classe])==null?void 0:k.split(" ")[2])||"Classe"}),a.jsxs(it,{variant:L.activeCount>0?"default":"secondary",className:"mt-1",children:[L.activeCount,"/",L.count]})]})},L.classe)})}),a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par code ou libell...",value:m,onChange:L=>h(L.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:v,onValueChange:p,children:[a.jsxs(Wt,{className:"w-full sm:w-[200px]",children:[a.jsx(pB,{className:"mr-2 h-4 w-4"}),a.jsx(Yt,{placeholder:"Toutes les classes"})]}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Toutes les classes"}),Object.entries(Lv).map(([L,k])=>a.jsxs(et,{value:L,children:["Classe ",L]},L))]})]})]}),i?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):C.length===0?a.jsx(me,{children:a.jsx(pe,{className:"py-12 text-center text-muted-foreground",children:m||v!=="all"?"Aucun compte ne correspond  votre recherche.":'Aucun compte comptable dfini. Cliquez sur "Nouveau compte" pour commencer.'})}):a.jsx("div",{className:"space-y-4",children:Object.entries(E).sort(([L],[k])=>parseInt(L)-parseInt(k)).map(([L,k])=>a.jsxs(me,{children:[a.jsxs(ze,{className:"pb-2",children:[a.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[a.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-primary/10 text-primary font-bold",children:L}),Lv[parseInt(L)]||`Classe ${L}`]}),a.jsxs(wn,{children:[k.length," compte",k.length>1?"s":""]})]}),a.jsx(pe,{children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{className:"w-[120px]",children:"Code"}),a.jsx(Ee,{children:"Libell"}),a.jsx(Ee,{className:"w-[100px] text-center",children:"Actif"}),a.jsx(Ee,{className:"w-[60px]"})]})}),a.jsx(rn,{children:k.map(T=>a.jsxs(gt,{className:T.is_active?"":"opacity-50",children:[a.jsx(Se,{className:"font-mono font-medium",children:T.code}),a.jsx(Se,{children:T.libelle}),a.jsx(Se,{className:"text-center",children:a.jsx(hh,{checked:T.is_active,onCheckedChange:()=>j(T.id,T.is_active)})}),a.jsx(Se,{children:a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>N(T),children:a.jsx(Hy,{className:"h-4 w-4"})})})]},T.id))})]})})]},L))})]}),a.jsx(kr,{open:o,onOpenChange:l,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:c?"Modifier le compte":"Nouveau compte comptable"}),a.jsx(Yr,{children:c?"Modifiez les informations du compte comptable.":"Ajoutez un nouveau compte au plan comptable SYSCOHADA."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"code",children:"Code comptable *"}),a.jsx(De,{id:"code",placeholder:"Ex: 601100",value:d.code,onChange:L=>{const k=L.target.value.replace(/\D/g,""),T=k.charAt(0);f({...d,code:k,classe:T&&parseInt(T)>=1&&parseInt(T)<=7?T:d.classe})},maxLength:10}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"La classe sera dtecte automatiquement"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"classe",children:"Classe SYSCOHADA *"}),a.jsxs(Kt,{value:d.classe,onValueChange:L=>f({...d,classe:L}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.entries(Lv).map(([L,k])=>a.jsxs(et,{value:L,children:[L," - ",k]},L))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"libelle",children:"Libell *"}),a.jsx(De,{id:"libelle",placeholder:"Ex: Achats de matires premires",value:d.libelle,onChange:L=>f({...d,libelle:L.target.value}),maxLength:200})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>l(!1),children:"Annuler"}),a.jsx(de,{onClick:x,disabled:g,children:g?"Enregistrement...":"Enregistrer"})]})]})})]}):a.jsx(st,{children:a.jsx(Ji,{})})}const oIe=()=>{const e=Od();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},lIe=()=>a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"Welcome to Your Blank App"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"Start building your amazing project here!"})]})}),cIe={cree:Yn,pris_en_charge:zr,accepte:Br,refuse:Er,retourne:cd,annulee:Er},uIe={cree:"bg-muted text-muted-foreground",pris_en_charge:"bg-warning/10 text-warning",accepte:"bg-success/10 text-success",refuse:"bg-destructive/10 text-destructive",retourne:"bg-orange-500/10 text-orange-600",annulee:"bg-muted text-muted-foreground line-through"},dIe={normale:"bg-muted text-muted-foreground",urgente:"bg-warning/10 text-warning",critique:"bg-destructive/10 text-destructive"};function fIe(){const{user:e,roles:t}=yr(),[r,n]=_.useState([]),[i,s]=_.useState(!0),[o,l]=_.useState(""),[c,u]=_.useState("all"),d=t.some(h=>Fz.includes(h));_.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:h,error:v}=await fe.from("besoins").select(`
          *,
          department:departments(id, name),
          user:profiles!besoins_user_id_fkey(id, first_name, last_name, email)
        `).order("created_at",{ascending:!1});if(v){console.error("Error fetching besoins:",v);return}n(h||[])}catch(h){console.error("Error:",h)}finally{s(!1)}},m=r.filter(h=>{const v=h.title.toLowerCase().includes(o.toLowerCase())||h.description.toLowerCase().includes(o.toLowerCase()),p=c==="all"||h.status===c;return v&&p});return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Besoins internes"}),a.jsxs("p",{className:"text-muted-foreground",children:[r.length," besoin(s) enregistr(s)"]})]}),d?a.jsx($t,{to:"/besoins/nouveau",children:a.jsxs(de,{children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouveau besoin"]})}):a.jsxs(de,{disabled:!0,title:"Vous n'avez pas les droits pour crer un besoin",children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouveau besoin"]})]}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-center gap-3 py-3",children:[a.jsx(zr,{className:"h-5 w-5 text-primary"}),a.jsxs("p",{className:"text-sm text-foreground",children:[a.jsx("strong",{children:"Rappel :"})," Un besoin interne n'engage aucun achat ni paiement. Il s'agit d'une expression formelle transmise  la Logistique."]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex flex-col gap-4 pt-6 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par titre ou description...",value:o,onChange:h=>l(h.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:c,onValueChange:u,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Filtrer par statut"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les statuts"}),a.jsx(et,{value:"cree",children:"Cr"}),a.jsx(et,{value:"pris_en_charge",children:"Pris en charge"}),a.jsx(et,{value:"accepte",children:"Accept"}),a.jsx(et,{value:"refuse",children:"Refus"})]})]})]})}),a.jsx(me,{children:a.jsx(pe,{className:"p-0",children:i?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):m.length===0?a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:o||c!=="all"?"Aucun besoin trouv avec ces critres.":"Aucun besoin enregistr."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Objet"}),a.jsx(Ee,{children:"Dpartement"}),a.jsx(Ee,{children:"Site/Projet"}),a.jsx(Ee,{children:"Urgence"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{children:"Date cration"}),a.jsx(Ee,{className:"w-[80px]",children:"Actions"})]})}),a.jsx(rn,{children:m.map(h=>{var p;const v=cIe[h.status];return a.jsxs(gt,{children:[a.jsx(Se,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:h.objet_besoin||h.title}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:h.site_projet||h.description})]})}),a.jsx(Se,{children:((p=h.department)==null?void 0:p.name)||"N/A"}),a.jsx(Se,{children:a.jsx("span",{className:"text-sm text-muted-foreground",children:h.site_projet||"-"})}),a.jsx(Se,{children:a.jsx(it,{className:dIe[h.urgency],children:dy[h.urgency]})}),a.jsx(Se,{children:a.jsxs(it,{className:uIe[h.status],children:[a.jsx(v,{className:"mr-1 h-3 w-3"}),$z[h.status]]})}),a.jsx(Se,{children:Ct(new Date(h.created_at),"dd MMM yyyy",{locale:Tt})}),a.jsx(Se,{children:a.jsx($t,{to:`/besoins/${h.id}`,children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(wp,{className:"h-4 w-4"})})})})]},h.id)})})]})})})})]})})}var Wj="Checkbox",[hIe,g7e]=Ia(Wj),[mIe,AO]=hIe(Wj);function pIe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:i,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[m,h]=Dc({prop:r,defaultProp:i??!1,onChange:c,caller:Wj}),[v,p]=_.useState(null),[g,y]=_.useState(null),b=_.useRef(!1),x=v?!!o||!!v.closest("form"):!0,j={checked:m,disabled:s,setChecked:h,control:v,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:hd(i)?!1:i,isFormControl:x,bubbleInput:g,setBubbleInput:y};return a.jsx(mIe,{scope:t,...j,children:gIe(f)?f(j):n})}var jG="CheckboxTrigger",NG=_.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},i)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:h,bubbleInput:v}=AO(jG,e),p=vr(i,d),g=_.useRef(c);return _.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const b=()=>f(g.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[s,f]),a.jsx(jt.button,{type:"button",role:"checkbox","aria-checked":hd(c)?"mixed":c,"aria-required":u,"data-state":EG(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:p,onKeyDown:lt(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:lt(r,y=>{f(b=>hd(b)?!0:!b),v&&h&&(m.current=y.isPropagationStopped(),m.current||y.stopPropagation())})})});NG.displayName=jG;var CO=_.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return a.jsx(pIe,{__scopeCheckbox:r,checked:i,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>a.jsxs(a.Fragment,{children:[a.jsx(NG,{...f,ref:t,__scopeCheckbox:r}),m&&a.jsx(kG,{__scopeCheckbox:r})]})})});CO.displayName=Wj;var SG="CheckboxIndicator",AG=_.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,s=AO(SG,r);return a.jsx(ta,{present:n||hd(s.checked)||s.checked===!0,children:a.jsx(jt.span,{"data-state":EG(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});AG.displayName=SG;var CG="CheckboxBubbleInput",kG=_.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:m,setBubbleInput:h}=AO(CG,e),v=vr(r,h),p=pO(s),g=R4(n);_.useEffect(()=>{const b=m;if(!b)return;const x=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(x,"checked").set,A=!i.current;if(p!==s&&N){const C=new Event("click",{bubbles:A});b.indeterminate=hd(s),N.call(b,hd(s)?!1:s),b.dispatchEvent(C)}},[m,p,s,i]);const y=_.useRef(hd(s)?!1:s);return a.jsx(jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:v,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});kG.displayName=CG;function gIe(e){return typeof e=="function"}function hd(e){return e==="indeterminate"}function EG(e){return hd(e)?"indeterminate":e?"checked":"unchecked"}const Gv=_.forwardRef(({className:e,...t},r)=>a.jsx(CO,{ref:r,className:rt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(AG,{className:rt("flex items-center justify-center text-current"),children:a.jsx($c,{className:"h-4 w-4"})})}));Gv.displayName=CO.displayName;const vIe={disponible:"Disponible",reserve:"Rserv",epuise:"puis"},yIe={disponible:"bg-success/10 text-success border-success/20",reserve:"bg-warning/10 text-warning border-warning/20",epuise:"bg-destructive/10 text-destructive border-destructive/20"};function xIe({onSelect:e,excludeIds:t=[],buttonText:r="Depuis le stock",buttonVariant:n="outline",buttonSize:i="sm"}){const[s,o]=_.useState(!1),[l,c]=_.useState(""),[u,d]=_.useState("__all__"),[f,m]=_.useState([]),[h,v]=_.useState([]),[p,g]=_.useState(!1);_.useEffect(()=>{s&&(b(),y())},[s]);const y=async()=>{try{const{data:A,error:C}=await fe.from("stock_categories").select("id, name, code").eq("is_active",!0).order("name",{ascending:!0});if(C)throw C;v(A||[])}catch(A){console.error("Error fetching categories:",A)}},b=async()=>{g(!0);try{const{data:A,error:C}=await fe.from("articles_stock").select("*").neq("status","epuise").order("designation",{ascending:!0});if(C)throw C;m(A||[])}catch(A){console.error("Error fetching stock:",A)}finally{g(!1)}},x=f.filter(A=>{var C,E;if(t.includes(A.id)||u!=="__all__"&&A.category_id!==u)return!1;if(l){const O=l.toLowerCase();return A.designation.toLowerCase().includes(O)||((C=A.description)==null?void 0:C.toLowerCase().includes(O))||((E=A.location)==null?void 0:E.toLowerCase().includes(O))}return!0}),j=A=>{e(A),o(!1),c("")},N=A=>Math.max(0,A.quantity_available-A.quantity_reserved);return a.jsxs(kr,{open:s,onOpenChange:o,children:[a.jsx(zj,{asChild:!0,children:a.jsxs(de,{type:"button",variant:n,size:i,children:[a.jsx(Tn,{className:"mr-2 h-4 w-4"}),r]})}),a.jsxs(_r,{className:"max-w-3xl max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Slectionner un article du stock"}),a.jsx(Yr,{children:"Choisissez un article disponible en stock pour l'ajouter  votre besoin"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par dsignation, description ou emplacement...",value:l,onChange:A=>c(A.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:u,onValueChange:d,children:[a.jsxs(Wt,{className:"w-[200px]",children:[a.jsx(pB,{className:"mr-2 h-4 w-4 text-muted-foreground"}),a.jsx(Yt,{placeholder:"Catgorie"})]}),a.jsxs(Xt,{children:[a.jsx(et,{value:"__all__",children:"Toutes les catgories"}),h.map(A=>a.jsx(et,{value:A.id,children:A.name},A.id))]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto border rounded-lg",children:p?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):x.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx(Tn,{className:"mb-2 h-8 w-8 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:l?"Aucun article trouv":"Aucun article en stock"})]}):a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Dsignation"}),a.jsx(Ee,{children:"Emplacement"}),a.jsx(Ee,{className:"text-center",children:"Disponible"}),a.jsx(Ee,{className:"text-center",children:"Unit"}),a.jsx(Ee,{className:"text-center",children:"Statut"}),a.jsx(Ee,{className:"w-[80px]"})]})}),a.jsx(rn,{children:x.map(A=>{const C=N(A),E=A.quantity_min&&C<=A.quantity_min;return a.jsxs(gt,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(Se,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:A.designation}),A.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:A.description})]})}),a.jsx(Se,{className:"text-muted-foreground",children:A.location||"-"}),a.jsx(Se,{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx("span",{className:E?"text-warning font-medium":"",children:C}),E&&a.jsx(zr,{className:"h-3 w-3 text-warning"})]})}),a.jsx(Se,{className:"text-center text-muted-foreground",children:A.unit}),a.jsx(Se,{className:"text-center",children:a.jsx(it,{variant:"outline",className:yIe[A.status],children:vIe[A.status]})}),a.jsx(Se,{children:a.jsx(de,{type:"button",size:"sm",variant:"ghost",onClick:()=>j(A),disabled:C<=0,children:a.jsx($c,{className:"h-4 w-4"})})})]},A.id)})})]})})]})]})}function bIe({onSelect:e,excludeIds:t=[],buttonText:r="Slectionner du catalogue",buttonVariant:n="outline"}){const{isAdmin:i,roles:s}=yr(),[o,l]=_.useState(!1),[c,u]=_.useState(""),[d,f]=_.useState("all"),[m,h]=_.useState([]),[v,p]=_.useState([]),[g,y]=_.useState(!1),b=i||s.some(E=>["dg","daf","responsable_logistique","agent_logistique","responsable_achats","agent_achats"].includes(E));_.useEffect(()=>{o&&(x(),j())},[o]);const x=async()=>{const{data:E,error:O}=await fe.from("stock_categories").select("id, name").eq("is_active",!0).order("name");!O&&E&&p(E)},j=async()=>{y(!0);const{data:E,error:O}=await fe.from("articles_stock").select("id, designation, description, unit, category_id").order("designation");!O&&E&&h(E),y(!1)},N=m.filter(E=>{const O=E.designation.toLowerCase().includes(c.toLowerCase())||E.description&&E.description.toLowerCase().includes(c.toLowerCase()),L=d==="all"||E.category_id===d,k=!t.includes(E.id);return O&&L&&k}),A=E=>{if(!E)return"Non catgoris";const O=v.find(L=>L.id===E);return(O==null?void 0:O.name)||"Non catgoris"},C=E=>{e({id:E.id,designation:E.designation,unit:E.unit,description:E.description}),l(!1),u(""),f("all")};return a.jsxs(kr,{open:o,onOpenChange:l,children:[a.jsx(zj,{asChild:!0,children:a.jsxs(de,{type:"button",variant:n,className:"flex-1 sm:flex-none",children:[a.jsx(Mc,{className:"mr-2 h-4 w-4"}),r]})}),a.jsxs(_r,{className:"max-w-3xl max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsxs(jr,{children:[a.jsxs(Nr,{className:"flex items-center gap-2",children:[a.jsx(Mc,{className:"h-5 w-5 text-primary"}),"Catalogue des articles"]}),a.jsx(Yr,{children:"Slectionnez un article existant pour pr-remplir votre ligne de besoin."})]}),a.jsx("div",{className:"rounded-lg border border-primary/20 bg-primary/5 p-3",children:a.jsxs("p",{className:"text-sm text-foreground",children:[a.jsx("span",{className:"font-medium",children:" Information importante :"})," Ce catalogue liste les articles rfrencs dans le systme.",a.jsx("span",{className:"text-muted-foreground",children:" La disponibilit relle et les quantits en stock seront vrifies par la Logistique lors du traitement de votre besoin."})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 py-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par dsignation...",value:c,onChange:E=>u(E.target.value),className:"pl-10"})]}),b&&a.jsxs(Kt,{value:d,onValueChange:f,children:[a.jsx(Wt,{className:"w-full sm:w-[200px]",children:a.jsx(Yt,{placeholder:"Toutes catgories"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Toutes catgories"}),v.map(E=>a.jsx(et,{value:E.id,children:E.name},E.id))]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto border rounded-md",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Dsignation"}),b&&a.jsx(Ee,{className:"w-[150px]",children:"Catgorie"}),b&&a.jsx(Ee,{className:"w-[100px]",children:"Unit"}),a.jsx(Ee,{className:"w-[100px]"})]})}),a.jsx(rn,{children:g?Array.from({length:5}).map((E,O)=>a.jsxs(gt,{children:[a.jsx(Se,{children:a.jsx(Xa,{className:"h-4 w-48"})}),b&&a.jsx(Se,{children:a.jsx(Xa,{className:"h-4 w-24"})}),b&&a.jsx(Se,{children:a.jsx(Xa,{className:"h-4 w-16"})}),a.jsx(Se,{children:a.jsx(Xa,{className:"h-8 w-20"})})]},O)):N.length===0?a.jsx(gt,{children:a.jsx(Se,{colSpan:b?4:2,className:"text-center py-8 text-muted-foreground",children:c||d!=="all"?"Aucun article ne correspond  votre recherche":"Aucun article disponible dans le catalogue"})}):N.map(E=>a.jsxs(gt,{className:"hover:bg-muted/50",children:[a.jsx(Se,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:E.designation}),E.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:E.description})]})}),b&&a.jsx(Se,{children:a.jsx(it,{variant:"outline",className:"text-xs",children:A(E.category_id)})}),b&&a.jsx(Se,{className:"text-muted-foreground",children:E.unit}),a.jsx(Se,{children:a.jsxs(de,{type:"button",size:"sm",variant:"ghost",onClick:()=>C(E),className:"h-8",children:[a.jsx(ai,{className:"mr-1 h-3 w-3"}),"Ajouter"]})})]},E.id))})]})}),a.jsx("p",{className:"text-xs text-muted-foreground pt-2",children:" Ce catalogue rfrence les articles connus. La disponibilit relle sera vrifie par la Logistique lors du traitement de votre besoin."})]})]})}const wIe=["pc","lot","jour","course","heure","unit","kg","litre","mtre","bote"];function kO({lignes:e,onChange:t,readOnly:r=!1,showStockSelector:n=!1,showCatalog:i=!1}){const s=()=>{const m={id:`temp-${crypto.randomUUID()}`,designation:"",category:"materiel",unit:"unit",quantity:1,urgency:"normale",justification:"",article_stock_id:null};t([...e,m])},o=m=>{const h={id:`temp-${crypto.randomUUID()}`,designation:m.designation,category:"materiel",unit:m.unit,quantity:1,urgency:"normale",justification:"",article_stock_id:m.id};t([...e,h])},l=(m,h,v)=>{t(e.map(p=>p.id===m?{...p,[h]:v}:p))},c=m=>{e.length>1&&t(e.filter(h=>h.id!==m))},u=m=>{t(e.map(h=>h.id===m?{...h,article_stock_id:null}:h))},d=e.filter(m=>m.article_stock_id).map(m=>m.article_stock_id),f={normale:"bg-muted text-muted-foreground",urgente:"bg-warning/10 text-warning",critique:"bg-destructive/10 text-destructive"};return r?a.jsx("div",{className:"overflow-x-auto rounded-md border",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Dsignation"}),a.jsx(Ee,{className:"w-[120px]",children:"Catgorie"}),a.jsx(Ee,{className:"w-[80px]",children:"Qt"}),a.jsx(Ee,{className:"w-[100px]",children:"Unit"}),a.jsx(Ee,{className:"w-[120px]",children:"Urgence"}),a.jsx(Ee,{children:"Justification"})]})}),a.jsx(rn,{children:e.map(m=>a.jsxs(gt,{children:[a.jsx(Se,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[m.article_stock_id&&a.jsx("span",{title:"Article du stock",children:a.jsx(Tn,{className:"h-4 w-4 text-primary"})}),m.designation]})}),a.jsx(Se,{children:a.jsx(it,{variant:"outline",children:PN[m.category]})}),a.jsx(Se,{children:m.quantity}),a.jsx(Se,{children:m.unit}),a.jsx(Se,{children:a.jsxs(it,{className:f[m.urgency],children:[m.urgency==="critique"&&a.jsx(zr,{className:"mr-1 h-3 w-3"}),dy[m.urgency].split(" ")[0]]})}),a.jsx(Se,{className:"text-sm text-muted-foreground",children:m.justification||"-"})]},m.id))})]})}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"overflow-x-auto rounded-md border",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{className:"min-w-[200px]",children:"Dsignation *"}),a.jsx(Ee,{className:"w-[130px]",children:"Catgorie *"}),a.jsx(Ee,{className:"w-[80px]",children:"Qt *"}),a.jsx(Ee,{className:"w-[110px]",children:"Unit *"}),a.jsx(Ee,{className:"w-[130px]",children:"Urgence *"}),a.jsx(Ee,{className:"min-w-[180px]",children:"Justification"}),a.jsx(Ee,{className:"w-[50px]"})]})}),a.jsx(rn,{children:e.map((m,h)=>{const v=m.urgency!=="normale",p=!!m.article_stock_id;return a.jsxs(gt,{children:[a.jsx(Se,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[p&&a.jsxs(it,{variant:"secondary",className:"gap-1 shrink-0",children:[a.jsx(Tn,{className:"h-3 w-3"}),"Stock"]}),a.jsx(De,{placeholder:"Ex: Cbles RJ45 Cat6 blinds",value:m.designation,onChange:g=>l(m.id,"designation",g.target.value),className:"min-w-[180px]",disabled:p})]}),p&&a.jsxs("button",{type:"button",onClick:()=>u(m.id),className:"text-xs text-muted-foreground hover:text-destructive flex items-center gap-1",children:[a.jsx(qQ,{className:"h-3 w-3"}),"Dlier du stock"]})]})}),a.jsx(Se,{children:a.jsxs(Kt,{value:m.category,onValueChange:g=>l(m.id,"category",g),children:[a.jsx(Wt,{className:"w-full",children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.keys(PN).map(g=>a.jsx(et,{value:g,children:PN[g]},g))})]})}),a.jsx(Se,{children:a.jsx(De,{type:"number",min:"0.01",step:"0.01",value:m.quantity,onChange:g=>l(m.id,"quantity",parseFloat(g.target.value)||1),className:"w-[70px]"})}),a.jsx(Se,{children:p?a.jsx(De,{value:m.unit,disabled:!0,className:"w-full bg-muted",title:"L'unit est dfinie par l'article du stock"}):a.jsxs(Kt,{value:m.unit,onValueChange:g=>l(m.id,"unit",g),children:[a.jsx(Wt,{className:"w-full",children:a.jsx(Yt,{})}),a.jsx(Xt,{children:wIe.map(g=>a.jsx(et,{value:g,children:g},g))})]})}),a.jsx(Se,{children:a.jsxs(Kt,{value:m.urgency,onValueChange:g=>l(m.id,"urgency",g),children:[a.jsx(Wt,{className:`w-full ${m.urgency==="critique"?"border-destructive":""}`,children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.keys(dy).map(g=>a.jsx(et,{value:g,children:dy[g].split(" ")[0]},g))})]})}),a.jsx(Se,{children:a.jsx(Kr,{placeholder:v?"Obligatoire si urgent/critique":"Optionnel",value:m.justification,onChange:g=>l(m.id,"justification",g.target.value),rows:1,className:`min-w-[160px] resize-none ${v&&!m.justification?"border-destructive":""}`})}),a.jsx(Se,{children:a.jsx(de,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(m.id),disabled:e.length===1,className:"h-8 w-8 text-muted-foreground hover:text-destructive",children:a.jsx(ds,{className:"h-4 w-4"})})})]},m.id)})})]})}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(de,{type:"button",variant:"outline",onClick:s,className:"flex-1 sm:flex-none",children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Ajouter manuellement"]}),i&&a.jsx(bIe,{onSelect:o,excludeIds:d,buttonText:"Slectionner du catalogue",buttonVariant:"secondary"}),n&&a.jsx(xIe,{onSelect:o,excludeIds:d,buttonText:"Ajouter depuis le stock",buttonVariant:"secondary"})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[" Aucun prix n'est demand. La logistique se chargera du chiffrage lors de la conversion en DA.",i&&" Les articles du catalogue gardent leur unit d'origine.",n&&" Les articles du stock gardent leur unit d'origine."]})]})}const kM=["image/png","image/jpeg","image/jpg","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],_Ie=10*1024*1024;function PG({attachments:e,onChange:t,besoinId:r,readOnly:n=!1}){const{toast:i}=qr(),[s,o]=_.useState(!1),l=v=>v?v.startsWith("image/")?mB:v==="application/pdf"?jn:ay:ay,c=v=>v?v<1024?`${v} o`:v<1024*1024?`${(v/1024).toFixed(0)} Ko`:`${(v/(1024*1024)).toFixed(1)} Mo`:"",u=v=>{if(!v)return;const p=[];Array.from(v).forEach(g=>{if(!kM.includes(g.type)){i({title:"Type de fichier non autoris",description:`"${g.name}" n'est pas un format accept.`,variant:"destructive"});return}if(g.size>_Ie){i({title:"Fichier trop volumineux",description:`"${g.name}" dpasse la limite de 10 Mo.`,variant:"destructive"});return}p.push({id:crypto.randomUUID(),file:g,file_url:URL.createObjectURL(g),file_name:g.name,file_type:g.type,file_size:g.size})}),p.length>0&&t([...e,...p])},d=v=>{v.preventDefault(),o(!0)},f=v=>{v.preventDefault(),o(!1)},m=v=>{v.preventDefault(),o(!1),u(v.dataTransfer.files)},h=v=>{t(e.filter(p=>p.id!==v))};return n?e.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune pice jointe"}):a.jsx("div",{className:"space-y-2",children:e.map(v=>{const p=l(v.file_type);return a.jsxs("a",{href:v.file_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 rounded-md border bg-muted/30 p-3 hover:bg-muted/50 transition-colors",children:[a.jsx(p,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:v.file_name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:c(v.file_size)})]})]},v.id)})}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{onDragOver:d,onDragLeave:f,onDrop:m,className:`relative rounded-md border-2 border-dashed p-6 transition-colors cursor-pointer ${s?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,children:[a.jsx("input",{type:"file",multiple:!0,accept:kM.join(","),onChange:v=>u(v.target.files),className:"absolute inset-0 opacity-0 cursor-pointer"}),a.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[a.jsx(S4,{className:"h-8 w-8 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Glissez vos fichiers ou cliquez pour slectionner"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Images, PDF, Word, Excel (max 10 Mo par fichier)"})]})]})]}),e.length>0&&a.jsx("div",{className:"space-y-2",children:e.map(v=>{const p=l(v.file_type);return a.jsxs("div",{className:"flex items-center gap-3 rounded-md border bg-muted/30 p-3",children:[a.jsx(p,{className:"h-5 w-5 text-primary shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:v.file_name}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[c(v.file_size),v.isUploading&&"  Upload en cours..."]})]}),a.jsx(de,{type:"button",variant:"ghost",size:"icon",onClick:()=>h(v.id),className:"h-8 w-8 shrink-0",children:a.jsx(hg,{className:"h-4 w-4"})})]},v.id)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Formats accepts : PNG, JPG, PDF, Word, Excel. Ces pices sont lies au besoin et transmises  la logistique."})]})}var EM=1,jIe=.9,NIe=.8,SIe=.17,oS=.1,lS=.999,AIe=.9999,CIe=.99,kIe=/[\\\/_+.#"@\[\(\{&]/,EIe=/[\\\/_+.#"@\[\(\{&]/g,PIe=/[\s-]/,OG=/[\s-]/g;function Zk(e,t,r,n,i,s,o){if(s===t.length)return i===e.length?EM:CIe;var l=`${i},${s}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(s),u=r.indexOf(c,i),d=0,f,m,h,v;u>=0;)f=Zk(e,t,r,n,u+1,s+1,o),f>d&&(u===i?f*=EM:kIe.test(e.charAt(u-1))?(f*=NIe,h=e.slice(i,u-1).match(EIe),h&&i>0&&(f*=Math.pow(lS,h.length))):PIe.test(e.charAt(u-1))?(f*=jIe,v=e.slice(i,u-1).match(OG),v&&i>0&&(f*=Math.pow(lS,v.length))):(f*=SIe,i>0&&(f*=Math.pow(lS,u-i))),e.charAt(u)!==t.charAt(s)&&(f*=AIe)),(f<oS&&r.charAt(u-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(u-1)!==n.charAt(s))&&(m=Zk(e,t,r,n,u+1,s+2,o),m*oS>f&&(f=m*oS)),f>d&&(d=f),u=r.indexOf(c,u+1);return o[l]=d,d}function PM(e){return e.toLowerCase().replace(OG," ")}function OIe(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Zk(e,t,PM(e),PM(t),0,0,{})}var Rv='[cmdk-group=""]',cS='[cmdk-group-items=""]',TIe='[cmdk-group-heading=""]',TG='[cmdk-item=""]',OM=`${TG}:not([aria-disabled="true"])`,Jk="cmdk-item-select",fm="data-value",LIe=(e,t,r)=>OIe(e,t,r),LG=_.createContext(void 0),_0=()=>_.useContext(LG),RG=_.createContext(void 0),EO=()=>_.useContext(RG),IG=_.createContext(void 0),DG=_.forwardRef((e,t)=>{let r=hm(()=>{var I,$;return{search:"",value:($=(I=e.value)!=null?I:e.defaultValue)!=null?$:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=hm(()=>new Set),i=hm(()=>new Map),s=hm(()=>new Map),o=hm(()=>new Set),l=MG(e),{label:c,children:u,value:d,onValueChange:f,filter:m,shouldFilter:h,loop:v,disablePointerSelection:p=!1,vimBindings:g=!0,...y}=e,b=$s(),x=$s(),j=$s(),N=_.useRef(null),A=WIe();mh(()=>{if(d!==void 0){let I=d.trim();r.current.value=I,C.emit()}},[d]),mh(()=>{A(6,B)},[]);let C=_.useMemo(()=>({subscribe:I=>(o.current.add(I),()=>o.current.delete(I)),snapshot:()=>r.current,setState:(I,$,U)=>{var H,re,X,he;if(!Object.is(r.current[I],$)){if(r.current[I]=$,I==="search")T(),L(),A(1,k);else if(I==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let se=document.getElementById(j);se?se.focus():(H=document.getElementById(b))==null||H.focus()}if(A(7,()=>{var se;r.current.selectedItemId=(se=M())==null?void 0:se.id,C.emit()}),U||A(5,B),((re=l.current)==null?void 0:re.value)!==void 0){let se=$??"";(he=(X=l.current).onValueChange)==null||he.call(X,se);return}}C.emit()}},emit:()=>{o.current.forEach(I=>I())}}),[]),E=_.useMemo(()=>({value:(I,$,U)=>{var H;$!==((H=s.current.get(I))==null?void 0:H.value)&&(s.current.set(I,{value:$,keywords:U}),r.current.filtered.items.set(I,O($,U)),A(2,()=>{L(),C.emit()}))},item:(I,$)=>(n.current.add(I),$&&(i.current.has($)?i.current.get($).add(I):i.current.set($,new Set([I]))),A(3,()=>{T(),L(),r.current.value||k(),C.emit()}),()=>{s.current.delete(I),n.current.delete(I),r.current.filtered.items.delete(I);let U=M();A(4,()=>{T(),(U==null?void 0:U.getAttribute("id"))===I&&k(),C.emit()})}),group:I=>(i.current.has(I)||i.current.set(I,new Set),()=>{s.current.delete(I),i.current.delete(I)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:j,labelId:x,listInnerRef:N}),[]);function O(I,$){var U,H;let re=(H=(U=l.current)==null?void 0:U.filter)!=null?H:LIe;return I?re(I,r.current.search,$):0}function L(){if(!r.current.search||l.current.shouldFilter===!1)return;let I=r.current.filtered.items,$=[];r.current.filtered.groups.forEach(H=>{let re=i.current.get(H),X=0;re.forEach(he=>{let se=I.get(he);X=Math.max(se,X)}),$.push([H,X])});let U=N.current;G().sort((H,re)=>{var X,he;let se=H.getAttribute("id"),ue=re.getAttribute("id");return((X=I.get(ue))!=null?X:0)-((he=I.get(se))!=null?he:0)}).forEach(H=>{let re=H.closest(cS);re?re.appendChild(H.parentElement===re?H:H.closest(`${cS} > *`)):U.appendChild(H.parentElement===U?H:H.closest(`${cS} > *`))}),$.sort((H,re)=>re[1]-H[1]).forEach(H=>{var re;let X=(re=N.current)==null?void 0:re.querySelector(`${Rv}[${fm}="${encodeURIComponent(H[0])}"]`);X==null||X.parentElement.appendChild(X)})}function k(){let I=G().find(U=>U.getAttribute("aria-disabled")!=="true"),$=I==null?void 0:I.getAttribute(fm);C.setState("value",$||void 0)}function T(){var I,$,U,H;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let re=0;for(let X of n.current){let he=($=(I=s.current.get(X))==null?void 0:I.value)!=null?$:"",se=(H=(U=s.current.get(X))==null?void 0:U.keywords)!=null?H:[],ue=O(he,se);r.current.filtered.items.set(X,ue),ue>0&&re++}for(let[X,he]of i.current)for(let se of he)if(r.current.filtered.items.get(se)>0){r.current.filtered.groups.add(X);break}r.current.filtered.count=re}function B(){var I,$,U;let H=M();H&&(((I=H.parentElement)==null?void 0:I.firstChild)===H&&((U=($=H.closest(Rv))==null?void 0:$.querySelector(TIe))==null||U.scrollIntoView({block:"nearest"})),H.scrollIntoView({block:"nearest"}))}function M(){var I;return(I=N.current)==null?void 0:I.querySelector(`${TG}[aria-selected="true"]`)}function G(){var I;return Array.from(((I=N.current)==null?void 0:I.querySelectorAll(OM))||[])}function z(I){let $=G()[I];$&&C.setState("value",$.getAttribute(fm))}function D(I){var $;let U=M(),H=G(),re=H.findIndex(he=>he===U),X=H[re+I];($=l.current)!=null&&$.loop&&(X=re+I<0?H[H.length-1]:re+I===H.length?H[0]:H[re+I]),X&&C.setState("value",X.getAttribute(fm))}function q(I){let $=M(),U=$==null?void 0:$.closest(Rv),H;for(;U&&!H;)U=I>0?qIe(U,Rv):UIe(U,Rv),H=U==null?void 0:U.querySelector(OM);H?C.setState("value",H.getAttribute(fm)):D(I)}let K=()=>z(G().length-1),ae=I=>{I.preventDefault(),I.metaKey?K():I.altKey?q(1):D(1)},J=I=>{I.preventDefault(),I.metaKey?z(0):I.altKey?q(-1):D(-1)};return _.createElement(jt.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:I=>{var $;($=y.onKeyDown)==null||$.call(y,I);let U=I.nativeEvent.isComposing||I.keyCode===229;if(!(I.defaultPrevented||U))switch(I.key){case"n":case"j":{g&&I.ctrlKey&&ae(I);break}case"ArrowDown":{ae(I);break}case"p":case"k":{g&&I.ctrlKey&&J(I);break}case"ArrowUp":{J(I);break}case"Home":{I.preventDefault(),z(0);break}case"End":{I.preventDefault(),K();break}case"Enter":{I.preventDefault();let H=M();if(H){let re=new Event(Jk);H.dispatchEvent(re)}}}}},_.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:VIe},c),Hj(e,I=>_.createElement(RG.Provider,{value:C},_.createElement(LG.Provider,{value:E},I))))}),RIe=_.forwardRef((e,t)=>{var r,n;let i=$s(),s=_.useRef(null),o=_.useContext(IG),l=_0(),c=MG(e),u=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;mh(()=>{if(!u)return l.item(i,o==null?void 0:o.id)},[u]);let d=$G(i,s,[e.value,e.children,s],e.keywords),f=EO(),m=Sd(A=>A.value&&A.value===d.current),h=Sd(A=>u||l.filter()===!1?!0:A.search?A.filtered.items.get(i)>0:!0);_.useEffect(()=>{let A=s.current;if(!(!A||e.disabled))return A.addEventListener(Jk,v),()=>A.removeEventListener(Jk,v)},[h,e.onSelect,e.disabled]);function v(){var A,C;p(),(C=(A=c.current).onSelect)==null||C.call(A,d.current)}function p(){f.setState("value",d.current,!0)}if(!h)return null;let{disabled:g,value:y,onSelect:b,forceMount:x,keywords:j,...N}=e;return _.createElement(jt.div,{ref:Qf(s,t),...N,id:i,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!m,"data-disabled":!!g,"data-selected":!!m,onPointerMove:g||l.getDisablePointerSelection()?void 0:p,onClick:g?void 0:v},e.children)}),IIe=_.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:i,...s}=e,o=$s(),l=_.useRef(null),c=_.useRef(null),u=$s(),d=_0(),f=Sd(h=>i||d.filter()===!1?!0:h.search?h.filtered.groups.has(o):!0);mh(()=>d.group(o),[]),$G(o,l,[e.value,e.heading,c]);let m=_.useMemo(()=>({id:o,forceMount:i}),[i]);return _.createElement(jt.div,{ref:Qf(l,t),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&_.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),Hj(e,h=>_.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},_.createElement(IG.Provider,{value:m},h))))}),DIe=_.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,i=_.useRef(null),s=Sd(o=>!o.search);return!r&&!s?null:_.createElement(jt.div,{ref:Qf(i,t),...n,"cmdk-separator":"",role:"separator"})}),MIe=_.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,i=e.value!=null,s=EO(),o=Sd(u=>u.search),l=Sd(u=>u.selectedItemId),c=_0();return _.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),_.createElement(jt.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:i?e.value:o,onChange:u=>{i||s.setState("search",u.target.value),r==null||r(u.target.value)}})}),$Ie=_.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...i}=e,s=_.useRef(null),o=_.useRef(null),l=Sd(u=>u.selectedItemId),c=_0();return _.useEffect(()=>{if(o.current&&s.current){let u=o.current,d=s.current,f,m=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let h=u.offsetHeight;d.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(f),m.unobserve(u)}}},[]),_.createElement(jt.div,{ref:Qf(s,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},Hj(e,u=>_.createElement("div",{ref:Qf(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),FIe=_.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:i,contentClassName:s,container:o,...l}=e;return _.createElement(bO,{open:r,onOpenChange:n},_.createElement(wO,{container:o},_.createElement(Fj,{"cmdk-overlay":"",className:i}),_.createElement(Bj,{"aria-label":e.label,"cmdk-dialog":"",className:s},_.createElement(DG,{ref:t,...l}))))}),BIe=_.forwardRef((e,t)=>Sd(r=>r.filtered.count===0)?_.createElement(jt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),zIe=_.forwardRef((e,t)=>{let{progress:r,children:n,label:i="Loading...",...s}=e;return _.createElement(jt.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Hj(e,o=>_.createElement("div",{"aria-hidden":!0},o)))}),ia=Object.assign(DG,{List:$Ie,Item:RIe,Input:MIe,Group:IIe,Separator:DIe,Dialog:FIe,Empty:BIe,Loading:zIe});function qIe(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function UIe(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function MG(e){let t=_.useRef(e);return mh(()=>{t.current=e}),t}var mh=typeof window>"u"?_.useEffect:_.useLayoutEffect;function hm(e){let t=_.useRef();return t.current===void 0&&(t.current=e()),t}function Sd(e){let t=EO(),r=()=>e(t.snapshot());return _.useSyncExternalStore(t.subscribe,r,r)}function $G(e,t,r,n=[]){let i=_.useRef(),s=_0();return mh(()=>{var o;let l=(()=>{var u;for(let d of r){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():i.current}})(),c=n.map(u=>u.trim());s.value(e,l,c),(o=t.current)==null||o.setAttribute(fm,l),i.current=l}),i}var WIe=()=>{let[e,t]=_.useState(),r=hm(()=>new Map);return mh(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,i)=>{r.current.set(n,i),t({})}};function HIe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Hj({asChild:e,children:t},r){return e&&_.isValidElement(t)?_.cloneElement(HIe(t),{ref:t.ref},r(t.props.children)):r(t)}var VIe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const FG=_.forwardRef(({className:e,...t},r)=>a.jsx(ia,{ref:r,className:rt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));FG.displayName=ia.displayName;const BG=_.forwardRef(({className:e,...t},r)=>a.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[a.jsx(Xi,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),a.jsx(ia.Input,{ref:r,className:rt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));BG.displayName=ia.Input.displayName;const zG=_.forwardRef(({className:e,...t},r)=>a.jsx(ia.List,{ref:r,className:rt("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));zG.displayName=ia.List.displayName;const qG=_.forwardRef((e,t)=>a.jsx(ia.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));qG.displayName=ia.Empty.displayName;const Qk=_.forwardRef(({className:e,...t},r)=>a.jsx(ia.Group,{ref:r,className:rt("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Qk.displayName=ia.Group.displayName;const GIe=_.forwardRef(({className:e,...t},r)=>a.jsx(ia.Separator,{ref:r,className:rt("-mx-1 h-px bg-border",e),...t}));GIe.displayName=ia.Separator.displayName;const eE=_.forwardRef(({className:e,...t},r)=>a.jsx(ia.Item,{ref:r,className:rt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));eE.displayName=ia.Item.displayName;function H2({value:e,onChange:t,placeholder:r="Slectionner un projet...",disabled:n=!1,allowEmpty:i=!0}){const[s,o]=_.useState(!1),[l,c]=_.useState([]),[u,d]=_.useState(!1);_.useEffect(()=>{f()},[]);const f=async()=>{d(!0);try{const{data:p,error:g}=await fe.from("projets").select("id, code, name, client, location, status").eq("is_active",!0).order("code",{ascending:!0});if(g)throw g;c(p||[])}catch(p){console.error("Error fetching projets:",p)}finally{d(!1)}},m=l.find(p=>p.id===e),h=l.reduce((p,g)=>{const y=g.status||"actif";return p[y]||(p[y]=[]),p[y].push(g),p},{}),v={actif:"Projets actifs",en_cours:"En cours",termine:"Termins",suspendu:"Suspendus"};return a.jsxs(hz,{open:s,onOpenChange:o,children:[a.jsx(mz,{asChild:!0,children:a.jsxs(de,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-full justify-between font-normal",disabled:n,children:[m?a.jsxs("span",{className:"flex items-center gap-2 truncate",children:[a.jsx(zy,{className:"h-4 w-4 shrink-0 text-primary"}),a.jsx("span",{className:"font-mono font-medium",children:m.code}),a.jsx("span",{className:"text-muted-foreground",children:""}),a.jsx("span",{className:"truncate",children:m.name})]}):a.jsx("span",{className:"text-muted-foreground",children:r}),a.jsx(IQ,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(rP,{className:"w-[400px] p-0",align:"start",children:a.jsxs(FG,{children:[a.jsx(BG,{placeholder:"Rechercher par code ou nom..."}),a.jsx(zG,{children:u?a.jsx("div",{className:"flex items-center justify-center py-6",children:a.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):a.jsxs(a.Fragment,{children:[a.jsx(qG,{children:"Aucun projet trouv."}),i&&a.jsx(Qk,{children:a.jsxs(eE,{value:"__none__",onSelect:()=>{t(""),o(!1)},children:[a.jsx($c,{className:rt("mr-2 h-4 w-4",e?"opacity-0":"opacity-100")}),a.jsx("span",{className:"text-muted-foreground italic",children:"Aucun projet"})]})}),Object.entries(h).map(([p,g])=>a.jsx(Qk,{heading:v[p]||p,children:g.map(y=>a.jsxs(eE,{value:`${y.code} ${y.name} ${y.client||""}`,onSelect:()=>{t(y.id,y),o(!1)},children:[a.jsx($c,{className:rt("mr-2 h-4 w-4",e===y.id?"opacity-100":"opacity-0")}),a.jsx("span",{className:"font-mono font-medium mr-2",children:y.code}),a.jsx("span",{className:"truncate",children:y.name}),y.client&&a.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",y.client,")"]})]},y.id))},p))]})})]})})]})}function KIe(){var se;const{user:e,profile:t,roles:r}=yr(),{toast:n}=qr(),i=yi(),[s,o]=_.useState(!1);_.useState(1);const[l,c]=_.useState(""),[u,d]=_.useState(""),[f,m]=_.useState("achat"),[h,v]=_.useState(""),[p,g]=_.useState(""),[y,b]=_.useState([{id:crypto.randomUUID(),designation:"",category:"materiel",unit:"unit",quantity:1,urgency:"normale",justification:"",article_stock_id:null}]),[x,j]=_.useState(!1),[N,A]=_.useState(""),[C,E]=_.useState(""),[O,L]=_.useState(""),[k,T]=_.useState(""),[B,M]=_.useState(!1),[G,z]=_.useState(!1),[D,q]=_.useState(""),[K,ae]=_.useState([]),[J,I]=_.useState(!1),$=r.some(ue=>Fz.includes(ue)),U=ue=>{const ge=ue.toLowerCase().trim();if(ge.length<10)return g("L'objet doit contenir au moins 10 caractres"),!1;for(const ve of Hue)if(ge===ve||ge.length<20&&ge.includes(ve))return g(`"${ve}" n'est pas un objet valide. Soyez plus prcis.`),!1;return g(""),!0},H=ue=>{v(ue),ue.length>5?U(ue):g("")},re=()=>{for(const ue of y){if(!ue.designation.trim())return n({title:"Erreur",description:"Toutes les lignes doivent avoir une dsignation.",variant:"destructive"}),!1;if(ue.quantity<=0)return n({title:"Erreur",description:"Les quantits doivent tre suprieures  0.",variant:"destructive"}),!1;if((ue.urgency==="urgente"||ue.urgency==="critique")&&!ue.justification.trim())return n({title:"Justification requise",description:`La ligne "${ue.designation}" ncessite une justification pour le niveau d'urgence slectionn.`,variant:"destructive"}),!1}return!0},X=async ue=>{if(ue.preventDefault(),!U(h)){n({title:"Erreur",description:"L'objet du besoin n'est pas valide.",variant:"destructive"});return}if(re()){if(!J){n({title:"Confirmation requise",description:"Vous devez confirmer que ce besoin est exact et exploitable.",variant:"destructive"});return}if(!(t!=null&&t.department_id)){n({title:"Erreur",description:"Vous devez tre rattach  un dpartement pour crer un besoin.",variant:"destructive"});return}o(!0);try{const ge={normale:0,urgente:1,critique:2},ve=y.reduce((_e,Qe)=>ge[Qe.urgency]>ge[_e]?Qe.urgency:_e,"normale"),{data:te,error:Ne}=await fe.from("besoins").insert({title:h.substring(0,200),description:`Type: ${B1[f]}
${y.map(_e=>`- ${_e.designation} (${_e.quantity} ${_e.unit})`).join(`
`)}`,category:"materiel",urgency:ve,desired_date:O||null,user_id:e==null?void 0:e.id,department_id:t.department_id,projet_id:u||null,site_projet:l.trim(),objet_besoin:h.trim(),fournisseur_impose:x,fournisseur_impose_nom:x?N.trim():null,fournisseur_impose_contact:x?C.trim():null,lieu_livraison:k.trim()||null,besoin_vehicule:B,besoin_avance_caisse:G,avance_caisse_montant:G&&D?parseFloat(D):null,confirmation_engagement:J}).select().single();if(Ne)throw Ne;const Y=te.id,Le=y.map(_e=>({besoin_id:Y,designation:_e.designation.trim(),category:_e.category,unit:_e.unit,quantity:_e.quantity,urgency:_e.urgency,justification:_e.justification.trim()||null,article_stock_id:_e.article_stock_id||null})),{data:ye,error:we}=await fe.from("besoin_lignes").insert(Le).select();if(we)throw we;if(!ye||ye.length!==Le.length)throw console.error("Lignes insert mismatch:",{expected:Le.length,inserted:ye==null?void 0:ye.length}),new Error("Impossible de crer les lignes de besoin. Permissions insuffisantes.");if(K.length>0){for(const _e of K)if(_e.file){const Qe=_e.file_name.split(".").pop(),We=`${Y}/${Date.now()}-${crypto.randomUUID()}.${Qe}`,{error:Ge}=await fe.storage.from("besoins-attachments").upload(We,_e.file);if(Ge){console.error("Upload error:",Ge);continue}const{data:Ke}=fe.storage.from("besoins-attachments").getPublicUrl(We);await fe.from("besoin_attachments").insert({besoin_id:Y,file_url:Ke.publicUrl,file_name:_e.file_name,file_type:_e.file_type,file_size:_e.file_size})}}n({title:"Besoin cr avec succs",description:"Votre besoin a t transmis  la Logistique pour traitement."}),i(`/besoins/${Y}`)}catch(ge){console.error("Error creating besoin:",ge),n({title:"Erreur",description:ge.message||"Impossible de crer le besoin.",variant:"destructive"})}finally{o(!1)}}};if(!$)return a.jsx(st,{children:a.jsx(Ji,{message:"Vous n'tes pas autoris  crer des besoins internes. Seuls les responsables de dpartement peuvent exprimer un besoin."})});const he=y.some(ue=>ue.urgency==="critique");return a.jsx(st,{children:a.jsxs("div",{className:"mx-auto max-w-3xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/besoins",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Nouveau besoin interne"}),a.jsx("p",{className:"text-muted-foreground",children:"Dcrivez votre besoin de manire claire et exploitable"})]})]}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(qy,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium text-foreground",children:"Ce besoin n'engage aucun achat ni paiement"}),a.jsx("p",{className:"text-muted-foreground",children:"Il s'agit d'une expression formelle transmise  la Logistique. Vous n'avez pas  indiquer de prix. La conversion en Demande d'Achat sera faite par la Logistique."})]})]})}),a.jsxs("form",{onSubmit:X,className:"space-y-6",children:[a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground",children:"A"}),"Identit du besoin"]}),a.jsx(wn,{children:"Informations auto-remplies et contexte"})]}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Demandeur"}),a.jsx(De,{value:`${(t==null?void 0:t.first_name)||""} ${(t==null?void 0:t.last_name)||""}`.trim()||(t==null?void 0:t.email)||"Inconnu",disabled:!0,className:"bg-muted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Dpartement"}),a.jsx(De,{value:((se=t==null?void 0:t.department)==null?void 0:se.name)||"Non assign",disabled:!0,className:"bg-muted"})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Date de la demande"}),a.jsx(De,{value:new Date().toLocaleDateString("fr-FR"),disabled:!0,className:"bg-muted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"projet",children:"Projet rattach"}),a.jsx(H2,{value:u,onChange:(ue,ge)=>{d(ue),ge!=null&&ge.location&&!l.trim()&&c(ge.location)},placeholder:"Slectionner un projet..."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"site_projet",children:"Site / Lieu concern"}),a.jsx(De,{id:"site_projet",placeholder:"Ex: Chantier Douala Nord, Bureau DG, Atelier...",value:l,onChange:ue=>c(ue.target.value)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"S'auto-complte si un projet avec localisation est slectionn"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"type_besoin",children:"Type de besoin *"}),a.jsxs(Kt,{value:f,onValueChange:ue=>m(ue),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.keys(B1).map(ue=>a.jsx(et,{value:ue,children:B1[ue]},ue))})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Le type conditionne certains champs ultrieurs"})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground",children:"B"}),"Objet du besoin"]}),a.jsx(wn,{children:"Rsum clair et prcis (max 120 caractres)"})]}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"objet_besoin",children:"Objet du besoin *"}),a.jsx(De,{id:"objet_besoin",placeholder:ON[Math.floor(Math.random()*ON.length)],value:h,onChange:ue=>H(ue.target.value.slice(0,120)),maxLength:120,className:p?"border-destructive":"",required:!0}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("p",{className:`text-xs ${p?"text-destructive":"text-muted-foreground"}`,children:p||`${h.length}/120 caractres`})})]}),a.jsxs("div",{className:"rounded-md bg-muted/50 p-3",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Exemples valides :"}),a.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:ON.map((ue,ge)=>a.jsxs("li",{children:[" ",ue]},ge))})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground",children:"C"}),"Lignes de besoin"]}),a.jsx(wn,{children:"Dtaillez chaque article ou service ncessaire"})]}),a.jsx(pe,{children:a.jsx(kO,{lignes:y,onChange:b,showCatalog:!0})})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground",children:"D"}),"Contraintes logistiques"]}),a.jsx(wn,{children:"Informations complmentaires pour le traitement"})]}),a.jsxs(pe,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gv,{id:"fournisseur_impose",checked:x,onCheckedChange:ue=>j(ue===!0)}),a.jsx(Pe,{htmlFor:"fournisseur_impose",className:"cursor-pointer",children:"Fournisseur impos"})]}),x&&a.jsxs("div",{className:"ml-6 grid gap-3 sm:grid-cols-2",children:[a.jsx(De,{placeholder:"Nom du fournisseur",value:N,onChange:ue=>A(ue.target.value)}),a.jsx(De,{placeholder:"Contact (tl, email...)",value:C,onChange:ue=>E(ue.target.value)})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"date_souhaitee",children:"Date souhaite"}),a.jsx(De,{id:"date_souhaitee",type:"date",value:O,onChange:ue=>L(ue.target.value),min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"lieu_livraison",children:"Lieu de livraison / excution"}),a.jsx(De,{id:"lieu_livraison",placeholder:"Ex: Bureau DG, Chantier Zone A...",value:k,onChange:ue=>T(ue.target.value)})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gv,{id:"besoin_vehicule",checked:B,onCheckedChange:ue=>M(ue===!0)}),a.jsx(Pe,{htmlFor:"besoin_vehicule",className:"cursor-pointer",children:"Besoin de vhicule"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gv,{id:"besoin_avance",checked:G,onCheckedChange:ue=>z(ue===!0)}),a.jsx(Pe,{htmlFor:"besoin_avance",className:"cursor-pointer",children:"Besoin d'avance de caisse"})]}),G&&a.jsx(De,{type:"number",placeholder:"Montant estimatif (non engageant)",value:D,onChange:ue=>q(ue.target.value),className:"ml-6"})]})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground",children:"E"}),"Pices jointes"]}),a.jsx(wn,{children:"Images, devis, captures d'cran, documents PDF"})]}),a.jsx(pe,{children:a.jsx(PG,{attachments:K,onChange:ae})})]}),a.jsxs(me,{className:he?"border-destructive/50":"",children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground",children:"F"}),"Validation & Engagement"]})}),a.jsxs(pe,{className:"space-y-4",children:[he&&a.jsx(me,{className:"border-destructive/50 bg-destructive/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-3",children:[a.jsx(zr,{className:"mt-0.5 h-5 w-5 shrink-0 text-destructive"}),a.jsxs("p",{className:"text-sm text-destructive",children:[a.jsx("strong",{children:"Attention :"}),' Ce besoin contient une ou plusieurs lignes marques comme "Critiques". Un usage abusif de ce niveau peut entraner un rejet systmatique.']})]})}),a.jsxs("div",{className:"flex items-start space-x-3 rounded-md border p-4",children:[a.jsx(Gv,{id:"confirmation",checked:J,onCheckedChange:ue=>I(ue===!0),className:"mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(Pe,{htmlFor:"confirmation",className:"cursor-pointer font-medium",children:"Je confirme que ce besoin est exact et exploitable par la logistique"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"En cochant cette case, vous attestez que les informations fournies sont compltes et sincres."})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx($t,{to:"/besoins",className:"flex-1 sm:flex-none",children:a.jsx(de,{type:"button",variant:"outline",className:"w-full",children:"Annuler"})}),a.jsx(de,{type:"submit",disabled:s||!J,className:"flex-1 sm:flex-none",children:s?"Envoi en cours...":a.jsxs(a.Fragment,{children:[a.jsx(DQ,{className:"mr-2 h-4 w-4"}),"Soumettre le besoin"]})})]})]})]})]})]})})}function TM({besoinId:e,besoin:t,onUpdate:r,isLocked:n}){const{toast:i}=qr(),[s,o]=_.useState(!1),[l,c]=_.useState(!1),[u,d]=_.useState(!1),[f,m]=_.useState({objet_besoin:t.objet_besoin||t.title||"",description:t.description||"",besoin_type:t.besoin_type||"article",urgency:t.urgency||"normale",lieu_livraison:t.lieu_livraison||"",site_projet:t.site_projet||"",desired_date:t.desired_date||""}),[h,v]=_.useState([]);_.useEffect(()=>{t.lignes&&v(t.lignes.map(g=>({id:g.id,designation:g.designation,category:g.category,unit:g.unit,quantity:g.quantity,urgency:g.urgency,justification:g.justification||"",article_stock_id:g.article_stock_id||null})))},[t.lignes]);const p=async()=>{c(!0);try{const{error:g}=await fe.from("besoins").update({objet_besoin:f.objet_besoin,title:f.objet_besoin,description:f.description,besoin_type:f.besoin_type,urgency:f.urgency,lieu_livraison:f.lieu_livraison||null,site_projet:f.site_projet||null,desired_date:f.desired_date||null,updated_at:new Date().toISOString()}).eq("id",e);if(g)throw g;const y=h.filter(b=>b.id&&!b.id.startsWith("temp-")).map(b=>b.id);if(t.lignes){const b=t.lignes.filter(x=>!y.includes(x.id)).map(x=>x.id);if(b.length>0){const{error:x}=await fe.from("besoin_lignes").delete().in("id",b);if(x)throw x}}for(const b of h)if(b.id&&!b.id.startsWith("temp-")){const{error:x}=await fe.from("besoin_lignes").update({designation:b.designation,category:b.category,unit:b.unit,quantity:b.quantity,urgency:b.urgency,justification:b.justification||null,article_stock_id:b.article_stock_id||null}).eq("id",b.id);if(x)throw x}else{const{error:x}=await fe.from("besoin_lignes").insert({besoin_id:e,designation:b.designation,category:b.category,unit:b.unit,quantity:b.quantity,urgency:b.urgency,justification:b.justification||null,article_stock_id:b.article_stock_id||null});if(x)throw x}i({title:"Besoin modifi",description:"Les modifications ont t enregistres."}),o(!1),r()}catch(g){console.error("Error saving:",g),i({title:"Erreur",description:g.message,variant:"destructive"})}finally{c(!1)}};return n?a.jsx(me,{className:"border-muted bg-muted/30",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(Uy,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-muted-foreground",children:"Besoin verrouill"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ce besoin a t converti en DA ou BL et ne peut plus tre modifi."})]})]})}):s?a.jsxs("div",{className:"space-y-6",children:[a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(b_,{className:"h-5 w-5 text-warning"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-warning",children:"Mode dition actif"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Modifiez les informations puis enregistrez. Le besoin sera verrouill aprs conversion."})]})]})}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{children:"Informations du besoin"}),a.jsx(wn,{children:"Normalisez les informations avant conversion"})]}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx(Pe,{children:"Objet du besoin *"}),a.jsx(De,{value:f.objet_besoin,onChange:g=>m({...f,objet_besoin:g.target.value}),placeholder:"Titre clair et concis"})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Type de besoin"}),a.jsxs(Kt,{value:f.besoin_type,onValueChange:g=>m({...f,besoin_type:g}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.entries(B1).map(([g,y])=>a.jsx(et,{value:g,children:y},g))})]})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Urgence"}),a.jsxs(Kt,{value:f.urgency,onValueChange:g=>m({...f,urgency:g}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.entries(dy).map(([g,y])=>a.jsx(et,{value:g,children:y},g))})]})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Lieu de livraison"}),a.jsx(De,{value:f.lieu_livraison,onChange:g=>m({...f,lieu_livraison:g.target.value}),placeholder:"Adresse ou site"})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Site / Projet"}),a.jsx(De,{value:f.site_projet,onChange:g=>m({...f,site_projet:g.target.value})})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Date souhaite"}),a.jsx(De,{type:"date",value:f.desired_date,onChange:g=>m({...f,desired_date:g.target.value})})]})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Description"}),a.jsx(Kr,{value:f.description,onChange:g=>m({...f,description:g.target.value}),rows:3})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{children:"Lignes de besoin"}),a.jsx(wn,{children:"Ajoutez, modifiez ou supprimez les articles demands"})]}),a.jsx(pe,{children:a.jsx(kO,{lignes:h,onChange:v,readOnly:!1,showStockSelector:!0})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Pices jointes"})}),a.jsx(pe,{children:a.jsx(PG,{attachments:(t.attachments||[]).map(g=>({id:g.id,file_url:g.file_url,file_name:g.file_name,file_type:g.file_type,file_size:g.file_size})),onChange:()=>{},readOnly:!0})})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsxs(de,{variant:"outline",onClick:()=>o(!1),children:[a.jsx(hg,{className:"mr-2 h-4 w-4"}),"Annuler"]}),a.jsxs(de,{onClick:()=>d(!0),disabled:l,children:[a.jsx(N4,{className:"mr-2 h-4 w-4"}),"Enregistrer les modifications"]})]}),a.jsx(kr,{open:u,onOpenChange:d,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Confirmer les modifications"}),a.jsx(Yr,{children:"Les modifications seront enregistres et traces dans l'historique."})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),a.jsx(de,{onClick:()=>{d(!1),p()},disabled:l,children:"Confirmer"})]})]})})]}):a.jsx(me,{className:"border-primary/50 bg-primary/5",children:a.jsxs(pe,{className:"flex items-center justify-between py-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Bc,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Mode dition Logistique"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Vous pouvez normaliser ce besoin avant conversion."})]})]}),a.jsxs(de,{onClick:()=>o(!0),children:[a.jsx(Bc,{className:"mr-2 h-4 w-4"}),"Modifier le besoin"]})]})})}const YIe={besoin:"ce besoin",da:"cette demande d'achat",bl:"ce bon de livraison"};function PO({open:e,onOpenChange:t,onConfirm:r,title:n,description:i,entityType:s="da",isLoading:o=!1}){const[l,c]=_.useState(""),u=()=>{l.trim().length>=10&&(r(l.trim()),c(""))},d=()=>{c(""),t(!1)},f=YIe[s];return a.jsx(Yo,{open:e,onOpenChange:t,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsxs(fo,{className:"flex items-center gap-2 text-destructive",children:[a.jsx(wl,{className:"h-5 w-5"}),n||`Annuler ${f}`]}),a.jsx(ho,{children:i||`Cette action est irrversible. L'annulation de ${f} sera enregistre dans le journal d'audit avec votre identit et la date.`})]}),a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{htmlFor:"cancel-reason",children:["Motif d'annulation ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(Kr,{id:"cancel-reason",placeholder:"Expliquez le motif de cette annulation (minimum 10 caractres)...",value:l,onChange:m=>c(m.target.value),rows:3,className:"resize-none"}),l.length>0&&l.length<10&&a.jsxs("p",{className:"text-xs text-destructive",children:["Le motif doit contenir au moins 10 caractres (",l.length,"/10)"]})]})}),a.jsxs(uo,{children:[a.jsx(mo,{onClick:d,disabled:o,children:"Annuler"}),a.jsx(de,{variant:"destructive",onClick:u,disabled:l.trim().length<10||o,children:o?"Annulation...":"Confirmer l'annulation"})]})]})})}const XIe={cree:"bg-muted text-muted-foreground",pris_en_charge:"bg-warning/10 text-warning border-warning/20",accepte:"bg-success/10 text-success border-success/20",refuse:"bg-destructive/10 text-destructive border-destructive/20",retourne:"bg-orange-500/10 text-orange-600 border-orange-500/20",annulee:"bg-muted text-muted-foreground line-through"},ZIe={cree:Yn,pris_en_charge:zr,accepte:Br,refuse:Er,retourne:I1,annulee:Er};function JIe(){var ve,te,Ne,Y,Le,ye;const{id:e}=Qc(),t=yi(),{user:r,roles:n,isAdmin:i}=yr(),{toast:s}=qr(),[o,l]=_.useState(null),[c,u]=_.useState(!0),[d,f]=_.useState(!1),[m,h]=_.useState(!1),[v,p]=_.useState(!1),[g,y]=_.useState(!1),[b,x]=_.useState(!1),[j,N]=_.useState(!1),[A,C]=_.useState(""),[E,O]=_.useState(""),[L,k]=_.useState(""),[T,B]=_.useState(!1),M=n.some(we=>["responsable_logistique","agent_logistique"].includes(we));n.includes("dg");const G=(o==null?void 0:o.user_id)===(r==null?void 0:r.id);G&&((o==null?void 0:o.status)==="cree"||(o==null||o.status)),G&&(o==null||o.status);const z=M||i,D=i;_.useEffect(()=>{e&&K()},[e]),_.useEffect(()=>{(o==null?void 0:o.status)==="accepte"&&e&&q()},[o==null?void 0:o.status,e]);const q=async()=>{const{data:we}=await fe.rpc("can_transform_besoin",{_besoin_id:e});B(we===!0)},K=async()=>{try{const{data:we,error:_e}=await fe.from("besoins").select(`
          *,
          department:departments(id, name),
          user:profiles!besoins_user_id_fkey(id, first_name, last_name, email),
          taken_by_profile:profiles!besoins_taken_by_fkey(id, first_name, last_name),
          decided_by_profile:profiles!besoins_decided_by_fkey(id, first_name, last_name)
        `).eq("id",e).maybeSingle();if(_e||!we){s({title:"Erreur",description:"Besoin introuvable.",variant:"destructive"}),t("/besoins");return}const{data:Qe}=await fe.from("besoin_lignes").select("*").eq("besoin_id",e).order("created_at",{ascending:!0}),{data:We}=await fe.from("besoin_attachments").select("*").eq("besoin_id",e).order("created_at",{ascending:!0});l({...we,lignes:Qe||[],attachments:We||[]})}catch(we){console.error("Error:",we)}finally{u(!1)}},ae=async()=>{if(o){f(!0);try{const{error:we}=await fe.from("besoins").update({status:"pris_en_charge",taken_by:r==null?void 0:r.id,taken_at:new Date().toISOString()}).eq("id",o.id);if(we)throw we;s({title:"Besoin pris en charge",description:"Vous tes maintenant responsable de ce besoin."}),K()}catch(we){s({title:"Erreur",description:we.message,variant:"destructive"})}finally{f(!1)}}},J=async()=>{if(o){f(!0);try{const{error:we}=await fe.from("besoins").update({status:"accepte",decided_by:r==null?void 0:r.id,decided_at:new Date().toISOString()}).eq("id",o.id);if(we)throw we;s({title:"Besoin accept",description:"Ce besoin peut dsormais tre transform en DA ou BL."}),K()}catch(we){s({title:"Erreur",description:we.message,variant:"destructive"})}finally{f(!1)}}},I=async()=>{if(!(!o||!A.trim())){f(!0);try{const{error:we}=await fe.from("besoins").update({status:"refuse",rejection_reason:A.trim(),decided_by:r==null?void 0:r.id,decided_at:new Date().toISOString()}).eq("id",o.id);if(we)throw we;s({title:"Besoin refus",description:"Le crateur a t notifi du refus."}),p(!1),K()}catch(we){s({title:"Erreur",description:we.message,variant:"destructive"})}finally{f(!1)}}},$=async()=>{if(!(!o||!E.trim())){f(!0);try{const{error:we}=await fe.from("besoins").update({status:"retourne",return_comment:E.trim(),rejection_reason:null,decided_by:r==null?void 0:r.id,decided_at:new Date().toISOString(),taken_by:null,taken_at:null}).eq("id",o.id);if(we)throw we;s({title:"Besoin retourn au demandeur",description:"Le demandeur peut maintenant corriger et resoumettre son besoin."}),y(!1),O(""),K()}catch(we){s({title:"Erreur",description:we.message,variant:"destructive"})}finally{f(!1)}}},U=async()=>{if(o){f(!0);try{const{error:we}=await fe.from("besoins").update({status:"cree",return_comment:null,decided_by:null,decided_at:null}).eq("id",o.id);if(we)throw we;s({title:"Besoin resoumis",description:"Votre besoin a t resoumis et sera examin par la Logistique."}),K()}catch(we){s({title:"Erreur",description:we.message,variant:"destructive"})}finally{f(!1)}}},H=async()=>{if(o){f(!0);try{const{error:we}=await fe.from("besoins").delete().eq("id",o.id);if(we)throw we;s({title:"Besoin supprim",description:"Le besoin a t supprim avec succs."}),t("/besoins")}catch(we){s({title:"Erreur",description:we.message,variant:"destructive"})}finally{f(!1)}}},re=async()=>{if(!o)return;const we=!o.is_locked;if(we&&!L.trim()){s({title:"Erreur",description:"Veuillez indiquer un motif de verrouillage.",variant:"destructive"});return}f(!0);try{const{error:_e}=await fe.from("besoins").update({is_locked:we,locked_at:we?new Date().toISOString():null,locked_reason:we?L.trim():null}).eq("id",o.id);if(_e)throw _e;s({title:we?"Besoin verrouill":"Besoin dverrouill",description:we?"Ce besoin ne peut plus tre modifi ou converti.":"Ce besoin peut maintenant tre modifi ou converti."}),x(!1),k(""),K()}catch(_e){s({title:"Erreur",description:_e.message,variant:"destructive"})}finally{f(!1)}},X=async we=>{if(!(!o||!r)){f(!0);try{const{error:_e}=await fe.from("besoins").update({status:"annulee",cancelled_at:new Date().toISOString(),cancelled_by:r.id,cancellation_reason:we}).eq("id",o.id);if(_e)throw _e;s({title:"Besoin annul",description:"Le besoin a t annul avec succs."}),N(!1),K()}catch(_e){s({title:"Erreur",description:_e.message,variant:"destructive"})}finally{f(!1)}}},he=we=>we?we.startsWith("image/")?mB:we==="application/pdf"?jn:ay:ay,se=we=>we?we<1024?`${we} o`:we<1024*1024?`${(we/1024).toFixed(0)} Ko`:`${(we/(1024*1024)).toFixed(1)} Mo`:"";if(c)return a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(!o)return null;const ue=ZIe[o.status];o.status;const ge=(o.lignes||[]).map(we=>({id:we.id,designation:we.designation,category:we.category,unit:we.unit,quantity:we.quantity,urgency:we.urgency,justification:we.justification||"",article_stock_id:we.article_stock_id||null}));return a.jsxs(st,{children:[a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/besoins",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:o.objet_besoin||o.title}),a.jsxs(it,{className:XIe[o.status],children:[a.jsx(ue,{className:"mr-1 h-3 w-3"}),$z[o.status]]})]}),a.jsxs("p",{className:"text-muted-foreground",children:["Cr le ",Ct(new Date(o.created_at),"dd MMMM yyyy  HH:mm",{locale:Tt})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx($t,{to:`/besoins/${e}/dossier`,children:a.jsxs(de,{variant:"outline",size:"sm",children:[a.jsx(FQ,{className:"mr-2 h-4 w-4"}),"Dossier"]})}),z&&o.status==="accepte"&&a.jsx(de,{variant:"outline",size:"sm",className:o.is_locked?"text-success hover:bg-success/10":"text-warning hover:bg-warning/10",onClick:()=>x(!0),children:o.is_locked?a.jsxs(a.Fragment,{children:[a.jsx(BA,{className:"mr-2 h-4 w-4"}),"Dverrouiller"]}):a.jsxs(a.Fragment,{children:[a.jsx(Uy,{className:"mr-2 h-4 w-4"}),"Verrouiller"]})}),i&&["accepte","pris_en_charge"].includes(o.status)&&o.status!=="annulee"&&a.jsxs(de,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>N(!0),children:[a.jsx(wl,{className:"mr-2 h-4 w-4"}),"Annuler"]}),D&&o.status==="cree"&&a.jsxs(de,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>h(!0),children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]}),o.status==="retourne"&&a.jsx(me,{className:"border-orange-500/50 bg-orange-500/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(I1,{className:"mt-0.5 h-5 w-5 shrink-0 text-orange-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-orange-600",children:"Besoin  corriger"}),o.return_comment&&a.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap mt-1 p-2 bg-background rounded border",children:o.return_comment}),G&&a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Vous pouvez modifier les informations ci-dessous puis resoumettre votre besoin."}),a.jsxs(de,{onClick:U,disabled:d,children:[a.jsx(VT,{className:"mr-2 h-4 w-4"}),"Resoumettre le besoin"]})]})]})]})}),o.status==="refuse"&&o.rejection_reason&&a.jsx(me,{className:"border-destructive/50 bg-destructive/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(Er,{className:"mt-0.5 h-5 w-5 shrink-0 text-destructive"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-destructive",children:"Motif du refus"}),a.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:o.rejection_reason})]})]})}),z&&o.status==="cree"&&a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex flex-col gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Action requise"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ce besoin attend d'tre pris en charge par la Logistique."})]}),a.jsxs(de,{onClick:ae,disabled:d,children:[a.jsx(VT,{className:"mr-2 h-4 w-4"}),"Prendre en charge"]})]})}),z&&o.status==="pris_en_charge"&&a.jsx(me,{className:"border-primary/50 bg-primary/5",children:a.jsxs(pe,{className:"py-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Dcision requise"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Accepter ce besoin pour transformation, le refuser, ou le retourner au demandeur si mal formul."})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(de,{variant:"outline",className:"text-warning hover:bg-warning/10 border-warning/50",onClick:()=>y(!0),disabled:d,children:[a.jsx(I1,{className:"mr-2 h-4 w-4"}),"Besoin mal formul"]}),a.jsxs(de,{variant:"outline",className:"text-destructive hover:bg-destructive/10",onClick:()=>p(!0),disabled:d,children:[a.jsx(hg,{className:"mr-2 h-4 w-4"}),"Refuser"]}),a.jsxs(de,{onClick:J,disabled:d,children:[a.jsx($c,{className:"mr-2 h-4 w-4"}),"Accepter"]})]})]})}),z&&o.status==="accepte"&&!o.is_locked&&T&&a.jsx(me,{className:"border-success/50 bg-success/5",children:a.jsxs(pe,{className:"py-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"font-medium text-foreground",children:"Conversion requise"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ce besoin a t accept. Convertissez-le en DA ou BL."})]}),a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[a.jsx($t,{to:`/demandes-achat/nouveau?besoin=${o.id}`,className:"flex-1",children:a.jsxs(de,{variant:"outline",className:"w-full justify-start",children:[a.jsx(jn,{className:"mr-2 h-4 w-4"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium",children:"Convertir en DA"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Achat requis auprs d'un fournisseur"})]})]})}),a.jsx($t,{to:`/bons-livraison/nouveau?besoin=${o.id}`,className:"flex-1",children:a.jsxs(de,{variant:"outline",className:"w-full justify-start",children:[a.jsx(Tn,{className:"mr-2 h-4 w-4"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium",children:"Convertir en BL"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Livraison depuis le stock existant"})]})]})})]})]})}),z&&o.status==="accepte"&&o.is_locked&&a.jsx(me,{className:"border-muted bg-muted/30",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(Br,{className:"mt-0.5 h-5 w-5 shrink-0 text-success"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Besoin dj transform"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ce besoin a dj t transform en DA ou BL."})]})]})}),z&&(o.status==="pris_en_charge"||o.status==="accepte")&&a.jsx(TM,{besoinId:o.id,besoin:o,onUpdate:K,isLocked:o.is_locked}),G&&o.status==="retourne"&&a.jsx(TM,{besoinId:o.id,besoin:o,onUpdate:K,isLocked:!1}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Identit du besoin"})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(_h,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandeur"}),a.jsxs("p",{className:"font-medium",children:[(ve=o.user)==null?void 0:ve.first_name," ",(te=o.user)==null?void 0:te.last_name]})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(zs,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Dpartement"}),a.jsx("p",{className:"font-medium",children:((Ne=o.department)==null?void 0:Ne.name)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Wy,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Site / Projet"}),a.jsx("p",{className:"font-medium",children:o.site_projet||o.intended_usage||"Non spcifi"})]})]}),o.desired_date&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(wh,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Date souhaite"}),a.jsx("p",{className:"font-medium",children:Ct(new Date(o.desired_date),"dd MMMM yyyy",{locale:Tt})})]})]}),o.lieu_livraison&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Wy,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Lieu de livraison"}),a.jsx("p",{className:"font-medium",children:o.lieu_livraison})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[o.fournisseur_impose&&a.jsxs(it,{variant:"outline",className:"bg-muted",children:["Fournisseur impos: ",o.fournisseur_impose_nom]}),o.besoin_vehicule&&a.jsxs(it,{variant:"outline",className:"bg-muted",children:[a.jsx(th,{className:"mr-1 h-3 w-3"}),"Vhicule requis"]}),o.besoin_avance_caisse&&a.jsxs(it,{variant:"outline",className:"bg-muted",children:[a.jsx(si,{className:"mr-1 h-3 w-3"}),"Avance de caisse: ",(Y=o.avance_caisse_montant)==null?void 0:Y.toLocaleString("fr-FR")," XOF"]})]}),(o.taken_by_profile||o.decided_by_profile)&&a.jsxs("div",{className:"border-t pt-4 mt-4 space-y-2",children:[o.taken_by_profile&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Pris en charge par "}),a.jsxs("span",{className:"font-medium",children:[o.taken_by_profile.first_name," ",o.taken_by_profile.last_name]}),o.taken_at&&a.jsxs("span",{className:"text-muted-foreground",children:[" ","le ",Ct(new Date(o.taken_at),"dd MMM yyyy",{locale:Tt})]})]}),o.decided_by_profile&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Dcision par "}),a.jsxs("span",{className:"font-medium",children:[o.decided_by_profile.first_name," ",o.decided_by_profile.last_name]}),o.decided_at&&a.jsxs("span",{className:"text-muted-foreground",children:[" ","le ",Ct(new Date(o.decided_at),"dd MMM yyyy",{locale:Tt})]})]})]})]})]}),ge.length>0&&a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsxs(Ue,{children:["Lignes de besoin (",ge.length,")"]}),a.jsx(wn,{children:"Articles et services demands"})]}),a.jsx(pe,{children:a.jsx(kO,{lignes:ge,onChange:()=>{},readOnly:!0})})]}),ge.length===0&&o.description&&a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Description"})}),a.jsx(pe,{children:a.jsx("p",{className:"whitespace-pre-wrap text-foreground",children:o.description})})]}),(o.attachments&&o.attachments.length>0||o.attachment_url)&&a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:["Pices jointes (",(((Le=o.attachments)==null?void 0:Le.length)||0)+(o.attachment_url&&!((ye=o.attachments)!=null&&ye.length)?1:0),")"]})}),a.jsxs(pe,{className:"space-y-2",children:[o.attachments&&o.attachments.length>0&&o.attachments.map(we=>{const _e=he(we.file_type);return a.jsxs("div",{className:"flex items-center gap-3 rounded-lg border bg-muted/30 p-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(_e,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:we.file_name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:se(we.file_size)})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("a",{href:we.file_url,target:"_blank",rel:"noopener noreferrer",children:a.jsxs(de,{variant:"outline",size:"sm",children:[a.jsx(Fc,{className:"mr-2 h-4 w-4"}),"Ouvrir"]})}),a.jsx("a",{href:we.file_url,download:we.file_name,children:a.jsxs(de,{variant:"default",size:"sm",children:[a.jsx(bd,{className:"mr-2 h-4 w-4"}),"Tlcharger"]})})]})]},we.id)}),o.attachment_url&&(!o.attachments||o.attachments.length===0)&&a.jsxs("div",{className:"flex items-center gap-3 rounded-lg border bg-muted/30 p-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(ay,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:o.attachment_name||"Fichier joint"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Document attach au besoin"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("a",{href:o.attachment_url,target:"_blank",rel:"noopener noreferrer",children:a.jsxs(de,{variant:"outline",size:"sm",children:[a.jsx(Fc,{className:"mr-2 h-4 w-4"}),"Ouvrir"]})}),a.jsx("a",{href:o.attachment_url,download:o.attachment_name||"fichier",children:a.jsxs(de,{variant:"default",size:"sm",children:[a.jsx(bd,{className:"mr-2 h-4 w-4"}),"Tlcharger"]})})]})]})]})]})]}),a.jsx(kr,{open:v,onOpenChange:p,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Refuser ce besoin"}),a.jsx(Yr,{children:"Veuillez indiquer le motif du refus. Le crateur sera notifi."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Motif du refus *"}),a.jsx(Kr,{placeholder:"Expliquez pourquoi ce besoin est refus...",value:A,onChange:we=>C(we.target.value),rows:4})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>p(!1),children:"Annuler"}),a.jsx(de,{variant:"destructive",onClick:I,disabled:!A.trim()||d,children:"Confirmer le refus"})]})]})}),a.jsx(kr,{open:g,onOpenChange:y,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsxs(Nr,{className:"flex items-center gap-2",children:[a.jsx(I1,{className:"h-5 w-5 text-warning"}),"Besoin mal formul"]}),a.jsx(Yr,{children:"Retournez ce besoin au demandeur pour qu'il le corrige. Un commentaire obligatoire sera joint pour l'aider."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Commentaire explicatif *"}),a.jsx(Kr,{placeholder:"Indiquez ce qui doit tre corrig ou prcis (ex: dsignation trop vague, quantit manquante, site non prcis...)",value:E,onChange:we=>O(we.target.value),rows:4})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>y(!1),children:"Annuler"}),a.jsx(de,{variant:"default",className:"bg-warning text-warning-foreground hover:bg-warning/90",onClick:$,disabled:!E.trim()||d,children:"Retourner au demandeur"})]})]})}),a.jsx(kr,{open:b,onOpenChange:x,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{className:"flex items-center gap-2",children:o!=null&&o.is_locked?a.jsxs(a.Fragment,{children:[a.jsx(BA,{className:"h-5 w-5 text-success"}),"Dverrouiller ce besoin"]}):a.jsxs(a.Fragment,{children:[a.jsx(Uy,{className:"h-5 w-5 text-warning"}),"Verrouiller ce besoin"]})}),a.jsx(Yr,{children:o!=null&&o.is_locked?"Le dverrouillage permettra  nouveau de modifier ou convertir ce besoin.":"Le verrouillage empchera toute modification ou conversion ultrieure."})]}),!(o!=null&&o.is_locked)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Motif du verrouillage *"}),a.jsx(Kr,{placeholder:"Ex: Besoin dj converti en DA-2025-001, correction termine...",value:L,onChange:we=>k(we.target.value),rows:3})]}),(o==null?void 0:o.is_locked)&&o.locked_reason&&a.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Motif du verrouillage actuel :"}),a.jsx("p",{className:"text-sm font-medium",children:o.locked_reason}),o.locked_at&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Verrouill le ",Ct(new Date(o.locked_at),"dd MMM yyyy  HH:mm",{locale:Tt})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>{x(!1),k("")},children:"Annuler"}),a.jsx(de,{variant:o!=null&&o.is_locked?"default":"secondary",className:o!=null&&o.is_locked?"":"bg-warning text-warning-foreground hover:bg-warning/90",onClick:re,disabled:!(o!=null&&o.is_locked)&&!L.trim()||d,children:o!=null&&o.is_locked?"Dverrouiller":"Verrouiller"})]})]})}),a.jsx(Yo,{open:m,onOpenChange:h,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(fo,{children:"Supprimer ce besoin ?"}),a.jsx(ho,{children:"Cette action est irrversible. Le besoin sera dfinitivement supprim."})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),a.jsx(Xo,{onClick:H,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})}),a.jsx(PO,{open:j,onOpenChange:N,onConfirm:X,entityType:"besoin",isLoading:d})]})}var QIe="Separator",LM="horizontal",e6e=["horizontal","vertical"],UG=_.forwardRef((e,t)=>{const{decorative:r,orientation:n=LM,...i}=e,s=t6e(n)?n:LM,l=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return a.jsx(jt.div,{"data-orientation":s,...l,...i,ref:t})});UG.displayName=QIe;function t6e(e){return e6e.includes(e)}var WG=UG;const Iu=_.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},i)=>a.jsx(WG,{ref:i,decorative:r,orientation:t,className:rt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Iu.displayName=WG.displayName;const a1={completed:{icon:Br,color:"text-success",bgColor:"bg-success",borderColor:"border-success"},current:{icon:Yn,color:"text-primary",bgColor:"bg-primary",borderColor:"border-primary"},pending:{icon:Yn,color:"text-muted-foreground",bgColor:"bg-muted",borderColor:"border-muted"},rejected:{icon:Er,color:"text-destructive",bgColor:"bg-destructive",borderColor:"border-destructive"}};function r6e(){var p,g,y,b;const{id:e}=Qc(),[t,r]=_.useState(null),[n,i]=_.useState(!0),[s,o]=_.useState(null);_.useEffect(()=>{(async()=>{if(e){i(!0),o(null);try{const{data:j,error:N}=await fe.from("besoins").select(`
            *,
            user:profiles!besoins_user_id_fkey(first_name, last_name, email),
            department:departments(name),
            taken_by_user:profiles!besoins_taken_by_fkey(first_name, last_name),
            decided_by_user:profiles!besoins_decided_by_fkey(first_name, last_name)
          `).eq("id",e).maybeSingle();if(N)throw N;if(!j){o("Dossier non trouv"),i(!1);return}const{data:A}=await fe.from("demandes_achat").select(`
            *,
            created_by_user:profiles!demandes_achat_created_by_fkey(first_name, last_name),
            fournisseur:fournisseurs(name)
          `).eq("besoin_id",e).maybeSingle(),{data:C}=await fe.from("bons_livraison").select(`
            *,
            created_by_user:profiles!bons_livraison_created_by_fkey(first_name, last_name),
            delivered_by_user:profiles!bons_livraison_delivered_by_fkey(first_name, last_name)
          `).eq("besoin_id",e).maybeSingle();let E=[];if(A){const{data:O}=await fe.from("ecritures_comptables").select("*").eq("da_id",A.id).order("created_at",{ascending:!0});E=O||[]}r({besoin:j,da:A,bl:C,ecritures:E})}catch(j){console.error("Error fetching dossier:",j),o("Erreur lors du chargement du dossier")}finally{i(!1)}}})()},[e]);const l=()=>{var O,L,k,T,B,M,G;if(!t)return[];const x=[],{besoin:j,da:N,bl:A,ecritures:C}=t,E=j.status==="refuse"?"rejected":j.status==="accepte"?"completed":"current";if(x.push({id:"besoin",type:"besoin",title:"Besoin interne",status:E,date:j.created_at,reference:j.title,link:`/besoins/${j.id}`,details:{demandeur:`${((O=j.user)==null?void 0:O.first_name)||""} ${((L=j.user)==null?void 0:L.last_name)||""}`.trim(),departement:(k=j.department)==null?void 0:k.name,categorie:j.category,urgence:j.urgency,statut:j.status}}),N){const z=N.status==="payee"?"completed":["rejetee","refusee_finance","rejetee_comptabilite"].includes(N.status)?"rejected":["validee_finance","soumise_validation","chiffree"].includes(N.status)?"current":N.status==="brouillon"?"pending":"current";x.push({id:"da",type:"da",title:"Demande d'achat",status:z,date:N.created_at,reference:N.reference,link:`/demandes-achat/${N.id}`,details:{createur:`${((T=N.created_by_user)==null?void 0:T.first_name)||""} ${((B=N.created_by_user)==null?void 0:B.last_name)||""}`.trim(),fournisseur:((M=N.fournisseur)==null?void 0:M.name)||"Non slectionn",montant:N.total_amount?`${N.total_amount.toLocaleString("fr-FR")} ${N.currency||"XOF"}`:"-",statut:N.status}})}else j.status==="accepte"&&x.push({id:"da",type:"da",title:"Demande d'achat",status:"pending",details:{message:"En attente de cration"}});if(A){const z=A.status==="livre"?"completed":A.status==="refusee"?"rejected":(A.status==="livree_partiellement","current");x.push({id:"bl",type:"bl",title:"Bon de livraison",status:z,date:A.created_at,reference:A.reference,link:`/bons-livraison/${A.id}`,details:{type:A.bl_type==="interne"?"Stock interne":"Fournisseur",livreur:A.delivered_by_user?`${A.delivered_by_user.first_name||""} ${A.delivered_by_user.last_name||""}`.trim():"-",dateLivraison:A.delivered_at?Ct(new Date(A.delivered_at),"dd MMM yyyy",{locale:Tt}):"-",statut:A.status}})}else N&&["validee_finance","payee"].includes(N.status)&&x.push({id:"bl",type:"bl",title:"Bon de livraison",status:"pending",details:{message:"En attente de rception"}});if((N==null?void 0:N.status)==="payee"){const z=C[C.length-1];x.push({id:"paiement",type:"paiement",title:"Paiement",status:"completed",date:N.comptabilise_at||(z==null?void 0:z.created_at),reference:z==null?void 0:z.reference,link:N?`/comptabilite/${N.id}`:void 0,details:{montant:`${(G=N.total_amount)==null?void 0:G.toLocaleString("fr-FR")} ${N.currency||"XOF"}`,modePaiement:N.mode_paiement||"-",reference:N.reference_paiement||"-",ecritures:C.length}})}else(N==null?void 0:N.status)==="validee_finance"&&x.push({id:"paiement",type:"paiement",title:"Paiement",status:"current",details:{message:"En attente de paiement"}});return x},c=x=>{switch(x){case"besoin":return jn;case"da":return jp;case"bl":return th;case"paiement":return Wf;default:return jn}},u=(x,j="XOF")=>x?new Intl.NumberFormat("fr-FR").format(x)+" "+j:"-";if(n)return a.jsx(st,{children:a.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(s||!t)return a.jsx(st,{children:a.jsxs("div",{className:"flex min-h-[400px] flex-col items-center justify-center gap-4",children:[a.jsx(zr,{className:"h-12 w-12 text-destructive"}),a.jsx("p",{className:"text-lg font-medium",children:s||"Dossier non trouv"}),a.jsx(de,{asChild:!0,variant:"outline",children:a.jsxs($t,{to:"/besoins",children:[a.jsx(ra,{className:"mr-2 h-4 w-4"}),"Retour aux besoins"]})})]})});const d=l(),{besoin:f,da:m,bl:h,ecritures:v}=t;return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[a.jsx($t,{to:"/besoins",className:"hover:text-foreground",children:"Besoins"}),a.jsx("span",{children:"/"}),a.jsx("span",{children:"Dossier complet"})]}),a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:f.title}),a.jsx("p",{className:"text-muted-foreground",children:"Suivi complet du dossier : Besoin  DA  Livraison  Paiement"})]}),a.jsx(de,{asChild:!0,variant:"outline",children:a.jsxs($t,{to:`/besoins/${e}`,children:[a.jsx(Fc,{className:"mr-2 h-4 w-4"}),"Voir le besoin"]})})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(me,{children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary",children:a.jsx(_h,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandeur"}),a.jsxs("p",{className:"font-medium",children:[(p=f.user)==null?void 0:p.first_name," ",(g=f.user)==null?void 0:g.last_name]})]})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-secondary/10 text-secondary",children:a.jsx(zs,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Dpartement"}),a.jsx("p",{className:"font-medium",children:((y=f.department)==null?void 0:y.name)||"-"})]})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-success/10 text-success",children:a.jsx(Wf,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"}),a.jsx("p",{className:"font-medium",children:u(m==null?void 0:m.total_amount,m==null?void 0:m.currency)})]})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-warning/10 text-warning",children:a.jsx(wh,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Date cration"}),a.jsx("p",{className:"font-medium",children:Ct(new Date(f.created_at),"dd MMM yyyy",{locale:Tt})})]})]})})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Progression du dossier"})}),a.jsx(pe,{children:a.jsx("div",{className:"relative",children:d.map((x,j)=>{const N=c(x.type),A=a1[x.status].icon,C=j===d.length-1;return a.jsxs("div",{className:"relative flex gap-4 pb-8",children:[!C&&a.jsx("div",{className:rt("absolute left-5 top-10 h-full w-0.5",x.status==="completed"?"bg-success":"bg-border")}),a.jsx("div",{className:rt("relative z-10 flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2",a1[x.status].borderColor,x.status==="pending"?"bg-background":a1[x.status].bgColor),children:a.jsx(N,{className:rt("h-5 w-5",x.status==="pending"?"text-muted-foreground":"text-white")})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"font-medium",children:x.title}),a.jsx(A,{className:rt("h-4 w-4",a1[x.status].color)})]}),x.reference&&a.jsx("p",{className:"text-sm text-muted-foreground",children:x.reference})]}),x.date&&a.jsx("span",{className:"text-xs text-muted-foreground",children:Ct(new Date(x.date),"dd MMM yyyy HH:mm",{locale:Tt})})]}),x.details&&a.jsx("div",{className:"rounded-md border bg-muted/30 p-3",children:x.details.message?a.jsx("p",{className:"text-sm text-muted-foreground italic",children:x.details.message}):a.jsx("div",{className:"grid gap-2 text-sm sm:grid-cols-2 lg:grid-cols-4",children:Object.entries(x.details).map(([E,O])=>a.jsxs("div",{children:[a.jsxs("span",{className:"text-muted-foreground capitalize",children:[E.replace(/([A-Z])/g," $1").trim(),":"]})," ",a.jsx("span",{className:"font-medium",children:String(O)})]},E))})}),x.link&&a.jsxs($t,{to:x.link,className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:["Voir le dtail",a.jsx(Fc,{className:"h-3 w-3"})]})]})]},x.id)})})})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[m&&a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between",children:[a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx(jp,{className:"h-5 w-5"}),"Demande d'achat"]}),a.jsx(it,{variant:m.status==="payee"?"default":"secondary",children:m.status})]}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Rfrence"}),a.jsx("span",{className:"font-medium",children:m.reference})]}),a.jsx(Iu,{}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Fournisseur"}),a.jsx("span",{className:"font-medium",children:((b=m.fournisseur)==null?void 0:b.name)||"-"})]}),a.jsx(Iu,{}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Montant"}),a.jsx("span",{className:"font-medium text-primary",children:u(m.total_amount,m.currency)})]}),a.jsx(Iu,{}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Mode paiement"}),a.jsx("span",{className:"font-medium",children:m.mode_paiement||"-"})]})]}),a.jsx(de,{asChild:!0,variant:"outline",className:"w-full",children:a.jsx($t,{to:`/demandes-achat/${m.id}`,children:"Voir la DA complte"})})]})]}),h&&a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between",children:[a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx(th,{className:"h-5 w-5"}),"Bon de livraison"]}),a.jsx(it,{variant:h.status==="livre"?"default":"secondary",children:h.status})]}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Rfrence"}),a.jsx("span",{className:"font-medium",children:h.reference})]}),a.jsx(Iu,{}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Type"}),a.jsx("span",{className:"font-medium",children:h.bl_type==="interne"?"Stock interne":"Fournisseur"})]}),a.jsx(Iu,{}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Date livraison"}),a.jsx("span",{className:"font-medium",children:h.delivered_at?Ct(new Date(h.delivered_at),"dd MMM yyyy",{locale:Tt}):"-"})]}),a.jsx(Iu,{}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Entrept"}),a.jsx("span",{className:"font-medium",children:h.warehouse||"-"})]})]}),a.jsx(de,{asChild:!0,variant:"outline",className:"w-full",children:a.jsx($t,{to:`/bons-livraison/${h.id}`,children:"Voir le BL complet"})})]})]})]}),v.length>0&&a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2",children:[a.jsx(Wf,{className:"h-5 w-5"}),"critures comptables (",v.length,")"]})}),a.jsx(pe,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"pb-2 text-left font-medium",children:"Rfrence"}),a.jsx("th",{className:"pb-2 text-left font-medium",children:"Compte"}),a.jsx("th",{className:"pb-2 text-left font-medium",children:"Libell"}),a.jsx("th",{className:"pb-2 text-right font-medium",children:"Dbit"}),a.jsx("th",{className:"pb-2 text-right font-medium",children:"Crdit"}),a.jsx("th",{className:"pb-2 text-left font-medium",children:"Date"})]})}),a.jsx("tbody",{children:v.map(x=>a.jsxs("tr",{className:"border-b last:border-0",children:[a.jsx("td",{className:"py-2 font-mono text-xs",children:x.reference}),a.jsx("td",{className:"py-2",children:x.compte_comptable}),a.jsx("td",{className:"py-2",children:x.libelle}),a.jsx("td",{className:"py-2 text-right",children:x.debit>0?u(x.debit,x.devise):"-"}),a.jsx("td",{className:"py-2 text-right",children:x.credit>0?u(x.credit,x.devise):"-"}),a.jsx("td",{className:"py-2 text-muted-foreground",children:Ct(new Date(x.date_ecriture),"dd/MM/yyyy",{locale:Tt})})]},x.id))})]})})})]})]})})}const n6e={brouillon:"bg-muted text-muted-foreground",soumise:"bg-primary/10 text-primary border-primary/20",en_analyse:"bg-warning/10 text-warning border-warning/20",chiffree:"bg-success/10 text-success border-success/20",soumise_validation:"bg-accent/10 text-accent-foreground border-accent/20",validee_finance:"bg-success text-success-foreground",refusee_finance:"bg-destructive text-destructive-foreground",en_revision_achats:"bg-warning text-warning-foreground",rejetee:"bg-destructive/10 text-destructive border-destructive/20",payee:"bg-success text-success-foreground",rejetee_comptabilite:"bg-destructive text-destructive-foreground",annulee:"bg-muted text-muted-foreground line-through"},i6e={brouillon:Yn,soumise:N_,en_analyse:xd,chiffree:Br,soumise_validation:ao,validee_finance:Ya,refusee_finance:wl,en_revision_achats:cd,rejetee:Er,payee:kl,rejetee_comptabilite:Uf,annulee:Er},s6e={basse:"bg-muted text-muted-foreground",normale:"bg-muted text-muted-foreground",haute:"bg-warning/10 text-warning",urgente:"bg-destructive/10 text-destructive"};function a6e(){const{roles:e,isAdmin:t}=yr(),{toast:r}=qr(),[n,i]=_.useState([]),[s,o]=_.useState(!0),[l,c]=_.useState(""),[u,d]=_.useState("all");e.some(h=>["responsable_logistique","agent_logistique"].includes(h)),e.some(h=>["responsable_achats","agent_achats"].includes(h)),e.includes("dg"),_.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:h,error:v}=await fe.from("demandes_achat").select(`
          *,
          department:departments(id, name),
          created_by_profile:profiles!demandes_achat_created_by_fkey(id, first_name, last_name),
          besoin:besoins(id, title)
        `).order("created_at",{ascending:!1});if(v)throw v;i(h||[])}catch(h){console.error("Error fetching DA:",h),r({title:"Erreur",description:h.message,variant:"destructive"})}finally{o(!1)}},m=n.filter(h=>{const v=h.reference.toLowerCase().includes(l.toLowerCase())||h.description.toLowerCase().includes(l.toLowerCase()),p=u==="all"||h.status===u;return v&&p});return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Demandes d'Achat"}),a.jsx("p",{className:"text-muted-foreground",children:"Grez les demandes d'achat issues des besoins internes"})]})}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(jn,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Document administratif"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Une DA est cre par la Logistique  partir d'un Besoin accept. Elle ne contient aucune donne financire."})]})]})}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-4",children:a.jsx(Ue,{className:"text-lg",children:"Filtres"})}),a.jsx(pe,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par rfrence ou description...",value:l,onChange:h=>c(h.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:u,onValueChange:d,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Tous les statuts"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les statuts"}),Object.keys(Ol).map(h=>a.jsx(et,{value:h,children:Ol[h]},h))]})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:[m.length," demande",m.length!==1?"s":""]})}),a.jsx(pe,{children:s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):m.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucune demande d'achat trouve."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Rfrence"}),a.jsx(Ee,{children:"Besoin source"}),a.jsx(Ee,{children:"Dpartement"}),a.jsx(Ee,{children:"Priorit"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{children:"Date"}),a.jsx(Ee,{className:"text-right",children:"Action"})]})}),a.jsx(rn,{children:m.map(h=>{var p,g;const v=i6e[h.status];return a.jsxs(gt,{children:[a.jsx(Se,{className:"font-medium",children:h.reference}),a.jsx(Se,{className:"max-w-xs truncate",children:((p=h.besoin)==null?void 0:p.title)||"N/A"}),a.jsx(Se,{children:((g=h.department)==null?void 0:g.name)||"N/A"}),a.jsx(Se,{children:a.jsx(it,{className:s6e[h.priority],children:Gm[h.priority]})}),a.jsx(Se,{children:a.jsxs(it,{className:n6e[h.status],children:[a.jsx(v,{className:"mr-1 h-3 w-3"}),Ol[h.status]]})}),a.jsx(Se,{children:Ct(new Date(h.created_at),"dd MMM yyyy",{locale:Tt})}),a.jsx(Se,{className:"text-right",children:a.jsx($t,{to:`/demandes-achat/${h.id}`,children:a.jsx(de,{variant:"ghost",size:"sm",children:"Voir"})})})]},h.id)})})]})})})]})]})})}function o6e(){var B,M,G;const e=yi(),[t]=j9(),r=t.get("besoin"),{user:n,roles:i,isAdmin:s}=yr(),{toast:o}=qr(),[l,c]=_.useState(null),[u,d]=_.useState(!0),[f,m]=_.useState(!1),[h,v]=_.useState(!1),[p,g]=_.useState({description:"",category:"fournitures",priority:"normale",desired_date:"",observations:"",projet_id:""}),[y,b]=_.useState([]),[x,j]=_.useState(!1),A=i.some(z=>jh.includes(z))||s;_.useEffect(()=>{r?(C(),E()):d(!1)},[r]);const C=async()=>{try{const{data:z,error:D}=await fe.from("besoins").select(`
          *,
          department:departments(id, name),
          user:profiles!besoins_user_id_fkey(id, first_name, last_name, email)
        `).eq("id",r).maybeSingle();if(D||!z){o({title:"Erreur",description:"Besoin introuvable.",variant:"destructive"}),e("/besoins");return}const{data:q}=await fe.from("besoin_lignes").select("*").eq("besoin_id",r).order("created_at",{ascending:!0});if(c(z),g(K=>({...K,description:z.description,desired_date:z.desired_date||"",projet_id:z.projet_id||""})),q&&q.length>0&&!x){const K=q.map(ae=>({designation:ae.designation,quantity:String(ae.quantity),unit:ae.unit,observations:ae.justification||""}));b(K),j(!0)}else x||(b([{designation:"",quantity:"1",unit:"unit",observations:""}]),j(!0))}catch(z){console.error("Error:",z)}finally{d(!1)}},E=async()=>{const{data:z,error:D}=await fe.rpc("can_transform_besoin",{_besoin_id:r});v(z===!0)},O=()=>{b(z=>[...z,{designation:"",quantity:"1",unit:"unit",observations:""}])},L=z=>{y.length>1&&b(y.filter((D,q)=>q!==z))},k=(z,D,q)=>{const K=[...y];K[z][D]=q,b(K)},T=async z=>{if(z.preventDefault(),!l||!n)return;if(!p.description.trim()){o({title:"Erreur",description:"La description est obligatoire.",variant:"destructive"});return}const D=y.filter(q=>q.designation.trim()&&parseFloat(q.quantity)>0);if(D.length===0){o({title:"Erreur",description:"Au moins un article est requis.",variant:"destructive"});return}m(!0);try{const{data:q,error:K}=await fe.rpc("generate_da_reference");if(K)throw K;const{data:ae,error:J}=await fe.from("demandes_achat").insert({reference:q,besoin_id:l.id,department_id:l.department_id,created_by:n.id,description:p.description.trim(),category:p.category,priority:p.priority,desired_date:p.desired_date||null,observations:p.observations.trim()||null,projet_id:p.projet_id||null}).select().single();if(J)throw J;const I=D.map(U=>({da_id:ae.id,designation:U.designation.trim(),quantity:parseFloat(U.quantity),unit:U.unit,observations:U.observations.trim()||null})),{error:$}=await fe.from("da_articles").insert(I);if($)throw $;o({title:"DA cre",description:`La demande ${q} a t cre avec succs.`}),e(`/demandes-achat/${ae.id}`)}catch(q){console.error("Error:",q),o({title:"Erreur",description:q.message,variant:"destructive"})}finally{m(!1)}};return A?u?a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})}):l?h?a.jsx(st,{children:a.jsxs("form",{onSubmit:T,className:"mx-auto max-w-3xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:`/besoins/${l.id}`,children:a.jsx(de,{type:"button",variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Crer une Demande d'Achat"}),a.jsxs("p",{className:"text-muted-foreground",children:[" partir du besoin: ",l.title]})]})]}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(qy,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Conversion automatique des lignes"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Les lignes du besoin ont t automatiquement reprises. Cette DA ne contient aucun prix ni fournisseur. Elle sera transmise au Service Achats pour traitement."})]})]})}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{className:"text-lg",children:"Besoin source"})}),a.jsxs(pe,{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Titre"}),a.jsx("p",{className:"font-medium",children:l.title})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Dpartement"}),a.jsx("p",{className:"font-medium",children:(B=l.department)==null?void 0:B.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandeur"}),a.jsxs("p",{className:"font-medium",children:[(M=l.user)==null?void 0:M.first_name," ",(G=l.user)==null?void 0:G.last_name]})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{className:"text-lg",children:"Informations de la DA"}),a.jsx(wn,{children:"Normalisez et compltez les informations du besoin"})]}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Description normalise *"}),a.jsx(Kr,{placeholder:"Description claire et dtaille de la demande...",value:p.description,onChange:z=>g({...p,description:z.target.value}),rows:4,required:!0})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Catgorie d'achat *"}),a.jsxs(Kt,{value:p.category,onValueChange:z=>g({...p,category:z}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.keys(lx).map(z=>a.jsx(et,{value:z,children:lx[z]},z))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Priorit relle *"}),a.jsxs(Kt,{value:p.priority,onValueChange:z=>g({...p,priority:z}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.keys(Gm).map(z=>a.jsx(et,{value:z,children:Gm[z]},z))})]})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Date souhaite"}),a.jsx(De,{type:"date",value:p.desired_date,onChange:z=>g({...p,desired_date:z.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Projet rattach"}),a.jsx(H2,{value:p.projet_id,onChange:z=>g({...p,projet_id:z}),placeholder:"Slectionner un projet..."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Observations techniques"}),a.jsx(Kr,{placeholder:"Notes ou remarques pour le Service Achats...",value:p.observations,onChange:z=>g({...p,observations:z.target.value}),rows:2})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ue,{className:"text-lg",children:"Articles / Services"}),a.jsx(wn,{children:"Listez les articles ou services demands (sans prix)"})]}),a.jsxs(de,{type:"button",variant:"outline",size:"sm",onClick:O,children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Ajouter"]})]})}),a.jsx(pe,{className:"space-y-4",children:y.map((z,D)=>a.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4",children:[a.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Article ",D+1]}),y.length>1&&a.jsx(de,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:bg-destructive/10",onClick:()=>L(D),children:a.jsx(ds,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-4",children:[a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx(Pe,{children:"Dsignation *"}),a.jsx(De,{placeholder:"Nom de l'article ou service",value:z.designation,onChange:q=>k(D,"designation",q.target.value)})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Quantit *"}),a.jsx(De,{type:"number",min:"0.01",step:"0.01",value:z.quantity,onChange:q=>k(D,"quantity",q.target.value)})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Unit"}),a.jsx(De,{placeholder:"unit",value:z.unit,onChange:q=>k(D,"unit",q.target.value)})]})]})]},D))})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx($t,{to:`/besoins/${l.id}`,children:a.jsx(de,{type:"button",variant:"outline",children:"Annuler"})}),a.jsx(de,{type:"submit",disabled:f,children:f?"Cration...":"Crer la Demande d'Achat"})]})]})}):a.jsx(st,{children:a.jsx(me,{className:"mx-auto max-w-md",children:a.jsxs(pe,{className:"py-12 text-center",children:[a.jsx(zr,{className:"mx-auto mb-4 h-12 w-12 text-destructive"}),a.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Transformation impossible"}),a.jsx("p",{className:"mb-4 text-muted-foreground",children:"Ce besoin ne peut pas tre transform. Il est soit dj transform, soit non accept."}),a.jsx($t,{to:`/besoins/${l.id}`,children:a.jsx(de,{variant:"outline",children:"Retour au besoin"})})]})})}):a.jsx(st,{children:a.jsx(me,{className:"mx-auto max-w-md",children:a.jsxs(pe,{className:"py-12 text-center",children:[a.jsx(zr,{className:"mx-auto mb-4 h-12 w-12 text-warning"}),a.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Besoin source requis"}),a.jsx("p",{className:"mb-4 text-muted-foreground",children:"Une DA doit tre cre  partir d'un Besoin accept."}),a.jsx($t,{to:"/besoins",children:a.jsx(de,{children:"Voir les besoins"})})]})})}):a.jsx(st,{children:a.jsx(Ji,{message:"Seule la Direction Logistique peut crer des Demandes d'Achat."})})}const l6e="modulepreload",c6e=function(e){return"/kimbo3/"+e},RM={},uS=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=c6e(c),c in RM)return;RM[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":l6e,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};function dn(e){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(e)}var Zo=Uint8Array,Aa=Uint16Array,OO=Int32Array,TO=new Zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),LO=new Zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),IM=new Zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HG=function(e,t){for(var r=new Aa(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new OO(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},VG=HG(TO,2),u6e=VG.b,tE=VG.r;u6e[28]=258,tE[258]=28;var d6e=HG(LO,0),DM=d6e.r,rE=new Aa(32768);for(var Bn=0;Bn<32768;++Bn){var Su=(Bn&43690)>>1|(Bn&21845)<<1;Su=(Su&52428)>>2|(Su&13107)<<2,Su=(Su&61680)>>4|(Su&3855)<<4,rE[Bn]=((Su&65280)>>8|(Su&255)<<8)>>1}var xy=function(e,t,r){for(var n=e.length,i=0,s=new Aa(t);i<n;++i)e[i]&&++s[e[i]-1];var o=new Aa(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(r){l=new Aa(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],d=t-e[i],f=o[e[i]-1]++<<d,m=f|(1<<d)-1;f<=m;++f)l[rE[f]>>c]=u}else for(l=new Aa(n),i=0;i<n;++i)e[i]&&(l[i]=rE[o[e[i]-1]++]>>15-e[i]);return l},ph=new Zo(288);for(var Bn=0;Bn<144;++Bn)ph[Bn]=8;for(var Bn=144;Bn<256;++Bn)ph[Bn]=9;for(var Bn=256;Bn<280;++Bn)ph[Bn]=7;for(var Bn=280;Bn<288;++Bn)ph[Bn]=8;var V2=new Zo(32);for(var Bn=0;Bn<32;++Bn)V2[Bn]=5;var f6e=xy(ph,9,0),h6e=xy(V2,5,0),GG=function(e){return(e+7)/8|0},m6e=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Zo(e.subarray(t,r))},lc=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Iv=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},dS=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,s=r.slice();if(!i)return{t:YG,l:0};if(i==1){var o=new Zo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(N,A){return N.f-A.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=i-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var m=s[0].s,n=1;n<i;++n)s[n].s>m&&(m=s[n].s);var h=new Aa(m+1),v=nE(r[d-1],h,0);if(v>t){var n=0,p=0,g=v-t,y=1<<g;for(s.sort(function(A,C){return h[C.s]-h[A.s]||A.f-C.f});n<i;++n){var b=s[n].s;if(h[b]>t)p+=y-(1<<v-h[b]),h[b]=t;else break}for(p>>=g;p>0;){var x=s[n].s;h[x]<t?p-=1<<t-h[x]++-1:++n}for(;n>=0&&p;--n){var j=s[n].s;h[j]==t&&(--h[j],++p)}v=t}return{t:new Zo(h),l:v}},nE=function(e,t,r){return e.s==-1?Math.max(nE(e.l,t,r+1),nE(e.r,t,r+1)):t[e.s]=r},MM=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Aa(++t),n=0,i=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[l]}return{c:r.subarray(0,n),n:t}},Dv=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},KG=function(e,t,r){var n=r.length,i=GG(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<n;++s)e[i+s+4]=r[s];return(i+4+n)*8},$M=function(e,t,r,n,i,s,o,l,c,u,d){lc(t,d++,r),++i[256];for(var f=dS(i,15),m=f.t,h=f.l,v=dS(s,15),p=v.t,g=v.l,y=MM(m),b=y.c,x=y.n,j=MM(p),N=j.c,A=j.n,C=new Aa(19),E=0;E<b.length;++E)++C[b[E]&31];for(var E=0;E<N.length;++E)++C[N[E]&31];for(var O=dS(C,7),L=O.t,k=O.l,T=19;T>4&&!L[IM[T-1]];--T);var B=u+5<<3,M=Dv(i,ph)+Dv(s,V2)+o,G=Dv(i,m)+Dv(s,p)+o+14+3*T+Dv(C,L)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&B<=M&&B<=G)return KG(t,d,e.subarray(c,c+u));var z,D,q,K;if(lc(t,d,1+(G<M)),d+=2,G<M){z=xy(m,h,0),D=m,q=xy(p,g,0),K=p;var ae=xy(L,k,0);lc(t,d,x-257),lc(t,d+5,A-1),lc(t,d+10,T-4),d+=14;for(var E=0;E<T;++E)lc(t,d+3*E,L[IM[E]]);d+=3*T;for(var J=[b,N],I=0;I<2;++I)for(var $=J[I],E=0;E<$.length;++E){var U=$[E]&31;lc(t,d,ae[U]),d+=L[U],U>15&&(lc(t,d,$[E]>>5&127),d+=$[E]>>12)}}else z=f6e,D=ph,q=h6e,K=V2;for(var E=0;E<l;++E){var H=n[E];if(H>255){var U=H>>18&31;Iv(t,d,z[U+257]),d+=D[U+257],U>7&&(lc(t,d,H>>23&31),d+=TO[U]);var re=H&31;Iv(t,d,q[re]),d+=K[re],re>3&&(Iv(t,d,H>>5&8191),d+=LO[re])}else Iv(t,d,z[H]),d+=D[H]}return Iv(t,d,z[256]),d+D[256]},p6e=new OO([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),YG=new Zo(0),g6e=function(e,t,r,n,i,s){var o=s.z||e.length,l=new Zo(n+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(n,l.length-i),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=p6e[t-1],m=f>>13,h=f&8191,v=(1<<r)-1,p=s.p||new Aa(32768),g=s.h||new Aa(v+1),y=Math.ceil(r/3),b=2*y,x=function(Ne){return(e[Ne]^e[Ne+1]<<y^e[Ne+2]<<b)&v},j=new OO(25e3),N=new Aa(288),A=new Aa(32),C=0,E=0,O=s.i||0,L=0,k=s.w||0,T=0;O+2<o;++O){var B=x(O),M=O&32767,G=g[B];if(p[M]=G,g[B]=M,k<=O){var z=o-O;if((C>7e3||L>24576)&&(z>423||!u)){d=$M(e,c,0,j,N,A,E,L,T,O-T,d),L=C=E=0,T=O;for(var D=0;D<286;++D)N[D]=0;for(var D=0;D<30;++D)A[D]=0}var q=2,K=0,ae=h,J=M-G&32767;if(z>2&&B==x(O-J))for(var I=Math.min(m,z)-1,$=Math.min(32767,O),U=Math.min(258,z);J<=$&&--ae&&M!=G;){if(e[O+q]==e[O+q-J]){for(var H=0;H<U&&e[O+H]==e[O+H-J];++H);if(H>q){if(q=H,K=J,H>I)break;for(var re=Math.min(J,H-2),X=0,D=0;D<re;++D){var he=O-J+D&32767,se=p[he],ue=he-se&32767;ue>X&&(X=ue,G=he)}}}M=G,G=p[M],J+=M-G&32767}if(K){j[L++]=268435456|tE[q]<<18|DM[K];var ge=tE[q]&31,ve=DM[K]&31;E+=TO[ge]+LO[ve],++N[257+ge],++A[ve],k=O+q,++C}else j[L++]=e[O],++N[e[O]]}}for(O=Math.max(O,k);O<o;++O)j[L++]=e[O],++N[e[O]];d=$M(e,c,u,j,N,A,E,L,T,O-T,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=O,s.w=k)}else{for(var O=s.w||0;O<o+u;O+=65535){var te=O+65535;te>=o&&(c[d/8|0]=u,te=o),d=KG(c,d+1,e.subarray(O,te))}s.i=o}return m6e(l,0,n+GG(d)+i)},XG=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},v6e=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new Zo(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return g6e(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},ZG=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},y6e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=XG();i.p(t.dictionary),ZG(e,2,i.d())}};function iE(e,t){t||(t={});var r=XG();r.p(e);var n=v6e(e,t,t.dictionary?6:2,4);return y6e(n,t),ZG(n,n.length-4,r.d()),n}var x6e=typeof TextDecoder<"u"&&new TextDecoder,b6e=0;try{x6e.decode(YG,{stream:!0}),b6e=1}catch{}function w6e(e){if(Array.isArray(e))return e}function _6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function FM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j6e(e,t){if(e){if(typeof e=="string")return FM(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FM(e,t):void 0}}function N6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BM(e,t){return w6e(e)||_6e(e,t)||j6e(e,t)||N6e()}function zM(e,t="utf8"){return new TextDecoder(t).decode(e)}const S6e=new TextEncoder;function A6e(e){return S6e.encode(e)}const C6e=1024*8,k6e=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),fS={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class RO{constructor(t=C6e,r={}){cn(this,"buffer");cn(this,"byteLength");cn(this,"byteOffset");cn(this,"length");cn(this,"offset");cn(this,"lastWrittenByte");cn(this,"littleEndian");cn(this,"_data");cn(this,"_mark");cn(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,s=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof RO)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=fS[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===k6e&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+n));l.reverse();const c=new fS[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new fS[r](s);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return zM(this.readBytes(t))}decodeText(t=1,r="utf8"){return zM(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(A6e(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const E6e=4,qM=0,UM=1,P6e=2;function Dg(e){let t=e.length;for(;--t>=0;)e[t]=0}const O6e=0,JG=1,T6e=2,L6e=3,R6e=258,IO=29,j0=256,Vx=j0+1+IO,ep=30,DO=19,QG=2*Vx+1,Of=15,hS=16,I6e=7,MO=256,eK=16,tK=17,rK=18,sE=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),H1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),D6e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),nK=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M6e=512,pc=new Array((Vx+2)*2);Dg(pc);const by=new Array(ep*2);Dg(by);const Gx=new Array(M6e);Dg(Gx);const Kx=new Array(R6e-L6e+1);Dg(Kx);const $O=new Array(IO);Dg($O);const G2=new Array(ep);Dg(G2);function mS(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let iK,sK,aK;function pS(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const oK=e=>e<256?Gx[e]:Gx[256+(e>>>7)],Yx=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Zs=(e,t,r)=>{e.bi_valid>hS-r?(e.bi_buf|=t<<e.bi_valid&65535,Yx(e,e.bi_buf),e.bi_buf=t>>hS-e.bi_valid,e.bi_valid+=r-hS):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},bl=(e,t,r)=>{Zs(e,r[t*2],r[t*2+1])},lK=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},$6e=e=>{e.bi_valid===16?(Yx(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},F6e=(e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,d,f,m,h,v,p=0;for(m=0;m<=Of;m++)e.bl_count[m]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<QG;u++)d=e.heap[u],m=r[r[d*2+1]*2+1]+1,m>c&&(m=c,p++),r[d*2+1]=m,!(d>n)&&(e.bl_count[m]++,h=0,d>=l&&(h=o[d-l]),v=r[d*2],e.opt_len+=v*(m+h),s&&(e.static_len+=v*(i[d*2+1]+h)));if(p!==0){do{for(m=c-1;e.bl_count[m]===0;)m--;e.bl_count[m]--,e.bl_count[m+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(m=c;m!==0;m--)for(d=e.bl_count[m];d!==0;)f=e.heap[--u],!(f>n)&&(r[f*2+1]!==m&&(e.opt_len+=(m-r[f*2+1])*r[f*2],r[f*2+1]=m),d--)}},cK=(e,t,r)=>{const n=new Array(Of+1);let i=0,s,o;for(s=1;s<=Of;s++)i=i+r[s-1]<<1,n[s]=i;for(o=0;o<=t;o++){let l=e[o*2+1];l!==0&&(e[o*2]=lK(n[l]++,l))}},B6e=()=>{let e,t,r,n,i;const s=new Array(Of+1);for(r=0,n=0;n<IO-1;n++)for($O[n]=r,e=0;e<1<<sE[n];e++)Kx[r++]=n;for(Kx[r-1]=n,i=0,n=0;n<16;n++)for(G2[n]=i,e=0;e<1<<H1[n];e++)Gx[i++]=n;for(i>>=7;n<ep;n++)for(G2[n]=i<<7,e=0;e<1<<H1[n]-7;e++)Gx[256+i++]=n;for(t=0;t<=Of;t++)s[t]=0;for(e=0;e<=143;)pc[e*2+1]=8,e++,s[8]++;for(;e<=255;)pc[e*2+1]=9,e++,s[9]++;for(;e<=279;)pc[e*2+1]=7,e++,s[7]++;for(;e<=287;)pc[e*2+1]=8,e++,s[8]++;for(cK(pc,Vx+1,s),e=0;e<ep;e++)by[e*2+1]=5,by[e*2]=lK(e,5);iK=new mS(pc,sE,j0+1,Vx,Of),sK=new mS(by,H1,0,ep,Of),aK=new mS(new Array(0),D6e,0,DO,I6e)},uK=e=>{let t;for(t=0;t<Vx;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ep;t++)e.dyn_dtree[t*2]=0;for(t=0;t<DO;t++)e.bl_tree[t*2]=0;e.dyn_ltree[MO*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},dK=e=>{e.bi_valid>8?Yx(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},WM=(e,t,r,n)=>{const i=t*2,s=r*2;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]},gS=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&WM(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!WM(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},HM=(e,t,r)=>{let n,i,s=0,o,l;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+s++]&255,n+=(e.pending_buf[e.sym_buf+s++]&255)<<8,i=e.pending_buf[e.sym_buf+s++],n===0?bl(e,i,t):(o=Kx[i],bl(e,o+j0+1,t),l=sE[o],l!==0&&(i-=$O[o],Zs(e,i,l)),n--,o=oK(n),bl(e,o,r),l=H1[o],l!==0&&(n-=G2[o],Zs(e,n,l)));while(s<e.sym_next);bl(e,MO,t)},aE=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,l,c=-1,u;for(e.heap_len=0,e.heap_max=QG,o=0;o<s;o++)r[o*2]!==0?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=n[u*2+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)gS(e,r,o);u=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],gS(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=l,r[u*2]=r[o*2]+r[l*2],e.depth[u]=(e.depth[o]>=e.depth[l]?e.depth[o]:e.depth[l])+1,r[o*2+1]=r[l*2+1]=u,e.heap[1]=u++,gS(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],F6e(e,t),cK(r,c,e.bl_count)},VM=(e,t,r)=>{let n,i=-1,s,o=t[0*2+1],l=0,c=7,u=4;for(o===0&&(c=138,u=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)s=o,o=t[(n+1)*2+1],!(++l<c&&s===o)&&(l<u?e.bl_tree[s*2]+=l:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[eK*2]++):l<=10?e.bl_tree[tK*2]++:e.bl_tree[rK*2]++,l=0,i=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4))},GM=(e,t,r)=>{let n,i=-1,s,o=t[0*2+1],l=0,c=7,u=4;for(o===0&&(c=138,u=3),n=0;n<=r;n++)if(s=o,o=t[(n+1)*2+1],!(++l<c&&s===o)){if(l<u)do bl(e,s,e.bl_tree);while(--l!==0);else s!==0?(s!==i&&(bl(e,s,e.bl_tree),l--),bl(e,eK,e.bl_tree),Zs(e,l-3,2)):l<=10?(bl(e,tK,e.bl_tree),Zs(e,l-3,3)):(bl(e,rK,e.bl_tree),Zs(e,l-11,7));l=0,i=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4)}},z6e=e=>{let t;for(VM(e,e.dyn_ltree,e.l_desc.max_code),VM(e,e.dyn_dtree,e.d_desc.max_code),aE(e,e.bl_desc),t=DO-1;t>=3&&e.bl_tree[nK[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},q6e=(e,t,r,n)=>{let i;for(Zs(e,t-257,5),Zs(e,r-1,5),Zs(e,n-4,4),i=0;i<n;i++)Zs(e,e.bl_tree[nK[i]*2+1],3);GM(e,e.dyn_ltree,t-1),GM(e,e.dyn_dtree,r-1)},U6e=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return qM;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return UM;for(r=32;r<j0;r++)if(e.dyn_ltree[r*2]!==0)return UM;return qM};let KM=!1;const W6e=e=>{KM||(B6e(),KM=!0),e.l_desc=new pS(e.dyn_ltree,iK),e.d_desc=new pS(e.dyn_dtree,sK),e.bl_desc=new pS(e.bl_tree,aK),e.bi_buf=0,e.bi_valid=0,uK(e)},fK=(e,t,r,n)=>{Zs(e,(O6e<<1)+(n?1:0),3),dK(e),Yx(e,r),Yx(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},H6e=e=>{Zs(e,JG<<1,3),bl(e,MO,pc),$6e(e)},V6e=(e,t,r,n)=>{let i,s,o=0;e.level>0?(e.strm.data_type===P6e&&(e.strm.data_type=U6e(e)),aE(e,e.l_desc),aE(e,e.d_desc),o=z6e(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&t!==-1?fK(e,t,r,n):e.strategy===E6e||s===i?(Zs(e,(JG<<1)+(n?1:0),3),HM(e,pc,by)):(Zs(e,(T6e<<1)+(n?1:0),3),q6e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),HM(e,e.dyn_ltree,e.dyn_dtree)),uK(e),n&&dK(e)},G6e=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(Kx[r]+j0+1)*2]++,e.dyn_dtree[oK(t)*2]++),e.sym_next===e.sym_end);var K6e=W6e,Y6e=fK,X6e=V6e,Z6e=G6e,J6e=H6e,Q6e={_tr_init:K6e,_tr_stored_block:Y6e,_tr_flush_block:X6e,_tr_tally:Z6e,_tr_align:J6e};const eDe=(e,t,r,n)=>{let i=e&65535|0,s=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+t[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var Xx=eDe;const tDe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},rDe=new Uint32Array(tDe()),nDe=(e,t,r,n)=>{const i=rDe,s=n+r;e^=-1;for(let o=n;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var Ui=nDe,sg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},N0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:iDe,_tr_stored_block:oE,_tr_flush_block:sDe,_tr_tally:md,_tr_align:aDe}=Q6e,{Z_NO_FLUSH:pd,Z_PARTIAL_FLUSH:oDe,Z_FULL_FLUSH:lDe,Z_FINISH:Ja,Z_BLOCK:YM,Z_OK:ls,Z_STREAM_END:XM,Z_STREAM_ERROR:Il,Z_DATA_ERROR:cDe,Z_BUF_ERROR:vS,Z_DEFAULT_COMPRESSION:uDe,Z_FILTERED:dDe,Z_HUFFMAN_ONLY:o1,Z_RLE:fDe,Z_FIXED:hDe,Z_DEFAULT_STRATEGY:mDe,Z_UNKNOWN:pDe,Z_DEFLATED:Vj}=N0,gDe=9,vDe=15,yDe=8,xDe=29,bDe=256,lE=bDe+1+xDe,wDe=30,_De=19,jDe=2*lE+1,NDe=15,Tr=3,Ju=258,Dl=Ju+Tr+1,SDe=32,ag=42,FO=57,cE=69,uE=73,dE=91,fE=103,Tf=113,Kv=666,Ds=1,Mg=2,gh=3,$g=4,ADe=3,Lf=(e,t)=>(e.msg=sg[t],t),ZM=e=>e*2-(e>4?9:0),Bu=e=>{let t=e.length;for(;--t>=0;)e[t]=0},CDe=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t);t=i,n=t;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)};let kDe=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,gd=kDe;const va=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Ca=(e,t)=>{sDe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,va(e.strm)},Gr=(e,t)=>{e.pending_buf[e.pending++]=t},Mv=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},hE=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=Xx(e.adler,t,i,r):e.state.wrap===2&&(e.adler=Ui(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},hK=(e,t)=>{let r=e.max_chain_length,n=e.strstart,i,s,o=e.prev_length,l=e.nice_match;const c=e.strstart>e.w_size-Dl?e.strstart-(e.w_size-Dl):0,u=e.window,d=e.w_mask,f=e.prev,m=e.strstart+Ju;let h=u[n+o-1],v=u[n+o];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do if(i=t,!(u[i+o]!==v||u[i+o-1]!==h||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<m);if(s=Ju-(m-n),n=m-Ju,s>o){if(e.match_start=t,o=s,s>=l)break;h=u[n+o-1],v=u[n+o]}}while((t=f[t&d])>c&&--r!==0);return o<=e.lookahead?o:e.lookahead},og=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Dl)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),CDe(e),n+=t),e.strm.avail_in===0)break;if(r=hE(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=Tr)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=gd(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=gd(e,e.ins_h,e.window[i+Tr-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Tr)););}while(e.lookahead<Dl&&e.strm.avail_in!==0)},mK=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,i,s,o=0,l=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>s&&(n=s),n<r&&(n===0&&t!==Ja||t===pd||n!==i+e.strm.avail_in)))break;o=t===Ja&&n===i+e.strm.avail_in?1:0,oE(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,va(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(hE(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(o===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?$g:t!==pd&&t!==Ja&&e.strm.avail_in===0&&e.strstart===e.block_start?Mg:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(hE(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,r=s>e.w_size?e.w_size:s,i=e.strstart-e.block_start,(i>=r||(i||t===Ja)&&t!==pd&&e.strm.avail_in===0&&i<=s)&&(n=i>s?s:i,o=t===Ja&&e.strm.avail_in===0&&n===i?1:0,oE(e,e.block_start,n,o),e.block_start+=n,va(e.strm)),o?gh:Ds)},yS=(e,t)=>{let r,n;for(;;){if(e.lookahead<Dl){if(og(e),e.lookahead<Dl&&t===pd)return Ds;if(e.lookahead===0)break}if(r=0,e.lookahead>=Tr&&(e.ins_h=gd(e,e.ins_h,e.window[e.strstart+Tr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Dl&&(e.match_length=hK(e,r)),e.match_length>=Tr)if(n=md(e,e.strstart-e.match_start,e.match_length-Tr),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Tr){e.match_length--;do e.strstart++,e.ins_h=gd(e,e.ins_h,e.window[e.strstart+Tr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=gd(e,e.ins_h,e.window[e.strstart+1]);else n=md(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ca(e,!1),e.strm.avail_out===0))return Ds}return e.insert=e.strstart<Tr-1?e.strstart:Tr-1,t===Ja?(Ca(e,!0),e.strm.avail_out===0?gh:$g):e.sym_next&&(Ca(e,!1),e.strm.avail_out===0)?Ds:Mg},nm=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<Dl){if(og(e),e.lookahead<Dl&&t===pd)return Ds;if(e.lookahead===0)break}if(r=0,e.lookahead>=Tr&&(e.ins_h=gd(e,e.ins_h,e.window[e.strstart+Tr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Tr-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Dl&&(e.match_length=hK(e,r),e.match_length<=5&&(e.strategy===dDe||e.match_length===Tr&&e.strstart-e.match_start>4096)&&(e.match_length=Tr-1)),e.prev_length>=Tr&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Tr,n=md(e,e.strstart-1-e.prev_match,e.prev_length-Tr),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=gd(e,e.ins_h,e.window[e.strstart+Tr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Tr-1,e.strstart++,n&&(Ca(e,!1),e.strm.avail_out===0))return Ds}else if(e.match_available){if(n=md(e,0,e.window[e.strstart-1]),n&&Ca(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ds}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=md(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Tr-1?e.strstart:Tr-1,t===Ja?(Ca(e,!0),e.strm.avail_out===0?gh:$g):e.sym_next&&(Ca(e,!1),e.strm.avail_out===0)?Ds:Mg},EDe=(e,t)=>{let r,n,i,s;const o=e.window;for(;;){if(e.lookahead<=Ju){if(og(e),e.lookahead<=Ju&&t===pd)return Ds;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Tr&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=e.strstart+Ju;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=Ju-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Tr?(r=md(e,1,e.match_length-Tr),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=md(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Ca(e,!1),e.strm.avail_out===0))return Ds}return e.insert=0,t===Ja?(Ca(e,!0),e.strm.avail_out===0?gh:$g):e.sym_next&&(Ca(e,!1),e.strm.avail_out===0)?Ds:Mg},PDe=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(og(e),e.lookahead===0)){if(t===pd)return Ds;break}if(e.match_length=0,r=md(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Ca(e,!1),e.strm.avail_out===0))return Ds}return e.insert=0,t===Ja?(Ca(e,!0),e.strm.avail_out===0?gh:$g):e.sym_next&&(Ca(e,!1),e.strm.avail_out===0)?Ds:Mg};function ul(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const Yv=[new ul(0,0,0,0,mK),new ul(4,4,8,4,yS),new ul(4,5,16,8,yS),new ul(4,6,32,32,yS),new ul(4,4,16,16,nm),new ul(8,16,32,32,nm),new ul(8,16,128,128,nm),new ul(8,32,128,256,nm),new ul(32,128,258,1024,nm),new ul(32,258,258,4096,nm)],ODe=e=>{e.window_size=2*e.w_size,Bu(e.head),e.max_lazy_match=Yv[e.level].max_lazy,e.good_match=Yv[e.level].good_length,e.nice_match=Yv[e.level].nice_length,e.max_chain_length=Yv[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Tr-1,e.match_available=0,e.ins_h=0};function TDe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Vj,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(jDe*2),this.dyn_dtree=new Uint16Array((2*wDe+1)*2),this.bl_tree=new Uint16Array((2*_De+1)*2),Bu(this.dyn_ltree),Bu(this.dyn_dtree),Bu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(NDe+1),this.heap=new Uint16Array(2*lE+1),Bu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*lE+1),Bu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const S0=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==ag&&t.status!==FO&&t.status!==cE&&t.status!==uE&&t.status!==dE&&t.status!==fE&&t.status!==Tf&&t.status!==Kv?1:0},pK=e=>{if(S0(e))return Lf(e,Il);e.total_in=e.total_out=0,e.data_type=pDe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?FO:t.wrap?ag:Tf,e.adler=t.wrap===2?0:1,t.last_flush=-2,iDe(t),ls},gK=e=>{const t=pK(e);return t===ls&&ODe(e.state),t},LDe=(e,t)=>S0(e)||e.state.wrap!==2?Il:(e.state.gzhead=t,ls),vK=(e,t,r,n,i,s)=>{if(!e)return Il;let o=1;if(t===uDe&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>gDe||r!==Vj||n<8||n>15||t<0||t>9||s<0||s>hDe||n===8&&o!==1)return Lf(e,Il);n===8&&(n=9);const l=new TDe;return e.state=l,l.strm=e,l.status=ag,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+Tr-1)/Tr),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=s,l.method=r,gK(e)},RDe=(e,t)=>vK(e,t,Vj,vDe,yDe,mDe),IDe=(e,t)=>{if(S0(e)||t>YM||t<0)return e?Lf(e,Il):Il;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===Kv&&t!==Ja)return Lf(e,e.avail_out===0?vS:Il);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(va(e),e.avail_out===0)return r.last_flush=-1,ls}else if(e.avail_in===0&&ZM(t)<=ZM(n)&&t!==Ja)return Lf(e,vS);if(r.status===Kv&&e.avail_in!==0)return Lf(e,vS);if(r.status===ag&&r.wrap===0&&(r.status=Tf),r.status===ag){let i=Vj+(r.w_bits-8<<4)<<8,s=-1;if(r.strategy>=o1||r.level<2?s=0:r.level<6?s=1:r.level===6?s=2:s=3,i|=s<<6,r.strstart!==0&&(i|=SDe),i+=31-i%31,Mv(r,i),r.strstart!==0&&(Mv(r,e.adler>>>16),Mv(r,e.adler&65535)),e.adler=1,r.status=Tf,va(e),r.pending!==0)return r.last_flush=-1,ls}if(r.status===FO){if(e.adler=0,Gr(r,31),Gr(r,139),Gr(r,8),r.gzhead)Gr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Gr(r,r.gzhead.time&255),Gr(r,r.gzhead.time>>8&255),Gr(r,r.gzhead.time>>16&255),Gr(r,r.gzhead.time>>24&255),Gr(r,r.level===9?2:r.strategy>=o1||r.level<2?4:0),Gr(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Gr(r,r.gzhead.extra.length&255),Gr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Ui(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=cE;else if(Gr(r,0),Gr(r,0),Gr(r,0),Gr(r,0),Gr(r,0),Gr(r,r.level===9?2:r.strategy>=o1||r.level<2?4:0),Gr(r,ADe),r.status=Tf,va(e),r.pending!==0)return r.last_flush=-1,ls}if(r.status===cE){if(r.gzhead.extra){let i=r.pending,s=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+s>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=Ui(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=l,va(e),r.pending!==0)return r.last_flush=-1,ls;i=0,s-=l}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending+=s,r.gzhead.hcrc&&r.pending>i&&(e.adler=Ui(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=uE}if(r.status===uE){if(r.gzhead.name){let i=r.pending,s;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=Ui(e.adler,r.pending_buf,r.pending-i,i)),va(e),r.pending!==0)return r.last_flush=-1,ls;i=0}r.gzindex<r.gzhead.name.length?s=r.gzhead.name.charCodeAt(r.gzindex++)&255:s=0,Gr(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=Ui(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=dE}if(r.status===dE){if(r.gzhead.comment){let i=r.pending,s;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=Ui(e.adler,r.pending_buf,r.pending-i,i)),va(e),r.pending!==0)return r.last_flush=-1,ls;i=0}r.gzindex<r.gzhead.comment.length?s=r.gzhead.comment.charCodeAt(r.gzindex++)&255:s=0,Gr(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=Ui(e.adler,r.pending_buf,r.pending-i,i))}r.status=fE}if(r.status===fE){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(va(e),r.pending!==0))return r.last_flush=-1,ls;Gr(r,e.adler&255),Gr(r,e.adler>>8&255),e.adler=0}if(r.status=Tf,va(e),r.pending!==0)return r.last_flush=-1,ls}if(e.avail_in!==0||r.lookahead!==0||t!==pd&&r.status!==Kv){let i=r.level===0?mK(r,t):r.strategy===o1?PDe(r,t):r.strategy===fDe?EDe(r,t):Yv[r.level].func(r,t);if((i===gh||i===$g)&&(r.status=Kv),i===Ds||i===gh)return e.avail_out===0&&(r.last_flush=-1),ls;if(i===Mg&&(t===oDe?aDe(r):t!==YM&&(oE(r,0,0,!1),t===lDe&&(Bu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),va(e),e.avail_out===0))return r.last_flush=-1,ls}return t!==Ja?ls:r.wrap<=0?XM:(r.wrap===2?(Gr(r,e.adler&255),Gr(r,e.adler>>8&255),Gr(r,e.adler>>16&255),Gr(r,e.adler>>24&255),Gr(r,e.total_in&255),Gr(r,e.total_in>>8&255),Gr(r,e.total_in>>16&255),Gr(r,e.total_in>>24&255)):(Mv(r,e.adler>>>16),Mv(r,e.adler&65535)),va(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?ls:XM)},DDe=e=>{if(S0(e))return Il;const t=e.state.status;return e.state=null,t===Tf?Lf(e,cDe):ls},MDe=(e,t)=>{let r=t.length;if(S0(e))return Il;const n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==ag||n.lookahead)return Il;if(i===1&&(e.adler=Xx(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(Bu(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(t.subarray(r-n.w_size,r),0),t=c,r=n.w_size}const s=e.avail_in,o=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,og(n);n.lookahead>=Tr;){let c=n.strstart,u=n.lookahead-(Tr-1);do n.ins_h=gd(n,n.ins_h,n.window[c+Tr-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--u);n.strstart=c,n.lookahead=Tr-1,og(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Tr-1,n.match_available=0,e.next_in=o,e.input=l,e.avail_in=s,n.wrap=i,ls};var $De=RDe,FDe=vK,BDe=gK,zDe=pK,qDe=LDe,UDe=IDe,WDe=DDe,HDe=MDe,VDe="pako deflate (from Nodeca project)",wy={deflateInit:$De,deflateInit2:FDe,deflateReset:BDe,deflateResetKeep:zDe,deflateSetHeader:qDe,deflate:UDe,deflateEnd:WDe,deflateSetDictionary:HDe,deflateInfo:VDe};const GDe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var KDe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)GDe(r,n)&&(e[n]=r[n])}}return e},YDe=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,s=e.length;n<s;n++){let o=e[n];r.set(o,i),i+=o.length}return r},Gj={assign:KDe,flattenChunks:YDe};let yK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{yK=!1}const Zx=new Uint8Array(256);for(let e=0;e<256;e++)Zx[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Zx[254]=Zx[254]=1;var XDe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,s,o=e.length,l=0;for(i=0;i<o;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),s=0,i=0;s<l;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|r&63):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|r&63):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|r&63);return t};const ZDe=(e,t)=>{if(t<65534&&e.subarray&&yK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var JDe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){s[i++]=o;continue}let l=Zx[o];if(l>4){s[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|e[n++]&63,l--;if(l>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return ZDe(s,i)},QDe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Zx[e[r]]>t?r:t},Jx={string2buf:XDe,buf2string:JDe,utf8border:QDe};function eMe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var xK=eMe;const bK=Object.prototype.toString,{Z_NO_FLUSH:tMe,Z_SYNC_FLUSH:rMe,Z_FULL_FLUSH:nMe,Z_FINISH:iMe,Z_OK:K2,Z_STREAM_END:sMe,Z_DEFAULT_COMPRESSION:aMe,Z_DEFAULT_STRATEGY:oMe,Z_DEFLATED:lMe}=N0;function BO(e){this.options=Gj.assign({level:aMe,method:lMe,chunkSize:16384,windowBits:15,memLevel:8,strategy:oMe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xK,this.strm.avail_out=0;let r=wy.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==K2)throw new Error(sg[r]);if(t.header&&wy.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=Jx.string2buf(t.dictionary):bK.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=wy.deflateSetDictionary(this.strm,n),r!==K2)throw new Error(sg[r]);this._dict_set=!0}}BO.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?iMe:tMe,typeof e=="string"?r.input=Jx.string2buf(e):bK.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===rMe||s===nMe)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=wy.deflate(r,s),i===sMe)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=wy.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===K2;if(r.avail_out===0){this.onData(r.output);continue}if(s>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};BO.prototype.onData=function(e){this.chunks.push(e)};BO.prototype.onEnd=function(e){e===K2&&(this.result=Gj.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const l1=16209,cMe=16191;var uMe=function(t,r){let n,i,s,o,l,c,u,d,f,m,h,v,p,g,y,b,x,j,N,A,C,E,O,L;const k=t.state;n=t.next_in,O=t.input,i=n+(t.avail_in-5),s=t.next_out,L=t.output,o=s-(r-t.avail_out),l=s+(t.avail_out-257),c=k.dmax,u=k.wsize,d=k.whave,f=k.wnext,m=k.window,h=k.hold,v=k.bits,p=k.lencode,g=k.distcode,y=(1<<k.lenbits)-1,b=(1<<k.distbits)-1;e:do{v<15&&(h+=O[n++]<<v,v+=8,h+=O[n++]<<v,v+=8),x=p[h&y];t:for(;;){if(j=x>>>24,h>>>=j,v-=j,j=x>>>16&255,j===0)L[s++]=x&65535;else if(j&16){N=x&65535,j&=15,j&&(v<j&&(h+=O[n++]<<v,v+=8),N+=h&(1<<j)-1,h>>>=j,v-=j),v<15&&(h+=O[n++]<<v,v+=8,h+=O[n++]<<v,v+=8),x=g[h&b];r:for(;;){if(j=x>>>24,h>>>=j,v-=j,j=x>>>16&255,j&16){if(A=x&65535,j&=15,v<j&&(h+=O[n++]<<v,v+=8,v<j&&(h+=O[n++]<<v,v+=8)),A+=h&(1<<j)-1,A>c){t.msg="invalid distance too far back",k.mode=l1;break e}if(h>>>=j,v-=j,j=s-o,A>j){if(j=A-j,j>d&&k.sane){t.msg="invalid distance too far back",k.mode=l1;break e}if(C=0,E=m,f===0){if(C+=u-j,j<N){N-=j;do L[s++]=m[C++];while(--j);C=s-A,E=L}}else if(f<j){if(C+=u+f-j,j-=f,j<N){N-=j;do L[s++]=m[C++];while(--j);if(C=0,f<N){j=f,N-=j;do L[s++]=m[C++];while(--j);C=s-A,E=L}}}else if(C+=f-j,j<N){N-=j;do L[s++]=m[C++];while(--j);C=s-A,E=L}for(;N>2;)L[s++]=E[C++],L[s++]=E[C++],L[s++]=E[C++],N-=3;N&&(L[s++]=E[C++],N>1&&(L[s++]=E[C++]))}else{C=s-A;do L[s++]=L[C++],L[s++]=L[C++],L[s++]=L[C++],N-=3;while(N>2);N&&(L[s++]=L[C++],N>1&&(L[s++]=L[C++]))}}else if(j&64){t.msg="invalid distance code",k.mode=l1;break e}else{x=g[(x&65535)+(h&(1<<j)-1)];continue r}break}}else if(j&64)if(j&32){k.mode=cMe;break e}else{t.msg="invalid literal/length code",k.mode=l1;break e}else{x=p[(x&65535)+(h&(1<<j)-1)];continue t}break}}while(n<i&&s<l);N=v>>3,n-=N,v-=N<<3,h&=(1<<v)-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=s<l?257+(l-s):257-(s-l),k.hold=h,k.bits=v};const im=15,JM=852,QM=592,e8=0,xS=1,t8=2,dMe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fMe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hMe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),mMe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),pMe=(e,t,r,n,i,s,o,l)=>{const c=l.bits;let u=0,d=0,f=0,m=0,h=0,v=0,p=0,g=0,y=0,b=0,x,j,N,A,C,E=null,O;const L=new Uint16Array(im+1),k=new Uint16Array(im+1);let T=null,B,M,G;for(u=0;u<=im;u++)L[u]=0;for(d=0;d<n;d++)L[t[r+d]]++;for(h=c,m=im;m>=1&&L[m]===0;m--);if(h>m&&(h=m),m===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<m&&L[f]===0;f++);for(h<f&&(h=f),g=1,u=1;u<=im;u++)if(g<<=1,g-=L[u],g<0)return-1;if(g>0&&(e===e8||m!==1))return-1;for(k[1]=0,u=1;u<im;u++)k[u+1]=k[u]+L[u];for(d=0;d<n;d++)t[r+d]!==0&&(o[k[t[r+d]]++]=d);if(e===e8?(E=T=o,O=20):e===xS?(E=dMe,T=fMe,O=257):(E=hMe,T=mMe,O=0),b=0,d=0,u=f,C=s,v=h,p=0,N=-1,y=1<<h,A=y-1,e===xS&&y>JM||e===t8&&y>QM)return 1;for(;;){B=u-p,o[d]+1<O?(M=0,G=o[d]):o[d]>=O?(M=T[o[d]-O],G=E[o[d]-O]):(M=96,G=0),x=1<<u-p,j=1<<v,f=j;do j-=x,i[C+(b>>p)+j]=B<<24|M<<16|G|0;while(j!==0);for(x=1<<u-1;b&x;)x>>=1;if(x!==0?(b&=x-1,b+=x):b=0,d++,--L[u]===0){if(u===m)break;u=t[r+o[d]]}if(u>h&&(b&A)!==N){for(p===0&&(p=h),C+=f,v=u-p,g=1<<v;v+p<m&&(g-=L[v+p],!(g<=0));)v++,g<<=1;if(y+=1<<v,e===xS&&y>JM||e===t8&&y>QM)return 1;N=b&A,i[N]=h<<24|v<<16|C-s|0}}return b!==0&&(i[C+b]=u-p<<24|64<<16|0),l.bits=h,0};var _y=pMe;const gMe=0,wK=1,_K=2,{Z_FINISH:r8,Z_BLOCK:vMe,Z_TREES:c1,Z_OK:vh,Z_STREAM_END:yMe,Z_NEED_DICT:xMe,Z_STREAM_ERROR:po,Z_DATA_ERROR:jK,Z_MEM_ERROR:NK,Z_BUF_ERROR:bMe,Z_DEFLATED:n8}=N0,Kj=16180,i8=16181,s8=16182,a8=16183,o8=16184,l8=16185,c8=16186,u8=16187,d8=16188,f8=16189,Y2=16190,cc=16191,bS=16192,h8=16193,wS=16194,m8=16195,p8=16196,g8=16197,v8=16198,u1=16199,d1=16200,y8=16201,x8=16202,b8=16203,w8=16204,_8=16205,_S=16206,j8=16207,N8=16208,qn=16209,SK=16210,AK=16211,wMe=852,_Me=592,jMe=15,NMe=jMe,S8=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function SMe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kh=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Kj||t.mode>AK?1:0},CK=e=>{if(kh(e))return po;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Kj,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(wMe),t.distcode=t.distdyn=new Int32Array(_Me),t.sane=1,t.back=-1,vh},kK=e=>{if(kh(e))return po;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,CK(e)},EK=(e,t)=>{let r;if(kh(e))return po;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?po:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,kK(e))},PK=(e,t)=>{if(!e)return po;const r=new SMe;e.state=r,r.strm=e,r.window=null,r.mode=Kj;const n=EK(e,t);return n!==vh&&(e.state=null),n},AMe=e=>PK(e,NMe);let A8=!0,jS,NS;const CMe=e=>{if(A8){jS=new Int32Array(512),NS=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(_y(wK,e.lens,0,288,jS,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;_y(_K,e.lens,0,32,NS,0,e.work,{bits:5}),A8=!1}e.lencode=jS,e.lenbits=9,e.distcode=NS,e.distbits=5},OK=(e,t,r,n)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},kMe=(e,t)=>{let r,n,i,s,o,l,c,u,d,f,m,h,v,p,g=0,y,b,x,j,N,A,C,E;const O=new Uint8Array(4);let L,k;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kh(e)||!e.output||!e.input&&e.avail_in!==0)return po;r=e.state,r.mode===cc&&(r.mode=bS),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,f=l,m=c,E=vh;e:for(;;)switch(r.mode){case Kj:if(r.wrap===0){r.mode=bS;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,O[0]=u&255,O[1]=u>>>8&255,r.check=Ui(r.check,O,2,0),u=0,d=0,r.mode=i8;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=qn;break}if((u&15)!==n8){e.msg="unknown compression method",r.mode=qn;break}if(u>>>=4,d-=4,C=(u&15)+8,r.wbits===0&&(r.wbits=C),C>15||C>r.wbits){e.msg="invalid window size",r.mode=qn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?f8:cc,u=0,d=0;break;case i8:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==n8){e.msg="unknown compression method",r.mode=qn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=qn;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(O[0]=u&255,O[1]=u>>>8&255,r.check=Ui(r.check,O,2,0)),u=0,d=0,r.mode=s8;case s8:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(O[0]=u&255,O[1]=u>>>8&255,O[2]=u>>>16&255,O[3]=u>>>24&255,r.check=Ui(r.check,O,4,0)),u=0,d=0,r.mode=a8;case a8:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(O[0]=u&255,O[1]=u>>>8&255,r.check=Ui(r.check,O,2,0)),u=0,d=0,r.mode=o8;case o8:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(O[0]=u&255,O[1]=u>>>8&255,r.check=Ui(r.check,O,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=l8;case l8:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+h),C)),r.flags&512&&r.wrap&4&&(r.check=Ui(r.check,n,h,s)),l-=h,s+=h,r.length-=h),r.length))break e;r.length=0,r.mode=c8;case c8:if(r.flags&2048){if(l===0)break e;h=0;do C=n[s+h++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));while(C&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Ui(r.check,n,h,s)),l-=h,s+=h,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=u8;case u8:if(r.flags&4096){if(l===0)break e;h=0;do C=n[s+h++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));while(C&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Ui(r.check,n,h,s)),l-=h,s+=h,C)break e}else r.head&&(r.head.comment=null);r.mode=d8;case d8:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=qn;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=cc;break;case f8:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}e.adler=r.check=S8(u),u=0,d=0,r.mode=Y2;case Y2:if(r.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=l,r.hold=u,r.bits=d,xMe;e.adler=r.check=1,r.mode=cc;case cc:if(t===vMe||t===c1)break e;case bS:if(r.last){u>>>=d&7,d-=d&7,r.mode=_S;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=h8;break;case 1:if(CMe(r),r.mode=u1,t===c1){u>>>=2,d-=2;break e}break;case 2:r.mode=p8;break;case 3:e.msg="invalid block type",r.mode=qn}u>>>=2,d-=2;break;case h8:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=qn;break}if(r.length=u&65535,u=0,d=0,r.mode=wS,t===c1)break e;case wS:r.mode=m8;case m8:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;i.set(n.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,r.length-=h;break}r.mode=cc;break;case p8:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=qn;break}r.have=0,r.mode=g8;case g8:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[T[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},E=_y(gMe,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,E){e.msg="invalid code lengths set",r.mode=qn;break}r.have=0,r.mode=v8;case v8:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],y=g>>>24,b=g>>>16&255,x=g&65535,!(y<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(x<16)u>>>=y,d-=y,r.lens[r.have++]=x;else{if(x===16){for(k=y+2;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=y,d-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=qn;break}C=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(x===17){for(k=y+3;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=y,d-=y,C=0,h=3+(u&7),u>>>=3,d-=3}else{for(k=y+7;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=y,d-=y,C=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=qn;break}for(;h--;)r.lens[r.have++]=C}}if(r.mode===qn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=qn;break}if(r.lenbits=9,L={bits:r.lenbits},E=_y(wK,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,E){e.msg="invalid literal/lengths set",r.mode=qn;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},E=_y(_K,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,E){e.msg="invalid distances set",r.mode=qn;break}if(r.mode=u1,t===c1)break e;case u1:r.mode=d1;case d1:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=l,r.hold=u,r.bits=d,uMe(e,m),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,r.mode===cc&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],y=g>>>24,b=g>>>16&255,x=g&65535,!(y<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b&&!(b&240)){for(j=y,N=b,A=x;g=r.lencode[A+((u&(1<<j+N)-1)>>j)],y=g>>>24,b=g>>>16&255,x=g&65535,!(j+y<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=j,d-=j,r.back+=j}if(u>>>=y,d-=y,r.back+=y,r.length=x,b===0){r.mode=_8;break}if(b&32){r.back=-1,r.mode=cc;break}if(b&64){e.msg="invalid literal/length code",r.mode=qn;break}r.extra=b&15,r.mode=y8;case y8:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=x8;case x8:for(;g=r.distcode[u&(1<<r.distbits)-1],y=g>>>24,b=g>>>16&255,x=g&65535,!(y<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(b&240)){for(j=y,N=b,A=x;g=r.distcode[A+((u&(1<<j+N)-1)>>j)],y=g>>>24,b=g>>>16&255,x=g&65535,!(j+y<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=j,d-=j,r.back+=j}if(u>>>=y,d-=y,r.back+=y,b&64){e.msg="invalid distance code",r.mode=qn;break}r.offset=x,r.extra=b&15,r.mode=b8;case b8:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=qn;break}r.mode=w8;case w8:if(c===0)break e;if(h=m-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=qn;break}h>r.wnext?(h-=r.wnext,v=r.wsize-h):v=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=i,v=o-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do i[o++]=p[v++];while(--h);r.length===0&&(r.mode=d1);break;case _8:if(c===0)break e;i[o++]=r.length,c--,r.mode=d1;break;case _S:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(m-=c,e.total_out+=m,r.total+=m,r.wrap&4&&m&&(e.adler=r.check=r.flags?Ui(r.check,i,m,o-m):Xx(r.check,i,m,o-m)),m=c,r.wrap&4&&(r.flags?u:S8(u))!==r.check){e.msg="incorrect data check",r.mode=qn;break}u=0,d=0}r.mode=j8;case j8:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=qn;break}u=0,d=0}r.mode=N8;case N8:E=yMe;break e;case qn:E=jK;break e;case SK:return NK;case AK:default:return po}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=l,r.hold=u,r.bits=d,(r.wsize||m!==e.avail_out&&r.mode<qn&&(r.mode<_S||t!==r8))&&OK(e,e.output,e.next_out,m-e.avail_out),f-=e.avail_in,m-=e.avail_out,e.total_in+=f,e.total_out+=m,r.total+=m,r.wrap&4&&m&&(e.adler=r.check=r.flags?Ui(r.check,i,m,e.next_out-m):Xx(r.check,i,m,e.next_out-m)),e.data_type=r.bits+(r.last?64:0)+(r.mode===cc?128:0)+(r.mode===u1||r.mode===wS?256:0),(f===0&&m===0||t===r8)&&E===vh&&(E=bMe),E},EMe=e=>{if(kh(e))return po;let t=e.state;return t.window&&(t.window=null),e.state=null,vh},PMe=(e,t)=>{if(kh(e))return po;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,vh):po},OMe=(e,t)=>{const r=t.length;let n,i,s;return kh(e)||(n=e.state,n.wrap!==0&&n.mode!==Y2)?po:n.mode===Y2&&(i=1,i=Xx(i,t,r,0),i!==n.check)?jK:(s=OK(e,t,r,r),s?(n.mode=SK,NK):(n.havedict=1,vh))};var TMe=kK,LMe=EK,RMe=CK,IMe=AMe,DMe=PK,MMe=kMe,$Me=EMe,FMe=PMe,BMe=OMe,zMe="pako inflate (from Nodeca project)",gc={inflateReset:TMe,inflateReset2:LMe,inflateResetKeep:RMe,inflateInit:IMe,inflateInit2:DMe,inflate:MMe,inflateEnd:$Me,inflateGetHeader:FMe,inflateSetDictionary:BMe,inflateInfo:zMe};function qMe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var UMe=qMe;const TK=Object.prototype.toString,{Z_NO_FLUSH:WMe,Z_FINISH:HMe,Z_OK:Qx,Z_STREAM_END:SS,Z_NEED_DICT:AS,Z_STREAM_ERROR:VMe,Z_DATA_ERROR:C8,Z_MEM_ERROR:GMe}=N0;function A0(e){this.options=Gj.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xK,this.strm.avail_out=0;let r=gc.inflateInit2(this.strm,t.windowBits);if(r!==Qx)throw new Error(sg[r]);if(this.header=new UMe,gc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Jx.string2buf(t.dictionary):TK.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=gc.inflateSetDictionary(this.strm,t.dictionary),r!==Qx)))throw new Error(sg[r])}A0.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?HMe:WMe,TK.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=gc.inflate(r,o),s===AS&&i&&(s=gc.inflateSetDictionary(r,i),s===Qx?s=gc.inflate(r,o):s===C8&&(s=AS));r.avail_in>0&&s===SS&&r.state.wrap>0&&e[r.next_in]!==0;)gc.inflateReset(r),s=gc.inflate(r,o);switch(s){case VMe:case C8:case AS:case GMe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===SS))if(this.options.to==="string"){let c=Jx.utf8border(r.output,r.next_out),u=r.next_out-c,d=Jx.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===Qx&&l===0)){if(s===SS)return s=gc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};A0.prototype.onData=function(e){this.chunks.push(e)};A0.prototype.onEnd=function(e){e===Qx&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Gj.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function zO(e,t){const r=new A0(t);if(r.push(e),r.err)throw r.msg||sg[r.err];return r.result}function KMe(e,t){return t=t||{},t.raw=!0,zO(e,t)}var YMe=A0,XMe=zO,ZMe=KMe,JMe=zO,QMe=N0,e8e={Inflate:YMe,inflate:XMe,inflateRaw:ZMe,ungzip:JMe,constants:QMe};const{Inflate:t8e,inflate:r8e,inflateRaw:v7e,ungzip:y7e}=e8e;var k8=t8e,n8e=r8e;const LK=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;LK[e]=t}const E8=4294967295;function i8e(e,t,r){let n=e;for(let i=0;i<r;i++)n=LK[(n^t[i])&255]^n>>>8;return n}function s8e(e,t){return(i8e(E8,e,t)^E8)>>>0}function P8(e,t,r){const n=e.readUint32(),i=s8e(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function RK(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function IK(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function DK(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function MK(e,t,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=e[s]+(r[s]>>1)&255;for(;s<n;s++)t[s]=e[s]+(t[s-i]+r[s]>>1)&255}}function $K(e,t,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=e[s]+r[s]&255;for(;s<n;s++)t[s]=e[s]+a8e(t[s-i],r[s],r[s-i])&255}}function a8e(e,t,r){const n=e+t-r,i=Math.abs(n-e),s=Math.abs(n-t),o=Math.abs(n-r);return i<=s&&i<=o?e:s<=o?t:r}function o8e(e,t,r,n,i,s){switch(e){case 0:RK(t,r,i);break;case 1:IK(t,r,i,s);break;case 2:DK(t,r,n,i);break;case 3:MK(t,r,n,i,s);break;case 4:$K(t,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const l8e=new Uint16Array([255]),c8e=new Uint8Array(l8e.buffer),u8e=c8e[0]===255;function d8e(e){const{data:t,width:r,height:n,channels:i,depth:s}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*i,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=o[d],m=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(m<=0||h<=0)continue;const v=m*l,p=new Uint8Array(v);for(let g=0;g<h;g++){const y=t[u++],b=t.subarray(u,u+v);u+=v;const x=new Uint8Array(v);o8e(y,b,x,p,v,l),p.set(x);for(let j=0;j<m;j++){const N=f.x+j*f.xStep,A=f.y+g*f.yStep;if(!(N>=r||A>=n))for(let C=0;C<l;C++)c[(A*r+N)*l+C]=x[j*l+C]}}}if(s===16){const d=new Uint16Array(c.buffer);if(u8e)for(let f=0;f<d.length;f++)d[f]=f8e(d[f]);return d}else return c}function f8e(e){return(e&255)<<8|e>>8&255}const h8e=new Uint16Array([255]),m8e=new Uint8Array(h8e.buffer),p8e=m8e[0]===255,g8e=new Uint8Array(0);function O8(e){const{data:t,width:r,height:n,channels:i,depth:s}=e,o=Math.ceil(s/8)*i,l=Math.ceil(s/8*i*r),c=new Uint8Array(n*l);let u=g8e,d=0,f,m;for(let h=0;h<n;h++){switch(f=t.subarray(d+1,d+1+l),m=c.subarray(h*l,(h+1)*l),t[d]){case 0:RK(f,m,l);break;case 1:IK(f,m,l,o);break;case 2:DK(f,m,u,l);break;case 3:MK(f,m,u,l,o);break;case 4:$K(f,m,u,l,o);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=m,d+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if(p8e)for(let v=0;v<h.length;v++)h[v]=v8e(h[v]);return h}else return c}function v8e(e){return(e&255)<<8|e>>8&255}const V1=Uint8Array.of(137,80,78,71,13,10,26,10);function T8(e){if(!y8e(e.readBytes(V1.length)))throw new Error("wrong PNG signature")}function y8e(e){if(e.length<V1.length)return!1;for(let t=0;t<V1.length;t++)if(e[t]!==V1[t])return!1;return!0}const x8e="tEXt",b8e=0,FK=new TextDecoder("latin1");function w8e(e){if(j8e(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const _8e=/^[\u0000-\u00FF]*$/;function j8e(e){if(!_8e.test(e))throw new Error("invalid latin1 text")}function N8e(e,t,r){const n=BK(t);e[n]=S8e(t,r-n.length-1)}function BK(e){for(e.mark();e.readByte()!==b8e;);const t=e.offset;e.reset();const r=FK.decode(e.readBytes(t-e.offset-1));return e.skip(1),w8e(r),r}function S8e(e,t){return FK.decode(e.readBytes(t))}const ma={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CS={UNKNOWN:-1,DEFLATE:0},L8={UNKNOWN:-1,ADAPTIVE:0},kS={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},f1={NONE:0,BACKGROUND:1,PREVIOUS:2},ES={SOURCE:0,OVER:1};class A8e extends RO{constructor(r,n={}){super(r);cn(this,"_checkCrc");cn(this,"_inflator");cn(this,"_png");cn(this,"_apng");cn(this,"_end");cn(this,"_hasPalette");cn(this,"_palette");cn(this,"_hasTransparency");cn(this,"_transparency");cn(this,"_compressionMethod");cn(this,"_filterMethod");cn(this,"_interlaceMethod");cn(this,"_colorType");cn(this,"_isAnimated");cn(this,"_numberOfFrames");cn(this,"_numberOfPlays");cn(this,"_frames");cn(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new k8,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CS.UNKNOWN,this._filterMethod=L8.UNKNOWN,this._interlaceMethod=kS.UNKNOWN,this._colorType=ma.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(T8(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(T8(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case x8e:N8e(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?P8(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?P8(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=C8e(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case ma.GREYSCALE:i=1;break;case ma.TRUECOLOUR:i=3;break;case ma.INDEXED_COLOUR:i=1;break;case ma.GREYSCALE_ALPHA:i=2;break;case ma.TRUECOLOUR_ALPHA:i=4;break;case ma.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==CS.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ma.GREYSCALE:case ma.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case ma.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ma.UNKNOWN:case ma.GREYSCALE_ALPHA:case ma.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=BK(this),i=this.readUint8();if(i!==CS.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:n8e(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=O8({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case f1.NONE:break;case f1.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case f1.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case ES.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case ES.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/i,m=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*m+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==L8.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===kS.NO_INTERLACE)this._png.data=O8({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===kS.ADAM7)this._png.data=d8e({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:f1.NONE,blendOp:ES.SOURCE,data:r}),this._inflator=new k8,this._writingDataChunks=!1}}function C8e(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var R8;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(R8||(R8={}));function k8e(e,t){return new A8e(e,t).decode()}var Qt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function PS(){Qt.console&&typeof Qt.console.log=="function"&&Qt.console.log.apply(Qt.console,arguments)}var bn={log:PS,warn:function(e){Qt.console&&(typeof Qt.console.warn=="function"?Qt.console.warn.apply(Qt.console,arguments):PS.call(null,arguments))},error:function(e){Qt.console&&(typeof Qt.console.error=="function"?Qt.console.error.apply(Qt.console,arguments):PS(e))}};function OS(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){gf(n.response,t,r)},n.onerror=function(){bn.error("could not download file")},n.send()}function I8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function h1(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var gf=Qt.saveAs||((typeof window>"u"?"undefined":dn(window))!=="object"||window!==Qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Qt.URL||Qt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?I8(i.href)?OS(e,t,r):h1(i,i.target="_blank"):h1(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){h1(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(I8(e))OS(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){h1(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:dn(s)!=="object"&&(bn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return OS(e,t,r);var i=e.type==="application/octet-stream",s=/constructor/i.test(Qt.HTMLElement)||Qt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":dn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Qt.URL||Qt.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function zK(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,o=i.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var G1=Qt.atob.bind(Qt),D8=Qt.btoa.bind(Qt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function TS(e,t){var r=e[0],n=e[1],i=e[2],s=e[3];r=gs(r,n,i,s,t[0],7,-680876936),s=gs(s,r,n,i,t[1],12,-389564586),i=gs(i,s,r,n,t[2],17,606105819),n=gs(n,i,s,r,t[3],22,-1044525330),r=gs(r,n,i,s,t[4],7,-176418897),s=gs(s,r,n,i,t[5],12,1200080426),i=gs(i,s,r,n,t[6],17,-1473231341),n=gs(n,i,s,r,t[7],22,-45705983),r=gs(r,n,i,s,t[8],7,1770035416),s=gs(s,r,n,i,t[9],12,-1958414417),i=gs(i,s,r,n,t[10],17,-42063),n=gs(n,i,s,r,t[11],22,-1990404162),r=gs(r,n,i,s,t[12],7,1804603682),s=gs(s,r,n,i,t[13],12,-40341101),i=gs(i,s,r,n,t[14],17,-1502002290),r=vs(r,n=gs(n,i,s,r,t[15],22,1236535329),i,s,t[1],5,-165796510),s=vs(s,r,n,i,t[6],9,-1069501632),i=vs(i,s,r,n,t[11],14,643717713),n=vs(n,i,s,r,t[0],20,-373897302),r=vs(r,n,i,s,t[5],5,-701558691),s=vs(s,r,n,i,t[10],9,38016083),i=vs(i,s,r,n,t[15],14,-660478335),n=vs(n,i,s,r,t[4],20,-405537848),r=vs(r,n,i,s,t[9],5,568446438),s=vs(s,r,n,i,t[14],9,-1019803690),i=vs(i,s,r,n,t[3],14,-187363961),n=vs(n,i,s,r,t[8],20,1163531501),r=vs(r,n,i,s,t[13],5,-1444681467),s=vs(s,r,n,i,t[2],9,-51403784),i=vs(i,s,r,n,t[7],14,1735328473),r=ys(r,n=vs(n,i,s,r,t[12],20,-1926607734),i,s,t[5],4,-378558),s=ys(s,r,n,i,t[8],11,-2022574463),i=ys(i,s,r,n,t[11],16,1839030562),n=ys(n,i,s,r,t[14],23,-35309556),r=ys(r,n,i,s,t[1],4,-1530992060),s=ys(s,r,n,i,t[4],11,1272893353),i=ys(i,s,r,n,t[7],16,-155497632),n=ys(n,i,s,r,t[10],23,-1094730640),r=ys(r,n,i,s,t[13],4,681279174),s=ys(s,r,n,i,t[0],11,-358537222),i=ys(i,s,r,n,t[3],16,-722521979),n=ys(n,i,s,r,t[6],23,76029189),r=ys(r,n,i,s,t[9],4,-640364487),s=ys(s,r,n,i,t[12],11,-421815835),i=ys(i,s,r,n,t[15],16,530742520),r=xs(r,n=ys(n,i,s,r,t[2],23,-995338651),i,s,t[0],6,-198630844),s=xs(s,r,n,i,t[7],10,1126891415),i=xs(i,s,r,n,t[14],15,-1416354905),n=xs(n,i,s,r,t[5],21,-57434055),r=xs(r,n,i,s,t[12],6,1700485571),s=xs(s,r,n,i,t[3],10,-1894986606),i=xs(i,s,r,n,t[10],15,-1051523),n=xs(n,i,s,r,t[1],21,-2054922799),r=xs(r,n,i,s,t[8],6,1873313359),s=xs(s,r,n,i,t[15],10,-30611744),i=xs(i,s,r,n,t[6],15,-1560198380),n=xs(n,i,s,r,t[13],21,1309151649),r=xs(r,n,i,s,t[4],6,-145523070),s=xs(s,r,n,i,t[11],10,-1120210379),i=xs(i,s,r,n,t[2],15,718787259),n=xs(n,i,s,r,t[9],21,-343485551),e[0]=Qu(r,e[0]),e[1]=Qu(n,e[1]),e[2]=Qu(i,e[2]),e[3]=Qu(s,e[3])}function Yj(e,t,r,n,i,s){return t=Qu(Qu(t,e),Qu(n,s)),Qu(t<<i|t>>>32-i,r)}function gs(e,t,r,n,i,s,o){return Yj(t&r|~t&n,e,t,i,s,o)}function vs(e,t,r,n,i,s,o){return Yj(t&n|r&~n,e,t,i,s,o)}function ys(e,t,r,n,i,s,o){return Yj(t^r^n,e,t,i,s,o)}function xs(e,t,r,n,i,s,o){return Yj(r^(t|~n),e,t,i,s,o)}function qK(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)TS(n,E8e(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(TS(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,TS(n,i),n}function E8e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var M8="0123456789abcdef".split("");function P8e(e){for(var t="",r=0;r<4;r++)t+=M8[e>>8*r+4&15]+M8[e>>8*r&15];return t}function O8e(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function mE(e){return qK(e).map(O8e).join("")}var T8e=function(e){for(var t=0;t<e.length;t++)e[t]=P8e(e[t]);return e.join("")}(qK("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qu(e,t){if(T8e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function pE(e,t){var r,n,i,s;if(e!==r){for(var o=(i=e,s=1+(256/e.length|0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,m=0,h=0,v="";for(c=0;c<f;c++)h=(h+(d=l[m=(m+1)%256]))%256,l[m]=l[h],l[h]=d,o=l[(l[m]+l[h])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $8={print:4,modify:8,copy:16,"annot-forms":32};function mm(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(l){if($8.perm!==void 0)throw new Error("Invalid permission: "+l);i+=$8[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=mE(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=pE(this.encryptionKey,this.padding)}function pm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function F8(e){if(dn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){Qt.console&&bn.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function X2(e){if(!(this instanceof X2))return new X2(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function UK(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function bf(e,t,r,n,i){if(!(this instanceof bf))return new bf(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,UK.call(this,n,i)}function Rm(e,t,r,n,i){if(!(this instanceof Rm))return new Rm(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,UK.call(this,n,i)}function Nt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;dn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,m={},h={internal:{},__private__:{}};h.__private__.PubSub=F8;var v="1.3",p=h.__private__.getPdfVersion=function(){return v};h.__private__.setPdfVersion=function(P){v=P};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return g};var y=h.__private__.getPageFormat=function(P){return g[P]};i=i||"a4";var b="compat",x="advanced",j=b;function N(){this.saveGraphicsState(),Y(new ut(qt,0,0,-qt,0,Hd()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),u="n",j=x}function A(){this.restoreGraphicsState(),u="S",j=b}var C=h.__private__.combineFontStyleAndFontWeight=function(P,W){if(P=="bold"&&W=="normal"||P=="bold"&&W==400||P=="normal"&&W=="italic"||P=="bold"&&W=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return W&&(P=W==400||W==="normal"?P==="italic"?"italic":"normal":W!=700&&W!=="bold"||P!=="normal"?(W==700?"bold":W)+""+P:"bold"),P};h.advancedAPI=function(P){var W=j===b;return W&&N.call(this),typeof P!="function"||(P(this),W&&A.call(this)),this},h.compatAPI=function(P){var W=j===x;return W&&A.call(this),typeof P!="function"||(P(this),W&&N.call(this)),this},h.isAdvancedAPI=function(){return j===x};var E,O=function(P){if(j!==x)throw new Error(P+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=h.roundToPrecision=h.__private__.roundToPrecision=function(P,W){var ce=t||W;if(isNaN(P)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return P.toFixed(ce).replace(/0+$/,"")};E=h.hpf=h.__private__.hpf=typeof c=="number"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return L(P,c)}:c==="smart"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return L(P,P>-1&&P<1?16:5)}:function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return L(P,16)};var k=h.f2=h.__private__.f2=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f2");return L(P,2)},T=h.__private__.f3=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f3");return L(P,3)},B=h.scale=h.__private__.scale=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.scale");return j===b?P*qt:j===x?P:void 0},M=function(P){return B(function(W){return j===b?Hd()-W:j===x?W:void 0}(P))};h.__private__.setPrecision=h.setPrecision=function(P){typeof parseInt(P,10)=="number"&&(t=parseInt(P,10))};var G,z="00000000000000000000000000000000",D=h.__private__.getFileId=function(){return z},q=h.__private__.setFileId=function(P){return z=P!==void 0&&/^[a-fA-F0-9]{32}$/.test(P)?P.toUpperCase():z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Ai=new mm(d.userPermissions,d.userPassword,d.ownerPassword,z)),z};h.setFileId=function(P){return q(P),this},h.getFileId=function(){return D()};var K=h.__private__.convertDateToPDFDate=function(P){var W=P.getTimezoneOffset(),ce=W<0?"+":"-",xe=Math.floor(Math.abs(W/60)),Ae=Math.abs(W%60),Fe=[ce,U(xe),"'",U(Ae),"'"].join("");return["D:",P.getFullYear(),U(P.getMonth()+1),U(P.getDate()),U(P.getHours()),U(P.getMinutes()),U(P.getSeconds()),Fe].join("")},ae=h.__private__.convertPDFDateToDate=function(P){var W=parseInt(P.substr(2,4),10),ce=parseInt(P.substr(6,2),10)-1,xe=parseInt(P.substr(8,2),10),Ae=parseInt(P.substr(10,2),10),Fe=parseInt(P.substr(12,2),10),He=parseInt(P.substr(14,2),10);return new Date(W,ce,xe,Ae,Fe,He,0)},J=h.__private__.setCreationDate=function(P){var W;if(P===void 0&&(P=new Date),P instanceof Date)W=K(P);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(P))throw new Error("Invalid argument passed to jsPDF.setCreationDate");W=P}return G=W},I=h.__private__.getCreationDate=function(P){var W=G;return P==="jsDate"&&(W=ae(G)),W};h.setCreationDate=function(P){return J(P),this},h.getCreationDate=function(P){return I(P)};var $,U=h.__private__.padd2=function(P){return("0"+parseInt(P)).slice(-2)},H=h.__private__.padd2Hex=function(P){return("00"+(P=P.toString())).substr(P.length)},re=0,X=[],he=[],se=0,ue=[],ge=[],ve=!1,te=he;h.__private__.setCustomOutputDestination=function(P){ve=!0,te=P};var Ne=function(P){ve||(te=P)};h.__private__.resetCustomOutputDestination=function(){ve=!1,te=he};var Y=h.__private__.out=function(P){return P=P.toString(),se+=P.length+1,te.push(P),te},Le=h.__private__.write=function(P){return Y(arguments.length===1?P.toString():Array.prototype.join.call(arguments," "))},ye=h.__private__.getArrayBuffer=function(P){for(var W=P.length,ce=new ArrayBuffer(W),xe=new Uint8Array(ce);W--;)xe[W]=P.charCodeAt(W);return ce},we=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return we};var _e=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(P){return _e=j===x?P/qt:P,this};var Qe,We=h.__private__.getFontSize=h.getFontSize=function(){return j===b?_e:_e*qt},Ge=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(P){return Ge=P,this},h.__private__.getR2L=h.getR2L=function(){return Ge};var Ke,Pt=h.__private__.setZoomMode=function(P){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(P))Qe=P;else if(isNaN(P)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(P)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+P+'" is not recognized.');Qe=P}else Qe=parseInt(P,10)};h.__private__.getZoomMode=function(){return Qe};var Lt,ft=h.__private__.setPageMode=function(P){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(P)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+P+'" is not recognized.');Ke=P};h.__private__.getPageMode=function(){return Ke};var Zt=h.__private__.setLayoutMode=function(P){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(P)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+P+'" is not recognized.');Lt=P};h.__private__.getLayoutMode=function(){return Lt},h.__private__.setDisplayMode=h.setDisplayMode=function(P,W,ce){return Pt(P),Zt(W),ft(ce),this};var gr={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(P){if(Object.keys(gr).indexOf(P)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return gr[P]},h.__private__.getDocumentProperties=function(){return gr},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(P){for(var W in gr)gr.hasOwnProperty(W)&&P[W]&&(gr[W]=P[W]);return this},h.__private__.setDocumentProperty=function(P,W){if(Object.keys(gr).indexOf(P)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return gr[P]=W};var ht,qt,bt,Nn,xr,Ht={},rr={},Ir=[],Ot={},Xr={},Rt={},Vt={},sn=null,nr=0,vt=[],Pr=new F8(h),It=e.hotfixes||[],Gt={},wr={},Ln=[],ut=function P(W,ce,xe,Ae,Fe,He){if(!(this instanceof P))return new P(W,ce,xe,Ae,Fe,He);isNaN(W)&&(W=1),isNaN(ce)&&(ce=0),isNaN(xe)&&(xe=0),isNaN(Ae)&&(Ae=1),isNaN(Fe)&&(Fe=0),isNaN(He)&&(He=0),this._matrix=[W,ce,xe,Ae,Fe,He]};Object.defineProperty(ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ut.prototype.join=function(P){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(P)},ut.prototype.multiply=function(P){var W=P.sx*this.sx+P.shy*this.shx,ce=P.sx*this.shy+P.shy*this.sy,xe=P.shx*this.sx+P.sy*this.shx,Ae=P.shx*this.shy+P.sy*this.sy,Fe=P.tx*this.sx+P.ty*this.shx+this.tx,He=P.tx*this.shy+P.ty*this.sy+this.ty;return new ut(W,ce,xe,Ae,Fe,He)},ut.prototype.decompose=function(){var P=this.sx,W=this.shy,ce=this.shx,xe=this.sy,Ae=this.tx,Fe=this.ty,He=Math.sqrt(P*P+W*W),pt=(P/=He)*ce+(W/=He)*xe;ce-=P*pt,xe-=W*pt;var At=Math.sqrt(ce*ce+xe*xe);return pt/=At,P*(xe/=At)<W*(ce/=At)&&(P=-P,W=-W,pt=-pt,He=-He),{scale:new ut(He,0,0,At,0,0),translate:new ut(1,0,0,1,Ae,Fe),rotate:new ut(P,W,-W,P,0,0),skew:new ut(1,0,pt,1,0,0)}},ut.prototype.toString=function(P){return this.join(" ")},ut.prototype.inversed=function(){var P=this.sx,W=this.shy,ce=this.shx,xe=this.sy,Ae=this.tx,Fe=this.ty,He=1/(P*xe-W*ce),pt=xe*He,At=-W*He,er=-ce*He,dr=P*He;return new ut(pt,At,er,dr,-pt*Ae-er*Fe,-At*Ae-dr*Fe)},ut.prototype.applyToPoint=function(P){var W=P.x*this.sx+P.y*this.shx+this.tx,ce=P.x*this.shy+P.y*this.sy+this.ty;return new Yl(W,ce)},ut.prototype.applyToRectangle=function(P){var W=this.applyToPoint(P),ce=this.applyToPoint(new Yl(P.x+P.w,P.y+P.h));return new Gg(W.x,W.y,ce.x-W.x,ce.y-W.y)},ut.prototype.clone=function(){var P=this.sx,W=this.shy,ce=this.shx,xe=this.sy,Ae=this.tx,Fe=this.ty;return new ut(P,W,ce,xe,Ae,Fe)},h.Matrix=ut;var oi=h.matrixMult=function(P,W){return W.multiply(P)},Ce=new ut(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Ce;var yt=function(P,W){if(!Xr[P]){var ce=(W instanceof bf?"Sh":"P")+(Object.keys(Ot).length+1).toString(10);W.id=ce,Xr[P]=ce,Ot[ce]=W,Pr.publish("addPattern",W)}};h.ShadingPattern=bf,h.TilingPattern=Rm,h.addShadingPattern=function(P,W){return O("addShadingPattern()"),yt(P,W),this},h.beginTilingPattern=function(P){O("beginTilingPattern()"),Kg(P.boundingBox[0],P.boundingBox[1],P.boundingBox[2]-P.boundingBox[0],P.boundingBox[3]-P.boundingBox[1],P.matrix)},h.endTilingPattern=function(P,W){O("endTilingPattern()"),W.stream=ge[$].join(`
`),yt(P,W),Pr.publish("endTilingPattern",W),Ln.pop().restore()};var Jt,Mt=h.__private__.newObject=function(){var P=Ar();return an(P,!0),P},Ar=h.__private__.newObjectDeferred=function(){return re++,X[re]=function(){return se},re},an=function(P,W){return W=typeof W=="boolean"&&W,X[P]=se,W&&Y(P+" 0 obj"),P},Zr=h.__private__.newAdditionalObject=function(){var P={objId:Ar(),content:""};return ue.push(P),P},Rn=Ar(),pn=Ar(),qs=h.__private__.decodeColorString=function(P){var W=P.split(" ");if(W.length!==2||W[1]!=="g"&&W[1]!=="G")W.length!==5||W[4]!=="k"&&W[4]!=="K"||(W=[(1-W[0])*(1-W[3]),(1-W[1])*(1-W[3]),(1-W[2])*(1-W[3]),"r"]);else{var ce=parseFloat(W[0]);W=[ce,ce,ce,"r"]}for(var xe="#",Ae=0;Ae<3;Ae++)xe+=("0"+Math.floor(255*parseFloat(W[Ae])).toString(16)).slice(-2);return xe},vn=h.__private__.encodeColorString=function(P){var W;typeof P=="string"&&(P={ch1:P});var ce=P.ch1,xe=P.ch2,Ae=P.ch3,Fe=P.ch4,He=P.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var pt=new zK(ce);if(pt.ok)ce=pt.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var At=parseInt(ce.substr(1),16);ce=At>>16&255,xe=At>>8&255,Ae=255&At}if(xe===void 0||Fe===void 0&&ce===xe&&xe===Ae)W=typeof ce=="string"?ce+" "+He[0]:P.precision===2?k(ce/255)+" "+He[0]:T(ce/255)+" "+He[0];else if(Fe===void 0||dn(Fe)==="object"){if(Fe&&!isNaN(Fe.a)&&Fe.a===0)return["1.","1.","1.",He[1]].join(" ");W=typeof ce=="string"?[ce,xe,Ae,He[1]].join(" "):P.precision===2?[k(ce/255),k(xe/255),k(Ae/255),He[1]].join(" "):[T(ce/255),T(xe/255),T(Ae/255),He[1]].join(" ")}else W=typeof ce=="string"?[ce,xe,Ae,Fe,He[2]].join(" "):P.precision===2?[k(ce),k(xe),k(Ae),k(Fe),He[2]].join(" "):[T(ce),T(xe),T(Ae),T(Fe),He[2]].join(" ");return W},qi=h.__private__.getFilters=function(){return o},Da=h.__private__.putStream=function(P){var W=(P=P||{}).data||"",ce=P.filters||qi(),xe=P.alreadyAppliedFilters||[],Ae=P.addLength1||!1,Fe=W.length,He=P.objectId,pt=function(Ci){return Ci};if(d!==null&&He===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(pt=Ai.encryptor(He,0));var At={};ce===!0&&(ce=["FlateEncode"]);var er=P.additionalKeyValues||[],dr=(At=Nt.API.processDataByFilters!==void 0?Nt.API.processDataByFilters(W,ce):{data:W,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(At.data.length!==0&&(er.push({key:"Length",value:At.data.length}),Ae===!0&&er.push({key:"Length1",value:Fe})),dr.length!=0)if(dr.split("/").length-1==1)er.push({key:"Filter",value:dr});else{er.push({key:"Filter",value:"["+dr+"]"});for(var Dr=0;Dr<er.length;Dr+=1)if(er[Dr].key==="DecodeParms"){for(var Hn=[],bi=0;bi<At.reverseChain.split("/").length-1;bi+=1)Hn.push("null");Hn.push(er[Dr].value),er[Dr].value="["+Hn.join(" ")+"]"}}Y("<<");for(var Sn=0;Sn<er.length;Sn++)Y("/"+er[Sn].key+" "+er[Sn].value);Y(">>"),At.data.length!==0&&(Y("stream"),Y(pt(At.data)),Y("endstream"))},Fd=h.__private__.putPage=function(P){var W=P.number,ce=P.data,xe=P.objId,Ae=P.contentsObjId;an(xe,!0),Y("<</Type /Page"),Y("/Parent "+P.rootDictionaryObjId+" 0 R"),Y("/Resources "+P.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(E(P.mediaBox.bottomLeftX))+" "+parseFloat(E(P.mediaBox.bottomLeftY))+" "+E(P.mediaBox.topRightX)+" "+E(P.mediaBox.topRightY)+"]"),P.cropBox!==null&&Y("/CropBox ["+E(P.cropBox.bottomLeftX)+" "+E(P.cropBox.bottomLeftY)+" "+E(P.cropBox.topRightX)+" "+E(P.cropBox.topRightY)+"]"),P.bleedBox!==null&&Y("/BleedBox ["+E(P.bleedBox.bottomLeftX)+" "+E(P.bleedBox.bottomLeftY)+" "+E(P.bleedBox.topRightX)+" "+E(P.bleedBox.topRightY)+"]"),P.trimBox!==null&&Y("/TrimBox ["+E(P.trimBox.bottomLeftX)+" "+E(P.trimBox.bottomLeftY)+" "+E(P.trimBox.topRightX)+" "+E(P.trimBox.topRightY)+"]"),P.artBox!==null&&Y("/ArtBox ["+E(P.artBox.bottomLeftX)+" "+E(P.artBox.bottomLeftY)+" "+E(P.artBox.topRightX)+" "+E(P.artBox.topRightY)+"]"),typeof P.userUnit=="number"&&P.userUnit!==1&&Y("/UserUnit "+P.userUnit),Pr.publish("putPage",{objId:xe,pageContext:vt[W],pageNumber:W,page:ce}),Y("/Contents "+Ae+" 0 R"),Y(">>"),Y("endobj");var Fe=ce.join(`
`);return j===x&&(Fe+=`
Q`),an(Ae,!0),Da({data:Fe,filters:qi(),objectId:Ae}),Y("endobj"),xe},rl=h.__private__.putPages=function(){var P,W,ce=[];for(P=1;P<=nr;P++)vt[P].objId=Ar(),vt[P].contentsObjId=Ar();for(P=1;P<=nr;P++)ce.push(Fd({number:P,data:ge[P],objId:vt[P].objId,contentsObjId:vt[P].contentsObjId,mediaBox:vt[P].mediaBox,cropBox:vt[P].cropBox,bleedBox:vt[P].bleedBox,trimBox:vt[P].trimBox,artBox:vt[P].artBox,userUnit:vt[P].userUnit,rootDictionaryObjId:Rn,resourceDictionaryObjId:pn}));an(Rn,!0),Y("<</Type /Pages");var xe="/Kids [";for(W=0;W<nr;W++)xe+=ce[W]+" 0 R ";Y(xe+"]"),Y("/Count "+nr),Y(">>"),Y("endobj"),Pr.publish("postPutPages")},Bd=function(P){Pr.publish("putFont",{font:P,out:Y,newObject:Mt,putStream:Da}),P.isAlreadyPutted!==!0&&(P.objectNumber=Mt(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+pm(P.postScriptName)),Y("/Subtype /Type1"),typeof P.encoding=="string"&&Y("/Encoding /"+P.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Ph=function(P){P.objectNumber=Mt();var W=[];W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Form"}),W.push({key:"BBox",value:"["+[E(P.x),E(P.y),E(P.x+P.width),E(P.y+P.height)].join(" ")+"]"}),W.push({key:"Matrix",value:"["+P.matrix.toString()+"]"});var ce=P.pages[1].join(`
`);Da({data:ce,additionalKeyValues:W,objectId:P.objectNumber}),Y("endobj")},Oh=function(P,W){W||(W=21);var ce=Mt(),xe=function(He,pt){var At,er=[],dr=1/(pt-1);for(At=0;At<1;At+=dr)er.push(At);if(er.push(1),He[0].offset!=0){var Dr={offset:0,color:He[0].color};He.unshift(Dr)}if(He[He.length-1].offset!=1){var Hn={offset:1,color:He[He.length-1].color};He.push(Hn)}for(var bi="",Sn=0,Ci=0;Ci<er.length;Ci++){for(At=er[Ci];At>He[Sn+1].offset;)Sn++;var wi=He[Sn].offset,Qi=(At-wi)/(He[Sn+1].offset-wi),Jl=He[Sn].color,wo=He[Sn+1].color;bi+=H(Math.round((1-Qi)*Jl[0]+Qi*wo[0]).toString(16))+H(Math.round((1-Qi)*Jl[1]+Qi*wo[1]).toString(16))+H(Math.round((1-Qi)*Jl[2]+Qi*wo[2]).toString(16))}return bi.trim()}(P.colors,W),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+W+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Da({data:xe,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),Y("endobj"),P.objectNumber=Mt(),Y("<< /ShadingType "+P.type),Y("/ColorSpace /DeviceRGB");var Fe="/Coords ["+E(parseFloat(P.coords[0]))+" "+E(parseFloat(P.coords[1]))+" ";P.type===2?Fe+=E(parseFloat(P.coords[2]))+" "+E(parseFloat(P.coords[3])):Fe+=E(parseFloat(P.coords[2]))+" "+E(parseFloat(P.coords[3]))+" "+E(parseFloat(P.coords[4]))+" "+E(parseFloat(P.coords[5])),Y(Fe+="]"),P.matrix&&Y("/Matrix ["+P.matrix.toString()+"]"),Y("/Function "+ce+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},Th=function(P,W){var ce=Ar(),xe=Mt();W.push({resourcesOid:ce,objectOid:xe}),P.objectNumber=xe;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+P.boundingBox.map(E).join(" ")+"]"}),Ae.push({key:"XStep",value:E(P.xStep)}),Ae.push({key:"YStep",value:E(P.yStep)}),Ae.push({key:"Resources",value:ce+" 0 R"}),P.matrix&&Ae.push({key:"Matrix",value:"["+P.matrix.toString()+"]"}),Da({data:P.stream,additionalKeyValues:Ae,objectId:P.objectNumber}),Y("endobj")},Jj=function(P){for(var W in P.objectNumber=Mt(),Y("<<"),P)switch(W){case"opacity":Y("/ca "+k(P[W]));break;case"stroke-opacity":Y("/CA "+k(P[W]))}Y(">>"),Y("endobj")},Fg=function(P){an(P.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var W in Y("/Font <<"),Ht)Ht.hasOwnProperty(W)&&(f===!1||f===!0&&m.hasOwnProperty(W))&&Y("/"+W+" "+Ht[W].objectNumber+" 0 R");Y(">>")}(),function(){if(Object.keys(Ot).length>0){for(var W in Y("/Shading <<"),Ot)Ot.hasOwnProperty(W)&&Ot[W]instanceof bf&&Ot[W].objectNumber>=0&&Y("/"+W+" "+Ot[W].objectNumber+" 0 R");Pr.publish("putShadingPatternDict"),Y(">>")}}(),function(W){if(Object.keys(Ot).length>0){for(var ce in Y("/Pattern <<"),Ot)Ot.hasOwnProperty(ce)&&Ot[ce]instanceof h.TilingPattern&&Ot[ce].objectNumber>=0&&Ot[ce].objectNumber<W&&Y("/"+ce+" "+Ot[ce].objectNumber+" 0 R");Pr.publish("putTilingPatternDict"),Y(">>")}}(P.objectOid),function(){if(Object.keys(Rt).length>0){var W;for(W in Y("/ExtGState <<"),Rt)Rt.hasOwnProperty(W)&&Rt[W].objectNumber>=0&&Y("/"+W+" "+Rt[W].objectNumber+" 0 R");Pr.publish("putGStateDict"),Y(">>")}}(),function(){for(var W in Y("/XObject <<"),Gt)Gt.hasOwnProperty(W)&&Gt[W].objectNumber>=0&&Y("/"+W+" "+Gt[W].objectNumber+" 0 R");Pr.publish("putXobjectDict"),Y(">>")}(),Y(">>"),Y("endobj")},C0=function(P){rr[P.fontName]=rr[P.fontName]||{},rr[P.fontName][P.fontStyle]=P.id},k0=function(P,W,ce,xe,Ae){var Fe={id:"F"+(Object.keys(Ht).length+1).toString(10),postScriptName:P,fontName:W,fontStyle:ce,encoding:xe,isStandardFont:Ae||!1,metadata:{}};return Pr.publish("addFont",{font:Fe,instance:this}),Ht[Fe.id]=Fe,C0(Fe),Fe.id},Ma=h.__private__.pdfEscape=h.pdfEscape=function(P,W){return function(ce,xe){var Ae,Fe,He,pt,At,er,dr,Dr,Hn;if(He=(xe=xe||{}).sourceEncoding||"Unicode",At=xe.outputEncoding,(xe.autoencode||At)&&Ht[ht].metadata&&Ht[ht].metadata[He]&&Ht[ht].metadata[He].encoding&&(pt=Ht[ht].metadata[He].encoding,!At&&Ht[ht].encoding&&(At=Ht[ht].encoding),!At&&pt.codePages&&(At=pt.codePages[0]),typeof At=="string"&&(At=pt[At]),At)){for(dr=!1,er=[],Ae=0,Fe=ce.length;Ae<Fe;Ae++)(Dr=At[ce.charCodeAt(Ae)])?er.push(String.fromCharCode(Dr)):er.push(ce[Ae]),er[Ae].charCodeAt(0)>>8&&(dr=!0);ce=er.join("")}for(Ae=ce.length;dr===void 0&&Ae!==0;)ce.charCodeAt(Ae-1)>>8&&(dr=!0),Ae--;if(!dr)return ce;for(er=xe.noBOM?[]:[254,255],Ae=0,Fe=ce.length;Ae<Fe;Ae++){if((Hn=(Dr=ce.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");er.push(Hn),er.push(Dr-(Hn<<8))}return String.fromCharCode.apply(void 0,er)}(P,W).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bg=h.__private__.beginPage=function(P){ge[++nr]=[],vt[nr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(P[0]),topRightY:Number(P[1])}},P0(nr),Ne(ge[$])},E0=function(P,W){var ce,xe,Ae;switch(r=W||r,typeof P=="string"&&(ce=y(P.toLowerCase()),Array.isArray(ce)&&(xe=ce[0],Ae=ce[1])),Array.isArray(P)&&(xe=P[0]*qt,Ae=P[1]*qt),isNaN(xe)&&(xe=i[0],Ae=i[1]),(xe>14400||Ae>14400)&&(bn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Ae=Math.min(14400,Ae)),i=[xe,Ae],r.substr(0,1)){case"l":Ae>xe&&(i=[Ae,xe]);break;case"p":xe>Ae&&(i=[Ae,xe])}Bg(i),tr(Ug),Y(Dh),Hg!==0&&Y(Hg+" J"),Vg!==0&&Y(Vg+" j"),Pr.publish("addPage",{pageNumber:nr})},zg=function(P){P>0&&P<=nr&&(ge.splice(P,1),vt.splice(P,1),nr--,$>nr&&($=nr),this.setPage($))},P0=function(P){P>0&&P<=nr&&($=P)},O0=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ge.length-1},T0=function(P,W,ce){var xe,Ae=void 0;return ce=ce||{},P=P!==void 0?P:Ht[ht].fontName,W=W!==void 0?W:Ht[ht].fontStyle,xe=P.toLowerCase(),rr[xe]!==void 0&&rr[xe][W]!==void 0?Ae=rr[xe][W]:rr[P]!==void 0&&rr[P][W]!==void 0?Ae=rr[P][W]:ce.disableWarning===!1&&bn.warn("Unable to look up font label for font '"+P+"', '"+W+"'. Refer to getFontList() for available fonts."),Ae||ce.noFallback||(Ae=rr.times[W])==null&&(Ae=rr.times.normal),Ae},nl=h.__private__.putInfo=function(){var P=Mt(),W=function(xe){return xe};for(var ce in d!==null&&(W=Ai.encryptor(P,0)),Y("<<"),Y("/Producer ("+Ma(W("jsPDF "+Nt.version))+")"),gr)gr.hasOwnProperty(ce)&&gr[ce]&&Y("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+Ma(W(gr[ce]))+")");Y("/CreationDate ("+Ma(W(G))+")"),Y(">>"),Y("endobj")},Lh=h.__private__.putCatalog=function(P){var W=(P=P||{}).rootDictionaryObjId||Rn;switch(Mt(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+W+" 0 R"),Qe||(Qe="fullwidth"),Qe){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+Qe;ce.substr(ce.length-1)==="%"&&(Qe=parseInt(Qe)/100),typeof Qe=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+k(Qe)+"]")}switch(Lt||(Lt="continuous"),Lt){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}Ke&&Y("/PageMode /"+Ke),Pr.publish("putCatalog"),Y(">>"),Y("endobj")},Qj=h.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(re+1)),Y("/Root "+re+" 0 R"),Y("/Info "+(re-1)+" 0 R"),d!==null&&Y("/Encrypt "+Ai.oid+" 0 R"),Y("/ID [ <"+z+"> <"+z+"> ]"),Y(">>")},xi=h.__private__.putHeader=function(){Y("%PDF-"+v),Y("%")},L0=h.__private__.putXRef=function(){var P="0000000000";Y("xref"),Y("0 "+(re+1)),Y("0000000000 65535 f ");for(var W=1;W<=re;W++)typeof X[W]=="function"?Y((P+X[W]()).slice(-10)+" 00000 n "):X[W]!==void 0?Y((P+X[W]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},il=h.__private__.buildDocument=function(){var P;re=0,se=0,he=[],X=[],ue=[],Rn=Ar(),pn=Ar(),Ne(he),Pr.publish("buildDocument"),xi(),rl(),function(){Pr.publish("putAdditionalObjects");for(var ce=0;ce<ue.length;ce++){var xe=ue[ce];an(xe.objId,!0),Y(xe.content),Y("endobj")}Pr.publish("postPutAdditionalObjects")}(),P=[],function(){for(var ce in Ht)Ht.hasOwnProperty(ce)&&(f===!1||f===!0&&m.hasOwnProperty(ce))&&Bd(Ht[ce])}(),function(){var ce;for(ce in Rt)Rt.hasOwnProperty(ce)&&Jj(Rt[ce])}(),function(){for(var ce in Gt)Gt.hasOwnProperty(ce)&&Ph(Gt[ce])}(),function(ce){var xe;for(xe in Ot)Ot.hasOwnProperty(xe)&&(Ot[xe]instanceof bf?Oh(Ot[xe]):Ot[xe]instanceof Rm&&Th(Ot[xe],ce))}(P),Pr.publish("putResources"),P.forEach(Fg),Fg({resourcesOid:pn,objectOid:Number.MAX_SAFE_INTEGER}),Pr.publish("postPutResources"),d!==null&&(Ai.oid=Mt(),Y("<<"),Y("/Filter /Standard"),Y("/V "+Ai.v),Y("/R "+Ai.r),Y("/U <"+Ai.toHexString(Ai.U)+">"),Y("/O <"+Ai.toHexString(Ai.O)+">"),Y("/P "+Ai.P),Y(">>"),Y("endobj")),nl(),Lh();var W=se;return L0(),Qj(),Y("startxref"),Y(""+W),Y("%%EOF"),Ne(ge[$]),he.join(`
`)},Rh=h.__private__.getBlob=function(P){return new Blob([ye(P)],{type:"application/pdf"})},R0=h.output=h.__private__.output=(Jt=function(P,W){switch(typeof(W=W||{})=="string"?W={filename:W}:W.filename=W.filename||"generated.pdf",P){case void 0:return il();case"save":h.save(W.filename);break;case"arraybuffer":return ye(il());case"blob":return Rh(il());case"bloburi":case"bloburl":if(Qt.URL!==void 0&&typeof Qt.URL.createObjectURL=="function")return Qt.URL&&Qt.URL.createObjectURL(Rh(il()))||void 0;bn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",xe=il();try{ce=D8(xe)}catch{ce=D8(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+W.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Fe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';W.pdfObjectUrl&&(Ae=W.pdfObjectUrl,Fe="");var He='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Fe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(W)+");<\/script></body></html>",pt=Qt.open();return pt!==null&&pt.document.write(He),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var At='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(W.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+W.filename+'" width="500px" height="400px" /></body></html>',er=Qt.open();if(er!==null){er.document.write(At);var dr=this;er.document.documentElement.querySelector("#pdfViewer").onload=function(){er.document.title=W.filename,er.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(dr.output("bloburl"))}}return er}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",W)+'"></iframe></body></html>',Hn=Qt.open();if(Hn!==null&&(Hn.document.write(Dr),Hn.document.title=W.filename),Hn||typeof safari>"u")return Hn;break;case"datauri":case"dataurl":return Qt.document.location.href=this.output("datauristring",W);default:return null}},Jt.foo=function(){try{return Jt.apply(this,arguments)}catch(ce){var P=ce.stack||"";~P.indexOf(" at ")&&(P=P.split(" at ")[1]);var W="Error in function "+P.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Qt.console)throw new Error(W);Qt.console.error(W,ce),Qt.alert&&alert(W)}},Jt.foo.bar=Jt,Jt.foo),$a=function(P){return Array.isArray(It)===!0&&It.indexOf(P)>-1};switch(n){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=$a("px_scaling")==1?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);qt=n}var Ai=null;J(),q();var Hl=h.__private__.getPageInfo=h.getPageInfo=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vt[P].objId,pageNumber:P,pageContext:vt[P]}},I0=h.__private__.getPageInfoByObjId=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var W in vt)if(vt[W].objId===P)break;return Hl(W)},e5=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:vt[$].objId,pageNumber:$,pageContext:vt[$]}};h.addPage=function(){return E0.apply(this,arguments),this},h.setPage=function(){return P0.apply(this,arguments),Ne.call(this,ge[$]),this},h.insertPage=function(P){return this.addPage(),this.movePage($,P),this},h.movePage=function(P,W){var ce,xe;if(P>W){ce=ge[P],xe=vt[P];for(var Ae=P;Ae>W;Ae--)ge[Ae]=ge[Ae-1],vt[Ae]=vt[Ae-1];ge[W]=ce,vt[W]=xe,this.setPage(W)}else if(P<W){ce=ge[P],xe=vt[P];for(var Fe=P;Fe<W;Fe++)ge[Fe]=ge[Fe+1],vt[Fe]=vt[Fe+1];ge[W]=ce,vt[W]=xe,this.setPage(W)}return this},h.deletePage=function(){return zg.apply(this,arguments),this},h.__private__.text=h.text=function(P,W,ce,xe,Ae){var Fe,He,pt,At,er,dr,Dr,Hn,bi,Sn=(xe=xe||{}).scope||this;if(typeof P=="number"&&typeof W=="number"&&(typeof ce=="string"||Array.isArray(ce))){var Ci=ce;ce=W,W=P,P=Ci}if(arguments[3]instanceof ut==0?(pt=arguments[4],At=arguments[5],dn(Dr=arguments[3])==="object"&&Dr!==null||(typeof pt=="string"&&(At=pt,pt=null),typeof Dr=="string"&&(At=Dr,Dr=null),typeof Dr=="number"&&(pt=Dr,Dr=null),xe={flags:Dr,angle:pt,align:At})):(O("The transform parameter of text() with a Matrix value"),bi=Ae),isNaN(W)||isNaN(ce)||P==null)throw new Error("Invalid arguments passed to jsPDF.text");if(P.length===0)return Sn;var wi,Qi="",Jl=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:qd,wo=Sn.internal.scaleFactor;function Ql(Jr){return Jr=Jr.split("	").join(Array(xe.TabLen||9).join(" ")),Ma(Jr,Dr)}function Xg(Jr){for(var yn,ci=Jr.concat(),ki=[],rc=ci.length;rc--;)typeof(yn=ci.shift())=="string"?ki.push(yn):Array.isArray(Jr)&&(yn.length===1||yn[1]===void 0&&yn[2]===void 0)?ki.push(yn[0]):ki.push([yn[0],yn[1],yn[2]]);return ki}function $h(Jr,yn){var ci;if(typeof Jr=="string")ci=yn(Jr)[0];else if(Array.isArray(Jr)){for(var ki,rc,av=Jr.concat(),zh=[],V0=av.length;V0--;)typeof(ki=av.shift())=="string"?zh.push(yn(ki)[0]):Array.isArray(ki)&&typeof ki[0]=="string"&&(rc=yn(ki[0],ki[1],ki[2]),zh.push([rc[0],rc[1],rc[2]]));ci=zh}return ci}var au=!1,Vd=!0;if(typeof P=="string")au=!0;else if(Array.isArray(P)){var Gd=P.concat();He=[];for(var ou,es=Gd.length;es--;)(typeof(ou=Gd.shift())!="string"||Array.isArray(ou)&&typeof ou[0]!="string")&&(Vd=!1);au=Vd}if(au===!1)throw new Error('Type of text must be string or Array. "'+P+'" is not recognized.');typeof P=="string"&&(P=P.match(/[\r?\n]/)?P.split(/\r\n|\r|\n/g):[P]);var Kd=_e/Sn.internal.scaleFactor,Yd=Kd*(Jl-1);switch(xe.baseline){case"bottom":ce-=Yd;break;case"top":ce+=Kd-Yd;break;case"hanging":ce+=Kd-2*Yd;break;case"middle":ce+=Kd/2-Yd}if((dr=xe.maxWidth||0)>0&&(typeof P=="string"?P=Sn.splitTextToSize(P,dr):Object.prototype.toString.call(P)==="[object Array]"&&(P=P.reduce(function(Jr,yn){return Jr.concat(Sn.splitTextToSize(yn,dr))},[]))),Fe={text:P,x:W,y:ce,options:xe,mutex:{pdfEscape:Ma,activeFontKey:ht,fonts:Ht,activeFontSize:_e}},Pr.publish("preProcessText",Fe),P=Fe.text,pt=(xe=Fe.options).angle,bi instanceof ut==0&&pt&&typeof pt=="number"){pt*=Math.PI/180,xe.rotationDirection===0&&(pt=-pt),j===x&&(pt=-pt);var Zg=Math.cos(pt),Jg=Math.sin(pt);bi=new ut(Zg,Jg,-Jg,Zg,0,0)}else pt&&pt instanceof ut&&(bi=pt);j!==x||bi||(bi=Ce),(er=xe.charSpace||Kl)!==void 0&&(Qi+=E(B(er))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hn=xe.horizontalScale)!==void 0&&(Qi+=E(100*Hn)+` Tz
`),xe.lang;var Ss=-1,ec=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,Fh=Sn.internal.getCurrentPageInfo().pageContext;switch(ec){case 0:case!1:case"fill":Ss=0;break;case 1:case!0:case"stroke":Ss=1;break;case 2:case"fillThenStroke":Ss=2;break;case 3:case"invisible":Ss=3;break;case 4:case"fillAndAddForClipping":Ss=4;break;case 5:case"strokeAndAddPathForClipping":Ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ss=6;break;case 7:case"addToPathForClipping":Ss=7}var W0=Fh.usedRenderingMode!==void 0?Fh.usedRenderingMode:-1;Ss!==-1?Qi+=Ss+` Tr
`:W0!==-1&&(Qi+=`0 Tr
`),Ss!==-1&&(Fh.usedRenderingMode=Ss),At=xe.align||"left";var Fa,Xd=_e*Jl,Qg=Sn.internal.pageSize.getWidth(),ev=Ht[ht];er=xe.charSpace||Kl,dr=xe.maxWidth||0,Dr=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var lu=[],Zd=function(Jr){return Sn.getStringUnitWidth(Jr,{font:ev,charSpace:er,fontSize:_e,doKerning:!1})*_e/wo};if(Object.prototype.toString.call(P)==="[object Array]"){var aa;He=Xg(P),At!=="left"&&(Fa=He.map(Zd));var oa,cu=0;if(At==="right"){W-=Fa[0],P=[],es=He.length;for(var tc=0;tc<es;tc++)tc===0?(oa=Vl(W),aa=Gl(ce)):(oa=B(cu-Fa[tc]),aa=-Xd),P.push([He[tc],oa,aa]),cu=Fa[tc]}else if(At==="center"){W-=Fa[0]/2,P=[],es=He.length;for(var uu=0;uu<es;uu++)uu===0?(oa=Vl(W),aa=Gl(ce)):(oa=B((cu-Fa[uu])/2),aa=-Xd),P.push([He[uu],oa,aa]),cu=Fa[uu]}else if(At==="left"){P=[],es=He.length;for(var tv=0;tv<es;tv++)P.push(He[tv])}else if(At==="justify"&&ev.encoding==="Identity-H"){P=[],es=He.length,dr=dr!==0?dr:Qg;for(var Bh=0,li=0;li<es;li++)if(aa=li===0?Gl(ce):-Xd,oa=li===0?Vl(W):Bh,li<es-1){var H0=B((dr-Fa[li])/(He[li].split(" ").length-1)),al=He[li].split(" ");P.push([al[0]+" ",oa,aa]),Bh=0;for(var ol=1;ol<al.length;ol++){var rv=(Zd(al[ol-1]+" "+al[ol])-Zd(al[ol]))*wo+H0;ol==al.length-1?P.push([al[ol],rv,0]):P.push([al[ol]+" ",rv,0]),Bh-=rv}}else P.push([He[li],oa,aa]);P.push(["",Bh,0])}else{if(At!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(P=[],es=He.length,dr=dr!==0?dr:Qg,li=0;li<es;li++){aa=li===0?Gl(ce):-Xd,oa=li===0?Vl(W):0;var nv=He[li].split(" ").length-1,iv=nv>0?(dr-Fa[li])/nv:0;li<es-1?lu.push(E(B(iv))):lu.push(0),P.push([He[li],oa,aa])}}}(typeof xe.R2L=="boolean"?xe.R2L:Ge)===!0&&(P=$h(P,function(Jr,yn,ci){return[Jr.split("").reverse().join(""),yn,ci]})),Fe={text:P,x:W,y:ce,options:xe,mutex:{pdfEscape:Ma,activeFontKey:ht,fonts:Ht,activeFontSize:_e}},Pr.publish("postProcessText",Fe),P=Fe.text,wi=Fe.mutex.isHex||!1;var sv=Ht[ht].encoding;sv!=="WinAnsiEncoding"&&sv!=="StandardEncoding"||(P=$h(P,function(Jr,yn,ci){return[Ql(Jr),yn,ci]})),He=Xg(P),P=[];for(var du,fu,hu,Jd=Array.isArray(He[0])?1:0,mu="",Qd=function(Jr,yn,ci){var ki="";return ci instanceof ut?(ci=typeof xe.angle=="number"?oi(ci,new ut(1,0,0,1,Jr,yn)):oi(new ut(1,0,0,1,Jr,yn),ci),j===x&&(ci=oi(new ut(1,0,0,-1,0,0),ci)),ki=ci.join(" ")+` Tm
`):ki=E(Jr)+" "+E(yn)+` Td
`,ki},Ba=0;Ba<He.length;Ba++){switch(mu="",Jd){case 1:hu=(wi?"<":"(")+He[Ba][0]+(wi?">":")"),du=parseFloat(He[Ba][1]),fu=parseFloat(He[Ba][2]);break;case 0:hu=(wi?"<":"(")+He[Ba]+(wi?">":")"),du=Vl(W),fu=Gl(ce)}lu!==void 0&&lu[Ba]!==void 0&&(mu=lu[Ba]+` Tw
`),Ba===0?P.push(mu+Qd(du,fu,bi)+hu):Jd===0?P.push(mu+hu):Jd===1&&P.push(mu+Qd(du,fu,bi)+hu)}P=Jd===0?P.join(` Tj
T* `):P.join(` Tj
`),P+=` Tj
`;var ll=`BT
/`;return ll+=ht+" "+_e+` Tf
`,ll+=E(_e*Jl)+` TL
`,ll+=Ud+`
`,ll+=Qi,ll+=P,Y(ll+="ET"),m[ht]=!0,Sn};var t5=h.__private__.clip=h.clip=function(P){return Y(P==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return t5("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Y("n"),this};var sl=h.__private__.isValidStyle=function(P){var W=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(P)!==-1&&(W=!0),W};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(P){return sl(P)&&(u=P),this};var D0=h.__private__.getStyle=h.getStyle=function(P){var W=u;switch(P){case"D":case"S":W="S";break;case"F":W="f";break;case"FD":case"DF":W="B";break;case"f":case"f*":case"B":case"B*":W=P}return W},M0=h.close=function(){return Y("h"),this};h.stroke=function(){return Y("S"),this},h.fill=function(P){return Ih("f",P),this},h.fillEvenOdd=function(P){return Ih("f*",P),this},h.fillStroke=function(P){return Ih("B",P),this},h.fillStrokeEvenOdd=function(P){return Ih("B*",P),this};var Ih=function(P,W){dn(W)==="object"?n5(W,P):Y(P)},zd=function(P){P===null||j===x&&P===void 0||(P=D0(P),Y(P))};function r5(P,W,ce,xe,Ae){var Fe=new Rm(W||this.boundingBox,ce||this.xStep,xe||this.yStep,this.gState,Ae||this.matrix);Fe.stream=this.stream;var He=P+"$$"+this.cloneIndex+++"$$";return yt(He,Fe),Fe}var n5=function(P,W){var ce=Xr[P.key],xe=Ot[ce];if(xe instanceof bf)Y("q"),Y(i5(W)),xe.gState&&h.setGState(xe.gState),Y(P.matrix.toString()+" cm"),Y("/"+ce+" sh"),Y("Q");else if(xe instanceof Rm){var Ae=new ut(1,0,0,-1,0,Hd());P.matrix&&(Ae=Ae.multiply(P.matrix||Ce),ce=r5.call(xe,P.key,P.boundingBox,P.xStep,P.yStep,Ae).id),Y("q"),Y("/Pattern cs"),Y("/"+ce+" scn"),xe.gState&&h.setGState(xe.gState),Y(W),Y("Q")}},i5=function(P){switch(P){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},qg=h.moveTo=function(P,W){return Y(E(B(P))+" "+E(M(W))+" m"),this},$0=h.lineTo=function(P,W){return Y(E(B(P))+" "+E(M(W))+" l"),this},bo=h.curveTo=function(P,W,ce,xe,Ae,Fe){return Y([E(B(P)),E(M(W)),E(B(ce)),E(M(xe)),E(B(Ae)),E(M(Fe)),"c"].join(" ")),this};h.__private__.line=h.line=function(P,W,ce,xe,Ae){if(isNaN(P)||isNaN(W)||isNaN(ce)||isNaN(xe)||!sl(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return j===b?this.lines([[ce-P,xe-W]],P,W,[1,1],Ae||"S"):this.lines([[ce-P,xe-W]],P,W,[1,1]).stroke()},h.__private__.lines=h.lines=function(P,W,ce,xe,Ae,Fe){var He,pt,At,er,dr,Dr,Hn,bi,Sn,Ci,wi,Qi;if(typeof P=="number"&&(Qi=ce,ce=W,W=P,P=Qi),xe=xe||[1,1],Fe=Fe||!1,isNaN(W)||isNaN(ce)||!Array.isArray(P)||!Array.isArray(xe)||!sl(Ae)||typeof Fe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qg(W,ce),He=xe[0],pt=xe[1],er=P.length,Ci=W,wi=ce,At=0;At<er;At++)(dr=P[At]).length===2?(Ci=dr[0]*He+Ci,wi=dr[1]*pt+wi,$0(Ci,wi)):(Dr=dr[0]*He+Ci,Hn=dr[1]*pt+wi,bi=dr[2]*He+Ci,Sn=dr[3]*pt+wi,Ci=dr[4]*He+Ci,wi=dr[5]*pt+wi,bo(Dr,Hn,bi,Sn,Ci,wi));return Fe&&M0(),zd(Ae),this},h.path=function(P){for(var W=0;W<P.length;W++){var ce=P[W],xe=ce.c;switch(ce.op){case"m":qg(xe[0],xe[1]);break;case"l":$0(xe[0],xe[1]);break;case"c":bo.apply(this,xe);break;case"h":M0()}}return this},h.__private__.rect=h.rect=function(P,W,ce,xe,Ae){if(isNaN(P)||isNaN(W)||isNaN(ce)||isNaN(xe)||!sl(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return j===b&&(xe=-xe),Y([E(B(P)),E(M(W)),E(B(ce)),E(B(xe)),"re"].join(" ")),zd(Ae),this},h.__private__.triangle=h.triangle=function(P,W,ce,xe,Ae,Fe,He){if(isNaN(P)||isNaN(W)||isNaN(ce)||isNaN(xe)||isNaN(Ae)||isNaN(Fe)||!sl(He))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-P,xe-W],[Ae-ce,Fe-xe],[P-Ae,W-Fe]],P,W,[1,1],He,!0),this},h.__private__.roundedRect=h.roundedRect=function(P,W,ce,xe,Ae,Fe,He){if(isNaN(P)||isNaN(W)||isNaN(ce)||isNaN(xe)||isNaN(Ae)||isNaN(Fe)||!sl(He))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*ce),Fe=Math.min(Fe,.5*xe),this.lines([[ce-2*Ae,0],[Ae*pt,0,Ae,Fe-Fe*pt,Ae,Fe],[0,xe-2*Fe],[0,Fe*pt,-Ae*pt,Fe,-Ae,Fe],[2*Ae-ce,0],[-Ae*pt,0,-Ae,-Fe*pt,-Ae,-Fe],[0,2*Fe-xe],[0,-Fe*pt,Ae*pt,-Fe,Ae,-Fe]],P+Ae,W,[1,1],He,!0),this},h.__private__.ellipse=h.ellipse=function(P,W,ce,xe,Ae){if(isNaN(P)||isNaN(W)||isNaN(ce)||isNaN(xe)||!sl(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Fe=4/3*(Math.SQRT2-1)*ce,He=4/3*(Math.SQRT2-1)*xe;return qg(P+ce,W),bo(P+ce,W-He,P+Fe,W-xe,P,W-xe),bo(P-Fe,W-xe,P-ce,W-He,P-ce,W),bo(P-ce,W+He,P-Fe,W+xe,P,W+xe),bo(P+Fe,W+xe,P+ce,W+He,P+ce,W),zd(Ae),this},h.__private__.circle=h.circle=function(P,W,ce,xe){if(isNaN(P)||isNaN(W)||isNaN(ce)||!sl(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(P,W,ce,ce,xe)},h.setFont=function(P,W,ce){return ce&&(W=C(W,ce)),ht=T0(P,W,{disableWarning:!1}),this};var s5=h.__private__.getFont=h.getFont=function(){return Ht[T0.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var P,W,ce={};for(P in rr)if(rr.hasOwnProperty(P))for(W in ce[P]=[],rr[P])rr[P].hasOwnProperty(W)&&ce[P].push(W);return ce},h.addFont=function(P,W,ce,xe,Ae){var Fe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Fe.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Fe.indexOf(arguments[3])==-1&&(ce=C(ce,xe)),k0.call(this,P,W,ce,Ae=Ae||"Identity-H")};var qd,Ug=e.lineWidth||.200025,a5=h.__private__.getLineWidth=h.getLineWidth=function(){return Ug},tr=h.__private__.setLineWidth=h.setLineWidth=function(P){return Ug=P,Y(E(B(P))+" w"),this};h.__private__.setLineDash=Nt.API.setLineDash=Nt.API.setLineDashPattern=function(P,W){if(P=P||[],W=W||0,isNaN(W)||!Array.isArray(P))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return P=P.map(function(ce){return E(B(ce))}).join(" "),W=E(B(W)),Y("["+P+"] "+W+" d"),this};var o5=h.__private__.getLineHeight=h.getLineHeight=function(){return _e*qd};h.__private__.getLineHeight=h.getLineHeight=function(){return _e*qd};var l5=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(P){return typeof(P=P||1.15)=="number"&&(qd=P),this},c5=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return qd};l5(e.lineHeight);var Vl=h.__private__.getHorizontalCoordinate=function(P){return B(P)},Gl=h.__private__.getVerticalCoordinate=function(P){return j===x?P:vt[$].mediaBox.topRightY-vt[$].mediaBox.bottomLeftY-B(P)},u5=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(P){return E(Vl(P))},d5=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(P){return E(Gl(P))},Dh=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return qs(Dh)},h.__private__.setStrokeColor=h.setDrawColor=function(P,W,ce,xe){return Dh=vn({ch1:P,ch2:W,ch3:ce,ch4:xe,pdfColorType:"draw",precision:2}),Y(Dh),this};var Wg=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return qs(Wg)},h.__private__.setFillColor=h.setFillColor=function(P,W,ce,xe){return Wg=vn({ch1:P,ch2:W,ch3:ce,ch4:xe,pdfColorType:"fill",precision:2}),Y(Wg),this};var Ud=e.textColor||"0 g",f5=h.__private__.getTextColor=h.getTextColor=function(){return qs(Ud)};h.__private__.setTextColor=h.setTextColor=function(P,W,ce,xe){return Ud=vn({ch1:P,ch2:W,ch3:ce,ch4:xe,pdfColorType:"text",precision:3}),this};var Kl=e.charSpace,h5=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Kl||0)};h.__private__.setCharSpace=h.setCharSpace=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Kl=P,this};var Hg=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(P){var W=h.CapJoinStyles[P];if(W===void 0)throw new Error("Line cap style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hg=W,Y(W+" J"),this};var Vg=0;h.__private__.setLineJoin=h.setLineJoin=function(P){var W=h.CapJoinStyles[P];if(W===void 0)throw new Error("Line join style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vg=W,Y(W+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(P){if(P=P||0,isNaN(P))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(E(B(P))+" M"),this},h.GState=X2,h.setGState=function(P){(P=typeof P=="string"?Rt[Vt[P]]:F0(null,P)).equals(sn)||(Y("/"+P.id+" gs"),sn=P)};var F0=function(P,W){if(!P||!Vt[P]){var ce=!1;for(var xe in Rt)if(Rt.hasOwnProperty(xe)&&Rt[xe].equals(W)){ce=!0;break}if(ce)W=Rt[xe];else{var Ae="GS"+(Object.keys(Rt).length+1).toString(10);Rt[Ae]=W,W.id=Ae}return P&&(Vt[P]=W.id),Pr.publish("addGState",W),W}};h.addGState=function(P,W){return F0(P,W),this},h.saveGraphicsState=function(){return Y("q"),Ir.push({key:ht,size:_e,color:Ud}),this},h.restoreGraphicsState=function(){Y("Q");var P=Ir.pop();return ht=P.key,_e=P.size,Ud=P.color,sn=null,this},h.setCurrentTransformationMatrix=function(P){return Y(P.toString()+" cm"),this},h.comment=function(P){return Y("#"+P),this};var Yl=function(P,W){var ce=P||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(Fe){isNaN(Fe)||(ce=parseFloat(Fe))}});var xe=W||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Fe){isNaN(Fe)||(xe=parseFloat(Fe))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Fe){Ae=Fe.toString()}}),this},Gg=function(P,W,ce,xe){Yl.call(this,P,W),this.type="rect";var Ae=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(He){isNaN(He)||(Ae=parseFloat(He))}});var Fe=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Fe},set:function(He){isNaN(He)||(Fe=parseFloat(He))}}),this},Mh=function(){this.page=nr,this.currentPage=$,this.pages=ge.slice(0),this.pagesContext=vt.slice(0),this.x=bt,this.y=Nn,this.matrix=xr,this.width=Yg($),this.height=z0($),this.outputDestination=te,this.id="",this.objectNumber=-1};Mh.prototype.restore=function(){nr=this.page,$=this.currentPage,vt=this.pagesContext,ge=this.pages,bt=this.x,Nn=this.y,xr=this.matrix,B0($,this.width),Xl($,this.height),te=this.outputDestination};var Kg=function(P,W,ce,xe,Ae){Ln.push(new Mh),nr=$=0,ge=[],bt=P,Nn=W,xr=Ae,Bg([ce,xe])};for(var Wd in h.beginFormObject=function(P,W,ce,xe,Ae){return Kg(P,W,ce,xe,Ae),this},h.endFormObject=function(P){return function(W){if(wr[W])Ln.pop().restore();else{var ce=new Mh,xe="Xo"+(Object.keys(Gt).length+1).toString(10);ce.id=xe,wr[W]=xe,Gt[xe]=ce,Pr.publish("addFormObject",ce),Ln.pop().restore()}}(P),this},h.doFormObject=function(P,W){var ce=Gt[wr[P]];return Y("q"),Y(W.toString()+" cm"),Y("/"+ce.id+" Do"),Y("Q"),this},h.getFormObject=function(P){var W=Gt[wr[P]];return{x:W.x,y:W.y,width:W.width,height:W.height,matrix:W.matrix}},h.save=function(P,W){return P=P||"generated.pdf",(W=W||{}).returnPromise=W.returnPromise||!1,W.returnPromise===!1?(gf(Rh(il()),P),typeof gf.unload=="function"&&Qt.setTimeout&&setTimeout(gf.unload,911),this):new Promise(function(ce,xe){try{var Ae=gf(Rh(il()),P);typeof gf.unload=="function"&&Qt.setTimeout&&setTimeout(gf.unload,911),ce(Ae)}catch(Fe){xe(Fe.message)}})},Nt.API)Nt.API.hasOwnProperty(Wd)&&(Wd==="events"&&Nt.API.events.length?function(P,W){var ce,xe,Ae;for(Ae=W.length-1;Ae!==-1;Ae--)ce=W[Ae][0],xe=W[Ae][1],P.subscribe.apply(P,[ce].concat(typeof xe=="function"?[xe]:xe))}(Pr,Nt.API.events):h[Wd]=Nt.API[Wd]);function Yg(P){return vt[P].mediaBox.topRightX-vt[P].mediaBox.bottomLeftX}function B0(P,W){vt[P].mediaBox.topRightX=W+vt[P].mediaBox.bottomLeftX}function z0(P){return vt[P].mediaBox.topRightY-vt[P].mediaBox.bottomLeftY}function Xl(P,W){vt[P].mediaBox.topRightY=W+vt[P].mediaBox.bottomLeftY}var Zl=h.getPageWidth=function(P){return Yg(P=P||$)/qt},q0=h.setPageWidth=function(P,W){B0(P,W*qt)},Hd=h.getPageHeight=function(P){return z0(P=P||$)/qt},U0=h.setPageHeight=function(P,W){Xl(P,W*qt)};return h.internal={pdfEscape:Ma,getStyle:D0,getFont:s5,getFontSize:We,getCharSpace:h5,getTextColor:f5,getLineHeight:o5,getLineHeightFactor:c5,getLineWidth:a5,write:Le,getHorizontalCoordinate:Vl,getVerticalCoordinate:Gl,getCoordinateString:u5,getVerticalCoordinateString:d5,collections:{},newObject:Mt,newAdditionalObject:Zr,newObjectDeferred:Ar,newObjectDeferredBegin:an,getFilters:qi,putStream:Da,events:Pr,scaleFactor:qt,pageSize:{getWidth:function(){return Zl($)},setWidth:function(P){q0($,P)},getHeight:function(){return Hd($)},setHeight:function(P){U0($,P)}},encryptionOptions:d,encryption:Ai,getEncryptor:function(P){return d!==null?Ai.encryptor(P,0):function(W){return W}},output:R0,getNumberOfPages:O0,get pages(){return ge},out:Y,f2:k,f3:T,getPageInfo:Hl,getPageInfoByObjId:I0,getCurrentPageInfo:e5,getPDFVersion:p,Point:Yl,Rectangle:Gg,Matrix:ut,hasHotfix:$a},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Zl($)},set:function(P){q0($,P)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Hd($)},set:function(P){U0($,P)},enumerable:!0,configurable:!0}),(function(P){for(var W=0,ce=we.length;W<ce;W++){var xe=k0.call(this,P[W][0],P[W][1],P[W][2],we[W][3],!0);f===!1&&(m[xe]=!0);var Ae=P[W][0].split("-");C0({id:xe,fontName:Ae[0],fontStyle:Ae[1]||""})}Pr.publish("addFonts",{fonts:Ht,dictionary:rr})}).call(h,we),ht="F1",E0(i,r),Pr.publish("initialized"),h}mm.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},mm.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mm.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},mm.prototype.processOwnerPassword=function(e,t){return pE(mE(t).substr(0,5),e)},mm.prototype.encryptor=function(e,t){var r=mE(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return pE(r,n)}},X2.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||dn(e)!==dn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Nt.API={events:[]},Nt.version="3.0.4";var ei=Nt.API,qO=1,Eh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ir=function(e){return e.toFixed(2)},Au=function(e){return e.toFixed(5)};ei.__acroform__={};var sa=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},B8=function(e){return e*qO},dl=function(e){var t=new HK,r=mt.internal.getHeight(e)||0,n=mt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ir(n)),Number(ir(r))],t},L8e=ei.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},R8e=ei.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},I8e=ei.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},mi=ei.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return I8e(e,t-1)},pi=ei.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return L8e(e,t-1)},gi=ei.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return R8e(e,t-1)},D8e=ei.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(i+o)||0,c.upperRight_Y=n(s)||0,[Number(ir(c.lowerLeft_X)),Number(ir(c.lowerLeft_Y)),Number(ir(c.upperRight_X)),Number(ir(c.upperRight_Y))]},M8e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=gE(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+ir(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=dl(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},gE=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var s=r,o=mt.internal.getHeight(e)||0;o=o<0?-o:o;var l=mt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(k,T,B){if(k+1<i.length){var M=T+" "+i[k+1][0];return m1(M,e,B).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=m1("3",e,s).height,m=e.multiline?o-s:(o-f)/2,h=m+=2,v=0,p=0,g=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+m1(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",b=0,x=0;x<i.length;x++)if(i.hasOwnProperty(x)){var j=!1;if(i[x].length!==1&&g!==i[x].length-1){if((f+2)*(b+2)+2>o)continue e;y+=i[x][g],j=!0,p=x,x--}else{y=(y+=i[x][g]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var N=parseInt(x),A=c(N,y,s),C=x>=i.length-1;if(A&&!C){y+=" ",g=0;continue}if(A||C){if(C)p=N;else if(e.multiline&&(f+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(b+2)+2>o)continue e;p=N}}for(var E="",O=v;O<=p;O++){var L=i[O];if(e.multiline){if(O===p){E+=L[g]+" ",g=(g+1)%L.length;continue}if(O===v){E+=L[L.length-1]+" ";continue}}E+=L[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=m1(E,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}t+=ir(u)+" "+ir(h)+` Td
`,t+="("+Eh(E)+`) Tj
`,t+=-ir(u)+` 0 Td
`,h=-(s+2),d=0,v=j?p:p+1,b++,y=""}break}return n.text=t,n.fontSize=s,n},m1=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},$8e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},F8e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},B8e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(el.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify($8e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");qO=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new VK,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&F8e(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=D8e(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=mt.createDefaultAppearanceStream(l),dn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=M8e(l);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var h=l.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var v=h[o];typeof v=="function"&&(v=v.call(i,l)),f+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=h)=="function"&&(v=v.call(i,l)),f+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&function(p,g){for(var y in p)if(p.hasOwnProperty(y)){var b=y,x=p[y];g.internal.newObjectDeferredBegin(x.objId,!0),dn(x)==="object"&&typeof x.putStream=="function"&&x.putStream(),delete p[b]}}(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},WK=ei.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),dn(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+Eh(n(e[s].toString()))+")"):i+=e[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},LS=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Eh(n(e))+")"},Sl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Sl.prototype.toString=function(){return this.objId+" 0 R"},Sl.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Sl.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:WK(i,this.objId,this.scope)}):i instanceof Sl?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var HK=function(){Sl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};sa(HK,Sl);var VK=function(){Sl.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Eh(r(e))+")"}},set:function(r){e=r}})};sa(VK,Sl);var el=function e(){Sl.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mi(t,3)},set:function(y){y?this.F=pi(t,3):this.F=gi(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Z2)return;s="FieldObject"+e.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Eh(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/qO:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Z2||this instanceof Gf))return LS(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Vi==0?LS(m,this.objId,this.scope):m},set:function(y){y=y.toString(),m=this instanceof Vi==0?y.substr(0,1)==="("?sm(y.substr(1,y.length-2)):sm(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi==1?sm(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Vi==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Vi==0?LS(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Vi==0?y.substr(0,1)==="("?sm(y.substr(1,y.length-2)):sm(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi==1?sm(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Vi==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(y){y=!!y,p=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(y){v=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,1)},set:function(y){y?this.Ff=pi(this.Ff,1):this.Ff=gi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,2)},set:function(y){y?this.Ff=pi(this.Ff,2):this.Ff=gi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,3)},set:function(y){y?this.Ff=pi(this.Ff,3):this.Ff=gi(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');g=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(g){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};sa(el,Sl);var tp=function(){el.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return WK(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,18)},set:function(r){r?this.Ff=pi(this.Ff,18):this.Ff=gi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=pi(this.Ff,19):this.Ff=gi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,20)},set:function(r){r?(this.Ff=pi(this.Ff,20),t.sort()):this.Ff=gi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,22)},set:function(r){r?this.Ff=pi(this.Ff,22):this.Ff=gi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,23)},set:function(r){r?this.Ff=pi(this.Ff,23):this.Ff=gi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,27)},set:function(r){r?this.Ff=pi(this.Ff,27):this.Ff=gi(this.Ff,27)}}),this.hasAppearanceStream=!1};sa(tp,el);var rp=function(){tp.call(this),this.fontName="helvetica",this.combo=!1};sa(rp,tp);var np=function(){rp.call(this),this.combo=!0};sa(np,rp);var K1=function(){np.call(this),this.edit=!0};sa(K1,np);var Vi=function(){el.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,15)},set:function(r){r?this.Ff=pi(this.Ff,15):this.Ff=gi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,16)},set:function(r){r?this.Ff=pi(this.Ff,16):this.Ff=gi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,17)},set:function(r){r?this.Ff=pi(this.Ff,17):this.Ff=gi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,26)},set:function(r){r?this.Ff=pi(this.Ff,26):this.Ff=gi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+Eh(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){dn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};sa(Vi,el);var Y1=function(){Vi.call(this),this.pushButton=!0};sa(Y1,Vi);var ip=function(){Vi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};sa(ip,Vi);var Z2=function(){var e,t;el.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+Eh(i(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){dn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sa(Z2,el),ip.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ip.prototype.createOption=function(e){var t=new Z2;return t.Parent=this,t.optionName=e,this.Kids.push(t),z8e.call(this.scope,t),t};var X1=function(){Vi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mt.CheckBox.createAppearanceStream()};sa(X1,Vi);var Gf=function(){el.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,13)},set:function(t){t?this.Ff=pi(this.Ff,13):this.Ff=gi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,21)},set:function(t){t?this.Ff=pi(this.Ff,21):this.Ff=gi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,23)},set:function(t){t?this.Ff=pi(this.Ff,23):this.Ff=gi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,24)},set:function(t){t?this.Ff=pi(this.Ff,24):this.Ff=gi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,25)},set:function(t){t?this.Ff=pi(this.Ff,25):this.Ff=gi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,26)},set:function(t){t?this.Ff=pi(this.Ff,26):this.Ff=gi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sa(Gf,el);var Z1=function(){Gf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,14)},set:function(e){e?this.Ff=pi(this.Ff,14):this.Ff=gi(this.Ff,14)}}),this.password=!0};sa(Z1,Gf);var mt={CheckBox:{createAppearanceStream:function(){return{N:{On:mt.CheckBox.YesNormal},D:{On:mt.CheckBox.YesPushDown,Off:mt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=dl(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=gE(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+ir(mt.internal.getWidth(e))+" "+ir(mt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+ir(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=dl(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],s=mt.internal.getHeight(e),o=mt.internal.getWidth(e),l=gE(e,e.caption);return i.push("1 g"),i.push("0 0 "+ir(o)+" "+ir(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ir(o-1)+" "+ir(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+ir(l.fontSize)+" Tf "+n),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=dl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ir(mt.internal.getWidth(e))+" "+ir(mt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:mt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=mt.RadioButton.Circle.YesNormal,t.D[e]=mt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=dl(e);t.scope=e.scope;var r=[],n=mt.internal.getWidth(e)<=mt.internal.getHeight(e)?mt.internal.getWidth(e)/4:mt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=mt.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Au(mt.internal.getWidth(e)/2)+" "+Au(mt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=dl(e);t.scope=e.scope;var r=[],n=mt.internal.getWidth(e)<=mt.internal.getHeight(e)?mt.internal.getWidth(e)/4:mt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*mt.internal.Bezier_C).toFixed(5)),o=Number((n*mt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Au(mt.internal.getWidth(e)/2)+" "+Au(mt.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Au(mt.internal.getWidth(e)/2)+" "+Au(mt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=dl(e);t.scope=e.scope;var r=[],n=mt.internal.getWidth(e)<=mt.internal.getHeight(e)?mt.internal.getWidth(e)/4:mt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*mt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Au(mt.internal.getWidth(e)/2)+" "+Au(mt.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:mt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=mt.RadioButton.Cross.YesNormal,t.D[e]=mt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=dl(e);t.scope=e.scope;var r=[],n=mt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+ir(mt.internal.getWidth(e)-2)+" "+ir(mt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ir(n.x1.x)+" "+ir(n.x1.y)+" m"),r.push(ir(n.x2.x)+" "+ir(n.x2.y)+" l"),r.push(ir(n.x4.x)+" "+ir(n.x4.y)+" m"),r.push(ir(n.x3.x)+" "+ir(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=dl(e);t.scope=e.scope;var r=mt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+ir(mt.internal.getWidth(e))+" "+ir(mt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ir(mt.internal.getWidth(e)-2)+" "+ir(mt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ir(r.x1.x)+" "+ir(r.x1.y)+" m"),n.push(ir(r.x2.x)+" "+ir(r.x2.y)+" l"),n.push(ir(r.x4.x)+" "+ir(r.x4.y)+" m"),n.push(ir(r.x3.x)+" "+ir(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=dl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ir(mt.internal.getWidth(e))+" "+ir(mt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};mt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=mt.internal.getWidth(e),r=mt.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},mt.internal.getWidth=function(e){var t=0;return dn(e)==="object"&&(t=B8(e.Rect[2])),t},mt.internal.getHeight=function(e){var t=0;return dn(e)==="object"&&(t=B8(e.Rect[3])),t};var z8e=ei.addField=function(e){if(B8e(this,e),!(e instanceof el))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ei.AcroFormChoiceField=tp,ei.AcroFormListBox=rp,ei.AcroFormComboBox=np,ei.AcroFormEditBox=K1,ei.AcroFormButton=Vi,ei.AcroFormPushButton=Y1,ei.AcroFormRadioButton=ip,ei.AcroFormCheckBox=X1,ei.AcroFormTextField=Gf,ei.AcroFormPasswordField=Z1,ei.AcroFormAppearance=mt,ei.AcroForm={ChoiceField:tp,ListBox:rp,ComboBox:np,EditBox:K1,Button:Vi,PushButton:Y1,RadioButton:ip,CheckBox:X1,TextField:Gf,PasswordField:Z1,Appearance:mt},Nt.AcroForm={ChoiceField:tp,ListBox:rp,ComboBox:np,EditBox:K1,Button:Vi,PushButton:Y1,RadioButton:ip,CheckBox:X1,TextField:Gf,PasswordField:Z1,Appearance:mt};function GK(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(k,T){var B,M,G,z,D,q=r;if((T=T||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(A(k))for(D in n)for(G=n[D],B=0;B<G.length;B+=1){for(z=!0,M=0;M<G[B].length;M+=1)if(G[B][M]!==void 0&&G[B][M]!==k[M]){z=!1;break}if(z===!0){q=D;break}}else for(D in n)for(G=n[D],B=0;B<G.length;B+=1){for(z=!0,M=0;M<G[B].length;M+=1)if(G[B][M]!==void 0&&G[B][M]!==k.charCodeAt(M)){z=!1;break}if(z===!0){q=D;break}}return q===r&&T!==r&&(q=T),q},s=function k(T){for(var B=this.internal.write,M=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var z=[];if(z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Image"}),z.push({key:"Width",value:T.width}),z.push({key:"Height",value:T.height}),T.colorSpace===y.INDEXED?z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(z.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===y.DEVICE_CMYK&&z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),z.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&z.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var D="",q=0,K=T.transparency.length;q<K;q++)D+=T.transparency[q]+" "+T.transparency[q]+" ";z.push({key:"Mask",value:"["+D+"]"})}T.sMask!==void 0&&z.push({key:"SMask",value:T.objectId+1+" 0 R"});var ae=T.filter!==void 0?["/"+T.filter]:void 0;if(M({data:T.data,additionalKeyValues:z,alreadyAppliedFilters:ae,objectId:T.objectId}),B("endobj"),"sMask"in T&&T.sMask!==void 0){var J,I=(J=T.sMaskBitsPerComponent)!==null&&J!==void 0?J:T.bitsPerComponent,$={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:T.sMask};"filter"in T&&($.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(T.width),$.filter=T.filter),k.call(this,$)}if(T.colorSpace===y.INDEXED){var U=this.internal.newObject();M({data:E(new Uint8Array(T.palette)),objectId:U}),B("endobj")}},o=function(){var k=this.internal.collections[t+"images"];for(var T in k)s.call(this,k[T])},l=function(){var k,T=this.internal.collections[t+"images"],B=this.internal.write;for(var M in T)B("/I"+(k=T[M]).index,k.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var k=this.internal.collections[t+"images"];return c.call(this),k},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(k){return typeof e["process"+k.toUpperCase()]=="function"},m=function(k){return dn(k)==="object"&&k.nodeType===1},h=function(k,T){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var B=""+k.getAttribute("src");if(B.indexOf("data:image/")===0)return G1(unescape(B).split("base64,").pop());var M=e.loadFile(B,!0);if(M!==void 0)return M}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var G;switch(T){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;default:G="image/jpeg"}return G1(k.toDataURL(G,1).split("base64,").pop())}},v=function(k){var T=this.internal.collections[t+"images"];if(T){for(var B in T)if(k===T[B].alias)return T[B]}},p=function(k,T,B){return k||T||(k=-96,T=-96),k<0&&(k=-1*B.width*72/k/this.internal.scaleFactor),T<0&&(T=-1*B.height*72/T/this.internal.scaleFactor),k===0&&(k=T*B.width/B.height),T===0&&(T=k*B.height/B.width),[k,T]},g=function(k,T,B,M,G,z){var D=p.call(this,B,M,G),q=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,ae=u.call(this);if(B=D[0],M=D[1],ae[G.index]=G,z){z*=Math.PI/180;var J=Math.cos(z),I=Math.sin(z),$=function(H){return H.toFixed(4)},U=[$(J),$(I),$(-1*I),$(J),0,0,"cm"]}this.internal.write("q"),z?(this.internal.write([1,"0","0",1,q(k),K(T+M),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([q(B),"0","0",q(M),"0","0","cm"].join(" "))):this.internal.write([q(B),"0","0",q(M),q(k),K(T+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=e.__addimage__.sHashCode=function(k){var T,B,M=0;if(typeof k=="string")for(B=k.length,T=0;T<B;T++)M=(M<<5)-M+k.charCodeAt(T),M|=0;else if(A(k))for(B=k.byteLength/2,T=0;T<B;T++)M=(M<<5)-M+k[T],M|=0;return M},j=e.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var T=!0;return k.length===0&&(T=!1),k.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(T=!1),T},N=e.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var T=k.indexOf(",");return T<0?null:k.substring(0,T).trim().endsWith("base64")?k.substring(T+1):null};e.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var A=e.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},C=e.__addimage__.binaryStringToUint8Array=function(k){for(var T=k.length,B=new Uint8Array(T),M=0;M<T;M++)B[M]=k.charCodeAt(M);return B},E=e.__addimage__.arrayBufferToBinaryString=function(k){for(var T="",B=A(k)?k:new Uint8Array(k),M=0;M<B.length;M+=8192)T+=String.fromCharCode.apply(null,B.subarray(M,M+8192));return T};e.addImage=function(){var k,T,B,M,G,z,D,q,K;if(typeof arguments[1]=="number"?(T=r,B=arguments[1],M=arguments[2],G=arguments[3],z=arguments[4],D=arguments[5],q=arguments[6],K=arguments[7]):(T=arguments[1],B=arguments[2],M=arguments[3],G=arguments[4],z=arguments[5],D=arguments[6],q=arguments[7],K=arguments[8]),dn(k=arguments[0])==="object"&&!m(k)&&"imageData"in k){var ae=k;k=ae.imageData,T=ae.format||T||r,B=ae.x||B||0,M=ae.y||M||0,G=ae.w||ae.width||G,z=ae.h||ae.height||z,D=ae.alias||D,q=ae.compression||q,K=ae.rotation||ae.angle||K}var J=this.internal.getFilters();if(q===void 0&&J.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(B)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var I=O.call(this,k,T,D,q);return g.call(this,B,M,G,z,I,K),this};var O=function(k,T,B,M){var G,z,D;if(typeof k=="string"&&i(k)===r){k=unescape(k);var q=L(k,!1);(q!==""||(q=e.loadFile(k,!0))!==void 0)&&(k=q)}if(m(k)&&(k=h(k,T)),T=i(k,T),!f(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((D=B)==null||D.length===0)&&(B=function(K){return typeof K=="string"||A(K)?x(K):A(K.data)?x(K.data):null}(k)),(G=v.call(this,B))||(k instanceof Uint8Array||T==="RGBA"||(z=k,k=C(k)),G=this["process"+T.toUpperCase()](k,d.call(this),B,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in e.image_compression?K:b.NONE}(M),z)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},L=e.__addimage__.convertBase64ToBinaryString=function(k,T){T=typeof T!="boolean"||T;var B,M="";if(typeof k=="string"){var G;B=(G=N(k))!==null&&G!==void 0?G:k;try{M=G1(B)}catch(z){if(T)throw j(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};e.getImageProperties=function(k){var T,B,M="";if(m(k)&&(k=h(k)),typeof k=="string"&&i(k)===r&&((M=L(k,!1))===""&&(M=e.loadFile(k)||""),k=M),B=i(k),!f(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(k instanceof Uint8Array||(k=C(k)),!(T=this["process"+B.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=B,T}})(Nt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Nt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var h=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(p.objId),b=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(y(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(y(b))+") >>",p.content=s;var x=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+x,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(v(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var N=this.annotations._nameMap[n.options.name];n.options.pageNumber=N.page,n.options.top=N.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var A=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+A+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+i),h:u(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,i,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,i,s),i+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,i-u,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Nt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(p){return t[p.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=e.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&i.indexOf(p.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(p){var g=0,y=r,b="",x=0;for(g=0;g<p.length;g+=1)y[p.charCodeAt(g)]!==void 0?(x++,typeof(y=y[p.charCodeAt(g)])=="number"&&(b+=String.fromCharCode(y),y=r,x=0),g===p.length-1&&(y=r,b+=p.charAt(g-(x-1)),g-=x-1,x=0)):(y=r,b+=p.charAt(g-x),g-=x,x=0);return b};e.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(p,g,y){return o(p)?s(p)===!1?-1:!u(p)||!o(g)&&!o(y)||!o(y)&&l(g)||l(p)&&!o(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&o(g)&&!l(g)&&o(y)&&u(y)?3:l(p)||!o(y)?1:2:-1},h=function(p){var g=0,y=0,b=0,x="",j="",N="",A=(p=p||"").split("\\s+"),C=[];for(g=0;g<A.length;g+=1){for(C.push(""),y=0;y<A[g].length;y+=1)x=A[g][y],j=A[g][y-1],N=A[g][y+1],o(x)?(b=m(x,j,N),C[g]+=b!==-1?String.fromCharCode(t[x.charCodeAt(0)][b]):x):C[g]+=x;C[g]=f(C[g])}return C.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(g)){var b=0;for(y=[],b=0;b<g.length;b+=1)Array.isArray(g[b])?y.push([h(g[b][0]),g[b][1],g[b][2]]):y.push([h(g[b])]);p=y}else p=h(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};e.events.push(["preProcessText",v])}(Nt.API),Nt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Nt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(p){m=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(p){v=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,h=0,v=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(x,j){return x.concat(g.splitTextToSize(j,y))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)h<(p=this.getStringUnitWidth(c[b],{font:f})*d)&&(h=p);return h!==0&&(v=c.length),{w:h/=m,h:Math.max((v*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,v,p,g,y=[],b=[],x=[],j={},N={},A=[],C=[],E=(m=m||{}).autoSize||!1,O=m.printHeaders!==!1,L=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,k=m.margins||Object.assign({width:this.getPageWidth()},t),T=typeof m.padding=="number"?m.padding:3,B=m.headerBackgroundColor||"#c8c8c8",M=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=M,this.setFontSize(L),f==null)b=y=Object.keys(d[0]),x=y.map(function(){return"left"});else if(Array.isArray(f)&&dn(f[0])==="object")for(y=f.map(function(ae){return ae.name}),b=f.map(function(ae){return ae.prompt||ae.name||""}),x=f.map(function(ae){return ae.align||"left"}),h=0;h<f.length;h+=1)N[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(b=y=f,x=y.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<y.length;h+=1){for(j[g=y[h]]=d.map(function(ae){return ae[g]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(b[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=j[g],this.setFont(void 0,"normal"),p=0;p<v.length;p+=1)A.push(this.getTextDimensions(v[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[g]=Math.max.apply(null,A)+T+T,A=[]}if(O){var G={};for(h=0;h<y.length;h+=1)G[y[h]]={},G[y[h]].text=b[h],G[y[h]].align=x[h];var z=l.call(this,G,N);C=y.map(function(ae){return new s(c,u,N[ae],z,G[ae].text,void 0,G[ae].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var D=f.reduce(function(ae,J){return ae[J.name]=J.align,ae},{});for(h=0;h<d.length;h+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:h,data:d[h]},this);var q=l.call(this,d[h],N);for(p=0;p<y.length;p+=1){var K=d[h][y[p]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:h,col:p,data:K},this),o.call(this,new s(c,u,N[y[p]],q,K,h+2,D[y[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(h){var v=c[h];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/m+d+d},this).reduce(function(h,v){return Math.max(h,v)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Nt.API);var KK={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},YK=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],vE=GK(YK),XK=[100,200,300,400,500,600,700,800,900],q8e=GK(XK);function RS(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return KK[s=s||"normal"]?s:"normal"}(e.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(e.weight),i=function(s){return typeof vE[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function z8(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var U8e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},q8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function U8(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function W8(e){return e.trimLeft()}function W8e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function H8e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var p1,H8,V8,am,g1,G8,K8,Y8,IS=["times"];function X8(e,t,r,n,i){var s=4,o=J8;switch(i){case Nt.API.image_compression.FAST:s=1,o=Z8;break;case Nt.API.image_compression.MEDIUM:s=6,o=Q8;break;case Nt.API.image_compression.SLOW:s=9,o=e$}e=function(c,u,d,f){for(var m,h=c.length/u,v=new Uint8Array(c.length+h),p=[V8e,Z8,J8,Q8,e$],g=0;g<h;g+=1){var y=g*u,b=c.subarray(y,y+u);if(f)v.set(f(b,d,m),y+g);else{for(var x=p.length,j=[],N=0;N<x;N+=1)j[N]=p[N](b,d,m);var A=K8e(j.concat());v.set(j[A],y+g)}m=b}return v}(e,t,Math.ceil(r*n/8),o);var l=iE(e,{level:s});return Nt.API.__addimage__.arrayBufferToBinaryString(l)}function V8e(e){var t=Array.apply([],e);return t.unshift(0),t}function Z8(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=e[i-t]||0;n[i+1]=e[i]-s+256&255}return n}function J8(e,t,r){var n=e.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;i[s+1]=e[s]-o+256&255}return i}function Q8(e,t,r){var n=e.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var o=e[s-t]||0,l=r&&r[s]||0;i[s+1]=e[s]+256-(o+l>>>1)&255}return i}function e$(e,t,r){var n=e.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var o=G8e(e[s-t]||0,r&&r[s]||0,r&&r[s-t]||0);i[s+1]=e[s]-o+256&255}return i}function G8e(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),s=Math.abs(e+t-r-r);return n<=i&&n<=s?e:i<=s?t:r}function K8e(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function DS(e,t,r){var n=t*r,i=Math.floor(n/8),s=16-(n-8*i+r),o=(1<<r)-1;return ZK(e,i)>>s&o}function t$(e,t,r,n){var i=r*n,s=Math.floor(i/8),o=16-(i-8*s+n),l=(1<<n)-1,c=(t&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var m=f>>8&255;u.setUint8(d,m)}})(e,s,ZK(e,s)&~(l<<o)&65535|c)}function ZK(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Y8e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,o=1<<1+(7&i);e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,m=null,h=0,v=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var p=e[t++];f=e[t++]|e[t++]<<8,m=e[t++],1&p||(m=null),h=p>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,j=e[t++],N=j>>6&1,A=1<<1+(7&j),C=l,E=c,O=!1;j>>7&&(O=!0,C=t,E=A,t+=3*A);var L=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}d.push({x:g,y,width:b,height:x,has_local_palette:O,palette_offset:C,palette_size:E,data_offset:L,data_length:t-L,transparent_index:m,interlaced:!!N,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return v},this.frameInfo=function(T){if(T<0||T>=d.length)throw new Error("Frame index out of range.");return d[T]},this.decodeAndBlitFrameBGRA=function(T,B){var M=this.frameInfo(T),G=M.width*M.height,z=new Uint8Array(G);r$(e,M.data_offset,z,G);var D=M.palette_offset,q=M.transparent_index;q===null&&(q=256);var K=M.width,ae=r-K,J=K,I=4*(M.y*r+M.x),$=4*((M.y+M.height)*r+M.x),U=I,H=4*ae;M.interlaced===!0&&(H+=4*r*7);for(var re=8,X=0,he=z.length;X<he;++X){var se=z[X];if(J===0&&(J=K,(U+=H)>=$&&(H=4*ae+4*r*(re-1),U=I+(K+ae)*(re<<1),re>>=1)),se===q)U+=4;else{var ue=e[D+3*se],ge=e[D+3*se+1],ve=e[D+3*se+2];B[U++]=ve,B[U++]=ge,B[U++]=ue,B[U++]=255}--J}},this.decodeAndBlitFrameRGBA=function(T,B){var M=this.frameInfo(T),G=M.width*M.height,z=new Uint8Array(G);r$(e,M.data_offset,z,G);var D=M.palette_offset,q=M.transparent_index;q===null&&(q=256);var K=M.width,ae=r-K,J=K,I=4*(M.y*r+M.x),$=4*((M.y+M.height)*r+M.x),U=I,H=4*ae;M.interlaced===!0&&(H+=4*r*7);for(var re=8,X=0,he=z.length;X<he;++X){var se=z[X];if(J===0&&(J=K,(U+=H)>=$&&(H=4*ae+4*r*(re-1),U=I+(K+ae)*(re<<1),re>>=1)),se===q)U+=4;else{var ue=e[D+3*se],ge=e[D+3*se+1],ve=e[D+3*se+2];B[U++]=ue,B[U++]=ge,B[U++]=ve,B[U++]=255}--J}}}function r$(e,t,r,n){for(var i=e[t++],s=1<<i,o=s+1,l=o+1,c=i+1,u=(1<<c)-1,d=0,f=0,m=0,h=e[t++],v=new Int32Array(4096),p=null;;){for(;d<16&&h!==0;)f|=e[t++]<<d,d+=8,h===1?h=e[t++]:--h;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==s){if(g===o)break;for(var y=g<l?g:p,b=0,x=y;x>s;)x=v[x]>>8,++b;var j=x;if(m+b+(y!==g?1:0)>n)return void bn.log("Warning, gif stream longer than expected.");r[m++]=j;var N=m+=b;for(y!==g&&(r[m++]=j),x=y;b--;)x=v[x],r[--N]=255&x,x>>=8;p!==null&&l<4096&&(v[l++]=p<<8|j,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=o+1,u=(1<<(c=i+1))-1,p=null}return m!==n&&bn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function MS(e){var t,r,n,i,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),m=new Array(65535),h=new Array(64),v=new Array(64),p=[],g=0,y=7,b=new Array(64),x=new Array(64),j=new Array(64),N=new Array(256),A=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(I,$){for(var U=0,H=0,re=new Array,X=1;X<=16;X++){for(var he=1;he<=I[X];he++)re[$[H]]=[],re[$[H]][0]=U,re[$[H]][1]=X,H++,U++;U*=2}return re}function D(I){for(var $=I[0],U=I[1]-1;U>=0;)$&1<<U&&(g|=1<<y),U--,--y<0&&(g==255?(q(255),q(0)):q(g),y=7,g=0)}function q(I){p.push(I)}function K(I){q(I>>8&255),q(255&I)}function ae(I,$,U,H,re){for(var X,he=re[0],se=re[240],ue=function(_e,Qe){var We,Ge,Ke,Pt,Lt,ft,Zt,gr,ht,qt,bt=0;for(ht=0;ht<8;++ht){We=_e[bt],Ge=_e[bt+1],Ke=_e[bt+2],Pt=_e[bt+3],Lt=_e[bt+4],ft=_e[bt+5],Zt=_e[bt+6];var Nn=We+(gr=_e[bt+7]),xr=We-gr,Ht=Ge+Zt,rr=Ge-Zt,Ir=Ke+ft,Ot=Ke-ft,Xr=Pt+Lt,Rt=Pt-Lt,Vt=Nn+Xr,sn=Nn-Xr,nr=Ht+Ir,vt=Ht-Ir;_e[bt]=Vt+nr,_e[bt+4]=Vt-nr;var Pr=.707106781*(vt+sn);_e[bt+2]=sn+Pr,_e[bt+6]=sn-Pr;var It=.382683433*((Vt=Rt+Ot)-(vt=rr+xr)),Gt=.5411961*Vt+It,wr=1.306562965*vt+It,Ln=.707106781*(nr=Ot+rr),ut=xr+Ln,oi=xr-Ln;_e[bt+5]=oi+Gt,_e[bt+3]=oi-Gt,_e[bt+1]=ut+wr,_e[bt+7]=ut-wr,bt+=8}for(bt=0,ht=0;ht<8;++ht){We=_e[bt],Ge=_e[bt+8],Ke=_e[bt+16],Pt=_e[bt+24],Lt=_e[bt+32],ft=_e[bt+40],Zt=_e[bt+48];var Ce=We+(gr=_e[bt+56]),yt=We-gr,Jt=Ge+Zt,Mt=Ge-Zt,Ar=Ke+ft,an=Ke-ft,Zr=Pt+Lt,Rn=Pt-Lt,pn=Ce+Zr,qs=Ce-Zr,vn=Jt+Ar,qi=Jt-Ar;_e[bt]=pn+vn,_e[bt+32]=pn-vn;var Da=.707106781*(qi+qs);_e[bt+16]=qs+Da,_e[bt+48]=qs-Da;var Fd=.382683433*((pn=Rn+an)-(qi=Mt+yt)),rl=.5411961*pn+Fd,Bd=1.306562965*qi+Fd,Ph=.707106781*(vn=an+Mt),Oh=yt+Ph,Th=yt-Ph;_e[bt+40]=Th+rl,_e[bt+24]=Th-rl,_e[bt+8]=Oh+Bd,_e[bt+56]=Oh-Bd,bt++}for(ht=0;ht<64;++ht)qt=_e[ht]*Qe[ht],h[ht]=qt>0?qt+.5|0:qt-.5|0;return h}(I,$),ge=0;ge<64;++ge)v[C[ge]]=ue[ge];var ve=v[0]-U;U=v[0],ve==0?D(H[0]):(D(H[m[X=32767+ve]]),D(f[X]));for(var te=63;te>0&&v[te]==0;)te--;if(te==0)return D(he),U;for(var Ne,Y=1;Y<=te;){for(var Le=Y;v[Y]==0&&Y<=te;)++Y;var ye=Y-Le;if(ye>=16){Ne=ye>>4;for(var we=1;we<=Ne;++we)D(se);ye&=15}X=32767+v[Y],D(re[(ye<<4)+m[X]]),D(f[X]),Y++}return te!=63&&D(he),U}function J(I){I=Math.min(Math.max(I,1),100),s!=I&&(function($){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var re=o((U[H]*$+50)/100);re=Math.min(Math.max(re,1),255),l[C[H]]=re}for(var X=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var se=o((X[he]*$+50)/100);se=Math.min(Math.max(se,1),255),c[C[he]]=se}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ge=0,ve=0;ve<8;ve++)for(var te=0;te<8;te++)u[ge]=1/(l[C[ge]]*ue[ve]*ue[te]*8),d[ge]=1/(c[C[ge]]*ue[ve]*ue[te]*8),ge++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),s=I)}this.encode=function(I,$){$&&J($),p=new Array,g=0,y=7,K(65496),K(65504),K(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),K(1),K(1),q(0),q(0),function(){K(65499),K(132),q(0);for(var Ge=0;Ge<64;Ge++)q(l[Ge]);q(1);for(var Ke=0;Ke<64;Ke++)q(c[Ke])}(),function(Ge,Ke){K(65472),K(17),q(8),K(Ke),K(Ge),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(I.width,I.height),function(){K(65476),K(418),q(0);for(var Ge=0;Ge<16;Ge++)q(E[Ge+1]);for(var Ke=0;Ke<=11;Ke++)q(O[Ke]);q(16);for(var Pt=0;Pt<16;Pt++)q(L[Pt+1]);for(var Lt=0;Lt<=161;Lt++)q(k[Lt]);q(1);for(var ft=0;ft<16;ft++)q(T[ft+1]);for(var Zt=0;Zt<=11;Zt++)q(B[Zt]);q(17);for(var gr=0;gr<16;gr++)q(M[gr+1]);for(var ht=0;ht<=161;ht++)q(G[ht])}(),K(65498),K(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var U=0,H=0,re=0;g=0,y=7,this.encode.displayName="_encode_";for(var X,he,se,ue,ge,ve,te,Ne,Y,Le=I.data,ye=I.width,we=I.height,_e=4*ye,Qe=0;Qe<we;){for(X=0;X<_e;){for(ge=_e*Qe+X,te=-1,Ne=0,Y=0;Y<64;Y++)ve=ge+(Ne=Y>>3)*_e+(te=4*(7&Y)),Qe+Ne>=we&&(ve-=_e*(Qe+1+Ne-we)),X+te>=_e&&(ve-=X+te-_e+4),he=Le[ve++],se=Le[ve++],ue=Le[ve++],b[Y]=(A[he]+A[se+256|0]+A[ue+512|0]>>16)-128,x[Y]=(A[he+768|0]+A[se+1024|0]+A[ue+1280|0]>>16)-128,j[Y]=(A[he+1280|0]+A[se+1536|0]+A[ue+1792|0]>>16)-128;U=ae(b,u,U,t,n),H=ae(x,d,H,r,i),re=ae(j,d,re,r,i),X+=32}Qe+=8}if(y>=0){var We=[];We[1]=y+1,We[0]=(1<<y+1)-1,D(We)}return K(65497),new Uint8Array(p)},e=e||50,function(){for(var I=String.fromCharCode,$=0;$<256;$++)N[$]=I($)}(),t=z(E,O),r=z(T,B),n=z(L,k),i=z(M,G),function(){for(var I=1,$=2,U=1;U<=15;U++){for(var H=I;H<$;H++)m[32767+H]=U,f[32767+H]=[],f[32767+H][1]=U,f[32767+H][0]=H;for(var re=-($-1);re<=-I;re++)m[32767+re]=U,f[32767+re]=[],f[32767+re][1]=U,f[32767+re][0]=$-1+re;I<<=1,$<<=1}}(),function(){for(var I=0;I<256;I++)A[I]=19595*I,A[I+256|0]=38470*I,A[I+512|0]=7471*I+32768,A[I+768|0]=-11059*I,A[I+1024|0]=-21709*I,A[I+1280|0]=32768*I+8421375,A[I+1536|0]=-27439*I,A[I+1792|0]=-5329*I}(),J(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ko(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function n$(e){function t(O){if(!O)throw Error("assert :P")}function r(O,L,k){for(var T=0;4>T;T++)if(O[L+T]!=k.charCodeAt(T))return!0;return!1}function n(O,L,k,T,B){for(var M=0;M<B;M++)O[L+M]=k[T+M]}function i(O,L,k,T){for(var B=0;B<T;B++)O[L+B]=k}function s(O){return new Int32Array(O)}function o(O,L){for(var k=[],T=0;T<O;T++)k.push(new L);return k}function l(O,L){var k=[];return function T(B,M,G){for(var z=G[M],D=0;D<z&&(B.push(G.length>M+1?[]:new L),!(G.length<M+1));D++)T(B[D],M+1,G)}(k,0,O),k}var c=function(){var O=this;function L(w,S){for(var R=1<<S-1>>>0;w&R;)R>>>=1;return R?(w&R-1)+R:w}function k(w,S,R,F,V){t(!(F%R));do w[S+(F-=R)]=V;while(0<F)}function T(w,S,R,F,V){if(t(2328>=V),512>=V)var Z=s(512);else if((Z=s(V))==null)return 0;return function(Q,ee,ne,oe,be,Te){var le,je,ke=ee,Ie=1<<ne,Oe=s(16),$e=s(16);for(t(be!=0),t(oe!=null),t(Q!=null),t(0<ne),je=0;je<be;++je){if(15<oe[je])return 0;++Oe[oe[je]]}if(Oe[0]==be)return 0;for($e[1]=0,le=1;15>le;++le){if(Oe[le]>1<<le)return 0;$e[le+1]=$e[le]+Oe[le]}for(je=0;je<be;++je)le=oe[je],0<oe[je]&&(Te[$e[le]++]=je);if($e[15]==1)return(oe=new B).g=0,oe.value=Te[0],k(Q,ke,1,Ie,oe),Ie;var Be,Ye=-1,Ve=Ie-1,kt=0,dt=1,fr=1,wt=1<<ne;for(je=0,le=1,be=2;le<=ne;++le,be<<=1){if(dt+=fr<<=1,0>(fr-=Oe[le]))return 0;for(;0<Oe[le];--Oe[le])(oe=new B).g=le,oe.value=Te[je++],k(Q,ke+kt,be,wt,oe),kt=L(kt,le)}for(le=ne+1,be=2;15>=le;++le,be<<=1){if(dt+=fr<<=1,0>(fr-=Oe[le]))return 0;for(;0<Oe[le];--Oe[le]){if(oe=new B,(kt&Ve)!=Ye){for(ke+=wt,Be=1<<(Ye=le)-ne;15>Ye&&!(0>=(Be-=Oe[Ye]));)++Ye,Be<<=1;Ie+=wt=1<<(Be=Ye-ne),Q[ee+(Ye=kt&Ve)].g=Be+ne,Q[ee+Ye].value=ke-ee-Ye}oe.g=le-ne,oe.value=Te[je++],k(Q,ke+(kt>>ne),be,wt,oe),kt=L(kt,le)}}return dt!=2*$e[15]-1?0:Ie}(w,S,R,F,V,Z)}function B(){this.value=this.g=0}function M(){this.value=this.g=0}function G(){this.G=o(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Zd,M)}function z(w,S,R,F){t(w!=null),t(S!=null),t(2147483648>F),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=S,w.pa=R,w.Jd=S,w.Yc=R+F,w.Zc=4<=F?R+F-4+1:R,he(w)}function D(w,S){for(var R=0;0<S--;)R|=ue(w,128)<<S;return R}function q(w,S){var R=D(w,S);return se(w)?-R:R}function K(w,S,R,F){var V,Z=0;for(t(w!=null),t(S!=null),t(4294967288>F),w.Sb=F,w.Ra=0,w.u=0,w.h=0,4<F&&(F=4),V=0;V<F;++V)Z+=S[R+V]<<8*V;w.Ra=Z,w.bb=F,w.oa=S,w.pa=R}function ae(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<cu-8>>>0,++w.bb,w.u-=8;H(w)&&(w.h=1,w.u=0)}function J(w,S){if(t(0<=S),!w.h&&S<=oa){var R=U(w)&aa[S];return w.u+=S,ae(w),R}return w.h=1,w.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(w){return w.Ra>>>(w.u&cu-1)>>>0}function H(w){return t(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>cu}function re(w,S){w.u=S,w.h=H(w)}function X(w){w.u>=tc&&(t(w.u>=tc),ae(w))}function he(w){t(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(t(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function se(w){return D(w,1)}function ue(w,S){var R=w.Ca;0>w.b&&he(w);var F=w.b,V=R*S>>>8,Z=(w.I>>>F>V)+0;for(Z?(R-=V,w.I-=V+1<<F>>>0):R=V+1,F=R,V=0;256<=F;)V+=8,F>>=8;return F=7^V+uu[F],w.b-=F,w.Ca=(R<<F)-1,Z}function ge(w,S,R){w[S+0]=R>>24&255,w[S+1]=R>>16&255,w[S+2]=R>>8&255,w[S+3]=255&R}function ve(w,S){return w[S+0]|w[S+1]<<8}function te(w,S){return ve(w,S)|w[S+2]<<16}function Ne(w,S){return ve(w,S)|ve(w,S+2)<<16}function Y(w,S){var R=1<<S;return t(w!=null),t(0<S),w.X=s(R),w.X==null?0:(w.Mb=32-S,w.Xa=S,1)}function Le(w,S){t(w!=null),t(S!=null),t(w.Xa==S.Xa),n(S.X,0,w.X,0,1<<S.Xa)}function ye(){this.X=[],this.Xa=this.Mb=0}function we(w,S,R,F){t(R!=null),t(F!=null);var V=R[0],Z=F[0];return V==0&&(V=(w*Z+S/2)/S),Z==0&&(Z=(S*V+w/2)/w),0>=V||0>=Z?0:(R[0]=V,F[0]=Z,1)}function _e(w,S){return w+(1<<S)-1>>>S}function Qe(w,S){return((4278255360&w)+(4278255360&S)>>>0&4278255360)+((16711935&w)+(16711935&S)>>>0&16711935)>>>0}function We(w,S){O[S]=function(R,F,V,Z,Q,ee,ne){var oe;for(oe=0;oe<Q;++oe){var be=O[w](ee[ne+oe-1],V,Z+oe);ee[ne+oe]=Qe(R[F+oe],be)}}}function Ge(){this.ud=this.hd=this.jd=0}function Ke(w,S){return((4278124286&(w^S))>>>1)+(w&S)>>>0}function Pt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Lt(w,S){return Pt(w+(w-S+.5>>1))}function ft(w,S,R){return Math.abs(S-R)-Math.abs(w-R)}function Zt(w,S,R,F,V,Z,Q){for(F=Z[Q-1],R=0;R<V;++R)Z[Q+R]=F=Qe(w[S+R],F)}function gr(w,S,R,F,V){var Z;for(Z=0;Z<R;++Z){var Q=w[S+Z],ee=Q>>8&255,ne=16711935&(ne=(ne=16711935&Q)+((ee<<16)+ee));F[V+Z]=(4278255360&Q)+ne>>>0}}function ht(w,S){S.jd=255&w,S.hd=w>>8&255,S.ud=w>>16&255}function qt(w,S,R,F,V,Z){var Q;for(Q=0;Q<F;++Q){var ee=S[R+Q],ne=ee>>>8,oe=ee,be=255&(be=(be=ee>>>16)+((w.jd<<24>>24)*(ne<<24>>24)>>>5));oe=255&(oe=(oe+=(w.hd<<24>>24)*(ne<<24>>24)>>>5)+((w.ud<<24>>24)*(be<<24>>24)>>>5)),V[Z+Q]=(4278255360&ee)+(be<<16)+oe}}function bt(w,S,R,F,V){O[S]=function(Z,Q,ee,ne,oe,be,Te,le,je){for(ne=Te;ne<le;++ne)for(Te=0;Te<je;++Te)oe[be++]=V(ee[F(Z[Q++])])},O[w]=function(Z,Q,ee,ne,oe,be,Te){var le=8>>Z.b,je=Z.Ea,ke=Z.K[0],Ie=Z.w;if(8>le)for(Z=(1<<Z.b)-1,Ie=(1<<le)-1;Q<ee;++Q){var Oe,$e=0;for(Oe=0;Oe<je;++Oe)Oe&Z||($e=F(ne[oe++])),be[Te++]=V(ke[$e&Ie]),$e>>=le}else O["VP8LMapColor"+R](ne,oe,ke,Ie,be,Te,Q,ee,je)}}function Nn(w,S,R,F,V){for(R=S+R;S<R;){var Z=w[S++];F[V++]=Z>>16&255,F[V++]=Z>>8&255,F[V++]=255&Z}}function xr(w,S,R,F,V){for(R=S+R;S<R;){var Z=w[S++];F[V++]=Z>>16&255,F[V++]=Z>>8&255,F[V++]=255&Z,F[V++]=Z>>24&255}}function Ht(w,S,R,F,V){for(R=S+R;S<R;){var Z=(Q=w[S++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;F[V++]=Z,F[V++]=Q}}function rr(w,S,R,F,V){for(R=S+R;S<R;){var Z=(Q=w[S++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;F[V++]=Z,F[V++]=Q}}function Ir(w,S,R,F,V){for(R=S+R;S<R;){var Z=w[S++];F[V++]=255&Z,F[V++]=Z>>8&255,F[V++]=Z>>16&255}}function Ot(w,S,R,F,V,Z){if(Z==0)for(R=S+R;S<R;)ge(F,((Z=w[S++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),V+=32;else n(F,V,w,S,R)}function Xr(w,S){O[S][0]=O[w+"0"],O[S][1]=O[w+"1"],O[S][2]=O[w+"2"],O[S][3]=O[w+"3"],O[S][4]=O[w+"4"],O[S][5]=O[w+"5"],O[S][6]=O[w+"6"],O[S][7]=O[w+"7"],O[S][8]=O[w+"8"],O[S][9]=O[w+"9"],O[S][10]=O[w+"10"],O[S][11]=O[w+"11"],O[S][12]=O[w+"12"],O[S][13]=O[w+"13"],O[S][14]=O[w+"0"],O[S][15]=O[w+"0"]}function Rt(w){return w==g5||w==v5||w==J0||w==y5}function Vt(){this.eb=[],this.size=this.A=this.fb=0}function sn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function nr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vt,this.f.kb=new sn,this.sd=null}function vt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Pr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function It(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Gt(w,S){var R=w.T,F=S.ba.f.RGBA,V=F.eb,Z=F.fb+w.ka*F.A,Q=qa[S.ba.S],ee=w.y,ne=w.O,oe=w.f,be=w.N,Te=w.ea,le=w.W,je=S.cc,ke=S.dc,Ie=S.Mc,Oe=S.Nc,$e=w.ka,Be=w.ka+w.T,Ye=w.U,Ve=Ye+1>>1;for($e==0?Q(ee,ne,null,null,oe,be,Te,le,oe,be,Te,le,V,Z,null,null,Ye):(Q(S.ec,S.fc,ee,ne,je,ke,Ie,Oe,oe,be,Te,le,V,Z-F.A,V,Z,Ye),++R);$e+2<Be;$e+=2)je=oe,ke=be,Ie=Te,Oe=le,be+=w.Rc,le+=w.Rc,Z+=2*F.A,Q(ee,(ne+=2*w.fa)-w.fa,ee,ne,je,ke,Ie,Oe,oe,be,Te,le,V,Z-F.A,V,Z,Ye);return ne+=w.fa,w.j+Be<w.o?(n(S.ec,S.fc,ee,ne,Ye),n(S.cc,S.dc,oe,be,Ve),n(S.Mc,S.Nc,Te,le,Ve),R--):1&Be||Q(ee,ne,null,null,oe,be,Te,le,oe,be,Te,le,V,Z+F.A,null,null,Ye),R}function wr(w,S,R){var F=w.F,V=[w.J];if(F!=null){var Z=w.U,Q=S.ba.S,ee=Q==Z0||Q==J0;S=S.ba.f.RGBA;var ne=[0],oe=w.ka;ne[0]=w.T,w.Kb&&(oe==0?--ne[0]:(--oe,V[0]-=w.width),w.j+w.ka+w.T==w.o&&(ne[0]=w.o-w.j-oe));var be=S.eb;oe=S.fb+oe*S.A,w=ZO(F,V[0],w.width,Z,ne,be,oe+(ee?0:3),S.A),t(R==ne),w&&Rt(Q)&&ov(be,oe,ee,Z,ne,S.A)}return 0}function Ln(w){var S=w.ma,R=S.ba.S,F=11>R,V=R==Y0||R==X0||R==Z0||R==p5||R==12||Rt(R);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!Qg(S.Oa,w,V?11:12))return 0;if(V&&Rt(R)&&Xg(),w.da)alert("todo:use_scaling");else{if(F){if(S.Ib=It,w.Kb){if(R=w.U+1>>1,S.memory=s(w.U+2*R),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+w.U,S.Mc=S.cc,S.Nc=S.dc+R,S.Ib=Gt,Xg()}}else alert("todo:EmitYUV");V&&(S.Jb=wr,F&&wo())}if(F&&!m3){for(w=0;256>w;++w)$Y[w]=89858*(w-128)+eb>>Q0,zY[w]=-22014*(w-128)+eb,BY[w]=-45773*(w-128),FY[w]=113618*(w-128)+eb>>Q0;for(w=cv;w<w5;++w)S=76283*(w-16)+eb>>Q0,qY[w-cv]=nl(S,255),UY[w-cv]=nl(S+8>>4,15);m3=1}return 1}function ut(w){var S=w.ma,R=w.U,F=w.T;return t(!(1&w.ka)),0>=R||0>=F?0:(R=S.Ib(w,S),S.Jb!=null&&S.Jb(w,S,R),S.Dc+=R,1)}function oi(w){w.ma.memory=null}function Ce(w,S,R,F){return J(w,8)!=47?0:(S[0]=J(w,14)+1,R[0]=J(w,14)+1,F[0]=J(w,1),J(w,3)!=0?0:!w.h)}function yt(w,S){if(4>w)return w+1;var R=w-2>>1;return(2+(1&w)<<R)+J(S,R)+1}function Jt(w,S){return 120<S?S-120:1<=(R=((R=NY[S-1])>>4)*w+(8-(15&R)))?R:1;var R}function Mt(w,S,R){var F=U(R),V=w[S+=255&F].g-8;return 0<V&&(re(R,R.u+8),F=U(R),S+=w[S].value,S+=F&(1<<V)-1),re(R,R.u+w[S].g),w[S].value}function Ar(w,S,R){return R.g+=w.g,R.value+=w.value<<S>>>0,t(8>=R.g),w.g}function an(w,S,R){var F=w.xc;return t((S=F==0?0:w.vc[w.md*(R>>F)+(S>>F)])<w.Wb),w.Ya[S]}function Zr(w,S,R,F){var V=w.ab,Z=w.c*S,Q=w.C;S=Q+S;var ee=R,ne=F;for(F=w.Ta,R=w.Ua;0<V--;){var oe=w.gc[V],be=Q,Te=S,le=ee,je=ne,ke=(ne=F,ee=R,oe.Ea);switch(t(be<Te),t(Te<=oe.nc),oe.hc){case 2:li(le,je,(Te-be)*ke,ne,ee);break;case 0:var Ie=be,Oe=Te,$e=ne,Be=ee,Ye=(wt=oe).Ea;Ie==0&&(tv(le,je,null,null,1,$e,Be),Zt(le,je+1,0,0,Ye-1,$e,Be+1),je+=Ye,Be+=Ye,++Ie);for(var Ve=1<<wt.b,kt=Ve-1,dt=_e(Ye,wt.b),fr=wt.K,wt=wt.w+(Ie>>wt.b)*dt;Ie<Oe;){var Or=fr,Ei=wt,hr=1;for(Bh(le,je,$e,Be-Ye,1,$e,Be);hr<Ye;){var _t=(hr&~kt)+Ve;_t>Ye&&(_t=Ye),(0,nv[Or[Ei++]>>8&15])(le,je+ +hr,$e,Be+hr-Ye,_t-hr,$e,Be+hr),hr=_t}je+=Ye,Be+=Ye,++Ie&kt||(wt+=dt)}Te!=oe.nc&&n(ne,ee-ke,ne,ee+(Te-be-1)*ke,ke);break;case 1:for(ke=le,Oe=je,Ye=(le=oe.Ea)-(Be=le&~($e=(je=1<<oe.b)-1)),Ie=_e(le,oe.b),Ve=oe.K,oe=oe.w+(be>>oe.b)*Ie;be<Te;){for(kt=Ve,dt=oe,fr=new Ge,wt=Oe+Be,Or=Oe+le;Oe<wt;)ht(kt[dt++],fr),iv(fr,ke,Oe,je,ne,ee),Oe+=je,ee+=je;Oe<Or&&(ht(kt[dt++],fr),iv(fr,ke,Oe,Ye,ne,ee),Oe+=Ye,ee+=Ye),++be&$e||(oe+=Ie)}break;case 3:if(le==ne&&je==ee&&0<oe.b){for(Oe=ne,le=ke=ee+(Te-be)*ke-(Be=(Te-be)*_e(oe.Ea,oe.b)),je=ne,$e=ee,Ie=[],Be=(Ye=Be)-1;0<=Be;--Be)Ie[Be]=je[$e+Be];for(Be=Ye-1;0<=Be;--Be)Oe[le+Be]=Ie[Be];H0(oe,be,Te,ne,ke,ne,ee)}else H0(oe,be,Te,le,je,ne,ee)}ee=F,ne=R}ne!=R&&n(F,R,ee,ne,Z)}function Rn(w,S){var R=w.V,F=w.Ba+w.c*w.C,V=S-w.C;if(t(S<=w.l.o),t(16>=V),0<V){var Z=w.l,Q=w.Ta,ee=w.Ua,ne=Z.width;if(Zr(w,V,R,F),V=ee=[ee],t((R=w.C)<(F=S)),t(Z.v<Z.va),F>Z.o&&(F=Z.o),R<Z.j){var oe=Z.j-R;R=Z.j,V[0]+=oe*ne}if(R>=F?R=0:(V[0]+=4*Z.v,Z.ka=R-Z.j,Z.U=Z.va-Z.v,Z.T=F-R,R=1),R){if(ee=ee[0],11>(R=w.ca).S){var be=R.f.RGBA,Te=(F=R.S,V=Z.U,Z=Z.T,oe=be.eb,be.A),le=Z;for(be=be.fb+w.Ma*be.A;0<le--;){var je=Q,ke=ee,Ie=V,Oe=oe,$e=be;switch(F){case K0:sv(je,ke,Ie,Oe,$e);break;case Y0:du(je,ke,Ie,Oe,$e);break;case g5:du(je,ke,Ie,Oe,$e),ov(Oe,$e,0,Ie,1,0);break;case i3:Jd(je,ke,Ie,Oe,$e);break;case X0:Ot(je,ke,Ie,Oe,$e,1);break;case v5:Ot(je,ke,Ie,Oe,$e,1),ov(Oe,$e,0,Ie,1,0);break;case Z0:Ot(je,ke,Ie,Oe,$e,0);break;case J0:Ot(je,ke,Ie,Oe,$e,0),ov(Oe,$e,1,Ie,1,0);break;case p5:fu(je,ke,Ie,Oe,$e);break;case y5:fu(je,ke,Ie,Oe,$e),XO(Oe,$e,Ie,1,0);break;case s3:hu(je,ke,Ie,Oe,$e);break;default:t(0)}ee+=ne,be+=Te}w.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");t(w.Ma<=R.height)}}w.C=S,t(w.C<=w.i)}function pn(w){var S;if(0<w.ua)return 0;for(S=0;S<w.Wb;++S){var R=w.Ya[S].G,F=w.Ya[S].H;if(0<R[1][F[1]+0].g||0<R[2][F[2]+0].g||0<R[3][F[3]+0].g)return 0}return 1}function qs(w,S,R,F,V,Z){if(w.Z!=0){var Q=w.qd,ee=w.rd;for(t(gu[w.Z]!=null);S<R;++S)gu[w.Z](Q,ee,F,V,F,V,Z),Q=F,ee=V,V+=Z;w.qd=Q,w.rd=ee}}function vn(w,S){var R=w.l.ma,F=R.Z==0||R.Z==1?w.l.j:w.C;if(F=w.C<F?F:w.C,t(S<=w.l.o),S>F){var V=w.l.width,Z=R.ca,Q=R.tb+V*F,ee=w.V,ne=w.Ba+w.c*F,oe=w.gc;t(w.ab==1),t(oe[0].hc==3),ol(oe[0],F,S,ee,ne,Z,Q),qs(R,F,S,Z,Q,V)}w.C=w.Ma=S}function qi(w,S,R,F,V,Z,Q){var ee=w.$/F,ne=w.$%F,oe=w.m,be=w.s,Te=R+w.$,le=Te;V=R+F*V;var je=R+F*Z,ke=280+be.ua,Ie=w.Pb?ee:16777216,Oe=0<be.ua?be.Wa:null,$e=be.wc,Be=Te<je?an(be,ne,ee):null;t(w.C<Z),t(je<=V);var Ye=!1;e:for(;;){for(;Ye||Te<je;){var Ve=0;if(ee>=Ie){var kt=Te-R;t((Ie=w).Pb),Ie.wd=Ie.m,Ie.xd=kt,0<Ie.s.ua&&Le(Ie.s.Wa,Ie.s.vb),Ie=ee+AY}if(ne&$e||(Be=an(be,ne,ee)),t(Be!=null),Be.Qb&&(S[Te]=Be.qb,Ye=!0),!Ye)if(X(oe),Be.jc){Ve=oe,kt=S;var dt=Te,fr=Be.pd[U(Ve)&Zd-1];t(Be.jc),256>fr.g?(re(Ve,Ve.u+fr.g),kt[dt]=fr.value,Ve=0):(re(Ve,Ve.u+fr.g-256),t(256<=fr.value),Ve=fr.value),Ve==0&&(Ye=!0)}else Ve=Mt(Be.G[0],Be.H[0],oe);if(oe.h)break;if(Ye||256>Ve){if(!Ye)if(Be.nd)S[Te]=(Be.qb|Ve<<8)>>>0;else{if(X(oe),Ye=Mt(Be.G[1],Be.H[1],oe),X(oe),kt=Mt(Be.G[2],Be.H[2],oe),dt=Mt(Be.G[3],Be.H[3],oe),oe.h)break;S[Te]=(dt<<24|Ye<<16|Ve<<8|kt)>>>0}if(Ye=!1,++Te,++ne>=F&&(ne=0,++ee,Q!=null&&ee<=Z&&!(ee%16)&&Q(w,ee),Oe!=null))for(;le<Te;)Ve=S[le++],Oe.X[(506832829*Ve&4294967295)>>>Oe.Mb]=Ve}else if(280>Ve){if(Ve=yt(Ve-256,oe),kt=Mt(Be.G[4],Be.H[4],oe),X(oe),kt=Jt(F,kt=yt(kt,oe)),oe.h)break;if(Te-R<kt||V-Te<Ve)break e;for(dt=0;dt<Ve;++dt)S[Te+dt]=S[Te+dt-kt];for(Te+=Ve,ne+=Ve;ne>=F;)ne-=F,++ee,Q!=null&&ee<=Z&&!(ee%16)&&Q(w,ee);if(t(Te<=V),ne&$e&&(Be=an(be,ne,ee)),Oe!=null)for(;le<Te;)Ve=S[le++],Oe.X[(506832829*Ve&4294967295)>>>Oe.Mb]=Ve}else{if(!(Ve<ke))break e;for(Ye=Ve-280,t(Oe!=null);le<Te;)Ve=S[le++],Oe.X[(506832829*Ve&4294967295)>>>Oe.Mb]=Ve;Ve=Te,t(!(Ye>>>(kt=Oe).Xa)),S[Ve]=kt.X[Ye],Ye=!0}Ye||t(oe.h==H(oe))}if(w.Pb&&oe.h&&Te<V)t(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Le(w.s.vb,w.s.Wa);else{if(oe.h)break e;Q!=null&&Q(w,ee>Z?Z:ee),w.a=0,w.$=Te-R}return 1}return w.a=3,0}function Da(w){t(w!=null),w.vc=null,w.yc=null,w.Ya=null;var S=w.Wa;S!=null&&(S.X=null),w.vb=null,t(w!=null)}function Fd(){var w=new er;return w==null?null:(w.a=0,w.xb=l3,Xr("Predictor","VP8LPredictors"),Xr("Predictor","VP8LPredictors_C"),Xr("PredictorAdd","VP8LPredictorsAdd"),Xr("PredictorAdd","VP8LPredictorsAdd_C"),li=gr,iv=qt,sv=Nn,du=xr,fu=Ht,hu=rr,Jd=Ir,O.VP8LMapColor32b=al,O.VP8LMapColor8b=rv,w)}function rl(w,S,R,F,V){var Z=1,Q=[w],ee=[S],ne=F.m,oe=F.s,be=null,Te=0;e:for(;;){if(R)for(;Z&&J(ne,1);){var le=Q,je=ee,ke=F,Ie=1,Oe=ke.m,$e=ke.gc[ke.ab],Be=J(Oe,2);if(ke.Oc&1<<Be)Z=0;else{switch(ke.Oc|=1<<Be,$e.hc=Be,$e.Ea=le[0],$e.nc=je[0],$e.K=[null],++ke.ab,t(4>=ke.ab),Be){case 0:case 1:$e.b=J(Oe,3)+2,Ie=rl(_e($e.Ea,$e.b),_e($e.nc,$e.b),0,ke,$e.K),$e.K=$e.K[0];break;case 3:var Ye,Ve=J(Oe,8)+1,kt=16<Ve?0:4<Ve?1:2<Ve?2:3;if(le[0]=_e($e.Ea,kt),$e.b=kt,Ye=Ie=rl(Ve,1,0,ke,$e.K)){var dt,fr=Ve,wt=$e,Or=1<<(8>>wt.b),Ei=s(Or);if(Ei==null)Ye=0;else{var hr=wt.K[0],_t=wt.w;for(Ei[0]=wt.K[0][0],dt=1;dt<1*fr;++dt)Ei[dt]=Qe(hr[_t+dt],Ei[dt-1]);for(;dt<4*Or;++dt)Ei[dt]=0;wt.K[0]=null,wt.K[0]=Ei,Ye=1}}Ie=Ye;break;case 2:break;default:t(0)}Z=Ie}}if(Q=Q[0],ee=ee[0],Z&&J(ne,1)&&!(Z=1<=(Te=J(ne,4))&&11>=Te)){F.a=3;break e}var nt;if(nt=Z)t:{var ui,or,Lr,In=F,ts=Q,As=ee,Zn=Te,fs=R,Cs=In.m,Pi=In.s,Mr=[null],on=1,Jn=0,ln=SY[Zn];r:for(;;){if(fs&&J(Cs,1)){var rs=J(Cs,3)+2,jo=_e(ts,rs),di=_e(As,rs),Us=jo*di;if(!rl(jo,di,0,In,Mr))break r;for(Mr=Mr[0],Pi.xc=rs,ui=0;ui<Us;++ui){var xn=Mr[ui]>>8&65535;Mr[ui]=xn,xn>=on&&(on=xn+1)}}if(Cs.h)break r;for(or=0;5>or;++or){var Oi=a3[or];!or&&0<Zn&&(Oi+=1<<Zn),Jn<Oi&&(Jn=Oi)}var ca=o(on*ln,B),ks=on,ua=o(ks,G);if(ua==null)var da=null;else t(65536>=ks),da=ua;var Ws=s(Jn);if(da==null||Ws==null||ca==null){In.a=1;break r}var fa=ca;for(ui=Lr=0;ui<on;++ui){var An=da[ui],ha=An.G,No=An.H,ef=0,ic=1,ns=0;for(or=0;5>or;++or){Oi=a3[or],ha[or]=fa,No[or]=Lr,!or&&0<Zn&&(Oi+=1<<Zn);i:{var rb,_5=Oi,nb=In,uv=Ws,VY=fa,GY=Lr,j5=0,vu=nb.m,KY=J(vu,1);if(i(uv,0,0,_5),KY){var YY=J(vu,1)+1,XY=J(vu,1),v3=J(vu,XY==0?1:8);uv[v3]=1,YY==2&&(uv[v3=J(vu,8)]=1);var ib=1}else{var y3=s(19),x3=J(vu,4)+4;if(19<x3){nb.a=3;var sb=0;break i}for(rb=0;rb<x3;++rb)y3[jY[rb]]=J(vu,3);var N5=void 0,dv=void 0,b3=nb,ZY=y3,ab=_5,w3=uv,S5=0,yu=b3.m,_3=8,j3=o(128,B);n:for(;T(j3,0,7,ZY,19);){if(J(yu,1)){var JY=2+2*J(yu,3);if((N5=2+J(yu,JY))>ab)break n}else N5=ab;for(dv=0;dv<ab&&N5--;){X(yu);var N3=j3[0+(127&U(yu))];re(yu,yu.u+N3.g);var qh=N3.value;if(16>qh)w3[dv++]=qh,qh!=0&&(_3=qh);else{var QY=qh==16,S3=qh-16,eX=wY[S3],A3=J(yu,bY[S3])+eX;if(dv+A3>ab)break n;for(var tX=QY?_3:0;0<A3--;)w3[dv++]=tX}}S5=1;break n}S5||(b3.a=3),ib=S5}(ib=ib&&!vu.h)&&(j5=T(VY,GY,8,uv,_5)),ib&&j5!=0?sb=j5:(nb.a=3,sb=0)}if(sb==0)break r;if(ic&&_Y[or]==1&&(ic=fa[Lr].g==0),ef+=fa[Lr].g,Lr+=sb,3>=or){var fv,A5=Ws[0];for(fv=1;fv<Oi;++fv)Ws[fv]>A5&&(A5=Ws[fv]);ns+=A5}}if(An.nd=ic,An.Qb=0,ic&&(An.qb=(ha[3][No[3]+0].value<<24|ha[1][No[1]+0].value<<16|ha[2][No[2]+0].value)>>>0,ef==0&&256>ha[0][No[0]+0].value&&(An.Qb=1,An.qb+=ha[0][No[0]+0].value<<8)),An.jc=!An.Qb&&6>ns,An.jc){var ob,sc=An;for(ob=0;ob<Zd;++ob){var xu=ob,bu=sc.pd[xu],lb=sc.G[0][sc.H[0]+xu];256<=lb.value?(bu.g=lb.g+256,bu.value=lb.value):(bu.g=0,bu.value=0,xu>>=Ar(lb,8,bu),xu>>=Ar(sc.G[1][sc.H[1]+xu],16,bu),xu>>=Ar(sc.G[2][sc.H[2]+xu],0,bu),Ar(sc.G[3][sc.H[3]+xu],24,bu))}}}Pi.vc=Mr,Pi.Wb=on,Pi.Ya=da,Pi.yc=ca,nt=1;break t}nt=0}if(!(Z=nt)){F.a=3;break e}if(0<Te){if(oe.ua=1<<Te,!Y(oe.Wa,Te)){F.a=1,Z=0;break e}}else oe.ua=0;var C5=F,C3=Q,rX=ee,k5=C5.s,E5=k5.xc;if(C5.c=C3,C5.i=rX,k5.md=_e(C3,E5),k5.wc=E5==0?-1:(1<<E5)-1,R){F.xb=LY;break e}if((be=s(Q*ee))==null){F.a=1,Z=0;break e}Z=(Z=qi(F,be,0,Q,ee,ee,null))&&!ne.h;break e}return Z?(V!=null?V[0]=be:(t(be==null),t(R)),F.$=0,R||Da(oe)):Da(oe),Z}function Bd(w,S){var R=w.c*w.i,F=R+S+16*S;return t(w.c<=S),w.V=s(F),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+R+S,1)}function Ph(w,S){var R=w.C,F=S-R,V=w.V,Z=w.Ba+w.c*R;for(t(S<=w.l.o);0<F;){var Q=16<F?16:F,ee=w.l.ma,ne=w.l.width,oe=ne*Q,be=ee.ca,Te=ee.tb+ne*R,le=w.Ta,je=w.Ua;Zr(w,Q,V,Z),JO(le,je,be,Te,oe),qs(ee,R,R+Q,be,Te,ne),F-=Q,V+=Q*w.c,R+=Q}t(R==S),w.C=w.Ma=S}function Oh(){this.ub=this.yd=this.td=this.Rb=0}function Th(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jj(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Fg(){this.Yb=function(){var w=[];return function S(R,F,V){for(var Z=V[F],Q=0;Q<Z&&(R.push(V.length>F+1?[]:0),!(V.length<F+1));Q++)S(R[Q],F+1,V)}(w,0,[3,11]),w}()}function C0(){this.jb=s(3),this.Wc=l([4,8],Fg),this.Xc=l([4,17],Fg)}function k0(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ma(){this.ld=this.La=this.dd=this.tc=0}function Bg(){this.Na=this.la=0}function E0(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zg(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function P0(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ma),this.Y=0,this.ya=Array(new zg),this.aa=0,this.l=new Lh}function O0(){this.y=s(16),this.f=s(8),this.ea=s(8)}function T0(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new Oh,this.Kc=new Th,this.ed=new k0,this.Qa=new Jj,this.Ic=this.$c=this.Aa=0,this.D=new P0,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,I),this.ia=0,this.pb=o(4,E0),this.Pa=new C0,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new O0),this.Hd=0,this.rb=Array(new Bg),this.sb=0,this.wa=Array(new Ma),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zg),this.L=this.aa=0,this.gd=l([4,2],Ma),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function nl(w,S){return 0>w?0:w>S?S:w}function Lh(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qj(){var w=new T0;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,lv||(lv=Rh)),w}function xi(w,S,R){return w.a==0&&(w.a=S,w.sc=R,w.cb=0),0}function L0(w,S,R){return 3<=R&&w[S+0]==157&&w[S+1]==1&&w[S+2]==42}function il(w,S){if(w==null)return 0;if(w.a=0,w.sc="OK",S==null)return xi(w,2,"null VP8Io passed to VP8GetHeaders()");var R=S.data,F=S.w,V=S.ha;if(4>V)return xi(w,7,"Truncated header.");var Z=R[F+0]|R[F+1]<<8|R[F+2]<<16,Q=w.Od;if(Q.Rb=!(1&Z),Q.td=Z>>1&7,Q.yd=Z>>4&1,Q.ub=Z>>5,3<Q.td)return xi(w,3,"Incorrect keyframe parameters.");if(!Q.yd)return xi(w,4,"Frame not displayable.");F+=3,V-=3;var ee=w.Kc;if(Q.Rb){if(7>V)return xi(w,7,"cannot parse picture header");if(!L0(R,F,V))return xi(w,3,"Bad code word");ee.c=16383&(R[F+4]<<8|R[F+3]),ee.Td=R[F+4]>>6,ee.i=16383&(R[F+6]<<8|R[F+5]),ee.Ud=R[F+6]>>6,F+=7,V-=7,w.za=ee.c+15>>4,w.Ub=ee.i+15>>4,S.width=ee.c,S.height=ee.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((Z=w.Pa).jb,0,255,Z.jb.length),t((Z=w.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,i(Z.Zb,0,0,Z.Zb.length),i(Z.Lb,0,0,Z.Lb)}if(Q.ub>V)return xi(w,7,"bad partition length");z(Z=w.m,R,F,Q.ub),F+=Q.ub,V-=Q.ub,Q.Rb&&(ee.Ld=se(Z),ee.Kd=se(Z)),ee=w.Qa;var ne,oe=w.Pa;if(t(Z!=null),t(ee!=null),ee.Cb=se(Z),ee.Cb){if(ee.Bb=se(Z),se(Z)){for(ee.Fb=se(Z),ne=0;4>ne;++ne)ee.Zb[ne]=se(Z)?q(Z,7):0;for(ne=0;4>ne;++ne)ee.Lb[ne]=se(Z)?q(Z,6):0}if(ee.Bb)for(ne=0;3>ne;++ne)oe.jb[ne]=se(Z)?D(Z,8):255}else ee.Bb=0;if(Z.Ka)return xi(w,3,"cannot parse segment header");if((ee=w.ed).zd=se(Z),ee.Tb=D(Z,6),ee.wb=D(Z,3),ee.Pc=se(Z),ee.Pc&&se(Z)){for(oe=0;4>oe;++oe)se(Z)&&(ee.vd[oe]=q(Z,6));for(oe=0;4>oe;++oe)se(Z)&&(ee.od[oe]=q(Z,6))}if(w.L=ee.Tb==0?0:ee.zd?1:2,Z.Ka)return xi(w,3,"cannot parse filter header");var be=V;if(V=ne=F,F=ne+be,ee=be,w.Xb=(1<<D(w.m,2))-1,be<3*(oe=w.Xb))R=7;else{for(ne+=3*oe,ee-=3*oe,be=0;be<oe;++be){var Te=R[V+0]|R[V+1]<<8|R[V+2]<<16;Te>ee&&(Te=ee),z(w.Jc[+be],R,ne,Te),ne+=Te,ee-=Te,V+=3}z(w.Jc[+oe],R,ne,ee),R=ne<F?0:5}if(R!=0)return xi(w,R,"cannot parse partitions");for(R=D(ne=w.m,7),V=se(ne)?q(ne,4):0,F=se(ne)?q(ne,4):0,ee=se(ne)?q(ne,4):0,oe=se(ne)?q(ne,4):0,ne=se(ne)?q(ne,4):0,be=w.Qa,Te=0;4>Te;++Te){if(be.Cb){var le=be.Zb[Te];be.Fb||(le+=R)}else{if(0<Te){w.pb[Te]=w.pb[0];continue}le=R}var je=w.pb[Te];je.Sc[0]=x5[nl(le+V,127)],je.Sc[1]=b5[nl(le+0,127)],je.Eb[0]=2*x5[nl(le+F,127)],je.Eb[1]=101581*b5[nl(le+ee,127)]>>16,8>je.Eb[1]&&(je.Eb[1]=8),je.Qc[0]=x5[nl(le+oe,117)],je.Qc[1]=b5[nl(le+ne,127)],je.lc=le+ne}if(!Q.Rb)return xi(w,4,"Not a key frame.");for(se(Z),Q=w.Pa,R=0;4>R;++R){for(V=0;8>V;++V)for(F=0;3>F;++F)for(ee=0;11>ee;++ee)oe=ue(Z,OY[R][V][F][ee])?D(Z,8):EY[R][V][F][ee],Q.Wc[R][V].Yb[F][ee]=oe;for(V=0;17>V;++V)Q.Xc[R][V]=Q.Wc[R][TY[V]]}return w.kc=se(Z),w.kc&&(w.Bd=D(Z,8)),w.cb=1}function Rh(w,S,R,F,V,Z,Q){var ee=S[V].Yb[R];for(R=0;16>V;++V){if(!ue(w,ee[R+0]))return V;for(;!ue(w,ee[R+1]);)if(ee=S[++V].Yb[0],R=0,V==16)return 16;var ne=S[V+1].Yb;if(ue(w,ee[R+2])){var oe=w,be=0;if(ue(oe,(le=ee)[(Te=R)+3]))if(ue(oe,le[Te+6])){for(ee=0,Te=2*(be=ue(oe,le[Te+8]))+(le=ue(oe,le[Te+9+be])),be=0,le=CY[Te];le[ee];++ee)be+=be+ue(oe,le[ee]);be+=3+(8<<Te)}else ue(oe,le[Te+7])?(be=7+2*ue(oe,165),be+=ue(oe,145)):be=5+ue(oe,159);else be=ue(oe,le[Te+4])?3+ue(oe,le[Te+5]):2;ee=ne[2]}else be=1,ee=ne[1];ne=Q+kY[V],0>(oe=w).b&&he(oe);var Te,le=oe.b,je=(Te=oe.Ca>>1)-(oe.I>>le)>>31;--oe.b,oe.Ca+=je,oe.Ca|=1,oe.I-=(Te+1&je)<<le,Z[ne]=((be^je)-je)*F[(0<V)+0]}return 16}function R0(w){var S=w.rb[w.sb-1];S.la=0,S.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function $a(w,S,R,F,V){V=w[S+R+32*F]+(V>>3),w[S+R+32*F]=-256&V?0>V?0:255:V}function Ai(w,S,R,F,V,Z){$a(w,S,0,R,F+V),$a(w,S,1,R,F+Z),$a(w,S,2,R,F-Z),$a(w,S,3,R,F-V)}function Hl(w){return(20091*w>>16)+w}function I0(w,S,R,F){var V,Z=0,Q=s(16);for(V=0;4>V;++V){var ee=w[S+0]+w[S+8],ne=w[S+0]-w[S+8],oe=(35468*w[S+4]>>16)-Hl(w[S+12]),be=Hl(w[S+4])+(35468*w[S+12]>>16);Q[Z+0]=ee+be,Q[Z+1]=ne+oe,Q[Z+2]=ne-oe,Q[Z+3]=ee-be,Z+=4,S++}for(V=Z=0;4>V;++V)ee=(w=Q[Z+0]+4)+Q[Z+8],ne=w-Q[Z+8],oe=(35468*Q[Z+4]>>16)-Hl(Q[Z+12]),$a(R,F,0,0,ee+(be=Hl(Q[Z+4])+(35468*Q[Z+12]>>16))),$a(R,F,1,0,ne+oe),$a(R,F,2,0,ne-oe),$a(R,F,3,0,ee-be),Z++,F+=32}function e5(w,S,R,F){var V=w[S+0]+4,Z=35468*w[S+4]>>16,Q=Hl(w[S+4]),ee=35468*w[S+1]>>16;Ai(R,F,0,V+Q,w=Hl(w[S+1]),ee),Ai(R,F,1,V+Z,w,ee),Ai(R,F,2,V-Z,w,ee),Ai(R,F,3,V-Q,w,ee)}function t5(w,S,R,F,V){I0(w,S,R,F),V&&I0(w,S+16,R,F+4)}function sl(w,S,R,F){Qd(w,S+0,R,F,1),Qd(w,S+32,R,F+128,1)}function D0(w,S,R,F){var V;for(w=w[S+0]+4,V=0;4>V;++V)for(S=0;4>S;++S)$a(R,F,S,V,w)}function M0(w,S,R,F){w[S+0]&&Jr(w,S+0,R,F),w[S+16]&&Jr(w,S+16,R,F+4),w[S+32]&&Jr(w,S+32,R,F+128),w[S+48]&&Jr(w,S+48,R,F+128+4)}function Ih(w,S,R,F){var V,Z=s(16);for(V=0;4>V;++V){var Q=w[S+0+V]+w[S+12+V],ee=w[S+4+V]+w[S+8+V],ne=w[S+4+V]-w[S+8+V],oe=w[S+0+V]-w[S+12+V];Z[0+V]=Q+ee,Z[8+V]=Q-ee,Z[4+V]=oe+ne,Z[12+V]=oe-ne}for(V=0;4>V;++V)Q=(w=Z[0+4*V]+3)+Z[3+4*V],ee=Z[1+4*V]+Z[2+4*V],ne=Z[1+4*V]-Z[2+4*V],oe=w-Z[3+4*V],R[F+0]=Q+ee>>3,R[F+16]=oe+ne>>3,R[F+32]=Q-ee>>3,R[F+48]=oe-ne>>3,F+=64}function zd(w,S,R){var F,V=S-32,Z=la,Q=255-w[V-1];for(F=0;F<R;++F){var ee,ne=Z,oe=Q+w[S-1];for(ee=0;ee<R;++ee)w[S+ee]=ne[oe+w[V+ee]];S+=32}}function r5(w,S){zd(w,S,4)}function n5(w,S){zd(w,S,8)}function i5(w,S){zd(w,S,16)}function qg(w,S){var R;for(R=0;16>R;++R)n(w,S+32*R,w,S-32,16)}function $0(w,S){var R;for(R=16;0<R;--R)i(w,S,w[S-1],16),S+=32}function bo(w,S,R){var F;for(F=0;16>F;++F)i(S,R+32*F,w,16)}function s5(w,S){var R,F=16;for(R=0;16>R;++R)F+=w[S-1+32*R]+w[S+R-32];bo(F>>5,w,S)}function qd(w,S){var R,F=8;for(R=0;16>R;++R)F+=w[S-1+32*R];bo(F>>4,w,S)}function Ug(w,S){var R,F=8;for(R=0;16>R;++R)F+=w[S+R-32];bo(F>>4,w,S)}function a5(w,S){bo(128,w,S)}function tr(w,S,R){return w+2*S+R+2>>2}function o5(w,S){var R,F=S-32;for(F=new Uint8Array([tr(w[F-1],w[F+0],w[F+1]),tr(w[F+0],w[F+1],w[F+2]),tr(w[F+1],w[F+2],w[F+3]),tr(w[F+2],w[F+3],w[F+4])]),R=0;4>R;++R)n(w,S+32*R,F,0,F.length)}function l5(w,S){var R=w[S-1],F=w[S-1+32],V=w[S-1+64],Z=w[S-1+96];ge(w,S+0,16843009*tr(w[S-1-32],R,F)),ge(w,S+32,16843009*tr(R,F,V)),ge(w,S+64,16843009*tr(F,V,Z)),ge(w,S+96,16843009*tr(V,Z,Z))}function c5(w,S){var R,F=4;for(R=0;4>R;++R)F+=w[S+R-32]+w[S-1+32*R];for(F>>=3,R=0;4>R;++R)i(w,S+32*R,F,4)}function Vl(w,S){var R=w[S-1+0],F=w[S-1+32],V=w[S-1+64],Z=w[S-1-32],Q=w[S+0-32],ee=w[S+1-32],ne=w[S+2-32],oe=w[S+3-32];w[S+0+96]=tr(F,V,w[S-1+96]),w[S+1+96]=w[S+0+64]=tr(R,F,V),w[S+2+96]=w[S+1+64]=w[S+0+32]=tr(Z,R,F),w[S+3+96]=w[S+2+64]=w[S+1+32]=w[S+0+0]=tr(Q,Z,R),w[S+3+64]=w[S+2+32]=w[S+1+0]=tr(ee,Q,Z),w[S+3+32]=w[S+2+0]=tr(ne,ee,Q),w[S+3+0]=tr(oe,ne,ee)}function Gl(w,S){var R=w[S+1-32],F=w[S+2-32],V=w[S+3-32],Z=w[S+4-32],Q=w[S+5-32],ee=w[S+6-32],ne=w[S+7-32];w[S+0+0]=tr(w[S+0-32],R,F),w[S+1+0]=w[S+0+32]=tr(R,F,V),w[S+2+0]=w[S+1+32]=w[S+0+64]=tr(F,V,Z),w[S+3+0]=w[S+2+32]=w[S+1+64]=w[S+0+96]=tr(V,Z,Q),w[S+3+32]=w[S+2+64]=w[S+1+96]=tr(Z,Q,ee),w[S+3+64]=w[S+2+96]=tr(Q,ee,ne),w[S+3+96]=tr(ee,ne,ne)}function u5(w,S){var R=w[S-1+0],F=w[S-1+32],V=w[S-1+64],Z=w[S-1-32],Q=w[S+0-32],ee=w[S+1-32],ne=w[S+2-32],oe=w[S+3-32];w[S+0+0]=w[S+1+64]=Z+Q+1>>1,w[S+1+0]=w[S+2+64]=Q+ee+1>>1,w[S+2+0]=w[S+3+64]=ee+ne+1>>1,w[S+3+0]=ne+oe+1>>1,w[S+0+96]=tr(V,F,R),w[S+0+64]=tr(F,R,Z),w[S+0+32]=w[S+1+96]=tr(R,Z,Q),w[S+1+32]=w[S+2+96]=tr(Z,Q,ee),w[S+2+32]=w[S+3+96]=tr(Q,ee,ne),w[S+3+32]=tr(ee,ne,oe)}function d5(w,S){var R=w[S+0-32],F=w[S+1-32],V=w[S+2-32],Z=w[S+3-32],Q=w[S+4-32],ee=w[S+5-32],ne=w[S+6-32],oe=w[S+7-32];w[S+0+0]=R+F+1>>1,w[S+1+0]=w[S+0+64]=F+V+1>>1,w[S+2+0]=w[S+1+64]=V+Z+1>>1,w[S+3+0]=w[S+2+64]=Z+Q+1>>1,w[S+0+32]=tr(R,F,V),w[S+1+32]=w[S+0+96]=tr(F,V,Z),w[S+2+32]=w[S+1+96]=tr(V,Z,Q),w[S+3+32]=w[S+2+96]=tr(Z,Q,ee),w[S+3+64]=tr(Q,ee,ne),w[S+3+96]=tr(ee,ne,oe)}function Dh(w,S){var R=w[S-1+0],F=w[S-1+32],V=w[S-1+64],Z=w[S-1+96];w[S+0+0]=R+F+1>>1,w[S+2+0]=w[S+0+32]=F+V+1>>1,w[S+2+32]=w[S+0+64]=V+Z+1>>1,w[S+1+0]=tr(R,F,V),w[S+3+0]=w[S+1+32]=tr(F,V,Z),w[S+3+32]=w[S+1+64]=tr(V,Z,Z),w[S+3+64]=w[S+2+64]=w[S+0+96]=w[S+1+96]=w[S+2+96]=w[S+3+96]=Z}function Wg(w,S){var R=w[S-1+0],F=w[S-1+32],V=w[S-1+64],Z=w[S-1+96],Q=w[S-1-32],ee=w[S+0-32],ne=w[S+1-32],oe=w[S+2-32];w[S+0+0]=w[S+2+32]=R+Q+1>>1,w[S+0+32]=w[S+2+64]=F+R+1>>1,w[S+0+64]=w[S+2+96]=V+F+1>>1,w[S+0+96]=Z+V+1>>1,w[S+3+0]=tr(ee,ne,oe),w[S+2+0]=tr(Q,ee,ne),w[S+1+0]=w[S+3+32]=tr(R,Q,ee),w[S+1+32]=w[S+3+64]=tr(F,R,Q),w[S+1+64]=w[S+3+96]=tr(V,F,R),w[S+1+96]=tr(Z,V,F)}function Ud(w,S){var R;for(R=0;8>R;++R)n(w,S+32*R,w,S-32,8)}function f5(w,S){var R;for(R=0;8>R;++R)i(w,S,w[S-1],8),S+=32}function Kl(w,S,R){var F;for(F=0;8>F;++F)i(S,R+32*F,w,8)}function h5(w,S){var R,F=8;for(R=0;8>R;++R)F+=w[S+R-32]+w[S-1+32*R];Kl(F>>4,w,S)}function Hg(w,S){var R,F=4;for(R=0;8>R;++R)F+=w[S+R-32];Kl(F>>3,w,S)}function Vg(w,S){var R,F=4;for(R=0;8>R;++R)F+=w[S-1+32*R];Kl(F>>3,w,S)}function F0(w,S){Kl(128,w,S)}function Yl(w,S,R){var F=w[S-R],V=w[S+0],Z=3*(V-F)+m5[1020+w[S-2*R]-w[S+R]],Q=G0[112+(Z+4>>3)];w[S-R]=la[255+F+G0[112+(Z+3>>3)]],w[S+0]=la[255+V-Q]}function Gg(w,S,R,F){var V=w[S+0],Z=w[S+R];return za[255+w[S-2*R]-w[S-R]]>F||za[255+Z-V]>F}function Mh(w,S,R,F){return 4*za[255+w[S-R]-w[S+0]]+za[255+w[S-2*R]-w[S+R]]<=F}function Kg(w,S,R,F,V){var Z=w[S-3*R],Q=w[S-2*R],ee=w[S-R],ne=w[S+0],oe=w[S+R],be=w[S+2*R],Te=w[S+3*R];return 4*za[255+ee-ne]+za[255+Q-oe]>F?0:za[255+w[S-4*R]-Z]<=V&&za[255+Z-Q]<=V&&za[255+Q-ee]<=V&&za[255+Te-be]<=V&&za[255+be-oe]<=V&&za[255+oe-ne]<=V}function Wd(w,S,R,F){var V=2*F+1;for(F=0;16>F;++F)Mh(w,S+F,R,V)&&Yl(w,S+F,R)}function Yg(w,S,R,F){var V=2*F+1;for(F=0;16>F;++F)Mh(w,S+F*R,1,V)&&Yl(w,S+F*R,1)}function B0(w,S,R,F){var V;for(V=3;0<V;--V)Wd(w,S+=4*R,R,F)}function z0(w,S,R,F){var V;for(V=3;0<V;--V)Yg(w,S+=4,R,F)}function Xl(w,S,R,F,V,Z,Q,ee){for(Z=2*Z+1;0<V--;){if(Kg(w,S,R,Z,Q))if(Gg(w,S,R,ee))Yl(w,S,R);else{var ne=w,oe=S,be=R,Te=ne[oe-2*be],le=ne[oe-be],je=ne[oe+0],ke=ne[oe+be],Ie=ne[oe+2*be],Oe=27*(Be=m5[1020+3*(je-le)+m5[1020+Te-ke]])+63>>7,$e=18*Be+63>>7,Be=9*Be+63>>7;ne[oe-3*be]=la[255+ne[oe-3*be]+Be],ne[oe-2*be]=la[255+Te+$e],ne[oe-be]=la[255+le+Oe],ne[oe+0]=la[255+je-Oe],ne[oe+be]=la[255+ke-$e],ne[oe+2*be]=la[255+Ie-Be]}S+=F}}function Zl(w,S,R,F,V,Z,Q,ee){for(Z=2*Z+1;0<V--;){if(Kg(w,S,R,Z,Q))if(Gg(w,S,R,ee))Yl(w,S,R);else{var ne=w,oe=S,be=R,Te=ne[oe-be],le=ne[oe+0],je=ne[oe+be],ke=G0[112+(4+(Ie=3*(le-Te))>>3)],Ie=G0[112+(Ie+3>>3)],Oe=ke+1>>1;ne[oe-2*be]=la[255+ne[oe-2*be]+Oe],ne[oe-be]=la[255+Te+Ie],ne[oe+0]=la[255+le-ke],ne[oe+be]=la[255+je-Oe]}S+=F}}function q0(w,S,R,F,V,Z){Xl(w,S,R,1,16,F,V,Z)}function Hd(w,S,R,F,V,Z){Xl(w,S,1,R,16,F,V,Z)}function U0(w,S,R,F,V,Z){var Q;for(Q=3;0<Q;--Q)Zl(w,S+=4*R,R,1,16,F,V,Z)}function P(w,S,R,F,V,Z){var Q;for(Q=3;0<Q;--Q)Zl(w,S+=4,1,R,16,F,V,Z)}function W(w,S,R,F,V,Z,Q,ee){Xl(w,S,V,1,8,Z,Q,ee),Xl(R,F,V,1,8,Z,Q,ee)}function ce(w,S,R,F,V,Z,Q,ee){Xl(w,S,1,V,8,Z,Q,ee),Xl(R,F,1,V,8,Z,Q,ee)}function xe(w,S,R,F,V,Z,Q,ee){Zl(w,S+4*V,V,1,8,Z,Q,ee),Zl(R,F+4*V,V,1,8,Z,Q,ee)}function Ae(w,S,R,F,V,Z,Q,ee){Zl(w,S+4,1,V,8,Z,Q,ee),Zl(R,F+4,1,V,8,Z,Q,ee)}function Fe(){this.ba=new nr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Pr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function He(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function pt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function At(){this.ua=0,this.Wa=new ye,this.vb=new ye,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new B}function er(){this.xb=this.a=0,this.l=new Lh,this.ca=new nr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new At,this.ab=0,this.gc=o(4,pt),this.Oc=0}function dr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Lh,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Dr(w,S,R,F,V,Z,Q){for(w=w==null?0:w[S+0],S=0;S<Q;++S)V[Z+S]=w+R[F+S]&255,w=V[Z+S]}function Hn(w,S,R,F,V,Z,Q){var ee;if(w==null)Dr(null,null,R,F,V,Z,Q);else for(ee=0;ee<Q;++ee)V[Z+ee]=w[S+ee]+R[F+ee]&255}function bi(w,S,R,F,V,Z,Q){if(w==null)Dr(null,null,R,F,V,Z,Q);else{var ee,ne=w[S+0],oe=ne,be=ne;for(ee=0;ee<Q;++ee)oe=be+(ne=w[S+ee])-oe,be=R[F+ee]+(-256&oe?0>oe?0:255:oe)&255,oe=ne,V[Z+ee]=be}}function Sn(w,S,R,F){var V=S.width,Z=S.o;if(t(w!=null&&S!=null),0>R||0>=F||R+F>Z)return null;if(!w.Cc){if(w.ga==null){var Q;if(w.ga=new dr,(Q=w.ga==null)||(Q=S.width*S.o,t(w.Gb.length==0),w.Gb=s(Q),w.Uc=0,w.Gb==null?Q=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Q=1),Q=!Q),!Q){Q=w.ga;var ee=w.Fa,ne=w.P,oe=w.qc,be=w.mb,Te=w.nb,le=ne+1,je=oe-1,ke=Q.l;if(t(ee!=null&&be!=null&&S!=null),gu[0]=null,gu[1]=Dr,gu[2]=Hn,gu[3]=bi,Q.ca=be,Q.tb=Te,Q.c=S.width,Q.i=S.height,t(0<Q.c&&0<Q.i),1>=oe)S=0;else if(Q.$a=3&ee[ne+0],Q.Z=ee[ne+0]>>2&3,Q.Lc=ee[ne+0]>>4&3,ne=ee[ne+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||ne)S=0;else if(ke.put=ut,ke.ac=Ln,ke.bc=oi,ke.ma=Q,ke.width=S.width,ke.height=S.height,ke.Da=S.Da,ke.v=S.v,ke.va=S.va,ke.j=S.j,ke.o=S.o,Q.$a)e:{t(Q.$a==1),S=Fd();t:for(;;){if(S==null){S=0;break e}if(t(Q!=null),Q.mc=S,S.c=Q.c,S.i=Q.i,S.l=Q.l,S.l.ma=Q,S.l.width=Q.c,S.l.height=Q.i,S.a=0,K(S.m,ee,le,je),!rl(Q.c,Q.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&pn(S.s)?(Q.ic=1,ee=S.c*S.i,S.Ta=null,S.Ua=0,S.V=s(ee),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(Q.ic=0,S=Bd(S,Q.c)),!S))break t;S=1;break e}Q.mc=null,S=0}else S=je>=Q.c*Q.i;Q=!S}if(Q)return null;w.ga.Lc!=1?w.Ga=0:F=Z-R}t(w.ga!=null),t(R+F<=Z);e:{if(S=(ee=w.ga).c,Z=ee.l.o,ee.$a==0){if(le=w.rc,je=w.Vc,ke=w.Fa,ne=w.P+1+R*S,oe=w.mb,be=w.nb+R*S,t(ne<=w.P+w.qc),ee.Z!=0)for(t(gu[ee.Z]!=null),Q=0;Q<F;++Q)gu[ee.Z](le,je,ke,ne,oe,be,S),le=oe,je=be,be+=S,ne+=S;else for(Q=0;Q<F;++Q)n(oe,be,ke,ne,S),le=oe,je=be,be+=S,ne+=S;w.rc=le,w.Vc=je}else{if(t(ee.mc!=null),S=R+F,t((Q=ee.mc)!=null),t(S<=Q.i),Q.C>=S)S=1;else if(ee.ic||wo(),ee.ic){ee=Q.V,le=Q.Ba,je=Q.c;var Ie=Q.i,Oe=(ke=1,ne=Q.$/je,oe=Q.$%je,be=Q.m,Te=Q.s,Q.$),$e=je*Ie,Be=je*S,Ye=Te.wc,Ve=Oe<Be?an(Te,oe,ne):null;t(Oe<=$e),t(S<=Ie),t(pn(Te));t:for(;;){for(;!be.h&&Oe<Be;){if(oe&Ye||(Ve=an(Te,oe,ne)),t(Ve!=null),X(be),256>(Ie=Mt(Ve.G[0],Ve.H[0],be)))ee[le+Oe]=Ie,++Oe,++oe>=je&&(oe=0,++ne<=S&&!(ne%16)&&vn(Q,ne));else{if(!(280>Ie)){ke=0;break t}Ie=yt(Ie-256,be);var kt,dt=Mt(Ve.G[4],Ve.H[4],be);if(X(be),!(Oe>=(dt=Jt(je,dt=yt(dt,be)))&&$e-Oe>=Ie)){ke=0;break t}for(kt=0;kt<Ie;++kt)ee[le+Oe+kt]=ee[le+Oe+kt-dt];for(Oe+=Ie,oe+=Ie;oe>=je;)oe-=je,++ne<=S&&!(ne%16)&&vn(Q,ne);Oe<Be&&oe&Ye&&(Ve=an(Te,oe,ne))}t(be.h==H(be))}vn(Q,ne>S?S:ne);break t}!ke||be.h&&Oe<$e?(ke=0,Q.a=be.h?5:3):Q.$=Oe,S=ke}else S=qi(Q,Q.V,Q.Ba,Q.c,Q.i,S,Ph);if(!S){F=0;break e}}R+F>=Z&&(w.Cc=1),F=1}if(!F)return null;if(w.Cc&&((F=w.ga)!=null&&(F.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+R*V}function Ci(w,S,R,F,V,Z){for(;0<V--;){var Q,ee=w,ne=S+(R?1:0),oe=w,be=S+(R?0:3);for(Q=0;Q<F;++Q){var Te=oe[be+4*Q];Te!=255&&(Te*=32897,ee[ne+4*Q+0]=ee[ne+4*Q+0]*Te>>23,ee[ne+4*Q+1]=ee[ne+4*Q+1]*Te>>23,ee[ne+4*Q+2]=ee[ne+4*Q+2]*Te>>23)}S+=Z}}function wi(w,S,R,F,V){for(;0<F--;){var Z;for(Z=0;Z<R;++Z){var Q=w[S+2*Z+0],ee=15&(oe=w[S+2*Z+1]),ne=4369*ee,oe=(240&oe|oe>>4)*ne>>16;w[S+2*Z+0]=(240&Q|Q>>4)*ne>>16&240|(15&Q|Q<<4)*ne>>16>>4&15,w[S+2*Z+1]=240&oe|ee}S+=V}}function Qi(w,S,R,F,V,Z,Q,ee){var ne,oe,be=255;for(oe=0;oe<V;++oe){for(ne=0;ne<F;++ne){var Te=w[S+ne];Z[Q+4*ne]=Te,be&=Te}S+=R,Q+=ee}return be!=255}function Jl(w,S,R,F,V){var Z;for(Z=0;Z<V;++Z)R[F+Z]=w[S+Z]>>8}function wo(){ov=Ci,XO=wi,ZO=Qi,JO=Jl}function Ql(w,S,R){O[w]=function(F,V,Z,Q,ee,ne,oe,be,Te,le,je,ke,Ie,Oe,$e,Be,Ye){var Ve,kt=Ye-1>>1,dt=ee[ne+0]|oe[be+0]<<16,fr=Te[le+0]|je[ke+0]<<16;t(F!=null);var wt=3*dt+fr+131074>>2;for(S(F[V+0],255&wt,wt>>16,Ie,Oe),Z!=null&&(wt=3*fr+dt+131074>>2,S(Z[Q+0],255&wt,wt>>16,$e,Be)),Ve=1;Ve<=kt;++Ve){var Or=ee[ne+Ve]|oe[be+Ve]<<16,Ei=Te[le+Ve]|je[ke+Ve]<<16,hr=dt+Or+fr+Ei+524296,_t=hr+2*(Or+fr)>>3;wt=_t+dt>>1,dt=(hr=hr+2*(dt+Ei)>>3)+Or>>1,S(F[V+2*Ve-1],255&wt,wt>>16,Ie,Oe+(2*Ve-1)*R),S(F[V+2*Ve-0],255&dt,dt>>16,Ie,Oe+(2*Ve-0)*R),Z!=null&&(wt=hr+fr>>1,dt=_t+Ei>>1,S(Z[Q+2*Ve-1],255&wt,wt>>16,$e,Be+(2*Ve-1)*R),S(Z[Q+2*Ve+0],255&dt,dt>>16,$e,Be+(2*Ve+0)*R)),dt=Or,fr=Ei}1&Ye||(wt=3*dt+fr+131074>>2,S(F[V+Ye-1],255&wt,wt>>16,Ie,Oe+(Ye-1)*R),Z!=null&&(wt=3*fr+dt+131074>>2,S(Z[Q+Ye-1],255&wt,wt>>16,$e,Be+(Ye-1)*R)))}}function Xg(){qa[K0]=RY,qa[Y0]=c3,qa[i3]=IY,qa[X0]=u3,qa[Z0]=d3,qa[p5]=f3,qa[s3]=DY,qa[g5]=c3,qa[v5]=u3,qa[J0]=d3,qa[y5]=f3}function $h(w){return w&~MY?0>w?0:255:w>>h3}function au(w,S){return $h((19077*w>>8)+(26149*S>>8)-14234)}function Vd(w,S,R){return $h((19077*w>>8)-(6419*S>>8)-(13320*R>>8)+8708)}function Gd(w,S){return $h((19077*w>>8)+(33050*S>>8)-17685)}function ou(w,S,R,F,V){F[V+0]=au(w,R),F[V+1]=Vd(w,S,R),F[V+2]=Gd(w,S)}function es(w,S,R,F,V){F[V+0]=Gd(w,S),F[V+1]=Vd(w,S,R),F[V+2]=au(w,R)}function Kd(w,S,R,F,V){var Z=Vd(w,S,R);S=Z<<3&224|Gd(w,S)>>3,F[V+0]=248&au(w,R)|Z>>5,F[V+1]=S}function Yd(w,S,R,F,V){var Z=240&Gd(w,S)|15;F[V+0]=240&au(w,R)|Vd(w,S,R)>>4,F[V+1]=Z}function Zg(w,S,R,F,V){F[V+0]=255,ou(w,S,R,F,V+1)}function Jg(w,S,R,F,V){es(w,S,R,F,V),F[V+3]=255}function Ss(w,S,R,F,V){ou(w,S,R,F,V),F[V+3]=255}function ec(w,S,R){O[w]=function(F,V,Z,Q,ee,ne,oe,be,Te){for(var le=be+(-2&Te)*R;be!=le;)S(F[V+0],Z[Q+0],ee[ne+0],oe,be),S(F[V+1],Z[Q+0],ee[ne+0],oe,be+R),V+=2,++Q,++ne,be+=2*R;1&Te&&S(F[V+0],Z[Q+0],ee[ne+0],oe,be)}}function Fh(w,S,R){return R==0?w==0?S==0?6:5:S==0?4:0:R}function W0(w,S,R,F,V){switch(w>>>30){case 3:Qd(S,R,F,V,0);break;case 2:Ba(S,R,F,V);break;case 1:Jr(S,R,F,V)}}function Fa(w,S){var R,F,V=S.M,Z=S.Nb,Q=w.oc,ee=w.pc+40,ne=w.oc,oe=w.pc+584,be=w.oc,Te=w.pc+600;for(R=0;16>R;++R)Q[ee+32*R-1]=129;for(R=0;8>R;++R)ne[oe+32*R-1]=129,be[Te+32*R-1]=129;for(0<V?Q[ee-1-32]=ne[oe-1-32]=be[Te-1-32]=129:(i(Q,ee-32-1,127,21),i(ne,oe-32-1,127,9),i(be,Te-32-1,127,9)),F=0;F<w.za;++F){var le=S.ya[S.aa+F];if(0<F){for(R=-1;16>R;++R)n(Q,ee+32*R-4,Q,ee+32*R+12,4);for(R=-1;8>R;++R)n(ne,oe+32*R-4,ne,oe+32*R+4,4),n(be,Te+32*R-4,be,Te+32*R+4,4)}var je=w.Gd,ke=w.Hd+F,Ie=le.ad,Oe=le.Hc;if(0<V&&(n(Q,ee-32,je[ke].y,0,16),n(ne,oe-32,je[ke].f,0,8),n(be,Te-32,je[ke].ea,0,8)),le.Za){var $e=Q,Be=ee-32+16;for(0<V&&(F>=w.za-1?i($e,Be,je[ke].y[15],4):n($e,Be,je[ke+1].y,0,4)),R=0;4>R;R++)$e[Be+128+R]=$e[Be+256+R]=$e[Be+384+R]=$e[Be+0+R];for(R=0;16>R;++R,Oe<<=2)$e=Q,Be=ee+p3[R],_o[le.Ob[R]]($e,Be),W0(Oe,Ie,16*+R,$e,Be)}else if($e=Fh(F,V,le.Ob[0]),pu[$e](Q,ee),Oe!=0)for(R=0;16>R;++R,Oe<<=2)W0(Oe,Ie,16*+R,Q,ee+p3[R]);for(R=le.Gc,$e=Fh(F,V,le.Dd),nc[$e](ne,oe),nc[$e](be,Te),Oe=Ie,$e=ne,Be=oe,255&(le=0|R)&&(170&le?ll(Oe,256,$e,Be):yn(Oe,256,$e,Be)),le=be,Oe=Te,255&(R>>=8)&&(170&R?ll(Ie,320,le,Oe):yn(Ie,320,le,Oe)),V<w.Ub-1&&(n(je[ke].y,0,Q,ee+480,16),n(je[ke].f,0,ne,oe+224,8),n(je[ke].ea,0,be,Te+224,8)),R=8*Z*w.B,je=w.sa,ke=w.ta+16*F+16*Z*w.R,Ie=w.qa,le=w.ra+8*F+R,Oe=w.Ha,$e=w.Ia+8*F+R,R=0;16>R;++R)n(je,ke+R*w.R,Q,ee+32*R,16);for(R=0;8>R;++R)n(Ie,le+R*w.B,ne,oe+32*R,8),n(Oe,$e+R*w.B,be,Te+32*R,8)}}function Xd(w,S,R,F,V,Z,Q,ee,ne){var oe=[0],be=[0],Te=0,le=ne!=null?ne.kd:0,je=ne??new He;if(w==null||12>R)return 7;je.data=w,je.w=S,je.ha=R,S=[S],R=[R],je.gb=[je.gb];e:{var ke=S,Ie=R,Oe=je.gb;if(t(w!=null),t(Ie!=null),t(Oe!=null),Oe[0]=0,12<=Ie[0]&&!r(w,ke[0],"RIFF")){if(r(w,ke[0]+8,"WEBP")){Oe=3;break e}var $e=Ne(w,ke[0]+4);if(12>$e||4294967286<$e){Oe=3;break e}if(le&&$e>Ie[0]-8){Oe=7;break e}Oe[0]=$e,ke[0]+=12,Ie[0]-=12}Oe=0}if(Oe!=0)return Oe;for($e=0<je.gb[0],R=R[0];;){e:{var Be=w;Ie=S,Oe=R;var Ye=oe,Ve=be,kt=ke=[0];if((wt=Te=[Te])[0]=0,8>Oe[0])Oe=7;else{if(!r(Be,Ie[0],"VP8X")){if(Ne(Be,Ie[0]+4)!=10){Oe=3;break e}if(18>Oe[0]){Oe=7;break e}var dt=Ne(Be,Ie[0]+8),fr=1+te(Be,Ie[0]+12);if(2147483648<=fr*(Be=1+te(Be,Ie[0]+15))){Oe=3;break e}kt!=null&&(kt[0]=dt),Ye!=null&&(Ye[0]=fr),Ve!=null&&(Ve[0]=Be),Ie[0]+=18,Oe[0]-=18,wt[0]=1}Oe=0}}if(Te=Te[0],ke=ke[0],Oe!=0)return Oe;if(Ie=!!(2&ke),!$e&&Te)return 3;if(Z!=null&&(Z[0]=!!(16&ke)),Q!=null&&(Q[0]=Ie),ee!=null&&(ee[0]=0),Q=oe[0],ke=be[0],Te&&Ie&&ne==null){Oe=0;break}if(4>R){Oe=7;break}if($e&&Te||!$e&&!Te&&!r(w,S[0],"ALPH")){R=[R],je.na=[je.na],je.P=[je.P],je.Sa=[je.Sa];e:{dt=w,Oe=S,$e=R;var wt=je.gb;Ye=je.na,Ve=je.P,kt=je.Sa,fr=22,t(dt!=null),t($e!=null),Be=Oe[0];var Or=$e[0];for(t(Ye!=null),t(kt!=null),Ye[0]=null,Ve[0]=null,kt[0]=0;;){if(Oe[0]=Be,$e[0]=Or,8>Or){Oe=7;break e}var Ei=Ne(dt,Be+4);if(4294967286<Ei){Oe=3;break e}var hr=8+Ei+1&-2;if(fr+=hr,0<wt&&fr>wt){Oe=3;break e}if(!r(dt,Be,"VP8 ")||!r(dt,Be,"VP8L")){Oe=0;break e}if(Or[0]<hr){Oe=7;break e}r(dt,Be,"ALPH")||(Ye[0]=dt,Ve[0]=Be+8,kt[0]=Ei),Be+=hr,Or-=hr}}if(R=R[0],je.na=je.na[0],je.P=je.P[0],je.Sa=je.Sa[0],Oe!=0)break}R=[R],je.Ja=[je.Ja],je.xa=[je.xa];e:if(wt=w,Oe=S,$e=R,Ye=je.gb[0],Ve=je.Ja,kt=je.xa,dt=Oe[0],Be=!r(wt,dt,"VP8 "),fr=!r(wt,dt,"VP8L"),t(wt!=null),t($e!=null),t(Ve!=null),t(kt!=null),8>$e[0])Oe=7;else{if(Be||fr){if(wt=Ne(wt,dt+4),12<=Ye&&wt>Ye-12){Oe=3;break e}if(le&&wt>$e[0]-8){Oe=7;break e}Ve[0]=wt,Oe[0]+=8,$e[0]-=8,kt[0]=fr}else kt[0]=5<=$e[0]&&wt[dt+0]==47&&!(wt[dt+4]>>5),Ve[0]=$e[0];Oe=0}if(R=R[0],je.Ja=je.Ja[0],je.xa=je.xa[0],S=S[0],Oe!=0)break;if(4294967286<je.Ja)return 3;if(ee==null||Ie||(ee[0]=je.xa?2:1),Q=[Q],ke=[ke],je.xa){if(5>R){Oe=7;break}ee=Q,le=ke,Ie=Z,w==null||5>R?w=0:5<=R&&w[S+0]==47&&!(w[S+4]>>5)?($e=[0],wt=[0],Ye=[0],K(Ve=new $,w,S,R),Ce(Ve,$e,wt,Ye)?(ee!=null&&(ee[0]=$e[0]),le!=null&&(le[0]=wt[0]),Ie!=null&&(Ie[0]=Ye[0]),w=1):w=0):w=0}else{if(10>R){Oe=7;break}ee=ke,w==null||10>R||!L0(w,S+3,R-3)?w=0:(le=w[S+0]|w[S+1]<<8|w[S+2]<<16,Ie=16383&(w[S+7]<<8|w[S+6]),w=16383&(w[S+9]<<8|w[S+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=je.Ja||!Ie||!w?w=0:(Q&&(Q[0]=Ie),ee&&(ee[0]=w),w=1))}if(!w||(Q=Q[0],ke=ke[0],Te&&(oe[0]!=Q||be[0]!=ke)))return 3;ne!=null&&(ne[0]=je,ne.offset=S-ne.w,t(4294967286>S-ne.w),t(ne.offset==ne.ha-R));break}return Oe==0||Oe==7&&Te&&ne==null?(Z!=null&&(Z[0]|=je.na!=null&&0<je.na.length),F!=null&&(F[0]=Q),V!=null&&(V[0]=ke),0):Oe}function Qg(w,S,R){var F=S.width,V=S.height,Z=0,Q=0,ee=F,ne=V;if(S.Da=w!=null&&0<w.Da,S.Da&&(ee=w.cd,ne=w.bd,Z=w.v,Q=w.j,11>R||(Z&=-2,Q&=-2),0>Z||0>Q||0>=ee||0>=ne||Z+ee>F||Q+ne>V))return 0;if(S.v=Z,S.j=Q,S.va=Z+ee,S.o=Q+ne,S.U=ee,S.T=ne,S.da=w!=null&&0<w.da,S.da){if(!we(ee,ne,R=[w.ib],Z=[w.hb]))return 0;S.ib=R[0],S.hb=Z[0]}return S.ob=w!=null&&w.ob,S.Kb=w==null||!w.Sd,S.da&&(S.ob=S.ib<3*F/4&&S.hb<3*V/4,S.Kb=0),1}function ev(w){if(w==null)return 2;if(11>w.S){var S=w.f.RGBA;S.fb+=(w.height-1)*S.A,S.A=-S.A}else S=w.f.kb,w=w.height,S.O+=(w-1)*S.fa,S.fa=-S.fa,S.N+=(w-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(w-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(w-1)*S.lb,S.lb=-S.lb);return 0}function lu(w,S,R,F){if(F==null||0>=w||0>=S)return 2;if(R!=null){if(R.Da){var V=R.cd,Z=R.bd,Q=-2&R.v,ee=-2&R.j;if(0>Q||0>ee||0>=V||0>=Z||Q+V>w||ee+Z>S)return 2;w=V,S=Z}if(R.da){if(!we(w,S,V=[R.ib],Z=[R.hb]))return 2;w=V[0],S=Z[0]}}F.width=w,F.height=S;e:{var ne=F.width,oe=F.height;if(w=F.S,0>=ne||0>=oe||!(w>=K0&&13>w))w=2;else{if(0>=F.Rd&&F.sd==null){Q=Z=V=S=0;var be=(ee=ne*g3[w])*oe;if(11>w||(Z=(oe+1)/2*(S=(ne+1)/2),w==12&&(Q=(V=ne)*oe)),(oe=s(be+2*Z+Q))==null){w=1;break e}F.sd=oe,11>w?((ne=F.f.RGBA).eb=oe,ne.fb=0,ne.A=ee,ne.size=be):((ne=F.f.kb).y=oe,ne.O=0,ne.fa=ee,ne.Fd=be,ne.f=oe,ne.N=0+be,ne.Ab=S,ne.Cd=Z,ne.ea=oe,ne.W=0+be+Z,ne.Db=S,ne.Ed=Z,w==12&&(ne.F=oe,ne.J=0+be+2*Z),ne.Tc=Q,ne.lb=V)}if(S=1,V=F.S,Z=F.width,Q=F.height,V>=K0&&13>V)if(11>V)w=F.f.RGBA,S&=(ee=Math.abs(w.A))*(Q-1)+Z<=w.size,S&=ee>=Z*g3[V],S&=w.eb!=null;else{w=F.f.kb,ee=(Z+1)/2,be=(Q+1)/2,ne=Math.abs(w.fa),oe=Math.abs(w.Ab);var Te=Math.abs(w.Db),le=Math.abs(w.lb),je=le*(Q-1)+Z;S&=ne*(Q-1)+Z<=w.Fd,S&=oe*(be-1)+ee<=w.Cd,S=(S&=Te*(be-1)+ee<=w.Ed)&ne>=Z&oe>=ee&Te>=ee,S&=w.y!=null,S&=w.f!=null,S&=w.ea!=null,V==12&&(S&=le>=Z,S&=je<=w.Tc,S&=w.F!=null)}else S=0;w=S?0:2}}return w!=0||R!=null&&R.fd&&(w=ev(F)),w}var Zd=64,aa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],oa=24,cu=32,tc=8,uu=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];We("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(w){return w},O.Predictor2=function(w,S,R){return S[R+0]},O.Predictor3=function(w,S,R){return S[R+1]},O.Predictor4=function(w,S,R){return S[R-1]},O.Predictor5=function(w,S,R){return Ke(Ke(w,S[R+1]),S[R+0])},O.Predictor6=function(w,S,R){return Ke(w,S[R-1])},O.Predictor7=function(w,S,R){return Ke(w,S[R+0])},O.Predictor8=function(w,S,R){return Ke(S[R-1],S[R+0])},O.Predictor9=function(w,S,R){return Ke(S[R+0],S[R+1])},O.Predictor10=function(w,S,R){return Ke(Ke(w,S[R-1]),Ke(S[R+0],S[R+1]))},O.Predictor11=function(w,S,R){var F=S[R+0];return 0>=ft(F>>24&255,w>>24&255,(S=S[R-1])>>24&255)+ft(F>>16&255,w>>16&255,S>>16&255)+ft(F>>8&255,w>>8&255,S>>8&255)+ft(255&F,255&w,255&S)?F:w},O.Predictor12=function(w,S,R){var F=S[R+0];return(Pt((w>>24&255)+(F>>24&255)-((S=S[R-1])>>24&255))<<24|Pt((w>>16&255)+(F>>16&255)-(S>>16&255))<<16|Pt((w>>8&255)+(F>>8&255)-(S>>8&255))<<8|Pt((255&w)+(255&F)-(255&S)))>>>0},O.Predictor13=function(w,S,R){var F=S[R-1];return(Lt((w=Ke(w,S[R+0]))>>24&255,F>>24&255)<<24|Lt(w>>16&255,F>>16&255)<<16|Lt(w>>8&255,F>>8&255)<<8|Lt(255&w,255&F))>>>0};var tv=O.PredictorAdd0;O.PredictorAdd1=Zt,We("Predictor2","PredictorAdd2"),We("Predictor3","PredictorAdd3"),We("Predictor4","PredictorAdd4"),We("Predictor5","PredictorAdd5"),We("Predictor6","PredictorAdd6"),We("Predictor7","PredictorAdd7"),We("Predictor8","PredictorAdd8"),We("Predictor9","PredictorAdd9"),We("Predictor10","PredictorAdd10"),We("Predictor11","PredictorAdd11"),We("Predictor12","PredictorAdd12"),We("Predictor13","PredictorAdd13");var Bh=O.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var li,H0=O.ColorIndexInverseTransform,al=O.MapARGB,ol=O.VP8LColorIndexInverseTransformAlpha,rv=O.MapAlpha,nv=O.VP8LPredictorsAdd=[];nv.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var iv,sv,du,fu,hu,Jd,mu,Qd,Ba,ll,Jr,yn,ci,ki,rc,av,zh,V0,WO,HO,VO,GO,KO,YO,ov,XO,ZO,JO,QO=s(511),e3=s(2041),t3=s(225),r3=s(767),n3=0,m5=e3,G0=t3,la=r3,za=QO,K0=0,Y0=1,i3=2,X0=3,Z0=4,p5=5,s3=6,g5=7,v5=8,J0=9,y5=10,bY=[2,3,7],wY=[3,3,11],a3=[280,256,256,256,40],_Y=[0,1,1,1,0],jY=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],NY=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],SY=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],AY=8,x5=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],b5=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],lv=null,CY=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],kY=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],o3=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],EY=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],PY=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],OY=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],TY=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],pu=[],_o=[],nc=[],LY=1,l3=2,gu=[],qa=[];Ql("UpsampleRgbLinePair",ou,3),Ql("UpsampleBgrLinePair",es,3),Ql("UpsampleRgbaLinePair",Ss,4),Ql("UpsampleBgraLinePair",Jg,4),Ql("UpsampleArgbLinePair",Zg,4),Ql("UpsampleRgba4444LinePair",Yd,2),Ql("UpsampleRgb565LinePair",Kd,2);var RY=O.UpsampleRgbLinePair,IY=O.UpsampleBgrLinePair,c3=O.UpsampleRgbaLinePair,u3=O.UpsampleBgraLinePair,d3=O.UpsampleArgbLinePair,f3=O.UpsampleRgba4444LinePair,DY=O.UpsampleRgb565LinePair,Q0=16,eb=1<<Q0-1,cv=-227,w5=482,h3=6,MY=(256<<h3)-1,m3=0,$Y=s(256),FY=s(256),BY=s(256),zY=s(256),qY=s(w5-cv),UY=s(w5-cv);ec("YuvToRgbRow",ou,3),ec("YuvToBgrRow",es,3),ec("YuvToRgbaRow",Ss,4),ec("YuvToBgraRow",Jg,4),ec("YuvToArgbRow",Zg,4),ec("YuvToRgba4444Row",Yd,2),ec("YuvToRgb565Row",Kd,2);var p3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tb=[0,2,8],WY=[8,7,6,4,4,2,2,2,1,1,1,1],HY=1;this.WebPDecodeRGBA=function(w,S,R,F,V){var Z=Y0,Q=new Fe,ee=new nr;Q.ba=ee,ee.S=Z,ee.width=[ee.width],ee.height=[ee.height];var ne=ee.width,oe=ee.height,be=new vt;if(be==null||w==null)var Te=2;else t(be!=null),Te=Xd(w,S,R,be.width,be.height,be.Pd,be.Qd,be.format,null);if(Te!=0?ne=0:(ne!=null&&(ne[0]=be.width[0]),oe!=null&&(oe[0]=be.height[0]),ne=1),ne){ee.width=ee.width[0],ee.height=ee.height[0],F!=null&&(F[0]=ee.width),V!=null&&(V[0]=ee.height);e:{if(F=new Lh,(V=new He).data=w,V.w=S,V.ha=R,V.kd=1,S=[0],t(V!=null),((w=Xd(V.data,V.w,V.ha,null,null,null,S,null,V))==0||w==7)&&S[0]&&(w=4),(S=w)==0){if(t(Q!=null),F.data=V.data,F.w=V.w+V.offset,F.ha=V.ha-V.offset,F.put=ut,F.ac=Ln,F.bc=oi,F.ma=Q,V.xa){if((w=Fd())==null){Q=1;break e}if(function(le,je){var ke=[0],Ie=[0],Oe=[0];t:for(;;){if(le==null)return 0;if(je==null)return le.a=2,0;if(le.l=je,le.a=0,K(le.m,je.data,je.w,je.ha),!Ce(le.m,ke,Ie,Oe)){le.a=3;break t}if(le.xb=l3,je.width=ke[0],je.height=Ie[0],!rl(ke[0],Ie[0],1,le,null))break t;return 1}return t(le.a!=0),0}(w,F)){if(F=(S=lu(F.width,F.height,Q.Oa,Q.ba))==0){t:{F=w;r:for(;;){if(F==null){F=0;break t}if(t(F.s.yc!=null),t(F.s.Ya!=null),t(0<F.s.Wb),t((R=F.l)!=null),t((V=R.ma)!=null),F.xb!=0){if(F.ca=V.ba,F.tb=V.tb,t(F.ca!=null),!Qg(V.Oa,R,X0)){F.a=2;break r}if(!Bd(F,R.width)||R.da)break r;if((R.da||Rt(F.ca.S))&&wo(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&wo()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!Y(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!qi(F,F.V,F.Ba,F.c,F.i,R.o,Rn))break r;V.Dc=F.Ma,F=1;break t}t(F.a!=0),F=0}F=!F}F&&(S=w.a)}else S=w.a}else{if((w=new Qj)==null){Q=1;break e}if(w.Fa=V.na,w.P=V.P,w.qc=V.Sa,il(w,F)){if((S=lu(F.width,F.height,Q.Oa,Q.ba))==0){if(w.Aa=0,R=Q.Oa,t((V=w)!=null),R!=null){if(0<(ne=0>(ne=R.Md)?0:100<ne?255:255*ne/100)){for(oe=be=0;4>oe;++oe)12>(Te=V.pb[oe]).lc&&(Te.ia=ne*WY[0>Te.lc?0:Te.lc]>>3),be|=Te.ia;be&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=R.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}(function(le,je){if(le==null)return 0;if(je==null)return xi(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!il(le,je))return 0;if(t(le.cb),je.ac==null||je.ac(je)){je.ob&&(le.L=0);var ke=tb[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=je.v-ke>>4,le.zb=je.j-ke>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=je.o+15+ke>>4,le.Hb=je.va+15+ke>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var Ie=le.ed;for(ke=0;4>ke;++ke){var Oe;if(le.Qa.Cb){var $e=le.Qa.Lb[ke];le.Qa.Fb||($e+=Ie.Tb)}else $e=Ie.Tb;for(Oe=0;1>=Oe;++Oe){var Be=le.gd[ke][Oe],Ye=$e;if(Ie.Pc&&(Ye+=Ie.vd[0],Oe&&(Ye+=Ie.od[0])),0<(Ye=0>Ye?0:63<Ye?63:Ye)){var Ve=Ye;0<Ie.wb&&(Ve=4<Ie.wb?Ve>>2:Ve>>1)>9-Ie.wb&&(Ve=9-Ie.wb),1>Ve&&(Ve=1),Be.dd=Ve,Be.tc=2*Ye+Ve,Be.ld=40<=Ye?2:15<=Ye?1:0}else Be.tc=0;Be.La=Oe}}}ke=0}else xi(le,6,"Frame setup failed"),ke=le.a;if(ke=ke==0){if(ke){le.$c=0,0<le.Aa||(le.Ic=HY);t:{ke=le.Ic,Ie=4*(Ve=le.za);var kt=32*Ve,dt=Ve+1,fr=0<le.L?Ve*(0<le.Aa?2:1):0,wt=(le.Aa==2?2:1)*Ve;if((Be=Ie+832+(Oe=3*(16*ke+tb[le.L])/2*kt)+($e=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=Be)ke=0;else{if(Be>le.Vb){if(le.Vb=0,le.Ec=s(Be),le.Fc=0,le.Ec==null){ke=xi(le,1,"no memory during frame initialization.");break t}le.Vb=Be}Be=le.Ec,Ye=le.Fc,le.Ac=Be,le.Bc=Ye,Ye+=Ie,le.Gd=o(kt,O0),le.Hd=0,le.rb=o(dt+1,Bg),le.sb=1,le.wa=fr?o(fr,Ma):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=Ve),t(!0),le.oc=Be,le.pc=Ye,Ye+=832,le.ya=o(wt,zg),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=Ve),le.R=16*Ve,le.B=8*Ve,Ve=(kt=tb[le.L])*le.R,kt=kt/2*le.B,le.sa=Be,le.ta=Ye+Ve,le.qa=le.sa,le.ra=le.ta+16*ke*le.R+kt,le.Ha=le.qa,le.Ia=le.ra+8*ke*le.B+kt,le.$c=0,Ye+=Oe,le.mb=$e?Be:null,le.nb=$e?Ye:null,t(Ye+$e<=le.Fc+le.Vb),R0(le),i(le.Ac,le.Bc,0,Ie),ke=1}}if(ke){if(je.ka=0,je.y=le.sa,je.O=le.ta,je.f=le.qa,je.N=le.ra,je.ea=le.Ha,je.Vd=le.Ia,je.fa=le.R,je.Rc=le.B,je.F=null,je.J=0,!n3){for(ke=-255;255>=ke;++ke)QO[255+ke]=0>ke?-ke:ke;for(ke=-1020;1020>=ke;++ke)e3[1020+ke]=-128>ke?-128:127<ke?127:ke;for(ke=-112;112>=ke;++ke)t3[112+ke]=-16>ke?-16:15<ke?15:ke;for(ke=-255;510>=ke;++ke)r3[255+ke]=0>ke?0:255<ke?255:ke;n3=1}mu=Ih,Qd=t5,ll=sl,Jr=D0,yn=M0,Ba=e5,ci=q0,ki=Hd,rc=W,av=ce,zh=U0,V0=P,WO=xe,HO=Ae,VO=Wd,GO=Yg,KO=B0,YO=z0,_o[0]=c5,_o[1]=r5,_o[2]=o5,_o[3]=l5,_o[4]=Vl,_o[5]=u5,_o[6]=Gl,_o[7]=d5,_o[8]=Wg,_o[9]=Dh,pu[0]=s5,pu[1]=i5,pu[2]=qg,pu[3]=$0,pu[4]=qd,pu[5]=Ug,pu[6]=a5,nc[0]=h5,nc[1]=n5,nc[2]=Ud,nc[3]=f5,nc[4]=Vg,nc[5]=Hg,nc[6]=F0,ke=1}else ke=0}ke&&(ke=function(Or,Ei){for(Or.M=0;Or.M<Or.Va;++Or.M){var hr,_t=Or.Jc[Or.M&Or.Xb],nt=Or.m,ui=Or;for(hr=0;hr<ui.za;++hr){var or=nt,Lr=ui,In=Lr.Ac,ts=Lr.Bc+4*hr,As=Lr.zc,Zn=Lr.ya[Lr.aa+hr];if(Lr.Qa.Bb?Zn.$b=ue(or,Lr.Pa.jb[0])?2+ue(or,Lr.Pa.jb[2]):ue(or,Lr.Pa.jb[1]):Zn.$b=0,Lr.kc&&(Zn.Ad=ue(or,Lr.Bd)),Zn.Za=!ue(or,145)+0,Zn.Za){var fs=Zn.Ob,Cs=0;for(Lr=0;4>Lr;++Lr){var Pi,Mr=As[0+Lr];for(Pi=0;4>Pi;++Pi){Mr=PY[In[ts+Pi]][Mr];for(var on=o3[ue(or,Mr[0])];0<on;)on=o3[2*on+ue(or,Mr[on])];Mr=-on,In[ts+Pi]=Mr}n(fs,Cs,In,ts,4),Cs+=4,As[0+Lr]=Mr}}else Mr=ue(or,156)?ue(or,128)?1:3:ue(or,163)?2:0,Zn.Ob[0]=Mr,i(In,ts,Mr,4),i(As,0,Mr,4);Zn.Dd=ue(or,142)?ue(or,114)?ue(or,183)?1:3:2:0}if(ui.m.Ka)return xi(Or,7,"Premature end-of-partition0 encountered.");for(;Or.ja<Or.za;++Or.ja){if(ui=_t,or=(nt=Or).rb[nt.sb-1],In=nt.rb[nt.sb+nt.ja],hr=nt.ya[nt.aa+nt.ja],ts=nt.kc?hr.Ad:0)or.la=In.la=0,hr.Za||(or.Na=In.Na=0),hr.Hc=0,hr.Gc=0,hr.ia=0;else{var Jn,ln;if(or=In,In=ui,ts=nt.Pa.Xc,As=nt.ya[nt.aa+nt.ja],Zn=nt.pb[As.$b],Lr=As.ad,fs=0,Cs=nt.rb[nt.sb-1],Mr=Pi=0,i(Lr,fs,0,384),As.Za)var rs=0,jo=ts[3];else{on=s(16);var di=or.Na+Cs.Na;if(di=lv(In,ts[1],di,Zn.Eb,0,on,0),or.Na=Cs.Na=(0<di)+0,1<di)mu(on,0,Lr,fs);else{var Us=on[0]+3>>3;for(on=0;256>on;on+=16)Lr[fs+on]=Us}rs=1,jo=ts[0]}var xn=15&or.la,Oi=15&Cs.la;for(on=0;4>on;++on){var ca=1&Oi;for(Us=ln=0;4>Us;++Us)xn=xn>>1|(ca=(di=lv(In,jo,di=ca+(1&xn),Zn.Sc,rs,Lr,fs))>rs)<<7,ln=ln<<2|(3<di?3:1<di?2:Lr[fs+0]!=0),fs+=16;xn>>=4,Oi=Oi>>1|ca<<7,Pi=(Pi<<8|ln)>>>0}for(jo=xn,rs=Oi>>4,Jn=0;4>Jn;Jn+=2){for(ln=0,xn=or.la>>4+Jn,Oi=Cs.la>>4+Jn,on=0;2>on;++on){for(ca=1&Oi,Us=0;2>Us;++Us)di=ca+(1&xn),xn=xn>>1|(ca=0<(di=lv(In,ts[2],di,Zn.Qc,0,Lr,fs)))<<3,ln=ln<<2|(3<di?3:1<di?2:Lr[fs+0]!=0),fs+=16;xn>>=2,Oi=Oi>>1|ca<<5}Mr|=ln<<4*Jn,jo|=xn<<4<<Jn,rs|=(240&Oi)<<Jn}or.la=jo,Cs.la=rs,As.Hc=Pi,As.Gc=Mr,As.ia=43690&Mr?0:Zn.ia,ts=!(Pi|Mr)}if(0<nt.L&&(nt.wa[nt.Y+nt.ja]=nt.gd[hr.$b][hr.Za],nt.wa[nt.Y+nt.ja].La|=!ts),ui.Ka)return xi(Or,7,"Premature end-of-file encountered.")}if(R0(Or),nt=Ei,ui=1,hr=(_t=Or).D,or=0<_t.L&&_t.M>=_t.zb&&_t.M<=_t.Va,_t.Aa==0)t:{if(hr.M=_t.M,hr.uc=or,Fa(_t,hr),ui=1,hr=(ln=_t.D).Nb,or=(Mr=tb[_t.L])*_t.R,In=Mr/2*_t.B,on=16*hr*_t.R,Us=8*hr*_t.B,ts=_t.sa,As=_t.ta-or+on,Zn=_t.qa,Lr=_t.ra-In+Us,fs=_t.Ha,Cs=_t.Ia-In+Us,Oi=(xn=ln.M)==0,Pi=xn>=_t.Va-1,_t.Aa==2&&Fa(_t,ln),ln.uc)for(ca=(di=_t).D.M,t(di.D.uc),ln=di.yb;ln<di.Hb;++ln){rs=ln,jo=ca;var ks=(ua=(ns=di).D).Nb;Jn=ns.R;var ua=ua.wa[ua.Y+rs],da=ns.sa,Ws=ns.ta+16*ks*Jn+16*rs,fa=ua.dd,An=ua.tc;if(An!=0)if(t(3<=An),ns.L==1)0<rs&&GO(da,Ws,Jn,An+4),ua.La&&YO(da,Ws,Jn,An),0<jo&&VO(da,Ws,Jn,An+4),ua.La&&KO(da,Ws,Jn,An);else{var ha=ns.B,No=ns.qa,ef=ns.ra+8*ks*ha+8*rs,ic=ns.Ha,ns=ns.Ia+8*ks*ha+8*rs;ks=ua.ld,0<rs&&(ki(da,Ws,Jn,An+4,fa,ks),av(No,ef,ic,ns,ha,An+4,fa,ks)),ua.La&&(V0(da,Ws,Jn,An,fa,ks),HO(No,ef,ic,ns,ha,An,fa,ks)),0<jo&&(ci(da,Ws,Jn,An+4,fa,ks),rc(No,ef,ic,ns,ha,An+4,fa,ks)),ua.La&&(zh(da,Ws,Jn,An,fa,ks),WO(No,ef,ic,ns,ha,An,fa,ks))}}if(_t.ia&&alert("todo:DitherRow"),nt.put!=null){if(ln=16*xn,xn=16*(xn+1),Oi?(nt.y=_t.sa,nt.O=_t.ta+on,nt.f=_t.qa,nt.N=_t.ra+Us,nt.ea=_t.Ha,nt.W=_t.Ia+Us):(ln-=Mr,nt.y=ts,nt.O=As,nt.f=Zn,nt.N=Lr,nt.ea=fs,nt.W=Cs),Pi||(xn-=Mr),xn>nt.o&&(xn=nt.o),nt.F=null,nt.J=null,_t.Fa!=null&&0<_t.Fa.length&&ln<xn&&(nt.J=Sn(_t,nt,ln,xn-ln),nt.F=_t.mb,nt.F==null&&nt.F.length==0)){ui=xi(_t,3,"Could not decode alpha data.");break t}ln<nt.j&&(Mr=nt.j-ln,ln=nt.j,t(!(1&Mr)),nt.O+=_t.R*Mr,nt.N+=_t.B*(Mr>>1),nt.W+=_t.B*(Mr>>1),nt.F!=null&&(nt.J+=nt.width*Mr)),ln<xn&&(nt.O+=nt.v,nt.N+=nt.v>>1,nt.W+=nt.v>>1,nt.F!=null&&(nt.J+=nt.v),nt.ka=ln-nt.j,nt.U=nt.va-nt.v,nt.T=xn-ln,ui=nt.put(nt))}hr+1!=_t.Ic||Pi||(n(_t.sa,_t.ta-or,ts,As+16*_t.R,or),n(_t.qa,_t.ra-In,Zn,Lr+8*_t.B,In),n(_t.Ha,_t.Ia-In,fs,Cs+8*_t.B,In))}if(!ui)return xi(Or,6,"Output aborted.")}return 1}(le,je)),je.bc!=null&&je.bc(je),ke&=1}return ke?(le.cb=0,ke):0})(w,F)||(S=w.a)}}else S=w.a}S==0&&Q.Oa!=null&&Q.Oa.fd&&(S=ev(Q.ba))}Q=S}Z=Q!=0?null:11>Z?ee.f.RGBA.eb:ee.f.kb.y}else Z=null;return Z};var g3=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(O,L){for(var k="",T=0;T<4;T++)k+=String.fromCharCode(O[L++]);return k}function d(O,L){return O[L+0]|O[L+1]<<8}function f(O,L){return(O[L+0]|O[L+1]<<8|O[L+2]<<16)>>>0}function m(O,L){return(O[L+0]|O[L+1]<<8|O[L+2]<<16|O[L+3]<<24)>>>0}new c;var h=[0],v=[0],p=[],g=new c,y=e,b=function(O,L){var k={},T=0,B=!1,M=0,G=0;if(k.frames=[],!function(I,$){for(var U=0;U<4;U++)if(I[$+U]!="RIFF".charCodeAt(U))return!0;return!1}(O,L)){for(m(O,L+=4),L+=8;L<O.length;){var z=u(O,L),D=m(O,L+=4);L+=4;var q=D+(1&D);switch(z){case"VP8 ":case"VP8L":k.frames[T]===void 0&&(k.frames[T]={}),(J=k.frames[T]).src_off=B?G:L-8,J.src_size=M+D+8,T++,B&&(B=!1,M=0,G=0);break;case"VP8X":(J=k.header={}).feature_flags=O[L];var K=L+4;J.canvas_width=1+f(O,K),K+=3,J.canvas_height=1+f(O,K),K+=3;break;case"ALPH":B=!0,M=q+8,G=L-8;break;case"ANIM":(J=k.header).bgcolor=m(O,L),K=L+4,J.loop_count=d(O,K),K+=2;break;case"ANMF":var ae,J;(J=k.frames[T]={}).offset_x=2*f(O,L),L+=3,J.offset_y=2*f(O,L),L+=3,J.width=1+f(O,L),L+=3,J.height=1+f(O,L),L+=3,J.duration=f(O,L),L+=3,ae=O[L++],J.dispose=1&ae,J.blend=ae>>1&1}z!="ANMF"&&(L+=q)}return k}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var x=b.header?b.header:null,j=b.frames?b.frames:null;if(x){x.loop_counter=x.loop_count,h=[x.canvas_height],v=[x.canvas_width];for(var N=0;N<j.length&&j[N].blend!=0;N++);}var A=j[0],C=g.WebPDecodeRGBA(y,A.src_off,A.src_size,v,h);A.rgba=C,A.imgwidth=v[0],A.imgheight=h[0];for(var E=0;E<v[0]*h[0]*4;E++)p[E]=C[E];return this.width=v,this.height=h,this.data=p,this}(function(e){var t,r,n,i,s,o,l,c,u,d=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new c,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=I;Object.defineProperty(this,"pdf",{get:function(){return $}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(Y){U=!!Y}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(Y){H=!!Y}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(Y){isNaN(Y)||(re=Y)}});var X=0;Object.defineProperty(this,"posY",{get:function(){return X},set:function(Y){isNaN(Y)||(X=Y)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Y){var Le;typeof Y=="number"?Le=[Y,Y,Y,Y]:((Le=new Array(4))[0]=Y[0],Le[1]=Y.length>=2?Y[1]:Le[0],Le[2]=Y.length>=3?Y[2]:Le[0],Le[3]=Y.length>=4?Y[3]:Le[1]),u.margin=Le}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Y){he=Y}});var se=0;Object.defineProperty(this,"lastBreak",{get:function(){return se},set:function(Y){se=Y}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(Y){ue=Y}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Y){Y instanceof d&&(u=Y)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Y){u.path=Y}});var ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return ge},set:function(Y){ge=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var Le;Le=m(Y),this.ctx.fillStyle=Le.style,this.ctx.isFillTransparent=Le.a===0,this.ctx.fillOpacity=Le.a,this.pdf.setFillColor(Le.r,Le.g,Le.b,{a:Le.a}),this.pdf.setTextColor(Le.r,Le.g,Le.b,{a:Le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var Le=m(Y);this.ctx.strokeStyle=Le.style,this.ctx.isStrokeTransparent=Le.a===0,this.ctx.strokeOpacity=Le.a,Le.a===0?this.pdf.setDrawColor(255,255,255):(Le.a,this.pdf.setDrawColor(Le.r,Le.g,Le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var ve=null,te=null,Ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ne},set:function(Y){ve=null,te=null,Ne=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var Le;if(this.ctx.font=Y,(Le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var ye=Le[1];Le[2];var we=Le[3],_e=Le[4];Le[5];var Qe=Le[6],We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(_e)[2];_e=Math.floor(We==="px"?parseFloat(_e)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(_e)*this.pdf.getFontSize():parseFloat(_e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(_e);var Ge=function(bt){var Nn,xr,Ht=[],rr=bt.trim();if(rr==="")return IS;if(rr in q8)return[q8[rr]];for(;rr!=="";){switch(xr=null,Nn=(rr=W8(rr)).charAt(0)){case'"':case"'":xr=W8e(rr.substring(1),Nn);break;default:xr=H8e(rr)}if(xr===null||(Ht.push(xr[0]),(rr=W8(xr[1]))!==""&&rr.charAt(0)!==","))return IS;rr=rr.replace(/^,/,"")}return Ht}(Qe);if(this.fontFaces){var Ke=function(bt,Nn){var xr=bt.getFontList(),Ht=JSON.stringify(xr);if(ve===null||te!==Ht){var rr=function(Ir){var Ot=[];return Object.keys(Ir).forEach(function(Xr){Ir[Xr].forEach(function(Rt){var Vt=null;switch(Rt){case"bold":Vt={family:Xr,weight:"bold"};break;case"italic":Vt={family:Xr,style:"italic"};break;case"bolditalic":Vt={family:Xr,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:Xr}}Vt!==null&&(Vt.ref={name:Xr,style:Rt},Ot.push(Vt))})}),Ot}(xr);ve=function(Ir){for(var Ot={},Xr=0;Xr<Ir.length;++Xr){var Rt=RS(Ir[Xr]),Vt=Rt.family,sn=Rt.stretch,nr=Rt.style,vt=Rt.weight;Ot[Vt]=Ot[Vt]||{},Ot[Vt][sn]=Ot[Vt][sn]||{},Ot[Vt][sn][nr]=Ot[Vt][sn][nr]||{},Ot[Vt][sn][nr][vt]=Rt}return Ot}(rr.concat(Nn)),te=Ht}return ve}(this.pdf,this.fontFaces),Pt=Ge.map(function(bt){return{family:bt,stretch:"normal",weight:we,style:ye}}),Lt=function(bt,Nn,xr){for(var Ht=(xr=xr||{}).defaultFontFamily||"times",rr=Object.assign({},U8e,xr.genericFontFamilies||{}),Ir=null,Ot=null,Xr=0;Xr<Nn.length;++Xr)if(rr[(Ir=RS(Nn[Xr])).family]&&(Ir.family=rr[Ir.family]),bt.hasOwnProperty(Ir.family)){Ot=bt[Ir.family];break}if(!(Ot=Ot||bt[Ht]))throw new Error("Could not find a font-family for the rule '"+U8(Ir)+"' and default family '"+Ht+"'.");if(Ot=function(Rt,Vt){if(Vt[Rt])return Vt[Rt];var sn=vE[Rt],nr=sn<=vE.normal?-1:1,vt=z8(Vt,YK,sn,nr);if(!vt)throw new Error("Could not find a matching font-stretch value for "+Rt);return vt}(Ir.stretch,Ot),Ot=function(Rt,Vt){if(Vt[Rt])return Vt[Rt];for(var sn=KK[Rt],nr=0;nr<sn.length;++nr)if(Vt[sn[nr]])return Vt[sn[nr]];throw new Error("Could not find a matching font-style for "+Rt)}(Ir.style,Ot),!(Ot=function(Rt,Vt){if(Vt[Rt])return Vt[Rt];if(Rt===400&&Vt[500])return Vt[500];if(Rt===500&&Vt[400])return Vt[400];var sn=q8e[Rt],nr=z8(Vt,XK,sn,Rt<400?-1:1);if(!nr)throw new Error("Could not find a matching font-weight for value "+Rt);return nr}(Ir.weight,Ot)))throw new Error("Failed to resolve a font for the rule '"+U8(Ir)+"'.");return Ot}(Ke,Pt);this.pdf.setFont(Lt.ref.name,Lt.ref.style)}else{var ft="";(we==="bold"||parseInt(we,10)>=700||ye==="bold")&&(ft="bold"),ye==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var Zt="",gr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ht=0;ht<Ge.length;ht++){if(this.pdf.internal.getFont(Ge[ht],ft,{noFallback:!0,disableWarning:!0})!==void 0){Zt=Ge[ht];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(Ge[ht],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Zt=Ge[ht],ft="bold";else if(this.pdf.internal.getFont(Ge[ht],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Zt=Ge[ht],ft="normal";break}}if(Zt===""){for(var qt=0;qt<Ge.length;qt++)if(gr[Ge[qt]]){Zt=gr[Ge[qt]];break}}Zt=Zt===""?"Times":Zt,this.pdf.setFont(Zt,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};f.prototype.setLineDash=function(I){this.lineDash=I},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){j.call(this,"fill",!1)},f.prototype.stroke=function(){j.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(I,$){if(isNaN(I)||isNaN($))throw bn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new o(I,$));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(I,$)},f.prototype.closePath=function(){var I=new o(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&dn(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){I=new o(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},f.prototype.lineTo=function(I,$){if(isNaN(I)||isNaN($))throw bn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new o(I,$));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(U.x,U.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},f.prototype.quadraticCurveTo=function(I,$,U,H){if(isNaN(U)||isNaN(H)||isNaN(I)||isNaN($))throw bn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(U,H)),X=this.ctx.transform.applyToPoint(new o(I,$));this.path.push({type:"qct",x1:X.x,y1:X.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},f.prototype.bezierCurveTo=function(I,$,U,H,re,X){if(isNaN(re)||isNaN(X)||isNaN(I)||isNaN($)||isNaN(U)||isNaN(H))throw bn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(re,X)),se=this.ctx.transform.applyToPoint(new o(I,$)),ue=this.ctx.transform.applyToPoint(new o(U,H));this.path.push({type:"bct",x1:se.x,y1:se.y,x2:ue.x,y2:ue.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},f.prototype.arc=function(I,$,U,H,re,X){if(isNaN(I)||isNaN($)||isNaN(U)||isNaN(H)||isNaN(re))throw bn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(X=!!X,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(I,$));I=he.x,$=he.y;var se=this.ctx.transform.applyToPoint(new o(0,U)),ue=this.ctx.transform.applyToPoint(new o(0,0));U=Math.sqrt(Math.pow(se.x-ue.x,2)+Math.pow(se.y-ue.y,2))}Math.abs(re-H)>=2*Math.PI&&(H=0,re=2*Math.PI),this.path.push({type:"arc",x:I,y:$,radius:U,startAngle:H,endAngle:re,counterclockwise:X})},f.prototype.arcTo=function(I,$,U,H,re){throw new Error("arcTo not implemented.")},f.prototype.rect=function(I,$,U,H){if(isNaN(I)||isNaN($)||isNaN(U)||isNaN(H))throw bn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,$),this.lineTo(I+U,$),this.lineTo(I+U,$+H),this.lineTo(I,$+H),this.lineTo(I,$),this.lineTo(I+U,$),this.lineTo(I,$)},f.prototype.fillRect=function(I,$,U,H){if(isNaN(I)||isNaN($)||isNaN(U)||isNaN(H))throw bn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,$,U,H),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},f.prototype.strokeRect=function(I,$,U,H){if(isNaN(I)||isNaN($)||isNaN(U)||isNaN(H))throw bn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(I,$,U,H),this.stroke())},f.prototype.clearRect=function(I,$,U,H){if(isNaN(I)||isNaN($)||isNaN(U)||isNaN(H))throw bn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,$,U,H))},f.prototype.save=function(I){I=typeof I!="boolean"||I;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage($),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},f.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage($),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(I){var $,U,H,re;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))$=0,U=0,H=0,re=0;else{var X=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(X!==null)$=parseInt(X[1]),U=parseInt(X[2]),H=parseInt(X[3]),re=1;else if((X=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)$=parseInt(X[1]),U=parseInt(X[2]),H=parseInt(X[3]),re=parseFloat(X[4]);else{if(re=1,typeof I=="string"&&I.charAt(0)!=="#"){var he=new zK(I);I=he.ok?he.toHex():"#000000"}I.length===4?($=I.substring(1,2),$+=$,U=I.substring(2,3),U+=U,H=I.substring(3,4),H+=H):($=I.substring(1,3),U=I.substring(3,5),H=I.substring(5,7)),$=parseInt($,16),U=parseInt(U,16),H=parseInt(H,16)}}return{r:$,g:U,b:H,a:re,style:I}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(I,$,U,H){if(isNaN($)||isNaN(U)||typeof I!="string")throw bn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!h.call(this)){var re=q(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;T.call(this,{text:I,x:$,y:U,scale:X,angle:re,align:this.textAlign,maxWidth:H})}},f.prototype.strokeText=function(I,$,U,H){if(isNaN($)||isNaN(U)||typeof I!="string")throw bn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){H=isNaN(H)?void 0:H;var re=q(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;T.call(this,{text:I,x:$,y:U,scale:X,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:H})}},f.prototype.measureText=function(I){if(typeof I!="string")throw bn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,U=this.pdf.internal.scaleFactor,H=$.internal.getFontSize(),re=$.getStringUnitWidth(I)*H/$.internal.scaleFactor;return new function(X){var he=(X=X||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:re*=Math.round(96*U/72*1e4)/1e4})},f.prototype.scale=function(I,$){if(isNaN(I)||isNaN($))throw bn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new c(I,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.rotate=function(I){if(isNaN(I))throw bn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new c(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply($)},f.prototype.translate=function(I,$){if(isNaN(I)||isNaN($))throw bn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new c(1,0,0,1,I,$);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.transform=function(I,$,U,H,re,X){if(isNaN(I)||isNaN($)||isNaN(U)||isNaN(H)||isNaN(re)||isNaN(X))throw bn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new c(I,$,U,H,re,X);this.ctx.transform=this.ctx.transform.multiply(he)},f.prototype.setTransform=function(I,$,U,H,re,X){I=isNaN(I)?1:I,$=isNaN($)?0:$,U=isNaN(U)?0:U,H=isNaN(H)?1:H,re=isNaN(re)?0:re,X=isNaN(X)?0:X,this.ctx.transform=new c(I,$,U,H,re,X)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(I,$,U,H,re,X,he,se,ue){var ge=this.pdf.getImageProperties(I),ve=1,te=1,Ne=1,Y=1;H!==void 0&&se!==void 0&&(Ne=se/H,Y=ue/re,ve=ge.width/H*se/H,te=ge.height/re*ue/re),X===void 0&&(X=$,he=U,$=0,U=0),H!==void 0&&se===void 0&&(se=H,ue=re),H===void 0&&se===void 0&&(se=ge.width,ue=ge.height);var Le=this.ctx.transform.decompose(),ye=q(Le.rotate.shx),we=new c,_e=(we=(we=(we=we.multiply(Le.translate)).multiply(Le.skew)).multiply(Le.scale)).applyToRectangle(new l(X-$*Ne,he-U*Y,H*ve,re*te));if(this.autoPaging){for(var Qe,We=g.call(this,_e),Ge=[],Ke=0;Ke<We.length;Ke+=1)Ge.indexOf(We[Ke])===-1&&Ge.push(We[Ke]);x(Ge);for(var Pt=Ge[0],Lt=Ge[Ge.length-1],ft=Pt;ft<Lt+1;ft++){this.pdf.setPage(ft);var Zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gr=ft===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=ft===1?0:ht+(ft-2)*qt;if(this.ctx.clip_path.length!==0){var Nn=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Qe,this.posX+this.margin[3],-bt+gr+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Nn}var xr=JSON.parse(JSON.stringify(_e));xr=b([xr],this.posX+this.margin[3],-bt+gr+this.ctx.prevPageLastElemOffset)[0];var Ht=(ft>Pt||ft<Lt)&&p.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zt,qt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",xr.x,xr.y,xr.w,xr.h,null,null,ye),Ht&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(I,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,ye)};var g=function(I,$,U){var H=[];$=$||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":H.push(Math.floor((I.y+re)/U)+1);break;case"arc":H.push(Math.floor((I.y+re-I.radius)/U)+1),H.push(Math.floor((I.y+re+I.radius)/U)+1);break;case"qct":var X=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);H.push(Math.floor((X.y+re)/U)+1),H.push(Math.floor((X.y+X.h+re)/U)+1);break;case"bct":var he=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);H.push(Math.floor((he.y+re)/U)+1),H.push(Math.floor((he.y+he.h+re)/U)+1);break;case"rect":H.push(Math.floor((I.y+re)/U)+1),H.push(Math.floor((I.y+I.h+re)/U)+1)}for(var se=0;se<H.length;se+=1)for(;this.pdf.internal.getNumberOfPages()<H[se];)y.call(this);return H},y=function(){var I=this.fillStyle,$=this.strokeStyle,U=this.font,H=this.lineCap,re=this.lineWidth,X=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=$,this.font=U,this.lineCap=H,this.lineWidth=re,this.lineJoin=X},b=function(I,$,U){for(var H=0;H<I.length;H++)switch(I[H].type){case"bct":I[H].x2+=$,I[H].y2+=U;case"qct":I[H].x1+=$,I[H].y1+=U;default:I[H].x+=$,I[H].y+=U}return I},x=function(I){return I.sort(function($,U){return $-U})},j=function(I,$){var U=this.fillStyle,H=this.strokeStyle,re=this.lineCap,X=this.lineWidth,he=Math.abs(X*this.ctx.transform.scaleX),se=this.lineJoin;if(this.autoPaging){for(var ue,ge,ve=JSON.parse(JSON.stringify(this.path)),te=JSON.parse(JSON.stringify(this.path)),Ne=[],Y=0;Y<te.length;Y++)if(te[Y].x!==void 0)for(var Le=g.call(this,te[Y]),ye=0;ye<Le.length;ye+=1)Ne.indexOf(Le[ye])===-1&&Ne.push(Le[ye]);for(var we=0;we<Ne.length;we++)for(;this.pdf.internal.getNumberOfPages()<Ne[we];)y.call(this);x(Ne);for(var _e=Ne[0],Qe=Ne[Ne.length-1],We=_e;We<Qe+1;We++){this.pdf.setPage(We),this.fillStyle=U,this.strokeStyle=H,this.lineCap=re,this.lineWidth=he,this.lineJoin=se;var Ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=We===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=We===1?0:Pt+(We-2)*Lt;if(this.ctx.clip_path.length!==0){var Zt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(ue,this.posX+this.margin[3],-ft+Ke+this.ctx.prevPageLastElemOffset),N.call(this,I,!0),this.path=Zt}if(ge=JSON.parse(JSON.stringify(ve)),this.path=b(ge,this.posX+this.margin[3],-ft+Ke+this.ctx.prevPageLastElemOffset),$===!1||We===0){var gr=(We>_e||We<Qe)&&p.call(this);gr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,Lt,null).clip().discardPath()),N.call(this,I,$),gr&&this.pdf.restoreGraphicsState()}this.lineWidth=X}this.path=ve}else this.lineWidth=he,N.call(this,I,$),this.lineWidth=X},N=function(I,$){if((I!=="stroke"||$||!v.call(this))&&(I==="stroke"||$||!h.call(this))){for(var U,H,re=[],X=this.path,he=0;he<X.length;he++){var se=X[he];switch(se.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:se,deltas:[],abs:[]});break;case"lt":var ue=re.length;if(X[he-1]&&!isNaN(X[he-1].x)&&(U=[se.x-X[he-1].x,se.y-X[he-1].y],ue>0)){for(;ue>=0;ue--)if(re[ue-1].close!==!0&&re[ue-1].begin!==!0){re[ue-1].deltas.push(U),re[ue-1].abs.push(se);break}}break;case"bct":U=[se.x1-X[he-1].x,se.y1-X[he-1].y,se.x2-X[he-1].x,se.y2-X[he-1].y,se.x-X[he-1].x,se.y-X[he-1].y],re[re.length-1].deltas.push(U);break;case"qct":var ge=X[he-1].x+2/3*(se.x1-X[he-1].x),ve=X[he-1].y+2/3*(se.y1-X[he-1].y),te=se.x+2/3*(se.x1-se.x),Ne=se.y+2/3*(se.y1-se.y),Y=se.x,Le=se.y;U=[ge-X[he-1].x,ve-X[he-1].y,te-X[he-1].x,Ne-X[he-1].y,Y-X[he-1].x,Le-X[he-1].y],re[re.length-1].deltas.push(U);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(se)}}H=$?null:I==="stroke"?"stroke":"fill";for(var ye=!1,we=0;we<re.length;we++)if(re[we].arc)for(var _e=re[we].abs,Qe=0;Qe<_e.length;Qe++){var We=_e[Qe];We.type==="arc"?E.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,$,!ye):B.call(this,We.x,We.y),ye=!0}else if(re[we].close===!0)this.pdf.internal.out("h"),ye=!1;else if(re[we].begin!==!0){var Ge=re[we].start.x,Ke=re[we].start.y;M.call(this,re[we].deltas,Ge,Ke),ye=!0}H&&O.call(this,H),$&&L.call(this)}},A=function(I){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-U;case"top":return I+$-U;case"hanging":return I+$-2*U;case"middle":return I+$/2-U;default:return I}},C=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function($,U){this.colorStops.push([$,U])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(I,$,U,H,re,X,he,se,ue){for(var ge=z.call(this,U,H,re,X),ve=0;ve<ge.length;ve++){var te=ge[ve];ve===0&&(ue?k.call(this,te.x1+I,te.y1+$):B.call(this,te.x1+I,te.y1+$)),G.call(this,I,$,te.x2,te.y2,te.x3,te.y3,te.x4,te.y4)}se?L.call(this):O.call(this,he)},O=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(I,$){this.pdf.internal.out(r(I)+" "+n($)+" m")},T=function(I){var $;switch(I.align){case"right":case"end":$="right";break;case"center":$="center";break;default:$="left"}var U,H,re,X=this.pdf.getTextDimensions(I.text),he=A.call(this,I.y),se=C.call(this,he)-X.h,ue=this.ctx.transform.applyToPoint(new o(I.x,he));if(this.autoPaging){var ge=this.ctx.transform.decompose(),ve=new c;ve=(ve=(ve=ve.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var te=this.ctx.transform.applyToRectangle(new l(I.x,he,X.w,X.h)),Ne=ve.applyToRectangle(new l(I.x,se,X.w,X.h)),Y=g.call(this,Ne),Le=[],ye=0;ye<Y.length;ye+=1)Le.indexOf(Y[ye])===-1&&Le.push(Y[ye]);x(Le);for(var we=Le[0],_e=Le[Le.length-1],Qe=we;Qe<_e+1;Qe++){this.pdf.setPage(Qe);var We=Qe===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[2],Pt=Ke-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],ft=Lt-this.margin[3],Zt=Qe===1?0:Ge+(Qe-2)*Pt;if(this.ctx.clip_path.length!==0){var gr=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(U,this.posX+this.margin[3],-1*Zt+We),N.call(this,"fill",!0),this.path=gr}var ht=b([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-Zt+We+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(H=this.pdf.internal.getFontSize(),this.pdf.setFontSize(H*I.scale),re=this.lineWidth,this.lineWidth=re*I.scale);var qt=this.autoPaging!=="text";if(qt||ht.y+ht.h<=Ke){if(qt||ht.y>=We&&ht.x<=Lt){var bt=qt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Lt-ht.x)[0],Nn=b([JSON.parse(JSON.stringify(te))],this.posX+this.margin[3],-Zt+We+this.ctx.prevPageLastElemOffset)[0],xr=qt&&(Qe>we||Qe<_e)&&p.call(this);xr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Pt,null).clip().discardPath()),this.pdf.text(bt,Nn.x,Nn.y,{angle:I.angle,align:$,renderingMode:I.renderingMode}),xr&&this.pdf.restoreGraphicsState()}}else ht.y<Ke&&(this.ctx.prevPageLastElemOffset+=Ke-ht.y);I.scale>=.01&&(this.pdf.setFontSize(H),this.lineWidth=re)}}else I.scale>=.01&&(H=this.pdf.internal.getFontSize(),this.pdf.setFontSize(H*I.scale),re=this.lineWidth,this.lineWidth=re*I.scale),this.pdf.text(I.text,ue.x+this.posX,ue.y+this.posY,{angle:I.angle,align:$,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(H),this.lineWidth=re)},B=function(I,$,U,H){U=U||0,H=H||0,this.pdf.internal.out(r(I+U)+" "+n($+H)+" l")},M=function(I,$,U){return this.pdf.lines(I,$,U,null,null)},G=function(I,$,U,H,re,X,he,se){this.pdf.internal.out([t(i(U+I)),t(s(H+$)),t(i(re+I)),t(s(X+$)),t(i(he+I)),t(s(se+$)),"c"].join(" "))},z=function(I,$,U,H){for(var re=2*Math.PI,X=Math.PI/2;$>U;)$-=re;var he=Math.abs(U-$);he<re&&H&&(he=re-he);for(var se=[],ue=H?-1:1,ge=$;he>1e-5;){var ve=ge+ue*Math.min(he,X);se.push(D.call(this,I,ge,ve)),he-=Math.abs(ve-ge),ge=ve}return se},D=function(I,$,U){var H=(U-$)/2,re=I*Math.cos(H),X=I*Math.sin(H),he=re,se=-X,ue=he*he+se*se,ge=ue+he*re+se*X,ve=4/3*(Math.sqrt(2*ue*ge)-ge)/(he*X-se*re),te=he-ve*se,Ne=se+ve*he,Y=te,Le=-Ne,ye=H+$,we=Math.cos(ye),_e=Math.sin(ye);return{x1:I*Math.cos($),y1:I*Math.sin($),x2:te*we-Ne*_e,y2:te*_e+Ne*we,x3:Y*we-Le*_e,y3:Y*_e+Le*we,x4:I*Math.cos(U),y4:I*Math.sin(U)}},q=function(I){return 180*I/Math.PI},K=function(I,$,U,H,re,X){var he=I+.5*(U-I),se=$+.5*(H-$),ue=re+.5*(U-re),ge=X+.5*(H-X),ve=Math.min(I,re,he,ue),te=Math.max(I,re,he,ue),Ne=Math.min($,X,se,ge),Y=Math.max($,X,se,ge);return new l(ve,Ne,te-ve,Y-Ne)},ae=function(I,$,U,H,re,X,he,se){var ue,ge,ve,te,Ne,Y,Le,ye,we,_e,Qe,We,Ge,Ke,Pt=U-I,Lt=H-$,ft=re-U,Zt=X-H,gr=he-re,ht=se-X;for(ge=0;ge<41;ge++)we=(Le=(ve=I+(ue=ge/40)*Pt)+ue*((Ne=U+ue*ft)-ve))+ue*(Ne+ue*(re+ue*gr-Ne)-Le),_e=(ye=(te=$+ue*Lt)+ue*((Y=H+ue*Zt)-te))+ue*(Y+ue*(X+ue*ht-Y)-ye),ge==0?(Qe=we,We=_e,Ge=we,Ke=_e):(Qe=Math.min(Qe,we),We=Math.min(We,_e),Ge=Math.max(Ge,we),Ke=Math.max(Ke,_e));return new l(Math.round(Qe),Math.round(We),Math.round(Ge-Qe),Math.round(Ke-We))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,$,U=(I=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:$}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(Nt.API),function(e){var t=function(o){var l,c,u,d,f,m,h,v,p,g;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(m=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(v=f%85))/85)-(h=f%85))/85)%85,c.push(m+33,h+33,v+33,p+33,g+33)):c.push(122);return function(y,b){for(var x=b;x>0;x--)y.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,m=String,h="length",v=255,p="charCodeAt",g="slice",y="replace";for(o[g](-2),o=o[g](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[g](o[h]%5||5))[h];f>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(v&c>>24,v&c>>16,v&c>>8,v&c);return function(b,x){for(var j=x;j>0;j--)b.pop()}(u,l[h]),m.fromCharCode.apply(m,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=iE(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Nt.API),function(e){e.loadFile=function(t,r,n){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,m=0,h=function(v){var p=v.length,g=[],y=String.fromCharCode;for(m=0;m<p;m+=1)g.push(y(255&v.charCodeAt(m)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(i,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Nt.API),function(e){function t(){return(Qt.html2canvas?Promise.resolve(Qt.html2canvas):uS(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Qt.DOMPurify?Promise.resolve(Qt.DOMPurify):uS(()=>import("./purify.es-C5KSVp3G.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=dn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var v=d[h],p=v.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,u.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return u.updateProgress(null,d),m}).then(d,f).then(function(m){return u.updateProgress(1),m})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),m=u.call(f,l,c);return o.convert(m,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Nt.getPageSize=function(l,c,u){if(dn(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,m=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var v,p=0,g=0;if(h.hasOwnProperty(m))p=h[m][1]/f,g=h[m][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(v=g,g=p,p=v);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(v=g,g=p,p=v)}return{width:g,height:p,unit:c,k:f,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(RS):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(Nt.API),Nt.API.addJS=function(e){return V8=e,this.internal.events.subscribe("postPutResources",function(){p1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(p1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),H8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+V8+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){p1!==void 0&&H8!==void 0&&this.internal.out("/Names <</JavaScript "+p1+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var m=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var o={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(Nt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var m,h=256*f.charCodeAt(4)+f.charCodeAt(5),v=f.length,p={width:0,height:0,numcomponents:1},g=4;g<v;g+=2){if(g+=h,t.indexOf(f.charCodeAt(g+1))!==-1){m=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:m,numcomponents:f.charCodeAt(g+9)};break}h=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:i}}return d}}(Nt.API),Nt.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,s=k8e(e,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;i=u&&c===1?function(E){for(var O=E.width,L=E.height,k=E.data,T=E.palette,B=E.depth,M=!1,G=[],z=[],D=void 0,q=!1,K=0,ae=0;ae<T.length;ae++){var J=BM(T[ae],4),I=J[0],$=J[1],U=J[2],H=J[3];G.push(I,$,U),H!=null&&(H===0?(K++,z.length<1&&z.push(ae)):H<255&&(q=!0))}if(q||K>1){M=!0,z=void 0;var re=O*L;D=new Uint8Array(re);for(var X=new DataView(k.buffer),he=0;he<re;he++){var se=DS(X,he,B),ue=BM(T[se],4)[3];D[he]=ue}}else K===0&&(z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:k,alphaBytes:D,needSMask:M,palette:G,mask:z}}(s):c===2||c===4?function(E){for(var O=E.data,L=E.width,k=E.height,T=E.channels,B=E.depth,M=T===2?"DeviceGray":"DeviceRGB",G=T-1,z=L*k,D=G,q=z*D,K=1*z,ae=Math.ceil(q*B/8),J=Math.ceil(K*B/8),I=new Uint8Array(ae),$=new Uint8Array(J),U=new DataView(O.buffer),H=new DataView(I.buffer),re=new DataView($.buffer),X=!1,he=0;he<z;he++){for(var se=he*T,ue=0;ue<D;ue++)t$(H,DS(U,se+ue,B),he*D+ue,B);var ge=DS(U,se+D,B);ge<(1<<B)-1&&(X=!0),t$(re,ge,1*he,B)}return{colorSpace:M,colorsPerPixel:G,sMaskBitsPerComponent:X?B:void 0,colorBytes:I,alphaBytes:$,needSMask:X}}(s):function(E){var O=E.data,L=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:L,colorsPerPixel:L==="DeviceGray"?1:3,colorBytes:O instanceof Uint16Array?function(k){for(var T=k.length,B=new Uint8Array(2*T),M=new DataView(B.buffer,B.byteOffset,B.byteLength),G=0;G<T;G++)M.setUint16(2*G,k[G],!1);return B}(O):O,needSMask:!1}}(s);var f,m,h,v=i,p=v.colorSpace,g=v.colorsPerPixel,y=v.sMaskBitsPerComponent,b=v.colorBytes,x=v.alphaBytes,j=v.needSMask,N=v.palette,A=v.mask,C=null;return n!==Nt.API.image_compression.NONE&&typeof iE=="function"?(C=function(E){var O;switch(E){case Nt.API.image_compression.FAST:O=11;break;case Nt.API.image_compression.MEDIUM:O=13;break;case Nt.API.image_compression.SLOW:O=14;break;default:O=12}return O}(n),f=this.decode.FLATE_DECODE,m="/Predictor ".concat(C," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(o),e=X8(b,Math.ceil(o*g*d/8),g,d,n),j&&(h=X8(x,Math.ceil(o*y/8),1,y,n))):(f=void 0,m=void 0,e=b,j&&(h=x)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:e,index:t,filter:f,decodeParameters:m,transparency:A,palette:N,sMask:h,predictor:C,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:p}}},function(e){e.processGIF89A=function(t,r,n,i){var s=new Y8e(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new MS(100).encode(u,100);return e.processJPEG.call(this,d,r,n,i)},e.processGIF87A=e.processGIF89A}(Nt.API),ko.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ko.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){bn.log("bit decode error:"+r)}},ko.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},ko.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},ko.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},ko.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},ko.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},ko.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},ko.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=o}},ko.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,i){var s=new ko(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new MS(100).encode(c,100);return e.processJPEG.call(this,u,r,n,i)}}(Nt.API),n$.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,i){var s=new n$(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new MS(100).encode(c,100);return e.processJPEG.call(this,u,r,n,i)}}(Nt.API),Nt.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,u=0;u<i;u+=4){var d=n[u],f=n[u+1],m=n[u+2],h=n[u+3];s[l++]=d,s[l++]=f,s[l++]=m,o[c++]=h}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Nt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},am=Nt.API,g1=am.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,m=0,h=e.length,v=0,p=l[0]||c,g=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(m=f&&dn(u[n])==="object"&&!isNaN(parseInt(u[n][v],10))?u[n][v]/d:0,g.push((l[n]||p)/c+m)),v=n;return g},G8=am.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return am.processArabic&&(e=am.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:g1.apply(this,arguments).reduce(function(s,o){return s+o},0)},K8=function(e,t,r,n){for(var i=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;i.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(i.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&i.push(e.slice(c,s)),i},Y8=function(e,t,r){r||(r={});var n,i,s,o,l,c,u,d=[],f=[d],m=r.textIndent||0,h=0,v=0,p=e.split(" "),g=g1.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),b=[];p.map(function(j){(j=j.split(/\s*\n/)).length>1?b=b.concat(j.map(function(N,A){return(A&&N.length?`
`:"")+N})):b.push(j[0])}),p=b,c=G8.apply(this,[y,r])}for(s=0,o=p.length;s<o;s++){var x=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),x=1),m+h+(v=(i=g1.apply(this,[n,r])).reduce(function(j,N){return j+N},0))>t||x){if(v>t){for(l=K8.apply(this,[n,i,t-(m+h),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);v=i.slice(n.length-(d[0]?d[0].length:0)).reduce(function(j,N){return j+N},0)}else d=[n];f.push(d),m=v+c,h=g}else d.push(n),m+=h+v,h=g}return u=c?function(j,N){return(N?y:"")+j.join(" ")}:function(j){return j.join(" ")},f.map(u)},am.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),m="Unicode";return f.metadata[m]?{widths:f.metadata[m].widths||{0:1},kerning:f.metadata[m].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(Y8.apply(this,[n[l],o,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=t[s],i[t[s]]=r[s];var o=function(m){return"0x"+parseInt(m,10).toString(16)},l=e.__fontmetrics__.compress=function(m){var h,v,p,g,y=["{"];for(var b in m){if(h=m[b],isNaN(parseInt(b,10))?v="'"+b+"'":(b=parseInt(b,10),v=(v=o(b).slice(2)).slice(0,-1)+i[v.slice(-1)]),typeof h=="number")h<0?(p=o(h).slice(3),g="-"):(p=o(h).slice(2),g=""),p=g+p.slice(0,-1)+i[p.slice(-1)];else{if(dn(h)!=="object")throw new Error("Don't know what to do with value type "+dn(h)+".");p=l(h)}y.push(v+p)}return y.push("}"),y.join("")},c=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,v,p,g,y={},b=1,x=y,j=[],N="",A="",C=m.length-1,E=1;E<C;E+=1)(g=m[E])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(j.push([x,p]),x={},p=void 0):g=="}"?((v=j.pop())[0][v[1]]=x,p=void 0,x=v[0]):g=="-"?b=-1:p===void 0?n.hasOwnProperty(g)?(N+=n[g],p=parseInt(N,16)*b,b=1,N=""):N+=g:n.hasOwnProperty(g)?(A+=n[g],x[p]=parseInt(A,16)*b,b=1,p=void 0,A=""):A+=g;return y},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var h=m.font,v=f.Unicode[h.postScriptName];v&&(h.metadata.Unicode={},h.metadata.Unicode.widths=v.widths,h.metadata.Unicode.kerning=v.kerning);var p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(Nt.API),function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(G1(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(Nt),Nt.API.addSvgAsImage=function(e,t,r,n,i,s,o,l){if(isNaN(t)||isNaN(r))throw bn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw bn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Qt.canvg?Promise.resolve(Qt.canvg):uS(()=>import("./index.es-C-Gf1gF4.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,i,o,l)})},Nt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},Nt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function m(v,p){var g,y=!1;for(g=0;g<v.length;g+=1)v[g]===p&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=l.length;for(f=0;f<h;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(dn(e)==="object"){for(i in e)if(s=e[i],m(l,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&m(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,p=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?p.push("/"+v+" /"+r[v].value):p.push("/"+v+" "+r[v].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Nt.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,m=s.length;f<m;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,m=(l=Object.keys(s).sort(function(h,v){return h-v})).length;f<m;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",v=0;v<m.length;v++)h+=String.fromCharCode(m[v]);var p=u();d({data:h,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+pm(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+pm(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+pm(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,m="",h=0;h<f.length;h++)m+=String.fromCharCode(f[h]);var v=u();d({data:m,addLength1:!0,objectId:v}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+pm(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+pm(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},m=f.pdfEscape,h=f.activeFontKey,v=f.fonts,p=h,g="",y=0,b="",x=v[p].encoding;if(v[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(b=l,p=h,Array.isArray(l)&&(b=l[0]),y=0;y<b.length;y+=1)v[p].metadata.hasOwnProperty("cmap")&&(o=v[p].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),o||b[y].charCodeAt(0)<256&&v[p].metadata.hasOwnProperty("Unicode")?g+=b[y]:g+="";var j="";return parseInt(p.slice(1))<14||x==="WinAnsiEncoding"?j=m(g,p).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(j=r(g,v[p])),f.isHex=!0,{text:j,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(i(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:o})).text}])}(Nt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Nt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,s,o,l,c,u,d,f=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,x=0;this.__bidiEngine__={};var j=function(k){var T=k.charCodeAt(),B=T>>8,M=p[B];return M!==void 0?f[256*M+(255&T)]:B===252||B===253?"AL":y.test(B)?"L":B===8?"R":"N"},N=function(k){for(var T,B=0;B<k.length;B++){if((T=j(k.charAt(B)))==="L")return!1;if(T==="R")return!0}return!1},A=function(k,T,B,M){var G,z,D,q,K=T[M];switch(K){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(K="AN");break;case"AL":b=!0,K="R";break;case"WS":case"BN":K="N";break;case"CS":M<1||M+1>=T.length||(G=B[M-1])!=="EN"&&G!=="AN"||(z=T[M+1])!=="EN"&&z!=="AN"?K="N":b&&(z="AN"),K=z===G?z:"N";break;case"ES":K=(G=M>0?B[M-1]:"B")==="EN"&&M+1<T.length&&T[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&B[M-1]==="EN"){K="EN";break}if(b){K="N";break}for(D=M+1,q=T.length;D<q&&T[D]==="ET";)D++;K=D<q&&T[D]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(q=T.length,D=M+1;D<q&&T[D]==="NSM";)D++;if(D<q){var ae=k[M],J=ae>=1425&&ae<=2303||ae===64286;if(G=T[D],J&&(G==="R"||G==="AL")){K="R";break}}}K=M<1||(G=T[M-1])==="B"?"N":B[M-1];break;case"B":b=!1,i=!0,K=x;break;case"S":s=!0,K="N"}return K},C=function(k,T,B){var M=k.split("");return B&&E(M,B,{hiLevel:x}),M.reverse(),T&&T.reverse(),M.join("")},E=function(k,T,B){var M,G,z,D,q,K=-1,ae=k.length,J=0,I=[],$=x?h:m,U=[];for(b=!1,i=!1,s=!1,G=0;G<ae;G++)U[G]=j(k[G]);for(z=0;z<ae;z++){if(q=J,I[z]=A(k,U,I,z),M=240&(J=$[q][v[I[z]]]),J&=15,T[z]=D=$[J][5],M>0)if(M===16){for(G=K;G<z;G++)T[G]=1;K=-1}else K=-1;if($[J][6])K===-1&&(K=z);else if(K>-1){for(G=K;G<z;G++)T[G]=D;K=-1}U[z]==="B"&&(T[z]=0),B.hiLevel|=D}s&&function(H,re,X){for(var he=0;he<X;he++)if(H[he]==="S"){re[he]=x;for(var se=he-1;se>=0&&H[se]==="WS";se--)re[se]=x}}(U,T,ae)},O=function(k,T,B,M,G){if(!(G.hiLevel<k)){if(k===1&&x===1&&!i)return T.reverse(),void(B&&B.reverse());for(var z,D,q,K,ae=T.length,J=0;J<ae;){if(M[J]>=k){for(q=J+1;q<ae&&M[q]>=k;)q++;for(K=J,D=q-1;K<D;K++,D--)z=T[K],T[K]=T[D],T[D]=z,B&&(z=B[K],B[K]=B[D],B[D]=z);J=q}J++}}},L=function(k,T,B){var M=k.split(""),G={hiLevel:x};return B||(B=[]),E(M,B,G),function(z,D,q){if(q.hiLevel!==0&&d)for(var K,ae=0;ae<z.length;ae++)D[ae]===1&&(K=g.indexOf(z[ae]))>=0&&(z[ae]=g[K+1])}(M,B,G),O(2,M,T,B,G),O(1,M,T,B,G),M.join("")};return this.__bidiEngine__.doBidiReorder=function(k,T,B){if(function(G,z){if(z)for(var D=0;D<G.length;D++)z[D]=D;l===void 0&&(l=N(G)),u===void 0&&(u=N(G))}(k,T),o||!c||u)if(o&&c&&l^u)x=l?1:0,k=C(k,T,B);else if(!o&&c&&u)x=l?1:0,k=L(k,T,B),k=C(k,T);else if(!o||l||c||u){if(o&&!c&&l^u)k=C(k,T),l?(x=0,k=L(k,T,B)):(x=1,k=L(k,T,B),k=C(k,T));else if(o&&l&&!c&&u)x=1,k=L(k,T,B),k=C(k,T);else if(!o&&!c&&l^u){var M=d;l?(x=1,k=L(k,T,B),x=0,d=!1,k=L(k,T,B),d=M):(x=0,k=L(k,T,B),k=C(k,T),x=1,d=!1,k=L(k,T,B),d=M,k=C(k,T))}}else x=0,k=L(k,T,B);else x=l?1:0,k=L(k,T,B);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,u=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([r.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([r.doBidiReorder(i[l])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(Nt),Nt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Ad(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new u$e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new X8e(this.contents),this.head=new J8e(this),this.name=new n$e(this),this.cmap=new JK(this),this.toUnicode={},this.hhea=new Q8e(this),this.maxp=new i$e(this),this.hmtx=new s$e(this),this.post=new t$e(this),this.os2=new e$e(this),this.loca=new c$e(this),this.glyf=new a$e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var tl,Ad=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,s;for(s=[],n=0,i=t.length;n<i;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),X8e=function(){var e;function t(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,s,o,l,c,u,d,f,m,h,v,p;for(p in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),d=16*h-f,(i=new Ad).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(o),i.writeShort(d),s=16*h,u=i.pos+s,l=null,v=[],r)for(m=r[p],i.writeString(p),i.writeInt(e(m)),i.writeInt(u),i.writeInt(m.length),v=v.concat(m),p==="head"&&(l=u),u+=m.length;u%4;)v.push(0),u++;return i.write(v),n=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(n),i.data},e=function(r){var n,i,s,o;for(r=QK.call(r);r.length%4;)r.push(0);for(s=new Ad(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=s.readUInt32();return 4294967295&i},t}(),Z8e={}.hasOwnProperty,Wl=function(e,t){for(var r in t)Z8e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};tl=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var J8e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ad).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),i$=function(){function e(t,r){var n,i,s,o,l,c,u,d,f,m,h,v,p,g,y,b,x;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),m=h/2,t.pos+=6,s=function(){var j,N;for(N=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)N.push(t.readUInt16());return N}(),t.pos+=2,p=function(){var j,N;for(N=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)N.push(t.readUInt16());return N}(),u=function(){var j,N;for(N=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)N.push(t.readUInt16());return N}(),d=function(){var j,N;for(N=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)N.push(t.readUInt16());return N}(),i=(this.length-t.pos+this.offset)/2,l=function(){var j,N;for(N=[],c=j=0;0<=i?j<i:j>i;c=0<=i?++j:--j)N.push(t.readUInt16());return N}(),c=y=0,x=s.length;y<x;c=++y)for(g=s[c],n=b=v=p[c];v<=g?b<=g:b>=g;n=v<=g?++b:--b)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-v)-(m-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,i,s,o,l,c,u,d,f,m,h,v,p,g,y,b,x,j,N,A,C,E,O,L,k,T,B,M,G,z,D,q,K,ae,J,I,$,U,H,re,X,he,se,ue,ge,ve;switch(M=new Ad,o=Object.keys(t).sort(function(te,Ne){return te-Ne}),r){case"macroman":for(p=0,g=function(){var te=[];for(v=0;v<256;++v)te.push(0);return te}(),b={0:0},s={},G=0,K=o.length;G<K;G++)b[se=t[i=o[G]]]==null&&(b[se]=++p),s[i]={old:t[i],new:b[t[i]]},g[i]=b[t[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(g),{charMap:s,subtable:M.data,maxGlyphID:p+1};case"unicode":for(T=[],f=[],x=0,b={},n={},y=u=null,z=0,ae=o.length;z<ae;z++)b[N=t[i=o[z]]]==null&&(b[N]=++x),n[i]={old:N,new:b[N]},l=b[N]-i,y!=null&&l===u||(y&&f.push(y),T.push(i),u=l),y=i;for(y&&f.push(y),f.push(65535),T.push(65535),L=2*(O=T.length),E=2*Math.pow(Math.log(O)/Math.LN2,2),m=Math.log(E/2)/Math.LN2,C=2*O-E,c=[],A=[],h=[],v=D=0,J=T.length;D<J;v=++D){if(k=T[v],d=f[v],k===65535){c.push(0),A.push(0);break}if(k-(B=n[k].new)>=32768)for(c.push(0),A.push(2*(h.length+O-v)),i=q=k;k<=d?q<=d:q>=d;i=k<=d?++q:--q)h.push(n[i].new);else c.push(B-k),A.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*O+2*h.length),M.writeUInt16(0),M.writeUInt16(L),M.writeUInt16(E),M.writeUInt16(m),M.writeUInt16(C),X=0,I=f.length;X<I;X++)i=f[X],M.writeUInt16(i);for(M.writeUInt16(0),he=0,$=T.length;he<$;he++)i=T[he],M.writeUInt16(i);for(ue=0,U=c.length;ue<U;ue++)l=c[ue],M.writeUInt16(l);for(ge=0,H=A.length;ge<H;ge++)j=A[ge],M.writeUInt16(j);for(ve=0,re=h.length;ve<re;ve++)p=h[ve],M.writeUInt16(p);return{charMap:n,subtable:M.data,maxGlyphID:x+1}}},e}(),JK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new i$(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=i$.encode(t,r),(i=new Ad).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),Q8e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),e$e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),t$e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),r$e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},n$e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,s,o,l,c,u,d,f,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)i=n[s],t.pos=i.offset,u=t.readString(i.length),o=new r$e(u,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),i$e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),s$e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,s,o,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,f,m;for(m=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],m.push(s.advance);return m}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),QK=[].slice,a$e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,s,o,l,c,u,d,f;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(t),(i=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(l=new Ad(r.read(i))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=o===-1?new l$e(l,u,f,c,d):new o$e(l,o,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)i=t[r[l]],s.push(o.length),i&&(o=o.concat(i.encode(n)));return s.push(o.length),{table:o,offsets:s}},e}(),o$e=function(){function e(t,r,n,i,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),l$e=function(){function e(t,r,n,i,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Ad(QK.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),c$e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Wl(e,tl),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<n.length;++o)if(n[o]=i,s<r.length&&r[s]==o){++s,n[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),u$e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,s,o,l,c;for(i={},o=0,l=t.length;o<l;o++)i[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],i[s]=n;return i},e.prototype.encode=function(t,r){var n,i,s,o,l,c,u,d,f,m,h,v,p,g,y;for(i in n=JK.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},y=n.charMap)h[(c=y[i]).old]=c.new;for(v in m=n.maxGlyphID,o)v in h||(h[v]=m++);return d=function(b){var x,j;for(x in j={},b)j[b[x]]=x;return j}(h),f=Object.keys(d).sort(function(b,x){return b-x}),p=function(){var b,x,j;for(j=[],b=0,x=f.length;b<x;b++)l=f[b],j.push(d[l]);return j}(),s=this.font.glyf.encode(o,p,h),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e}();Nt.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)o=r[i],s.push("/"+i+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function eY(e,t,r,n,i){n=n||{};var s=1.15,o=i.internal.scaleFactor,l=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,m=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=m/2*u:n.valign==="bottom"&&(r-=m*u),n.halign==="center"||n.halign==="right"){var h=l;if(n.halign==="center"&&(h*=.5),f&&m>=1){for(var v=0;v<f.length;v++)i.text(f[v],t-i.getStringUnitWidth(f[v])*h,r),r+=u;return i}t-=i.getStringUnitWidth(e)*h}return n.halign==="justify"?i.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(e,t,r),i}var s$={},sp=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:s$=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,i,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,i,s){return this.jsPDFDocument.rect(t,r,n,i,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return s$||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),yE=function(e,t){return yE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},yE(e,t)};function tY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");yE(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var rY=function(e){tY(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function d$e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function f$e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function J2(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],i=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function nY(e,t,r,n){var i=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:s});var o=iY(i,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function iY(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Xj(e,t){var r,n,i,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(i=e.right)!==null&&i!==void 0?i:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function sY(e,t){var r=Xj(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function h$e(e,t,r,n,i){var s={},o=1.3333333333333333,l=$S(t,function(x){return i.getComputedStyle(x).backgroundColor});l!=null&&(s.fillColor=l);var c=$S(t,function(x){return i.getComputedStyle(x).color});c!=null&&(s.textColor=c);var u=p$e(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var h=(parseFloat(m)||0)/f;h&&(s.lineWidth=h)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var v=$S(t,function(x){return i.getComputedStyle(x)[d]});v!=null&&(s.lineColor=v);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var g=parseInt(n.fontSize||"");isNaN(g)||(s.fontSize=g/o);var y=m$e(n);y&&(s.fontStyle=y);var b=(n.fontFamily||"").toLowerCase();return e.indexOf(b)!==-1&&(s.font=b),s}function m$e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function $S(e,t){var r=aY(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function aY(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:aY(e.parentElement,t):r}function p$e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=Xj(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function oY(e,t,r,n,i){var s,o;n===void 0&&(n=!1),i===void 0&&(i=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],m=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:m};for(var h=0;h<l.rows.length;h++){var v=l.rows[h],p=(o=(s=v==null?void 0:v.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),g=g$e(c,u,r,v,n,i);g&&(p==="thead"?d.push(g):p==="tfoot"?m.push(g):f.push(g))}return{head:d,body:f,foot:m}}function g$e(e,t,r,n,i,s){for(var o=new rY(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(i||u.display!=="none"){var d=void 0;s&&(d=h$e(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:v$e(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(i||f.display!=="none"))return o}function v$e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function y$e(e,t,r){for(var n=0,i=[e,t,r];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Sc(e,t,r,n,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function lY(e,t){var r=new sp(e),n=r.getDocumentOptions(),i=r.getGlobalOptions();y$e(i,n,t);var s=Sc({},i,n,t),o;typeof window<"u"&&(o=window);var l=x$e(i,n,t),c=b$e(i,n,t),u=w$e(r,s),d=j$e(r,s,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function x$e(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=Sc({},u,d,f)}else{var m=[e,t,r],h=m.map(function(v){return v[c]||{}});n[c]=Sc({},h[0],h[1],h[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];i(l)}return n}function b$e(e,t,r){for(var n=[e,t,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&i.didParseCell.push(l.didParseCell),l.willDrawCell&&i.willDrawCell.push(l.willDrawCell),l.didDrawCell&&i.didDrawCell.push(l.didDrawCell),l.willDrawPage&&i.willDrawPage.push(l.willDrawPage),l.didDrawPage&&i.didDrawPage.push(l.didDrawPage)}return i}function w$e(e,t){var r,n,i,s,o,l,c,u,d,f,m,h,v=Xj(t.margin,40/e.scaleFactor()),p=(r=_$e(e,t.startY))!==null&&r!==void 0?r:v.top,g;t.showFoot===!0?g="everyPage":t.showFoot===!1?g="never":g=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var b=(s=t.useCss)!==null&&s!==void 0?s:!1,x=t.theme||(b?"plain":"striped"),j=!!t.horizontalPageBreak,N=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:b,theme:x,startY:p,margin:v,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:g,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(m=t.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:j,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:(h=t.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function _$e(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),i=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===i}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function j$e(e,t,r){var n=t.head||[],i=t.body||[],s=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=oY(e,t.html,r,o,t.useCss)||{};n=l.head||n,i=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||N$e(n,i,s);return{columns:c,head:n,body:i,foot:s}}function N$e(e,t,r){var n=e[0]||t[0]||r[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=i.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};i.push(d)}}),i}var xE=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),S$e=function(e){tY(t,e);function t(r,n,i,s,o,l){var c=e.call(this,r,n,l)||this;return c.cell=i,c.row=s,c.column=o,c.section=s.section,c}return t}(xE),A$e=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,i,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new S$e(t,this,n,i,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new xE(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new xE(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),cY=function(){function e(t,r,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof rY&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,i){var s;return Math.max(n,((s=r.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(i,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>i?u:i},0)},e}(),uY=function(){function e(t,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*r,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Xj(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),C$e=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,i=t.allRows();n<i.length;n++){var s=i[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function k$e(e,t){E$e(e,t);var r=[],n=0;t.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(t);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var i=t.getWidth(e.pageSize().width)-n;i&&(i=bE(r,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=bE(r,i,function(s){return s.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),O$e(t),T$e(t,e),P$e(t)}function E$e(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,i=sY(e,t);t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=J2(u.text,u.styles,e)+f;var m=J2(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function bE(e,t,r){for(var n=t,i=e.reduce(function(h,v){return h+v.wrappedWidth},0),s=0;s<e.length;s++){var o=e[s],l=o.wrappedWidth/i,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var m=e.filter(function(h){return t<0?h.width>r(h):!0});m.length&&(t=bE(m,t,r))}return t}function P$e(e){for(var t={},r=1,n=e.allRows(),i=0;i<n.length;i++)for(var s=n[i],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-i,m=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:m,row:s}}}}}function O$e(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],i=null,s=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])s+=c.width,delete n.cells[c.index];else if(i){var u=i;delete n.cells[c.index],i=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){i=u,s+=c.width;continue}u.width=c.width+s}}}function T$e(e,t){for(var r={count:0,height:0},n=0,i=e.allRows();n<i.length;n++){for(var s=i[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=a$(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=a$(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<m*u.rowSpan?r={height:m,count:u.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>s.height&&(s.height=m)}}r.count--}}function a$(e,t,r,n,i){return e.map(function(s){return L$e(s,t,r,n,i)})}function L$e(e,t,r,n,i){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=J2(e,r,n))return e;for(;t<J2(e+i,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}function dY(e,t){var r=new sp(e),n=R$e(t,r.scaleFactor()),i=new A$e(t,n);return k$e(r,i),r.applyStyles(r.userStyles),i}function R$e(e,t){var r=e.content,n=D$e(r.columns);if(r.head.length===0){var i=o$(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=o$(n,"foot");i&&r.foot.push(i)}var s=e.settings.theme,o=e.styles;return{columns:n,head:FS("head",r.head,n,o,s,t),body:FS("body",r.body,n,o,s,t),foot:FS("foot",r.foot,n,o,s,t)}}function FS(e,t,r,n,i,s){var o={},l=t.map(function(c,u){for(var d=0,f={},m=0,h=0,v=0,p=r;v<p.length;v++){var g=p[v];if(o[g.index]==null||o[g.index].left===0)if(h===0){var y=void 0;Array.isArray(c)?y=c[g.index-m-d]:y=c[g.dataKey];var b={};typeof y=="object"&&!Array.isArray(y)&&(b=(y==null?void 0:y.styles)||{});var x=M$e(e,g,u,i,n,s,b),j=new uY(y,x,e);f[g.dataKey]=j,f[g.index]=j,h=j.colSpan-1,o[g.index]={left:j.rowSpan-1,times:h}}else h--,m++;else o[g.index].left--,h=o[g.index].times,d++}return new cY(c,u,e,f)});return l}function o$(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var i=I$e(t,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function I$e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function D$e(e){return e.map(function(t,r){var n,i;return typeof t=="object"?i=(n=t.dataKey)!==null&&n!==void 0?n:r:i=r,new C$e(i,t,r)})}function M$e(e,t,r,n,i,s,o){var l=f$e(n),c;e==="head"?c=i.headStyles:e==="body"?c=i.bodyStyles:e==="foot"&&(c=i.footStyles);var u=Sc({},l.table,l[e],i.styles,c),d=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},f=e==="body"?d:{},m=e==="body"&&r%2===0?Sc({},l.alternateRow,i.alternateRowStyles):{},h=d$e(s),v=Sc({},h,u,m,f);return Sc(v,o)}function $$e(e,t,r){var n;r===void 0&&(r={});var i=sY(e,t),s=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var h=t.columns.find(function(v){return v.dataKey===m||v.index===m});h&&!s.has(h.index)&&(s.set(h.index,!0),o.push(h.index),l.push(t.columns[h.index]),i-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||i>=f)u=!1,o.push(d),l.push(t.columns[d]),i-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function F$e(e,t){for(var r=[],n=0;n<t.columns.length;n++){var i=$$e(e,t,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function fY(e,t){var r=t.settings,n=r.startY,i=r.margin,s={x:i.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+i.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(m,h){return m+h.height},0);l+=u}var d=new sp(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(mY(d),s.y=i.top),t.callWillDrawPageHooks(d,s);var f=Sc({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?B$e(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(m){return Xc(d,t,m,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(m,h){var v=h===t.body.length-1;Q2(d,t,m,v,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(m){return Xc(d,t,m,s,t.columns)})),nY(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function B$e(e,t,r,n){var i=F$e(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?jy(e,t,r,n,u.columns,!0):l$(e,t,n,u.columns),z$e(e,t,r,n,u.columns),BS(e,t,n,u.columns)});else for(var o=-1,l=i[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?jy(e,t,r,n,d,!0):l$(e,t,n,d),u=c$(e,t,o+1,n,d),BS(e,t,n,d)}var f=u-o;i.slice(1).forEach(function(m){e.applyStyles(e.userStyles),jy(e,t,r,n,m.columns,!0),c$(e,t,o+1,n,m.columns,f),BS(e,t,n,m.columns)}),o=u};o<t.body.length-1;)c()}function l$(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(s){return Xc(e,t,s,r,n)})}function z$e(e,t,r,n,i){e.applyStyles(e.userStyles),t.body.forEach(function(s,o){var l=o===t.body.length-1;Q2(e,t,s,l,r,n,i)})}function c$(e,t,r,n,i,s){e.applyStyles(e.userStyles),s=s??t.body.length;var o=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=hY(e,t,d,n);c.canEntireRowFit(f,i)&&(Xc(e,t,c,n,i),l=r+u)}),l}function BS(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(s){return Xc(e,t,s,r,n)})}function q$e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),s=Math.floor((t-i)/n);return Math.max(0,s)}function U$e(e,t,r,n){var i={};e.spansMultiplePages=!0,e.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new uY(u.raw,u.styles,u.section);d=Sc(d,u),d.text=[];var f=q$e(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var m=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,h),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,h),d.contentHeight>s&&(s=d.contentHeight),i[c.index]=d}}var v=new cY(e.raw,-1,e.section,i,!0);v.height=s;for(var p=0,g=r.columns;p<g.length;p++){var c=g[p],d=v.cells[c.index];d&&(d.height=v.height);var u=e.cells[c.index];u&&(u.height=e.height)}return v}function W$e(e,t,r,n){var i=e.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=i-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Q2(e,t,r,n,i,s,o){var l=hY(e,t,n,s);if(r.canEntireRowFit(l,o))Xc(e,t,r,s,o);else if(W$e(e,r,l,t)){var c=U$e(r,l,t,e);Xc(e,t,r,s,o),jy(e,t,i,s,o),Q2(e,t,c,n,i,s,o)}else jy(e,t,i,s,o),Q2(e,t,r,n,i,s,o)}function Xc(e,t,r,n,i){n.x=t.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}H$e(e,c,n);var d=c.getTextPos();eY(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function H$e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=iY(n.lineWidth,n.fillColor);i&&e.rect(t.x,r.y,t.width,t.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),V$e(e,t,r,n.lineWidth))}function V$e(e,t,r,n){var i,s,o,l;n.top&&(i=r.x,s=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.top,i,s,o,l)),n.bottom&&(i=r.x,s=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.bottom,i,s,o,l)),n.left&&(i=r.x,s=r.y,o=r.x,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,i,s,o,l)),n.right&&(i=r.x+t.width,s=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,i,s,o,l));function c(u,d,f,m,h){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,m,h,"S")}}function hY(e,t,r,n){var i=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-i}function jy(e,t,r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return Xc(e,t,l,n,i)}),t.callEndPageHooks(e,n);var o=t.settings.margin;nY(e,t,r,n),mY(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Xc(e,t,l,n,i)}),e.applyStyles(e.userStyles))}function mY(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function G$e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=lY(this,n),s=dY(this,i);return fY(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,i){eY(t,r,n,i,this)},e.API.autoTableSetDefaults=function(t){return sp.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){sp.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new sp(this),s=oY(i,t,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var zS;function UO(e,t){var r=lY(e,t),n=dY(e,r);fY(e,n)}try{if(typeof window<"u"&&window){var u$=window,d$=u$.jsPDF||((zS=u$.jspdf)===null||zS===void 0?void 0:zS.jsPDF);d$&&G$e(d$)}}catch(e){console.error("Could not apply autoTable plugin",e)}const yc={name:"KIMBO AFRICA SA",slogan:"KPM - Procurement Management System",address:"Abidjan, Cocody Angr,",addressLine2:"Les Oscars Cit Les Papayers",phone1:"+225 27 22 55 79 65",phone2:"+225 07 09 30 30 48",email:"infos@kimboafricasa.com",website:"www.kimboafricasa.com",logoUrl:"https://media.kimboafricasa.com/logo-site.png"},Re={orange:[232,147,45],orangeLight:[255,237,213],orangeVif:[245,158,11],marron:[89,53,31],marronClair:[139,90,60],white:[255,255,255],grisClairFond:[250,248,245],grisTresClair:[245,243,240],grisAlternate:[252,250,248],textPrimary:[30,30,30],textSecondary:[80,80,80],textMuted:[120,120,120],border:[220,215,210],borderLight:[235,230,225],success:[34,139,34],successLight:[220,252,231],warning:[180,120,40],warningLight:[254,243,199],danger:[180,60,60],dangerLight:[254,226,226]},ed=(e,t)=>!e&&e!==0?"0 FCFA":Math.round(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" "+(t==="XOF"?"FCFA":t||"FCFA"),e0=e=>{if(!e)return"-";try{return Ct(new Date(e),"dd/MM/yyyy",{locale:Tt})}catch{return e}},e_=e=>{if(!e)return"-";try{return Ct(new Date(e),"dd/MM/yyyy '' HH:mm",{locale:Tt})}catch{return e}},Zj=(e,t,r,n)=>{e.setFillColor(...Re.orange),e.roundedRect(t,r,12,12,2,2,"F"),e.setFontSize(10),e.setTextColor(...Re.white),e.setFont("helvetica","bold"),e.text("K",t+3.8,r+8.5),e.setFontSize(14),e.setTextColor(...Re.marron),e.setFont("helvetica","bold"),e.text("KIMBO",t+15,r+6),e.setFontSize(14),e.setTextColor(...Re.orange),e.text("AFRICA",t+15,r+12)},K$e=async e=>{const t=new Nt({orientation:"portrait",unit:"mm",format:"a4"}),r=t.internal.pageSize.getWidth(),n=t.internal.pageSize.getHeight(),i=12,s=r-i*2;let o=8;t.setFillColor(...Re.orange),t.rect(0,0,r,2.5,"F"),Zj(t,i,o),t.setFontSize(12),t.setTextColor(...Re.marron),t.setFont("helvetica","bold"),t.text("DEMANDE D'ACHAT",r-i,o+4,{align:"right"}),t.setFontSize(10),t.setTextColor(...Re.textPrimary),t.text(e.reference,r-i,o+10,{align:"right"});const l=e.statusLabel.toUpperCase();let c=Re.grisClairFond,u=Re.textMuted;const d=e.status.toLowerCase();["payee","validee_finance"].includes(d)?(c=Re.successLight,u=Re.success):["rejetee","refusee_finance","rejetee_comptabilite"].includes(d)?(c=Re.dangerLight,u=Re.danger):["en_analyse","chiffree","soumise_validation","en_revision_achats","soumise"].includes(d)&&(c=Re.warningLight,u=Re.warning),t.setFontSize(6);const f=t.getTextWidth(l)+6;t.setFillColor(...c),t.roundedRect(r-i-f,o+13,f,5,1,1,"F"),t.setTextColor(...u),t.setFont("helvetica","bold"),t.text(l,r-i-f/2,o+16.5,{align:"center"}),o=24,t.setDrawColor(...Re.orange),t.setLineWidth(.6),t.line(i,o,r-i,o),o=28,e.status.toLowerCase().includes("brouillon")&&(t.setTextColor(235,235,235),t.setFontSize(45),t.setFont("helvetica","bold"),t.text("BROUILLON",r/2,n/2,{align:"center",angle:45})),t.setFillColor(...Re.grisTresClair),t.setDrawColor(...Re.borderLight),t.roundedRect(i,o,s,18,1.5,1.5,"FD");const m=i+4,h=i+s*.25,v=i+s*.5,p=i+s*.75;if(om(t,m,o+6,"Dpartement",e.department),om(t,h,o+6,"Catgorie",e.category),om(t,v,o+6,"Priorit",e.priority,e.priority.toLowerCase().includes("urgent")),om(t,p,o+6,"Date souhaite",e0(e.desiredDate)||"-"),om(t,m,o+13,"Demandeur",e.createdBy),om(t,h,o+13,"Cre le",e0(e.createdAt)),o+=22,v1(t,i,o,"Fournisseur"),o+=5,t.setFillColor(...Re.white),t.setDrawColor(...Re.borderLight),t.roundedRect(i,o,s,12,1.5,1.5,"FD"),e.fournisseur){t.setFontSize(8),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text(e.fournisseur,i+4,o+5),t.setFontSize(7),t.setTextColor(...Re.textSecondary),t.setFont("helvetica","normal");const E=[e.fournisseurAddress,e.fournisseurPhone,e.fournisseurEmail].filter(Boolean).join("  ");t.text(E||"-",i+4,o+10)}else t.setFontSize(8),t.setTextColor(...Re.textMuted),t.setFont("helvetica","italic"),t.text("Non encore slectionn",i+4,o+7);o+=16,v1(t,i,o,"Description"),o+=5,t.setFontSize(8),t.setTextColor(...Re.textPrimary),t.setFont("helvetica","normal");const g=t.splitTextToSize(e.description||"-",s-8),b=Math.min(g.length,3)*4+4;t.setFillColor(...Re.white),t.setDrawColor(...Re.orange),t.setLineWidth(.3),t.roundedRect(i,o,s,b,1.5,1.5,"FD"),t.text(g.slice(0,3),i+4,o+5),o+=b+4,v1(t,i,o,`Articles / Services (${e.articles.length})`),o+=4;const x=e.articles.map(E=>[E.designation.length>40?E.designation.substring(0,37)+"...":E.designation,E.quantity.toString(),E.unit,E.unitPrice?ed(E.unitPrice,e.currency):"-",E.total?ed(E.total,e.currency):"-"]);UO(t,{startY:o,head:[["Dsignation","Qt","Unit","P.U.","Total"]],body:x,theme:"plain",headStyles:{fillColor:Re.marron,textColor:Re.white,fontStyle:"bold",fontSize:7,cellPadding:2,halign:"left"},bodyStyles:{fontSize:7,textColor:Re.textPrimary,cellPadding:2},alternateRowStyles:{fillColor:Re.grisAlternate},columnStyles:{0:{cellWidth:65,halign:"left"},1:{cellWidth:15,halign:"center"},2:{cellWidth:20,halign:"center"},3:{cellWidth:35,halign:"right"},4:{cellWidth:35,halign:"right"}},margin:{left:i,right:i},tableLineColor:Re.border,tableLineWidth:.1});const j=t.lastAutoTable.finalY+3;if(e.totalAmount){const E=r-i-60;t.setFillColor(...Re.orangeLight),t.setDrawColor(...Re.orange),t.setLineWidth(.8),t.roundedRect(E,j,60,12,2,2,"FD"),t.setFontSize(8),t.setTextColor(...Re.marron),t.setFont("helvetica","bold"),t.text("TOTAL TTC:",E+4,j+7),t.setFontSize(10),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text(ed(e.totalAmount,e.currency),E+56,j+7,{align:"right"})}const N=Math.max(j+20,n-55);v1(t,i,N," Traabilit"),t.setFillColor(...Re.white),t.setDrawColor(...Re.orange),t.setLineWidth(.2),t.roundedRect(i,N+4,s,16,1.5,1.5,"FD"),t.setFillColor(...Re.orange),t.rect(i,N+4,2.5,16,"F");const A=s/5,C=N+10;$v(t,i+6,C,"Analyse",e.analyzedBy),$v(t,i+A,C,"Chiffrage",e.pricedBy),$v(t,i+A*2,C,"Soumission",e.submittedValidationBy),$v(t,i+A*3,C,"Valid. Finance",e.validatedFinanceBy),$v(t,i+A*4,C,"Comptabilis",e.comptabiliseBy),Y$e(t),t.save(`DA_${e.reference}.pdf`)};function om(e,t,r,n,i,s=!1){e.setFontSize(6),e.setTextColor(...Re.textMuted),e.setFont("helvetica","normal"),e.text(n,t,r),e.setFontSize(7),s?(e.setTextColor(...Re.orange),e.setFont("helvetica","bold")):(e.setTextColor(...Re.textPrimary),e.setFont("helvetica","normal"));let o=i||"-";o.length>18&&(o=o.substring(0,15)+"..."),e.text(o,t,r+4)}function v1(e,t,r,n){e.setFontSize(8),e.setTextColor(...Re.marron),e.setFont("helvetica","bold"),e.text(n,t,r)}function $v(e,t,r,n,i){e.setFontSize(6),e.setTextColor(...Re.textMuted),e.setFont("helvetica","normal"),e.text(n,t,r),e.setFontSize(6),i?(e.setTextColor(...Re.success),e.setFont("helvetica","bold"),e.text(" "+(i.length>12?i.substring(0,10)+"..":i),t,r+4)):(e.setTextColor(...Re.textMuted),e.setFont("helvetica","italic"),e.text("-",t,r+4))}function Y$e(e){const t=e.internal.pageSize.getHeight(),r=e.internal.pageSize.getWidth(),n=e.getNumberOfPages(),i=12;for(let s=1;s<=n;s++)e.setPage(s),e.setDrawColor(...Re.orange),e.setLineWidth(.4),e.line(i,t-18,r-i,t-18),e.setFontSize(6),e.setTextColor(...Re.textMuted),e.setFont("helvetica","normal"),e.text(`${yc.name} | ${yc.address} ${yc.addressLine2} | ${yc.phone1}`,i,t-13),e.setFontSize(5),e.setFont("helvetica","italic"),e.text("Document gnr par KPM SYSTME  Toute modification invalide ce document",i,t-9),e.setFontSize(7),e.setTextColor(...Re.marron),e.setFont("helvetica","bold"),e.text(`${s}/${n}`,r-i,t-11,{align:"right"}),e.setFillColor(...Re.marron),e.rect(0,t-2.5,r,2.5,"F")}function xc(e,t,r,n){return e.setFillColor(...Re.orange),e.roundedRect(r,t,3,8,.5,.5,"F"),e.setFontSize(10),e.setTextColor(...Re.marron),e.setFont("helvetica","bold"),e.text(n,r+6,t+6),t+12}function Vs(e,t,r,n,i,s,o=!1){e.setFontSize(8),e.setTextColor(...Re.textMuted),e.setFont("helvetica","normal"),e.text(n,t,r),o?(e.setTextColor(...Re.orange),e.setFont("helvetica","bold")):(e.setTextColor(...Re.textPrimary),e.setFont("helvetica","normal"));let l=i||"-";for(;e.getTextWidth(l)>s-35&&l.length>3;)l=l.slice(0,-4)+"...";e.text(l,t+32,r)}function pY(e){const t=e.internal.pageSize.getHeight(),r=e.internal.pageSize.getWidth(),n=e.getNumberOfPages(),i=15;for(let s=1;s<=n;s++)e.setPage(s),e.setDrawColor(...Re.orange),e.setLineWidth(.5),e.line(i,t-22,r-i,t-22),e.setFontSize(7),e.setTextColor(...Re.textMuted),e.setFont("helvetica","normal"),e.text(yc.name,i,t-17),e.text(`${yc.address} ${yc.addressLine2}`,i,t-13),e.text(`${yc.phone1} | ${yc.email}`,i,t-9),e.setFontSize(6),e.setFont("helvetica","italic"),e.text("Document gnr automatiquement par KPM SYSTME  Toute modification manuelle invalide ce document",r/2,t-17,{align:"center"}),e.setFontSize(8),e.setTextColor(...Re.marron),e.setFont("helvetica","bold"),e.text(`Page ${s} / ${n}`,r-i,t-13,{align:"right"}),e.setFillColor(...Re.marron),e.rect(0,t-3,r,3,"F")}const X$e=async e=>{const t=new Nt({orientation:"portrait",unit:"mm",format:"a4"}),r=t.internal.pageSize.getWidth();t.internal.pageSize.getHeight();const n=15,i=r-n*2;let s=12;t.setFillColor(...Re.orange),t.rect(0,0,r,3,"F"),Zj(t,n,s),t.setFontSize(14),t.setTextColor(...Re.marron),t.setFont("helvetica","bold"),t.text("BON DE LIVRAISON",r-n,s+4,{align:"right"}),t.setFontSize(11),t.setTextColor(...Re.textPrimary),t.text(e.reference,r-n,s+11,{align:"right"});const o=e.statusLabel.toUpperCase();let l=Re.grisClairFond,c=Re.textMuted;e.status.toLowerCase().includes("livr")?(l=Re.successLight,c=Re.success):e.status.toLowerCase().includes("refus")?(l=Re.dangerLight,c=Re.danger):(e.status.toLowerCase().includes("attente")||e.status.toLowerCase().includes("valid"))&&(l=Re.warningLight,c=Re.warning),t.setFontSize(7);const u=t.getTextWidth(o)+8;t.setFillColor(...l),t.roundedRect(r-n-u,s+14,u,6,1.5,1.5,"F"),t.setTextColor(...c),t.setFont("helvetica","bold"),t.text(o,r-n-u/2,s+18.5,{align:"center"}),s=32,t.setDrawColor(...Re.orange),t.setLineWidth(.8),t.line(n,s,r-n,s),s=42,s=xc(t,s,n,"INFORMATIONS LIVRAISON");const d=(i-6)/2;t.setFillColor(...Re.grisTresClair),t.setDrawColor(...Re.borderLight),t.roundedRect(n,s,d,32,2,2,"FD"),t.roundedRect(n+d+6,s,d,32,2,2,"FD");let f=s+7;Vs(t,n+4,f,"Dpartement",e.department,d-8),f+=7,Vs(t,n+4,f,"Type",e.blType,d-8),f+=7,Vs(t,n+4,f,"Magasin",e.warehouse||"Non spcifi",d-8),f+=7,Vs(t,n+4,f,"Date prvue",e0(e.deliveryDate),d-8),f=s+7;const m=n+d+10;if(Vs(t,m,f,"Cr le",e_(e.createdAt),d-8),f+=7,Vs(t,m,f,"Cr par",e.createdBy,d-8),f+=7,Vs(t,m,f,"Livr le",e_(e.deliveredAt),d-8),f+=7,Vs(t,m,f,"Livr par",e.deliveredBy||"-",d-8),s+=38,s=xc(t,s,n,"BESOIN SOURCE"),t.setFillColor(...Re.white),t.setDrawColor(...Re.borderLight),t.roundedRect(n,s,i,14,2,2,"FD"),t.setFontSize(9),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text(e.besoinTitle,n+4,s+7),t.setTextColor(...Re.textMuted),t.setFontSize(8),t.setFont("helvetica","normal"),t.text(e.besoinReference||"",n+4,s+12),s+=20,e.observations){s=xc(t,s,n,"OBSERVATIONS"),t.setFillColor(...Re.white),t.setDrawColor(...Re.orange),t.setLineWidth(.5);const g=t.splitTextToSize(e.observations,i-8),y=Math.max(g.length*4.5+8,12);t.roundedRect(n,s,i,y,2,2,"FD"),t.setFontSize(9),t.setTextColor(...Re.textPrimary),t.setFont("helvetica","normal"),t.text(g,n+4,s+6),s+=y+6}s=xc(t,s,n,`ARTICLES (${e.articles.length})`);const h=e.articles.map(g=>{const y=g.quantityOrdered-g.quantityDelivered;return[g.designation,g.quantityOrdered.toString(),g.quantityDelivered.toString(),y>0?`-${y}`:"0",g.unit,g.ecartReason||"-"]});UO(t,{startY:s,head:[["Dsignation","Command","Livr","cart","Unit","Motif"]],body:h,theme:"plain",headStyles:{fillColor:Re.marron,textColor:Re.white,fontStyle:"bold",fontSize:9,cellPadding:4},bodyStyles:{fontSize:9,textColor:Re.textPrimary,cellPadding:3},alternateRowStyles:{fillColor:Re.grisAlternate},columnStyles:{0:{cellWidth:50},1:{cellWidth:22,halign:"center"},2:{cellWidth:22,halign:"center"},3:{cellWidth:18,halign:"center"},4:{cellWidth:20,halign:"center"},5:{cellWidth:48}},margin:{left:n,right:n},didParseCell:g=>{g.column.index===3&&g.cell.raw&&g.cell.raw.toString().startsWith("-")&&(g.cell.styles.textColor=Re.danger,g.cell.styles.fontStyle="bold")}});const v=t.lastAutoTable.finalY+15,p=80;t.setDrawColor(...Re.border),t.setLineWidth(.3),t.roundedRect(n,v,p,28,2,2,"S"),t.setFontSize(8),t.setTextColor(...Re.textMuted),t.text("Livr par:",n+4,v+8),t.setTextColor(...Re.textPrimary),t.text(e.deliveredBy||"________________________",n+4,v+14),t.setTextColor(...Re.textMuted),t.text("Signature:",n+4,v+24),t.roundedRect(r-n-p,v,p,28,2,2,"S"),t.text("Reu par:",r-n-p+4,v+8),t.setTextColor(...Re.textPrimary),t.text("________________________",r-n-p+4,v+14),t.setTextColor(...Re.textMuted),t.text("Signature:",r-n-p+4,v+24),pY(t),t.save(`BL_${e.reference}.pdf`)},Z$e=async e=>{const t=new Nt({orientation:"portrait",unit:"mm",format:"a4"}),r=t.internal.pageSize.getWidth(),n=15,i=r-n*2;let s=12;t.setFillColor(...Re.orange),t.rect(0,0,r,3,"F"),Zj(t,n,s),t.setFontSize(14),t.setTextColor(...Re.marron),t.setFont("helvetica","bold"),t.text("CRITURE COMPTABLE",r-n,s+4,{align:"right"}),t.setFontSize(11),t.setTextColor(...Re.textPrimary),t.text(e.reference,r-n,s+11,{align:"right"});const o=e.isValidated?"VALIDE":"EN ATTENTE",l=e.isValidated?Re.successLight:Re.warningLight,c=e.isValidated?Re.success:Re.warning;t.setFontSize(7);const u=t.getTextWidth(o)+8;t.setFillColor(...l),t.roundedRect(r-n-u,s+14,u,6,1.5,1.5,"F"),t.setTextColor(...c),t.setFont("helvetica","bold"),t.text(o,r-n-u/2,s+18.5,{align:"center"}),s=32,t.setDrawColor(...Re.orange),t.setLineWidth(.8),t.line(n,s,r-n,s),s=42;const d=e.debit||e.credit,f=e.debit>0?"DBIT":"CRDIT";t.setFillColor(...Re.orangeLight),t.setDrawColor(...Re.orange),t.setLineWidth(1),t.roundedRect(r-n-70,s,70,18,2,2,"FD"),t.setFontSize(8),t.setTextColor(...Re.marron),t.setFont("helvetica","normal"),t.text(f,r-n-35,s+6,{align:"center"}),t.setFontSize(12),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text(ed(d,e.devise),r-n-35,s+14,{align:"center"}),s=xc(t,s,n,"INFORMATIONS GNRALES");const m=(i-6)/2;t.setFillColor(...Re.grisTresClair),t.setDrawColor(...Re.borderLight),t.roundedRect(n,s,m,28,2,2,"FD"),t.roundedRect(n+m+6,s,m,28,2,2,"FD");let h=s+7;Vs(t,n+4,h,"DA associe",e.daReference,m-8,!0),h+=7;const v=e.libelle.length>30?e.libelle.substring(0,30)+"...":e.libelle;Vs(t,n+4,h,"Libell",v,m-8),h+=7,Vs(t,n+4,h,"Date criture",e0(e.dateEcriture),m-8),h=s+7;const p=n+m+10;if(Vs(t,p,h,"Cr le",e_(e.createdAt),m-8),h+=7,Vs(t,p,h,"Cr par",e.createdBy,m-8),h+=7,Vs(t,p,h,"Valid le",e_(e.validatedAt),m-8),s+=34,s=xc(t,s,n,"CLASSIFICATION SYSCOHADA"),t.setFillColor(...Re.white),t.setDrawColor(...Re.orange),t.setLineWidth(.3),t.roundedRect(n,s,i,28,2,2,"FD"),t.setFillColor(...Re.orange),t.rect(n,s,3,28,"F"),h=s+7,t.setFontSize(9),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text(`Classe ${e.classesSyscohada}`,n+8,h),t.setTextColor(...Re.textPrimary),t.setFont("helvetica","normal"),t.text(`Compte: ${e.compteComptable}`,n+8,h+7),t.text(`Nature: ${e.natureCharge}`,n+8,h+14),t.text(`Centre de cot: ${e.centreCout||"Non spcifi"}`,n+8,h+21),s+=34,s=xc(t,s,n,"DTAIL DES MONTANTS"),UO(t,{startY:s,head:[["Dbit","Crdit","Devise","Solde"]],body:[[ed(e.debit,e.devise),ed(e.credit,e.devise),e.devise==="XOF"?"FCFA":e.devise,ed(e.debit-e.credit,e.devise)]],theme:"plain",headStyles:{fillColor:Re.marron,textColor:Re.white,fontStyle:"bold",fontSize:10,cellPadding:5},bodyStyles:{fontSize:11,textColor:Re.textPrimary,fontStyle:"bold",cellPadding:6,halign:"center"},alternateRowStyles:{fillColor:Re.orangeLight},margin:{left:n,right:n}}),s=t.lastAutoTable.finalY+10,e.modePaiement&&(s=xc(t,s,n,"INFORMATIONS DE PAIEMENT"),t.setFillColor(...Re.grisTresClair),t.setDrawColor(...Re.borderLight),t.roundedRect(n,s,i,16,2,2,"FD"),t.setFontSize(9),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text(`Mode: ${e.modePaiement}`,n+4,s+7),t.setTextColor(...Re.textSecondary),t.setFont("helvetica","normal"),t.text(`Rfrence: ${e.referencePaiement||"Non spcifie"}`,n+4,s+13),s+=22),e.observations){s=xc(t,s,n,"OBSERVATIONS"),t.setFillColor(...Re.white),t.setDrawColor(...Re.orange),t.setLineWidth(.5);const g=t.splitTextToSize(e.observations,i-8),y=Math.max(g.length*4.5+8,12);t.roundedRect(n,s,i,y,2,2,"FD"),t.setFontSize(9),t.setTextColor(...Re.textPrimary),t.setFont("helvetica","normal"),t.text(g,n+4,s+6)}pY(t),t.save(`ECRITURE_${e.reference}.pdf`)},gY=e=>{const t=["","un","deux","trois","quatre","cinq","six","sept","huit","neuf"],r=["dix","onze","douze","treize","quatorze","quinze","seize","dix-sept","dix-huit","dix-neuf"],n=["","","vingt","trente","quarante","cinquante","soixante","soixante","quatre-vingt","quatre-vingt"];if(e===0)return"zro";if(e<0)return"moins "+gY(-e);const i=s=>{if(s<10)return t[s];if(s<20)return r[s-10];if(s<100){const o=Math.floor(s/10),l=s%10;return o===7||o===9?n[o]+(l===1&&o!==9?"-et-":"-")+(l<10?r[l]:t[l]):l===0?n[o]+(o===8?"s":""):l===1&&o!==8?n[o]+"-et-un":n[o]+"-"+t[l]}if(s<1e3){const o=Math.floor(s/100),l=s%100,c=o===1?"cent":t[o]+" cent";return l===0?c+(o>1?"s":""):c+" "+i(l)}if(s<1e6){const o=Math.floor(s/1e3),l=s%1e3,c=o===1?"mille":i(o)+" mille";return l===0?c:c+" "+i(l)}if(s<1e9){const o=Math.floor(s/1e6),l=s%1e6,c=o===1?"un million":i(o)+" millions";return l===0?c:c+" "+i(l)}return s.toString()};return i(Math.round(e))},vY=async e=>{const t=new Nt({orientation:"portrait",unit:"mm",format:"a4"}),r=t.internal.pageSize.getWidth();t.internal.pageSize.getHeight();const n=20,i=r-n*2;let s=15;Zj(t,n,s),t.setFontSize(16),t.setTextColor(...Re.marron),t.setFont("helvetica","bold"),t.text("KIMBO AFRICA S.A",r-n,s+5,{align:"right"}),t.setFontSize(7),t.setTextColor(...Re.textMuted),t.setFont("helvetica","normal"),t.text("CONSTRUCTION BTP - AMNAGEMENT FONCIER - LOTISSEMENT",r-n,s+10,{align:"right"}),t.text("PROMOTION IMMOBILIRE - FOURNITURE DE MATRIEL",r-n,s+14,{align:"right"}),s=40,t.setFontSize(18),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text("DCHARGE",r/2,s,{align:"center"}),t.setFontSize(10),t.setTextColor(...Re.textMuted),t.setFont("helvetica","normal");const o=e.type==="DA"?"Demande d'Achat":"Note de Frais";t.text(`(${o} - ${e.reference})`,r/2,s+7,{align:"center"}),s=60;const l=10,c=r-n;t.setFontSize(11),t.setTextColor(...Re.textPrimary),t.setFont("helvetica","normal"),t.text("Je soussign(e)",n,s);const u=e.beneficiaire||"_______________";t.setFont("helvetica","bold"),t.text(u,n+32,s),y1(t,n+32+t.getTextWidth(u)+2,s,c),s+=l*1.3,t.setFont("helvetica","normal"),t.text("Reconnais avoir reu la somme de :",n,s),s+=l;const d=ed(e.montant,e.currency);t.setFontSize(14),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text(d,n,s),s+=l,t.setFontSize(10),t.setTextColor(...Re.textSecondary),t.setFont("helvetica","italic");const f=gY(e.montant)+" francs CFA",m=t.splitTextToSize(`(${f})`,i);t.text(m,n,s),s+=m.length*5+l*.8,t.setFontSize(11),t.setTextColor(...Re.textPrimary),t.setFont("helvetica","normal"),t.text("de la part de Monsieur, Madame :",n,s),s+=l*.8,t.setFont("helvetica","bold");const h=e.comptableName||"Le Comptable";t.text(h,n,s),y1(t,n+t.getTextWidth(h)+2,s,c),s+=l*1.3,t.setFont("helvetica","normal"),t.text("via la caisse :",n,s),t.setFont("helvetica","bold");const v=`${e.caisseName} (${e.caisseCode})`;t.text(v,n+25,s),y1(t,n+25+t.getTextWidth(v)+2,s,c),s+=l*1.3,t.setFont("helvetica","normal"),t.text("Mode de paiement :",n,s),t.setFont("helvetica","bold"),t.text(e.modePaiement||"Espces",n+38,s),e.referencePaiement&&(t.setFont("helvetica","normal"),t.text(" - Rf:",n+38+t.getTextWidth(e.modePaiement||"Espces")+2,s),t.setFont("helvetica","bold"),t.text(e.referencePaiement,n+52+t.getTextWidth(e.modePaiement||"Espces"),s)),s+=l*1.3,t.setFont("helvetica","normal"),t.text("Cette dcharge a pour objet :",n,s),s+=l*.7,t.setFont("helvetica","italic"),t.setTextColor(...Re.textSecondary);const p=e.description||"Paiement "+(e.type==="DA"?"demande d'achat":"note de frais"),g=t.splitTextToSize(p,i).slice(0,2);t.text(g,n,s),s+=g.length*5+l*.8,y1(t,n,s,c),s+=l*1.2,t.setFontSize(9),t.setTextColor(...Re.textPrimary),t.setFont("helvetica","normal"),t.text("Et est tablie en deux (2) exemplaires, dont un remis  chacune des parties.",n,s),s+=l,t.text("Fait  Abidjan, le",n,s),t.setFont("helvetica","bold"),t.text(e0(e.paidAt),n+32,s);const y=Math.max(s+l*2,200);t.setFontSize(11),t.setTextColor(...Re.marron),t.setFont("helvetica","bold"),t.text("Signatures",r/2,y,{align:"center"});const b=y+8,x=(i-30)/2,j=25;t.setFontSize(9),t.setTextColor(...Re.orange),t.setFont("helvetica","bold"),t.text("Receveur",n+x/2,b,{align:"center"}),t.setDrawColor(...Re.border),t.setLineWidth(.3),t.roundedRect(n,b+3,x,j,2,2,"S"),t.setTextColor(...Re.orange),t.text("Donneur",r-n-x/2,b,{align:"center"}),t.roundedRect(r-n-x,b+3,x,j,2,2,"S"),t.setFontSize(8),t.setTextColor(...Re.textMuted),t.setFont("helvetica","normal"),t.text(e.beneficiaire||"(Bnficiaire)",n+x/2,b+j+8,{align:"center"}),t.text(h,r-n-x/2,b+j+8,{align:"center"});const N=e.type==="DA"?`DECHARGE_DA_${e.reference}.pdf`:`DECHARGE_NDF_${e.reference}.pdf`;t.save(N)};function y1(e,t,r,n){e.setDrawColor(...Re.textMuted),e.setLineWidth(.2);const i=2;for(let s=t;s<n;s+=i)e.line(s,r+1,s+.5,r+1)}const J$e=e=>e?`${e.first_name||""} ${e.last_name||""}`.trim()||"Utilisateur":"Systme",Q$e=e=>!e||e.length===0?"":e.map(t=>Cc[t]||t).join(", ");function yY({da:e}){const t=[];return t.push({id:"created",action:"Cration de la DA",date:e.created_at,actor:{profile:e.created_by_profile,roles:e.created_by_roles,department:e.created_by_department},status:"completed",icon:jn,color:"text-primary"}),e.submitted_at&&t.push({id:"submitted",action:"Soumise aux Achats",date:e.submitted_at,actor:{profile:e.created_by_profile,roles:e.created_by_roles,department:e.created_by_department},status:"completed",icon:N_,color:"text-primary"}),e.analyzed_at&&t.push({id:"analyzed",action:"Prise en charge Achats",date:e.analyzed_at,actor:{profile:e.analyzed_by_profile,roles:e.analyzed_by_roles,department:e.analyzed_by_department},status:"completed",icon:xd,color:"text-warning"}),e.priced_at&&t.push({id:"priced",action:"Chiffrage effectu",date:e.priced_at,actor:{profile:e.priced_by_profile,roles:e.priced_by_roles,department:e.priced_by_department},status:"completed",icon:b4,color:"text-success"}),e.submitted_validation_at&&t.push({id:"submitted_validation",action:"Soumise  validation DAF/DG",date:e.submitted_validation_at,actor:{profile:e.submitted_validation_by_profile,roles:e.submitted_validation_by_roles,department:e.submitted_validation_by_department},status:"completed",icon:ao,color:"text-accent"}),e.revision_requested_at&&e.status==="en_revision_achats"&&t.push({id:"revision",action:"Rvision demande",date:e.revision_requested_at,actor:{profile:e.revision_requested_by_profile,roles:e.revision_requested_by_roles,department:e.revision_requested_by_department},description:e.revision_comment||void 0,status:"current",icon:cd,color:"text-warning"}),e.validated_finance_at&&["validee_finance","payee","rejetee_comptabilite"].includes(e.status)&&t.push({id:"validated_finance",action:"Valide financirement",date:e.validated_finance_at,actor:{profile:e.validated_finance_by_profile,roles:e.validated_finance_by_roles,department:e.validated_finance_by_department},description:e.finance_decision_comment||void 0,status:"completed",icon:Ya,color:"text-success"}),e.validated_finance_at&&e.status==="refusee_finance"&&t.push({id:"refused_finance",action:"Refuse par DAF/DG",date:e.validated_finance_at,actor:{profile:e.validated_finance_by_profile,roles:e.validated_finance_by_roles,department:e.validated_finance_by_department},description:e.finance_decision_comment||void 0,status:"current",icon:wl,color:"text-destructive"}),e.rejected_at&&e.status==="rejetee"&&t.push({id:"rejected",action:"Rejete par les Achats",date:e.rejected_at,actor:{profile:e.rejected_by_profile,roles:e.rejected_by_roles,department:e.rejected_by_department},description:e.rejection_reason||void 0,status:"current",icon:Er,color:"text-destructive"}),e.comptabilise_at&&e.status==="payee"&&t.push({id:"paid",action:"Paiement enregistr",date:e.comptabilise_at,actor:{profile:e.comptabilise_by_profile,roles:e.comptabilise_by_roles,department:e.comptabilise_by_department},status:"completed",icon:kl,color:"text-success"}),e.comptabilise_at&&e.status==="rejetee_comptabilite"&&t.push({id:"rejected_comptabilite",action:"Rejete par la Comptabilit",date:e.comptabilise_at,actor:{profile:e.comptabilise_by_profile,roles:e.comptabilise_by_roles,department:e.comptabilise_by_department},description:e.comptabilite_rejection_reason||void 0,status:"current",icon:Uf,color:"text-destructive"}),t.sort((r,n)=>!r.date||!n.date?0:new Date(r.date).getTime()-new Date(n.date).getTime()),t.length===0?null:a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-base",children:[a.jsx(Yn,{className:"h-4 w-4"}),"Historique des actions"]})}),a.jsx(pe,{children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-0 h-full w-0.5 bg-border"}),a.jsx("div",{className:"space-y-4",children:t.map((r,n)=>{var u,d,f;const i=r.icon,s=n===t.length-1,o=J$e((u=r.actor)==null?void 0:u.profile),l=Q$e((d=r.actor)==null?void 0:d.roles),c=(f=r.actor)==null?void 0:f.department;return a.jsxs("div",{className:"relative flex gap-4 pl-0",children:[a.jsx("div",{className:rt("relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full border-2 bg-background",r.status==="completed"&&"border-success bg-success/10",r.status==="current"&&r.color.includes("destructive")&&"border-destructive bg-destructive/10",r.status==="current"&&r.color.includes("warning")&&"border-warning bg-warning/10",r.status==="pending"&&"border-muted bg-muted"),children:a.jsx(i,{className:rt("h-4 w-4",r.color)})}),a.jsxs("div",{className:rt("flex-1 pb-4",s&&"pb-0"),children:[a.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("p",{className:"font-medium text-foreground",children:r.action}),r.date&&a.jsx("p",{className:"text-xs text-muted-foreground",children:Ct(new Date(r.date),"dd MMM yyyy '' HH:mm",{locale:Tt})})]}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[a.jsx(_h,{className:"h-3 w-3"}),a.jsx("span",{className:"font-medium text-foreground",children:o})]}),l&&a.jsxs(it,{variant:"outline",className:"h-5 gap-1 text-xs",children:[a.jsx(OQ,{className:"h-3 w-3"}),l]}),c&&a.jsxs(it,{variant:"secondary",className:"h-5 gap-1 text-xs",children:[a.jsx(zs,{className:"h-3 w-3"}),c]})]}),r.description&&a.jsxs("p",{className:"mt-2 rounded-md bg-muted/50 p-2 text-sm text-muted-foreground italic",children:['"',r.description,'"']})]})]},r.id)})})]})})]})}const eFe={brouillon:"bg-muted text-muted-foreground",soumise:"bg-primary/10 text-primary border-primary/20",en_analyse:"bg-warning/10 text-warning border-warning/20",chiffree:"bg-success/10 text-success border-success/20",soumise_validation:"bg-accent/10 text-accent-foreground border-accent/20",validee_finance:"bg-success text-success-foreground",refusee_finance:"bg-destructive text-destructive-foreground",en_revision_achats:"bg-warning text-warning-foreground",rejetee:"bg-destructive/10 text-destructive border-destructive/20",payee:"bg-success text-success-foreground",rejetee_comptabilite:"bg-destructive text-destructive-foreground",annulee:"bg-muted text-muted-foreground line-through"},tFe={brouillon:Yn,soumise:N_,en_analyse:xd,chiffree:Br,soumise_validation:ao,validee_finance:Ya,refusee_finance:wl,en_revision_achats:cd,rejetee:Er,payee:kl,rejetee_comptabilite:Uf,annulee:Er};function rFe(){var vt,Pr,It,Gt,wr,Ln,ut,oi;const{id:e}=Qc(),t=yi(),{user:r,roles:n,isAdmin:i}=yr(),{toast:s}=qr(),[o,l]=_.useState(null),[c,u]=_.useState([]),[d,f]=_.useState([]),[m,h]=_.useState({}),[v,p]=_.useState(!0),[g,y]=_.useState(!1),[b,x]=_.useState(!1),[j,N]=_.useState(!1),[A,C]=_.useState(!1),[E,O]=_.useState(!1),[L,k]=_.useState(!1),[T,B]=_.useState(!1),[M,G]=_.useState(!1),[z,D]=_.useState(null),[q,K]=_.useState(""),[ae,J]=_.useState(""),[I,$]=_.useState(""),[U,H]=_.useState(""),[re,X]=_.useState(!1),[he,se]=_.useState({fournisseur_id:"",unit_price:"",currency:"XOF",delivery_delay:"",conditions:""}),ue=n.some(Ce=>jh.includes(Ce)),ge=n.some(Ce=>Bz.includes(Ce)),ve=n.includes("dg"),te=n.includes("daf"),Ne=(ve||te||i)&&(o==null?void 0:o.status)==="soumise_validation",Y=(ue||i)&&(o==null?void 0:o.status)==="brouillon",Le=(ge||i)&&(o==null?void 0:o.status)==="soumise",ye=(ge||i)&&["soumise","en_analyse","en_revision_achats"].includes((o==null?void 0:o.status)||""),we=(ge||i)&&((o==null?void 0:o.status)==="chiffree"||(o==null?void 0:o.status)==="en_revision_achats");(ge||i)&&["soumise","en_analyse"].includes((o==null?void 0:o.status)||"");const _e=i,Qe=(ge||i)&&["en_analyse","chiffree","soumise_validation","en_revision_achats"].includes((o==null?void 0:o.status)||"");_.useEffect(()=>{e&&(We(),Ge(),Pt())},[e]);const We=async()=>{try{const{data:Ce,error:yt}=await fe.from("demandes_achat").select(`
          *,
          department:departments(id, name),
          selected_fournisseur:fournisseurs(id, name, address, phone, email),
          besoin:besoins(id, title, user_id)
        `).eq("id",e).maybeSingle();if(yt||!Ce){s({title:"Erreur",description:"DA introuvable.",variant:"destructive"}),t("/demandes-achat");return}const Jt=[Ce.created_by,Ce.rejected_by,Ce.analyzed_by,Ce.priced_by,Ce.submitted_validation_by,Ce.validated_finance_by,Ce.revision_requested_by,Ce.comptabilise_by].filter(Boolean),{data:Mt}=await fe.rpc("get_public_profiles",{_user_ids:Jt}),Ar={};(Mt||[]).forEach(vn=>{Ar[vn.id]={first_name:vn.first_name,last_name:vn.last_name,department_name:vn.department_name}});const{data:an}=await fe.from("user_roles").select("user_id, role").in("user_id",Jt),Zr={};(an||[]).forEach(vn=>{Zr[vn.user_id]||(Zr[vn.user_id]=[]),Zr[vn.user_id].push(vn.role)});const Rn=vn=>{if(!vn)return null;const qi=Ar[vn];return qi?{first_name:qi.first_name,last_name:qi.last_name}:null},pn=vn=>{var qi;return vn&&((qi=Ar[vn])==null?void 0:qi.department_name)||null},qs={...Ce,created_by_profile:Rn(Ce.created_by),created_by_roles:Zr[Ce.created_by]||[],created_by_department:pn(Ce.created_by),rejected_by_profile:Rn(Ce.rejected_by),rejected_by_roles:Ce.rejected_by?Zr[Ce.rejected_by]||[]:[],rejected_by_department:pn(Ce.rejected_by),analyzed_by_profile:Rn(Ce.analyzed_by),analyzed_by_roles:Ce.analyzed_by?Zr[Ce.analyzed_by]||[]:[],analyzed_by_department:pn(Ce.analyzed_by),priced_by_profile:Rn(Ce.priced_by),priced_by_roles:Ce.priced_by?Zr[Ce.priced_by]||[]:[],priced_by_department:pn(Ce.priced_by),submitted_validation_by_profile:Rn(Ce.submitted_validation_by),submitted_validation_by_roles:Ce.submitted_validation_by?Zr[Ce.submitted_validation_by]||[]:[],submitted_validation_by_department:pn(Ce.submitted_validation_by),validated_finance_by_profile:Rn(Ce.validated_finance_by),validated_finance_by_roles:Ce.validated_finance_by?Zr[Ce.validated_finance_by]||[]:[],validated_finance_by_department:pn(Ce.validated_finance_by),revision_requested_by_profile:Rn(Ce.revision_requested_by),revision_requested_by_roles:Ce.revision_requested_by?Zr[Ce.revision_requested_by]||[]:[],revision_requested_by_department:pn(Ce.revision_requested_by),comptabilise_by_profile:Rn(Ce.comptabilise_by),comptabilise_by_roles:Ce.comptabilise_by?Zr[Ce.comptabilise_by]||[]:[],comptabilise_by_department:pn(Ce.comptabilise_by)};l(qs),J(Ce.fournisseur_justification||"")}catch(Ce){console.error("Error:",Ce)}finally{p(!1)}},Ge=async()=>{const{data:Ce}=await fe.from("da_articles").select("*").eq("da_id",e).order("created_at"),yt=Ce||[];u(yt);for(const Jt of yt)Ke(Jt.id)},Ke=async Ce=>{const{data:yt}=await fe.from("da_article_prices").select("*, fournisseur:fournisseurs(id, name)").eq("da_article_id",Ce).order("created_at");h(Jt=>({...Jt,[Ce]:yt||[]}))},Pt=async()=>{const{data:Ce}=await fe.from("fournisseurs").select("*").eq("is_active",!0).order("name");f(Ce||[])},Lt=async()=>{if(o){y(!0);try{const{error:Ce}=await fe.from("demandes_achat").update({status:"en_analyse",analyzed_by:r==null?void 0:r.id,analyzed_at:new Date().toISOString()}).eq("id",o.id);if(Ce)throw Ce;s({title:"DA prise en charge",description:"Vous pouvez maintenant ajouter les prix."}),We()}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}}},ft=async()=>{if(o){y(!0);try{const{error:Ce}=await fe.from("demandes_achat").update({status:"soumise",submitted_at:new Date().toISOString()}).eq("id",o.id);if(Ce)throw Ce;s({title:"DA soumise",description:"La demande a t transmise au Service Achats."}),We()}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}}},Zt=async()=>{if(!z||!he.fournisseur_id||!he.unit_price){s({title:"Erreur",description:"Fournisseur et prix requis.",variant:"destructive"});return}y(!0);try{const{error:Ce}=await fe.from("da_article_prices").insert({da_article_id:z,fournisseur_id:he.fournisseur_id,unit_price:parseFloat(he.unit_price),currency:he.currency,delivery_delay:he.delivery_delay||null,conditions:he.conditions||null,created_by:r==null?void 0:r.id});if(Ce)throw Ce;s({title:"Prix ajout"}),C(!1),se({fournisseur_id:"",unit_price:"",currency:"XOF",delivery_delay:"",conditions:""}),Ke(z)}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}},gr=async(Ce,yt,Jt)=>{y(!0);try{await fe.from("da_article_prices").update({is_selected:!1}).eq("da_article_id",yt),await fe.from("da_article_prices").update({is_selected:!0}).eq("id",Ce),Ke(yt),s({title:"Prix slectionn"})}catch(Mt){s({title:"Erreur",description:Mt.message,variant:"destructive"})}finally{y(!1)}},ht=()=>{let Ce=0;for(const yt of c){const Mt=(m[yt.id]||[]).find(Ar=>Ar.is_selected);Mt&&(Ce+=Mt.unit_price*yt.quantity)}return Ce},qt=async()=>{var yt;if(!o)return;const Ce=ht();if(Ce===0){s({title:"Erreur",description:"Aucun prix slectionn.",variant:"destructive"});return}y(!0);try{const Jt={};for(const an of c){const Rn=(m[an.id]||[]).find(pn=>pn.is_selected);Rn&&(Jt[Rn.fournisseur_id]=(Jt[Rn.fournisseur_id]||0)+1)}const Mt=(yt=Object.entries(Jt).sort((an,Zr)=>Zr[1]-an[1])[0])==null?void 0:yt[0],{error:Ar}=await fe.from("demandes_achat").update({status:"chiffree",total_amount:Ce,currency:"XOF",selected_fournisseur_id:Mt||null,priced_by:r==null?void 0:r.id,priced_at:new Date().toISOString()}).eq("id",o.id);if(Ar)throw Ar;s({title:"DA chiffre",description:`Montant total: ${Ce.toLocaleString()} XOF`}),We()}catch(Jt){s({title:"Erreur",description:Jt.message,variant:"destructive"})}finally{y(!1)}},bt=async()=>{if(o){if(d.length>1&&!ae.trim()){s({title:"Erreur",description:"Justification du choix de fournisseur requise.",variant:"destructive"});return}y(!0);try{const{error:Ce}=await fe.from("demandes_achat").update({status:"soumise_validation",fournisseur_justification:ae.trim()||null,submitted_validation_by:r==null?void 0:r.id,submitted_validation_at:new Date().toISOString()}).eq("id",o.id);if(Ce)throw Ce;s({title:"DA soumise  validation",description:"Le DAF et DG ont t notifis."}),We()}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}}},Nn=async()=>{if(!(!o||!q.trim())){y(!0);try{const{error:Ce}=await fe.from("demandes_achat").update({status:"rejetee",rejection_reason:q.trim(),rejected_by:r==null?void 0:r.id,rejected_at:new Date().toISOString()}).eq("id",o.id);if(Ce)throw Ce;s({title:"DA rejete"}),N(!1),We()}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}}},xr=async()=>{if(o){y(!0);try{const{error:Ce}=await fe.from("demandes_achat").update({status:"validee_finance",validated_finance_by:r==null?void 0:r.id,validated_finance_at:new Date().toISOString(),finance_decision_comment:I.trim()||null}).eq("id",o.id);if(Ce)throw Ce;s({title:"DA valide financirement",description:"La Comptabilit a t notifie."}),B(!1),$(""),We()}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}}},Ht=async()=>{if(!(!o||!I.trim())){y(!0);try{const{error:Ce}=await fe.from("demandes_achat").update({status:"refusee_finance",validated_finance_by:r==null?void 0:r.id,validated_finance_at:new Date().toISOString(),finance_decision_comment:I.trim()}).eq("id",o.id);if(Ce)throw Ce;s({title:"DA refuse",description:"Les parties concernes ont t notifies."}),O(!1),$(""),We()}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}}},rr=async()=>{if(!(!o||!U.trim())){y(!0);try{const{error:Ce}=await fe.from("demandes_achat").update({status:"en_revision_achats",revision_requested_by:r==null?void 0:r.id,revision_requested_at:new Date().toISOString(),revision_comment:U.trim()}).eq("id",o.id);if(Ce)throw Ce;s({title:"Rvision demande",description:"Le Service Achats a t notifi."}),k(!1),H(""),We()}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}}},Ir=async()=>{if(o){y(!0);try{const{error:Ce}=await fe.from("demandes_achat").delete().eq("id",o.id);if(Ce)throw Ce;s({title:"DA supprime"}),t("/demandes-achat")}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{y(!1)}}},Ot=async Ce=>{if(!(!o||!r)){y(!0);try{const{error:yt}=await fe.from("demandes_achat").update({status:"annulee",cancelled_at:new Date().toISOString(),cancelled_by:r.id,cancellation_reason:Ce}).eq("id",o.id);if(yt)throw yt;s({title:"DA annule",description:"La demande d'achat a t annule avec succs."}),G(!1),We()}catch(yt){s({title:"Erreur",description:yt.message,variant:"destructive"})}finally{y(!1)}}},Xr=async Ce=>{if(!o||!Ce.target.files||Ce.target.files.length===0)return;const yt=Ce.target.files[0];if(!["application/pdf","image/jpeg","image/png","image/gif"].includes(yt.type)){s({title:"Erreur",description:"Format non support. Utilisez PDF ou image.",variant:"destructive"});return}if(yt.size>5*1024*1024){s({title:"Erreur",description:"Fichier trop volumineux (max 5 Mo).",variant:"destructive"});return}X(!0);try{const Mt=yt.name.split(".").pop(),Ar=`${o.id}/${Date.now()}.${Mt}`,{error:an}=await fe.storage.from("da-attachments").upload(Ar,yt);if(an)throw an;const{data:Zr}=fe.storage.from("da-attachments").getPublicUrl(Ar),{error:Rn}=await fe.from("demandes_achat").update({attachment_url:Zr.publicUrl,attachment_name:yt.name}).eq("id",o.id);if(Rn)throw Rn;s({title:"Pice jointe ajoute",description:yt.name}),We()}catch(Mt){s({title:"Erreur",description:Mt.message,variant:"destructive"})}finally{X(!1),Ce.target.value=""}},Rt=async()=>{if(!(!o||!o.attachment_url)){X(!0);try{const yt=new URL(o.attachment_url).pathname.split("/da-attachments/");yt.length>1&&await fe.storage.from("da-attachments").remove([yt[1]]);const{error:Jt}=await fe.from("demandes_achat").update({attachment_url:null,attachment_name:null}).eq("id",o.id);if(Jt)throw Jt;s({title:"Pice jointe supprime"}),We()}catch(Ce){s({title:"Erreur",description:Ce.message,variant:"destructive"})}finally{X(!1)}}};if(v)return a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(!o)return null;const Vt=tFe[o.status],sn=ht(),nr=()=>{var yt,Jt,Mt,Ar,an;const Ce=c.map(Zr=>{const pn=(m[Zr.id]||[]).find(qs=>qs.is_selected);return{designation:Zr.designation,quantity:Zr.quantity,unit:Zr.unit,unitPrice:pn==null?void 0:pn.unit_price,total:pn?pn.unit_price*Zr.quantity:void 0}});K$e({reference:o.reference,status:o.status,statusLabel:Ol[o.status],department:((yt=o.department)==null?void 0:yt.name)||"N/A",category:lx[o.category],priority:Gm[o.priority],description:o.description,createdAt:o.created_at,createdBy:o.created_by_profile?`${o.created_by_profile.first_name||""} ${o.created_by_profile.last_name||""}`.trim():"N/A",desiredDate:o.desired_date||void 0,totalAmount:o.total_amount,currency:o.currency||"XOF",fournisseur:(Jt=o.selected_fournisseur)==null?void 0:Jt.name,fournisseurAddress:((Mt=o.selected_fournisseur)==null?void 0:Mt.address)||void 0,fournisseurPhone:((Ar=o.selected_fournisseur)==null?void 0:Ar.phone)||void 0,fournisseurEmail:((an=o.selected_fournisseur)==null?void 0:an.email)||void 0,justification:o.fournisseur_justification||void 0,analyzedBy:o.analyzed_by_profile?`${o.analyzed_by_profile.first_name||""} ${o.analyzed_by_profile.last_name||""}`.trim():void 0,analyzedAt:o.analyzed_at||void 0,pricedBy:o.priced_by_profile?`${o.priced_by_profile.first_name||""} ${o.priced_by_profile.last_name||""}`.trim():void 0,pricedAt:o.priced_at||void 0,validatedFinanceBy:o.validated_finance_by_profile?`${o.validated_finance_by_profile.first_name||""} ${o.validated_finance_by_profile.last_name||""}`.trim():void 0,validatedFinanceAt:o.validated_finance_at||void 0,comptabiliseBy:o.comptabilise_by_profile?`${o.comptabilise_by_profile.first_name||""} ${o.comptabilise_by_profile.last_name||""}`.trim():void 0,comptabiliseAt:o.comptabilise_at||void 0,articles:Ce})};return a.jsxs(st,{children:[a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/demandes-achat",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:o.reference}),a.jsxs(it,{className:eFe[o.status],children:[a.jsx(Vt,{className:"mr-1 h-3 w-3"}),Ol[o.status]]})]}),a.jsxs("p",{className:"text-muted-foreground",children:["Cre le ",Ct(new Date(o.created_at),"dd MMMM yyyy  HH:mm",{locale:Tt})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:nr,children:[a.jsx(bd,{className:"mr-2 h-4 w-4"}),"Exporter PDF"]}),i&&["payee","validee_finance","soumise_validation","chiffree"].includes(o.status)&&o.status!=="annulee"&&a.jsxs(de,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>G(!0),children:[a.jsx(wl,{className:"mr-2 h-4 w-4"}),"Annuler"]}),_e&&o.status==="brouillon"&&a.jsxs(de,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>x(!0),children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]}),(te||ve)&&!i&&!Ne&&a.jsx(me,{className:"border-primary/30 bg-primary/5",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(Ya,{className:"h-6 w-6 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Mode lecture seule"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vous consultez cette DA en tant que ",te?"DAF":"DG",".",o.status==="soumise_validation"?" Vous pouvez valider ou refuser cette demande.":` Les actions de validation ne sont disponibles qu'au statut "Soumise  validation".`]})]})]})}),o.status==="rejetee"&&o.rejection_reason&&a.jsx(me,{className:"border-destructive/50 bg-destructive/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(Er,{className:"mt-0.5 h-5 w-5 shrink-0 text-destructive"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-destructive",children:"Motif du rejet"}),a.jsx("p",{className:"text-sm text-foreground",children:o.rejection_reason})]})]})}),["soumise","en_analyse"].includes(o.status)&&a.jsx(me,{className:"border-warning/20 bg-warning/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(b4,{className:"mt-0.5 h-5 w-5 shrink-0 text-warning"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Document en cours de qualification"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette DA n'est pas encore valide financirement. Les prix sont en cours d'analyse."})]})]})}),Y&&a.jsx(me,{className:"border-primary/50 bg-primary/5",children:a.jsxs(pe,{className:"flex flex-col gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Prt  soumettre"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette DA sera transmise au Service Achats."})]}),a.jsxs(de,{onClick:ft,disabled:g,children:[a.jsx(N_,{className:"mr-2 h-4 w-4"}),"Soumettre aux Achats"]})]})}),Le&&a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex flex-col gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"DA en attente d'analyse"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Prenez cette DA en charge pour commencer l'analyse."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",className:"text-destructive hover:bg-destructive/10",onClick:()=>N(!0),children:[a.jsx(Er,{className:"mr-2 h-4 w-4"}),"Rejeter"]}),a.jsxs(de,{onClick:Lt,disabled:g,children:[a.jsx(xd,{className:"mr-2 h-4 w-4"}),"Prendre en charge"]})]})]})}),o.status==="en_analyse"&&ye&&a.jsx(me,{className:"border-success/50 bg-success/5",children:a.jsxs(pe,{className:"flex flex-col gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Prt  chiffrer ?"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Slectionnez un prix par article puis validez. Total actuel: ",sn.toLocaleString()," XOF"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",className:"text-destructive hover:bg-destructive/10",onClick:()=>N(!0),children:[a.jsx(Er,{className:"mr-2 h-4 w-4"}),"Rejeter"]}),a.jsxs(de,{onClick:qt,disabled:g||sn===0,children:[a.jsx(Br,{className:"mr-2 h-4 w-4"}),"Valider chiffrage"]})]})]})}),we&&a.jsx(me,{className:"border-primary/50 bg-primary/5",children:a.jsxs(pe,{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-foreground",children:["DA chiffre: ",(vt=o.total_amount)==null?void 0:vt.toLocaleString()," ",o.currency]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Soumettez  validation financire (DAF/DG)."})]}),a.jsxs(de,{onClick:bt,disabled:g,children:[a.jsx(ao,{className:"mr-2 h-4 w-4"}),"Soumettre  validation"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Justification du choix de fournisseur"}),a.jsx(Kr,{placeholder:"Expliquez pourquoi ce(s) fournisseur(s) ont t retenus...",value:ae,onChange:Ce=>J(Ce.target.value),rows:2})]})]})}),Ne&&a.jsx(me,{className:"border-2 border-primary bg-gradient-to-r from-primary/5 to-accent/5",children:a.jsxs(pe,{className:"space-y-4 py-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ya,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-bold text-foreground",children:"Validation Financire Requise"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette dcision engage la responsabilit financire de l'entreprise."})]})]}),a.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[a.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Montant total"}),a.jsxs("p",{className:"text-xl font-bold text-foreground",children:[(Pr=o.total_amount)==null?void 0:Pr.toLocaleString()," ",o.currency]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Fournisseur"}),a.jsx("p",{className:"font-medium",children:((It=o.selected_fournisseur)==null?void 0:It.name)||"Multiple"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Priorit"}),a.jsx(it,{className:o.priority==="urgente"?"bg-destructive/10 text-destructive":o.priority==="haute"?"bg-warning/10 text-warning":"bg-muted text-muted-foreground",children:Gm[o.priority]})]})]}),o.fournisseur_justification&&a.jsxs("div",{className:"mt-3 border-t pt-3",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Justification Achats"}),a.jsx("p",{className:"text-sm",children:o.fournisseur_justification})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs(de,{onClick:()=>B(!0),className:"bg-success hover:bg-success/90",disabled:g,children:[a.jsx(Ya,{className:"mr-2 h-4 w-4"}),"Valider financirement"]}),a.jsxs(de,{variant:"outline",onClick:()=>k(!0),disabled:g,children:[a.jsx(cd,{className:"mr-2 h-4 w-4"}),"Demander rvision"]}),a.jsxs(de,{variant:"outline",className:"text-destructive hover:bg-destructive/10",onClick:()=>O(!0),disabled:g,children:[a.jsx(wl,{className:"mr-2 h-4 w-4"}),"Refuser"]})]})]})}),o.status==="validee_finance"&&a.jsx(me,{className:"border-success bg-success/10",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(Ya,{className:"h-6 w-6 text-success"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-success",children:"Valide financirement"}),a.jsxs("p",{className:"text-sm text-foreground",children:["Cette DA est autorise et transmise  la Comptabilit.",o.finance_decision_comment&&`  ${o.finance_decision_comment}`]})]})]})}),o.status==="refusee_finance"&&a.jsx(me,{className:"border-destructive bg-destructive/10",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(wl,{className:"h-6 w-6 text-destructive"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-destructive",children:"Refuse par la Direction"}),a.jsx("p",{className:"text-sm text-foreground",children:o.finance_decision_comment||"Aucun motif spcifi."})]})]})}),o.status==="en_revision_achats"&&a.jsx(me,{className:"border-warning bg-warning/10",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(cd,{className:"h-6 w-6 text-warning"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-warning",children:"Rvision demande"}),a.jsx("p",{className:"text-sm text-foreground",children:o.revision_comment||"La Direction demande une rvision de cette DA."})]})]})}),o.total_amount&&!["validee_finance","refusee_finance"].includes(o.status)&&a.jsx(me,{className:"border-success/50 bg-success/5",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(w_,{className:"h-6 w-6 text-success"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-lg font-bold text-foreground",children:[o.total_amount.toLocaleString()," ",o.currency]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total estim"})]})]})}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[a.jsx(jn,{className:"h-5 w-5"}),"Besoin source"]})}),a.jsx(pe,{children:a.jsxs($t,{to:`/besoins/${o.besoin_id}`,className:"flex items-center gap-2 text-primary hover:underline",children:[((Gt=o.besoin)==null?void 0:Gt.title)||"Voir le besoin",a.jsx(Fc,{className:"h-4 w-4"})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Dtails de la demande"})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Dpartement"}),a.jsx("p",{className:"font-medium",children:((wr=o.department)==null?void 0:wr.name)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cre par"}),a.jsxs("p",{className:"font-medium",children:[(Ln=o.created_by_profile)==null?void 0:Ln.first_name," ",(ut=o.created_by_profile)==null?void 0:ut.last_name]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Catgorie"}),a.jsx(it,{variant:"outline",children:lx[o.category]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Priorit"}),a.jsx(it,{className:o.priority==="urgente"?"bg-destructive/10 text-destructive":o.priority==="haute"?"bg-warning/10 text-warning":"bg-muted text-muted-foreground",children:Gm[o.priority]})]}),o.desired_date&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Date souhaite"}),a.jsx("p",{className:"font-medium",children:Ct(new Date(o.desired_date),"dd MMMM yyyy",{locale:Tt})})]}),o.selected_fournisseur&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fournisseur retenu"}),a.jsxs("p",{className:"flex items-center gap-2 font-medium",children:[a.jsx(zs,{className:"h-4 w-4"}),o.selected_fournisseur.name]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Description"}),a.jsx("p",{className:"whitespace-pre-wrap text-foreground",children:o.description})]}),o.observations&&a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Observations techniques"}),a.jsx("p",{className:"whitespace-pre-wrap text-foreground",children:o.observations})]}),o.fournisseur_justification&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Justification fournisseur"}),a.jsx("p",{className:"whitespace-pre-wrap text-foreground",children:o.fournisseur_justification})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[a.jsx(GQ,{className:"h-5 w-5"}),"Pices jointes"]})}),a.jsxs(pe,{className:"space-y-4",children:[o.attachment_url?a.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-muted/30 p-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(jn,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:o.attachment_name||"Pice jointe"}),a.jsx("a",{href:o.attachment_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"Tlcharger"})]})]}),Qe&&a.jsx(de,{variant:"ghost",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:Rt,disabled:re,children:a.jsx(ds,{className:"h-4 w-4"})})]}):a.jsx("p",{className:"text-muted-foreground",children:"Aucune pice jointe."}),Qe&&!o.attachment_url&&a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("input",{type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.gif",onChange:Xr,disabled:re}),a.jsx(de,{variant:"outline",asChild:!0,disabled:re,children:a.jsxs("span",{children:[a.jsx(S4,{className:"mr-2 h-4 w-4"}),re?"Envoi...":"Ajouter une pice jointe"]})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"PDF ou image (max 5 Mo)"})]})]})]}),a.jsx(yY,{da:o}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsxs(Ue,{children:["Articles / Services (",c.length,")"]}),a.jsx(wn,{children:ye?"Cliquez sur un article pour ajouter des prix fournisseurs.":"Liste des articles demands."})]}),a.jsx(pe,{className:"space-y-4",children:c.length===0?a.jsx("p",{className:"text-muted-foreground",children:"Aucun article."}):c.map(Ce=>{const yt=m[Ce.id]||[],Jt=yt.find(Mt=>Mt.is_selected);return a.jsxs("div",{className:"rounded-lg border p-4",children:[a.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:Ce.designation}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[Ce.quantity," ",Ce.unit,Jt&&a.jsxs("span",{className:"ml-2 text-success",children:[" ",(Jt.unit_price*Ce.quantity).toLocaleString()," ",Jt.currency]})]})]}),ye&&a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{D(Ce.id),C(!0)},children:[a.jsx(ai,{className:"mr-1 h-3 w-3"}),"Prix"]})]}),yt.length>0&&a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Fournisseur"}),a.jsx(Ee,{className:"text-right",children:"Prix unitaire"}),a.jsx(Ee,{className:"text-right",children:"Total ligne"}),a.jsx(Ee,{children:"Dlai"}),ye&&a.jsx(Ee,{className:"text-right",children:"Slection"})]})}),a.jsx(rn,{children:yt.map(Mt=>{var Ar;return a.jsxs(gt,{className:Mt.is_selected?"bg-success/5":"",children:[a.jsx(Se,{className:"font-medium",children:((Ar=Mt.fournisseur)==null?void 0:Ar.name)||"N/A"}),a.jsxs(Se,{className:"text-right",children:[Mt.unit_price.toLocaleString()," ",Mt.currency]}),a.jsxs(Se,{className:"text-right font-medium",children:[(Mt.unit_price*Ce.quantity).toLocaleString()," ",Mt.currency]}),a.jsx(Se,{children:Mt.delivery_delay||"-"}),ye&&a.jsx(Se,{className:"text-right",children:Mt.is_selected?a.jsx(it,{className:"bg-success/10 text-success",children:"Retenu"}):a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>gr(Mt.id,Ce.id,Mt.fournisseur_id),disabled:g,children:"Slectionner"})})]},Mt.id)})})]})]},Ce.id)})})]})]}),a.jsx(kr,{open:A,onOpenChange:C,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Ajouter un prix fournisseur"}),a.jsx(Yr,{children:"Renseignez le prix propos par un fournisseur."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Fournisseur *"}),a.jsxs(Kt,{value:he.fournisseur_id,onValueChange:Ce=>se({...he,fournisseur_id:Ce}),children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner un fournisseur"})}),a.jsx(Xt,{children:d.map(Ce=>a.jsx(et,{value:Ce.id,children:Ce.name},Ce.id))})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Prix unitaire *"}),a.jsx(De,{type:"number",min:"0",step:"0.01",value:he.unit_price,onChange:Ce=>se({...he,unit_price:Ce.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Devise"}),a.jsxs(Kt,{value:he.currency,onValueChange:Ce=>se({...he,currency:Ce}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"XOF",children:"XOF (FCFA)"}),a.jsx(et,{value:"EUR",children:"EUR"}),a.jsx(et,{value:"USD",children:"USD"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Dlai de livraison"}),a.jsx(De,{placeholder:"Ex: 5 jours ouvrs",value:he.delivery_delay,onChange:Ce=>se({...he,delivery_delay:Ce.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Conditions"}),a.jsx(Kr,{placeholder:"Conditions particulires...",value:he.conditions,onChange:Ce=>se({...he,conditions:Ce.target.value}),rows:2})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>C(!1),children:"Annuler"}),a.jsx(de,{onClick:Zt,disabled:g,children:g?"Ajout...":"Ajouter"})]})]})}),a.jsx(kr,{open:j,onOpenChange:N,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Rejeter cette DA"}),a.jsx(Yr,{children:"Indiquez le motif du rejet."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Motif du rejet *"}),a.jsx(Kr,{placeholder:"Expliquez pourquoi cette DA est rejete...",value:q,onChange:Ce=>K(Ce.target.value),rows:4})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>N(!1),children:"Annuler"}),a.jsx(de,{variant:"destructive",onClick:Nn,disabled:!q.trim()||g,children:"Confirmer le rejet"})]})]})}),a.jsx(Yo,{open:T,onOpenChange:B,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsxs(fo,{className:"flex items-center gap-2",children:[a.jsx(Ya,{className:"h-5 w-5 text-success"}),"Valider financirement cette DA ?"]}),a.jsx(ho,{children:"Cette dcision engage la responsabilit financire de l'entreprise. La DA sera transmise  la Comptabilit pour traitement."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant autoris"}),a.jsxs("p",{className:"text-xl font-bold",children:[(oi=o==null?void 0:o.total_amount)==null?void 0:oi.toLocaleString()," ",o==null?void 0:o.currency]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Commentaire (optionnel)"}),a.jsx(Kr,{placeholder:"Ajouter un commentaire de validation...",value:I,onChange:Ce=>$(Ce.target.value),rows:2})]})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),a.jsx(Xo,{onClick:xr,className:"bg-success text-success-foreground hover:bg-success/90",disabled:g,children:"Confirmer la validation"})]})]})}),a.jsx(kr,{open:E,onOpenChange:O,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsxs(Nr,{className:"flex items-center gap-2 text-destructive",children:[a.jsx(wl,{className:"h-5 w-5"}),"Refuser cette DA"]}),a.jsx(Yr,{children:"Cette action bloque dfinitivement la demande. Le motif sera communiqu aux parties concernes."})]}),a.jsxs("div",{className:"space-y-2 py-4",children:[a.jsx(Pe,{children:"Motif du refus *"}),a.jsx(Kr,{placeholder:"Expliquez pourquoi cette DA est refuse...",value:I,onChange:Ce=>$(Ce.target.value),rows:4})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>O(!1),children:"Annuler"}),a.jsx(de,{variant:"destructive",onClick:Ht,disabled:!I.trim()||g,children:"Confirmer le refus"})]})]})}),a.jsx(kr,{open:L,onOpenChange:k,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsxs(Nr,{className:"flex items-center gap-2",children:[a.jsx(cd,{className:"h-5 w-5 text-warning"}),"Demander une rvision"]}),a.jsx(Yr,{children:"La DA sera renvoye au Service Achats pour rvision. Expliquez ce qui doit tre modifi."})]}),a.jsxs("div",{className:"space-y-2 py-4",children:[a.jsx(Pe,{children:"Commentaire de rvision *"}),a.jsx(Kr,{placeholder:"Indiquez les lments  rviser (prix, fournisseur, justification...)...",value:U,onChange:Ce=>H(Ce.target.value),rows:4})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>k(!1),children:"Annuler"}),a.jsx(de,{onClick:rr,disabled:!U.trim()||g,children:"Demander la rvision"})]})]})}),a.jsx(Yo,{open:b,onOpenChange:x,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(fo,{children:"Supprimer cette DA ?"}),a.jsx(ho,{children:"Cette action est irrversible."})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),a.jsx(Xo,{onClick:Ir,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})}),a.jsx(PO,{open:M,onOpenChange:G,onConfirm:Ot,entityType:"da",isLoading:g})]})}const nFe={prepare:"bg-muted text-muted-foreground",en_attente_validation:"bg-warning/10 text-warning border-warning/20",valide:"bg-primary/10 text-primary border-primary/20",livre:"bg-success/10 text-success border-success/20",livree_partiellement:"bg-warning/10 text-warning border-warning/20",refusee:"bg-destructive/10 text-destructive border-destructive/20",annulee:"bg-muted text-muted-foreground line-through"},iFe={prepare:Yn,en_attente_validation:ao,valide:Br,livre:th,livree_partiellement:zr,refusee:Er,annulee:Er};function sFe(){const{roles:e,isAdmin:t}=yr(),{toast:r}=qr(),[n,i]=_.useState([]),[s,o]=_.useState(!0),[l,c]=_.useState(""),[u,d]=_.useState("all");e.some(h=>["responsable_logistique","agent_logistique"].includes(h)),e.includes("dg"),_.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:h,error:v}=await fe.from("bons_livraison").select(`
          *,
          department:departments(id, name),
          created_by_profile:profiles!bons_livraison_created_by_fkey(id, first_name, last_name),
          besoin:besoins(id, title)
        `).order("created_at",{ascending:!1});if(v)throw v;i(h||[])}catch(h){console.error("Error fetching BL:",h),r({title:"Erreur",description:h.message,variant:"destructive"})}finally{o(!1)}},m=n.filter(h=>{const v=h.reference.toLowerCase().includes(l.toLowerCase())||(h.warehouse||"").toLowerCase().includes(l.toLowerCase()),p=u==="all"||h.status===u;return v&&p});return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Bons de Livraison"}),a.jsx("p",{className:"text-muted-foreground",children:"Grez les livraisons depuis le stock existant"})]})}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(Tn,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Livraison interne"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Un BL est cr lorsqu'un Besoin peut tre satisfait depuis le stock existant, sans achat externe."})]})]})}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-4",children:a.jsx(Ue,{className:"text-lg",children:"Filtres"})}),a.jsx(pe,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par rfrence ou magasin...",value:l,onChange:h=>c(h.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:u,onValueChange:d,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Tous les statuts"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les statuts"}),Object.keys(fy).map(h=>a.jsx(et,{value:h,children:fy[h]},h))]})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:[m.length," bon",m.length!==1?"s":""," de livraison"]})}),a.jsx(pe,{children:s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):m.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucun bon de livraison trouv."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Rfrence"}),a.jsx(Ee,{children:"Besoin source"}),a.jsx(Ee,{children:"Dpartement"}),a.jsx(Ee,{children:"Magasin"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{children:"Date"}),a.jsx(Ee,{className:"text-right",children:"Action"})]})}),a.jsx(rn,{children:m.map(h=>{var p,g;const v=iFe[h.status];return a.jsxs(gt,{children:[a.jsx(Se,{className:"font-medium",children:h.reference}),a.jsx(Se,{className:"max-w-xs truncate",children:((p=h.besoin)==null?void 0:p.title)||"N/A"}),a.jsx(Se,{children:((g=h.department)==null?void 0:g.name)||"N/A"}),a.jsx(Se,{children:h.warehouse||"-"}),a.jsx(Se,{children:a.jsxs(it,{className:nFe[h.status],children:[a.jsx(v,{className:"mr-1 h-3 w-3"}),fy[h.status]]})}),a.jsx(Se,{children:Ct(new Date(h.created_at),"dd MMM yyyy",{locale:Tt})}),a.jsx(Se,{className:"text-right",children:a.jsx($t,{to:`/bons-livraison/${h.id}`,children:a.jsx(de,{variant:"ghost",size:"sm",children:"Voir"})})})]},h.id)})})]})})})]})]})})}const aFe={disponible:"Disponible",reserve:"Rserv",epuise:"puis"},oFe={disponible:"bg-success/10 text-success border-success/20",reserve:"bg-warning/10 text-warning border-warning/20",epuise:"bg-destructive/10 text-destructive border-destructive/20"};function f$({onSelect:e,excludeIds:t=[]}){const[r,n]=_.useState(!1),[i,s]=_.useState(""),[o,l]=_.useState([]),[c,u]=_.useState(!1);_.useEffect(()=>{r&&d()},[r]);const d=async()=>{u(!0);try{const{data:v,error:p}=await fe.from("articles_stock").select("*").neq("status","epuise").order("designation",{ascending:!0});if(p)throw p;l(v||[])}catch(v){console.error("Error fetching stock:",v)}finally{u(!1)}},f=o.filter(v=>{var p,g;return!t.includes(v.id)&&(v.designation.toLowerCase().includes(i.toLowerCase())||((p=v.description)==null?void 0:p.toLowerCase().includes(i.toLowerCase()))||((g=v.location)==null?void 0:g.toLowerCase().includes(i.toLowerCase())))}),m=v=>{e(v),n(!1),s("")},h=v=>Math.max(0,v.quantity_available-v.quantity_reserved);return a.jsxs(kr,{open:r,onOpenChange:n,children:[a.jsx(zj,{asChild:!0,children:a.jsxs(de,{type:"button",variant:"outline",size:"sm",children:[a.jsx(Tn,{className:"mr-2 h-4 w-4"}),"Depuis le stock"]})}),a.jsxs(_r,{className:"max-w-3xl max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Slectionner un article du stock"}),a.jsx(Yr,{children:"Choisissez un article disponible en stock pour l'ajouter au bon de livraison"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par dsignation, description ou emplacement...",value:i,onChange:v=>s(v.target.value),className:"pl-10"})]}),a.jsx("div",{className:"flex-1 overflow-auto border rounded-lg",children:c?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):f.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx(Tn,{className:"mb-2 h-8 w-8 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:i?"Aucun article trouv":"Aucun article en stock"})]}):a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Dsignation"}),a.jsx(Ee,{children:"Emplacement"}),a.jsx(Ee,{className:"text-center",children:"Disponible"}),a.jsx(Ee,{className:"text-center",children:"Statut"}),a.jsx(Ee,{className:"w-[80px]"})]})}),a.jsx(rn,{children:f.map(v=>{const p=h(v),g=v.quantity_min&&p<=v.quantity_min;return a.jsxs(gt,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(Se,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:v.designation}),v.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:v.description})]})}),a.jsx(Se,{className:"text-muted-foreground",children:v.location||"-"}),a.jsx(Se,{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsxs("span",{className:g?"text-warning font-medium":"",children:[p," ",v.unit]}),g&&a.jsx(zr,{className:"h-3 w-3 text-warning"})]})}),a.jsx(Se,{className:"text-center",children:a.jsx(it,{variant:"outline",className:oFe[v.status],children:aFe[v.status]})}),a.jsx(Se,{children:a.jsx(de,{type:"button",size:"sm",variant:"ghost",onClick:()=>m(v),disabled:p<=0,children:a.jsx($c,{className:"h-4 w-4"})})})]},v.id)})})]})})]})]})}function lFe(){var q,K,ae;const e=yi(),[t]=j9(),r=t.get("besoin"),{user:n,roles:i,isAdmin:s}=yr(),{toast:o}=qr(),[l,c]=_.useState(null),[u,d]=_.useState(!0),[f,m]=_.useState(!1),[h,v]=_.useState(!1),[p,g]=_.useState({delivery_date:"",warehouse:"",observations:""}),[y,b]=_.useState([]),[x,j]=_.useState(!1),A=i.some(J=>jh.includes(J))||s;_.useEffect(()=>{r?(C(),E()):d(!1)},[r]);const C=async()=>{try{const{data:J,error:I}=await fe.from("besoins").select(`
          *,
          department:departments(id, name),
          user:profiles!besoins_user_id_fkey(id, first_name, last_name, email)
        `).eq("id",r).maybeSingle();if(I||!J){o({title:"Erreur",description:"Besoin introuvable.",variant:"destructive"}),e("/besoins");return}const{data:$}=await fe.from("besoin_lignes").select("*").eq("besoin_id",r).order("created_at",{ascending:!0});if(c(J),J.lieu_livraison&&g(U=>({...U,warehouse:J.lieu_livraison||""})),$&&$.length>0&&!x){const U=$.filter(X=>X.article_stock_id).map(X=>X.article_stock_id);let H={};if(U.length>0){const{data:X}=await fe.from("articles_stock").select("id, quantity_available, quantity_reserved").in("id",U);X&&(H=X.reduce((he,se)=>(he[se.id]={quantity_available:se.quantity_available,quantity_reserved:se.quantity_reserved},he),{}))}const re=$.map(X=>{const he=X.article_stock_id?H[X.article_stock_id]:null,se=he?Math.max(0,he.quantity_available-he.quantity_reserved):void 0;return{designation:X.designation,quantity:String(X.quantity),unit:X.unit,observations:X.justification||"",article_stock_id:X.article_stock_id||null,stock_available:se}});b(re),j(!0)}else x||(b([{designation:"",quantity:"1",unit:"unit",observations:"",article_stock_id:null}]),j(!0))}catch(J){console.error("Error:",J)}finally{d(!1)}},E=async()=>{const{data:J}=await fe.rpc("can_transform_besoin",{_besoin_id:r});v(J===!0)},O=()=>{b(J=>[...J,{designation:"",quantity:"1",unit:"unit",observations:"",article_stock_id:null}])},L=J=>{const I=Math.max(0,J.quantity_available-J.quantity_reserved);b($=>[...$,{designation:J.designation,quantity:"1",unit:J.unit,observations:"",article_stock_id:J.id,stock_available:I}]),o({title:"Article ajout",description:`${J.designation} (${I} ${J.unit} disponibles)`})},k=(J,I)=>{const $=Math.max(0,I.quantity_available-I.quantity_reserved),U=[...y];U[J]={...U[J],article_stock_id:I.id,stock_available:$,unit:I.unit},b(U),o({title:"Article li au stock",description:`${$} ${I.unit} disponibles`})},T=J=>{const I=[...y];I[J]={...I[J],article_stock_id:null,stock_available:void 0},b(I)},B=J=>{y.length>1&&b(y.filter((I,$)=>$!==J))},M=(J,I,$)=>{const U=[...y];U[J]={...U[J],[I]:$},b(U)},G=()=>{const J=[];return y.forEach((I,$)=>{if(I.article_stock_id&&I.stock_available!==void 0){const U=parseFloat(I.quantity);U>I.stock_available&&J.push(`Article ${$+1} (${I.designation}): quantit demande (${U}) > disponible (${I.stock_available})`)}}),{valid:J.length===0,errors:J}},z=async J=>{if(J.preventDefault(),!l||!n)return;const I=y.filter(U=>U.designation.trim()&&parseFloat(U.quantity)>0);if(I.length===0){o({title:"Erreur",description:"Au moins un article est requis.",variant:"destructive"});return}const $=G();if(!$.valid){o({title:"Stock insuffisant",description:$.errors.join(`
`),variant:"destructive"});return}m(!0);try{const{data:U,error:H}=await fe.rpc("generate_bl_reference");if(H)throw H;const{data:re,error:X}=await fe.from("bons_livraison").insert({reference:U,besoin_id:l.id,department_id:l.department_id,created_by:n.id,delivery_date:p.delivery_date||null,warehouse:p.warehouse.trim()||null,observations:p.observations.trim()||null,bl_type:"interne"}).select().single();if(X)throw X;const he=I.map(ue=>({bl_id:re.id,designation:ue.designation.trim(),quantity:parseFloat(ue.quantity),unit:ue.unit,observations:ue.observations.trim()||null,article_stock_id:ue.article_stock_id||null,quantity_ordered:parseFloat(ue.quantity)})),{error:se}=await fe.from("bl_articles").insert(he);if(se)throw se;o({title:"BL cr",description:`Le bon ${U} a t cr avec succs.`}),e(`/bons-livraison/${re.id}`)}catch(U){const H=(U==null?void 0:U.message)||(U==null?void 0:U.error_description)||(U==null?void 0:U.details)||(typeof U=="string"?U:null)||"Erreur inconnue lors de la cration du bon de livraison.";console.error("BLCreate submit error:",{error:U,message:H}),o({title:"Erreur",description:H,variant:"destructive"})}finally{m(!1)}},D=y.filter(J=>J.article_stock_id).map(J=>J.article_stock_id);return A?u?a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})}):l?h?a.jsx(st,{children:a.jsxs("form",{onSubmit:z,className:"mx-auto max-w-3xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:`/besoins/${l.id}`,children:a.jsx(de,{type:"button",variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Crer un Bon de Livraison"}),a.jsxs("p",{className:"text-muted-foreground",children:[" partir du besoin: ",l.title]})]})]}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(Tn,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Livraison depuis le stock"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Liez chaque article au stock pour vrifier la disponibilit. Le stock sera dcrment  la livraison."})]})]})}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{className:"text-lg",children:"Besoin source"})}),a.jsxs(pe,{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Titre"}),a.jsx("p",{className:"font-medium",children:l.title})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Dpartement"}),a.jsx("p",{className:"font-medium",children:(q=l.department)==null?void 0:q.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandeur"}),a.jsxs("p",{className:"font-medium",children:[(K=l.user)==null?void 0:K.first_name," ",(ae=l.user)==null?void 0:ae.last_name]})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{className:"text-lg",children:"Informations de livraison"})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Date de livraison prvue"}),a.jsx(De,{type:"date",value:p.delivery_date,onChange:J=>g({...p,delivery_date:J.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Magasin / Dpt"}),a.jsx(De,{placeholder:"Ex: Magasin central",value:p.warehouse,onChange:J=>g({...p,warehouse:J.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Observations"}),a.jsx(Kr,{placeholder:"Notes sur la livraison...",value:p.observations,onChange:J=>g({...p,observations:J.target.value}),rows:2})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ue,{className:"text-lg",children:"Articles  livrer"}),a.jsx(wn,{children:"Liez les articles au stock pour vrifier les quantits disponibles"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(f$,{onSelect:L,excludeIds:D}),a.jsxs(de,{type:"button",variant:"outline",size:"sm",onClick:O,children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Manuel"]})]})]})}),a.jsx(pe,{className:"space-y-4",children:y.length===0?a.jsxs("div",{className:"rounded-lg border border-dashed p-8 text-center",children:[a.jsx(Tn,{className:"mx-auto mb-2 h-8 w-8 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:"Ajoutez des articles depuis le stock ou manuellement"})]}):y.map((J,I)=>{const $=parseFloat(J.quantity)||0,U=J.stock_available!==void 0&&$>J.stock_available,H=!!J.article_stock_id;return a.jsxs("div",{className:`rounded-lg border p-4 ${U?"border-destructive/50 bg-destructive/5":"bg-muted/30"}`,children:[a.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Article ",I+1]}),H?a.jsxs(it,{variant:"outline",className:"bg-success/10 text-success border-success/20",children:[a.jsx(UQ,{className:"mr-1 h-3 w-3"}),"Li au stock"]}):a.jsx(it,{variant:"outline",className:"text-muted-foreground",children:"Manuel"}),J.stock_available!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",J.stock_available," ",J.unit," disponibles)"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[H?a.jsx(de,{type:"button",variant:"ghost",size:"sm",className:"h-8 text-muted-foreground hover:text-foreground",onClick:()=>T(I),title:"Dlier du stock",children:a.jsx(ZQ,{className:"h-4 w-4"})}):a.jsx(f$,{onSelect:re=>k(I,re),excludeIds:D}),y.length>1&&a.jsx(de,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:bg-destructive/10",onClick:()=>B(I),children:a.jsx(ds,{className:"h-4 w-4"})})]})]}),U&&a.jsxs("div",{className:"mb-3 flex items-center gap-2 text-sm text-destructive",children:[a.jsx(zr,{className:"h-4 w-4"}),"Stock insuffisant: ",J.stock_available," ",J.unit," disponibles"]}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-4",children:[a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx(Pe,{children:"Dsignation *"}),a.jsx(De,{placeholder:"Nom de l'article",value:J.designation,onChange:re=>M(I,"designation",re.target.value),disabled:H})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Quantit *"}),a.jsx(De,{type:"number",min:"0.01",step:"0.01",max:J.stock_available,value:J.quantity,onChange:re=>M(I,"quantity",re.target.value),className:U?"border-destructive":""})]}),a.jsxs("div",{children:[a.jsx(Pe,{children:"Unit"}),a.jsx(De,{placeholder:"unit",value:J.unit,onChange:re=>M(I,"unit",re.target.value),disabled:H})]})]})]},I)})})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx($t,{to:`/besoins/${l.id}`,children:a.jsx(de,{type:"button",variant:"outline",children:"Annuler"})}),a.jsx(de,{type:"submit",disabled:f,children:f?"Cration...":"Crer le Bon de Livraison"})]})]})}):a.jsx(st,{children:a.jsx(me,{className:"mx-auto max-w-md",children:a.jsxs(pe,{className:"py-12 text-center",children:[a.jsx(zr,{className:"mx-auto mb-4 h-12 w-12 text-destructive"}),a.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Transformation impossible"}),a.jsx("p",{className:"mb-4 text-muted-foreground",children:"Ce besoin ne peut pas tre transform. Il est soit dj transform, soit non accept."}),a.jsx($t,{to:`/besoins/${l.id}`,children:a.jsx(de,{variant:"outline",children:"Retour au besoin"})})]})})}):a.jsx(st,{children:a.jsx(me,{className:"mx-auto max-w-md",children:a.jsxs(pe,{className:"py-12 text-center",children:[a.jsx(zr,{className:"mx-auto mb-4 h-12 w-12 text-warning"}),a.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Besoin source requis"}),a.jsx("p",{className:"mb-4 text-muted-foreground",children:"Un BL doit tre cr  partir d'un Besoin accept."}),a.jsx($t,{to:"/besoins",children:a.jsx(de,{children:"Voir les besoins"})})]})})}):a.jsx(st,{children:a.jsx(Ji,{message:"Seule la Direction Logistique peut crer des Bons de Livraison."})})}const cFe={prepare:"bg-muted text-muted-foreground",en_attente_validation:"bg-warning/10 text-warning border-warning/20",valide:"bg-primary/10 text-primary border-primary/20",livre:"bg-success/10 text-success border-success/20",livree_partiellement:"bg-warning/10 text-warning border-warning/20",refusee:"bg-destructive/10 text-destructive border-destructive/20",annulee:"bg-muted text-muted-foreground line-through"},uFe={prepare:Yn,en_attente_validation:ao,valide:Br,livre:th,livree_partiellement:zr,refusee:Er,annulee:Er};function dFe(){var se,ue,ge,ve;const{id:e}=Qc(),t=yi(),{user:r,roles:n,isAdmin:i}=yr(),{toast:s}=qr(),[o,l]=_.useState(null),[c,u]=_.useState([]),[d,f]=_.useState(!0),[m,h]=_.useState(!1),[v,p]=_.useState(!1),[g,y]=_.useState(!1),[b,x]=_.useState(!1),[j,N]=_.useState(!1),[A,C]=_.useState([]),[E,O]=_.useState(!1),L=n.some(te=>jh.includes(te)),k=n.includes("daf"),T=(k||i)&&(o==null?void 0:o.status)==="en_attente_validation",B=(L||i)&&(o==null?void 0:o.status)==="valide",M=(L||i)&&(o==null?void 0:o.status)==="prepare";(k||i)&&(o==null||o.status);const G=i,z=c.filter(te=>{const Ne=te.quantity_ordered||te.quantity,Y=te.quantity_delivered||0;return Y<Ne&&Y>0}),D=(o==null?void 0:o.status)==="livree_partiellement"&&z.length>0,q=(L||i)&&D;_.useEffect(()=>{e&&(K(),ae())},[e]);const K=async()=>{try{const{data:te,error:Ne}=await fe.from("bons_livraison").select(`
          *,
          department:departments(id, name),
          besoin:besoins(id, title)
        `).eq("id",e).maybeSingle();if(Ne||!te){s({title:"Erreur",description:"BL introuvable.",variant:"destructive"}),t("/bons-livraison");return}const Y=[te.created_by,te.validated_by,te.delivered_by,te.rejected_by].filter(Boolean),{data:Le}=await fe.rpc("get_public_profiles",{_user_ids:Y}),ye={};(Le||[]).forEach(_e=>{ye[_e.id]={first_name:_e.first_name,last_name:_e.last_name}});const we={...te,created_by_profile:ye[te.created_by]||null,validated_by_profile:te.validated_by&&ye[te.validated_by]||null,delivered_by_profile:te.delivered_by&&ye[te.delivered_by]||null,rejected_by_profile:te.rejected_by&&ye[te.rejected_by]||null};l(we)}catch(te){console.error("Error:",te)}finally{f(!1)}},ae=async()=>{const{data:te}=await fe.from("bl_articles").select("*").eq("bl_id",e).order("created_at");u(te||[])},J=async te=>{if(o){h(!0);try{const Ne={status:te};te==="valide"?(Ne.validated_by=r==null?void 0:r.id,Ne.validated_at=new Date().toISOString()):te==="livre"&&(Ne.delivered_by=r==null?void 0:r.id,Ne.delivered_at=new Date().toISOString());const{error:Y}=await fe.from("bons_livraison").update(Ne).eq("id",o.id);if(Y)throw Y;s({title:"Statut mis  jour",description:{prepare:"BL en prparation",en_attente_validation:"BL soumis  validation",valide:"BL valid",livre:"Livraison confirme",livree_partiellement:"Livraison partielle enregistre",refusee:"BL refus",annulee:"BL annul"}[te]}),K()}catch(Ne){s({title:"Erreur",description:Ne.message,variant:"destructive"})}finally{h(!1)}}},I=()=>{C(c.map(te=>({id:te.id,designation:te.designation,quantity_ordered:te.quantity_ordered||te.quantity,quantity_delivered:te.quantity_delivered||0,ecart_reason:te.ecart_reason||""}))),y(!0)},$=async()=>{if(!(!o||!r)){h(!0);try{for(const Le of A)await fe.from("bl_articles").update({quantity_delivered:Le.quantity_delivered,ecart_reason:Le.ecart_reason||null}).eq("id",Le.id);const te=A.some(Le=>Le.quantity_delivered<Le.quantity_ordered),Ne=te?"livree_partiellement":"livre",{error:Y}=await fe.from("bons_livraison").update({status:Ne,delivered_by:r.id,delivered_at:new Date().toISOString()}).eq("id",o.id);if(Y)throw Y;for(const Le of A)if(Le.quantity_delivered>0){const ye=c.find(we=>we.id===Le.id);if(ye!=null&&ye.article_stock_id){const{data:we}=await fe.from("articles_stock").select("quantity_available").eq("id",ye.article_stock_id).single();if(we){const _e=we.quantity_available,Qe=_e-Le.quantity_delivered;await fe.from("stock_movements").insert({article_stock_id:ye.article_stock_id,movement_type:"sortie",quantity:Le.quantity_delivered,quantity_before:_e,quantity_after:Qe,bl_id:o.id,reference:o.reference,observations:`Livraison BL ${o.reference}`,created_by:r.id}),await fe.from("articles_stock").update({quantity_available:Qe}).eq("id",ye.article_stock_id)}}}s({title:te?"Livraison partielle":"Livraison complte",description:te?"La livraison partielle a t enregistre. Le stock a t mis  jour.":"La livraison a t confirme. Le stock a t mis  jour."}),y(!1),K(),ae()}catch(te){s({title:"Erreur",description:te.message,variant:"destructive"})}finally{h(!1)}}},U=async te=>{if(!(!o||!r)){h(!0);try{const{error:Ne}=await fe.from("bons_livraison").update({status:"annulee",cancelled_at:new Date().toISOString(),cancelled_by:r.id,cancellation_reason:te}).eq("id",o.id);if(Ne)throw Ne;s({title:"BL annul",description:"Le bon de livraison a t annul avec succs."}),N(!1),K()}catch(Ne){s({title:"Erreur",description:Ne.message,variant:"destructive"})}finally{h(!1)}}},H=async()=>{if(!(!o||!r||z.length===0)){O(!0);try{const{data:te,error:Ne}=await fe.from("besoins").select("id, title, department_id, desired_date, projet_id").eq("id",o.besoin_id).single();if(Ne||!te)throw new Error("Impossible de rcuprer le besoin source");const{data:Y,error:Le}=await fe.rpc("generate_da_reference");if(Le||!Y)throw new Error("Impossible de gnrer la rfrence DA");const ye=z.map(Ke=>{const Pt=Ke.quantity_ordered||Ke.quantity,Lt=Ke.quantity_delivered||0;return{designation:Ke.designation,quantity:Pt-Lt,unit:Ke.unit,observations:`Reliquat BL ${o.reference} - Non livr depuis stock`}}),we={besoin_id:te.id,department_id:te.department_id,created_by:r.id,category:"materiel",priority:"normale",desired_date:te.desired_date,projet_id:te.projet_id,status:"brouillon",description:`Reliquat livraison partielle BL ${o.reference} - Articles non disponibles en stock`,observations:`DA gnre automatiquement suite  la livraison partielle du BL ${o.reference}. Les articles ci-dessous doivent tre approvisionns via achat externe.`};we.reference=Y;const{data:_e,error:Qe}=await fe.from("demandes_achat").insert(we).select().single();if(Qe||!_e)throw Qe||new Error("Impossible de crer la DA");const We=ye.map(Ke=>({da_id:_e.id,designation:Ke.designation,quantity:Ke.quantity,unit:Ke.unit,observations:Ke.observations})),{error:Ge}=await fe.from("da_articles").insert(We);if(Ge)throw Ge;s({title:"DA cre pour le reliquat",description:`La demande d'achat ${Y} a t cre avec ${ye.length} article(s)  approvisionner.`}),x(!1),t(`/demandes-achat/${_e.id}`)}catch(te){console.error("Error creating DA from reliquat:",te),s({title:"Erreur",description:te.message,variant:"destructive"})}finally{O(!1)}}},re=async()=>{if(o){h(!0);try{const{error:te}=await fe.from("bons_livraison").delete().eq("id",o.id);if(te)throw te;s({title:"BL supprim",description:"Le bon de livraison a t supprim."}),t("/bons-livraison")}catch(te){s({title:"Erreur",description:te.message,variant:"destructive"})}finally{h(!1)}}};if(d)return a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(!o)return null;const X=uFe[o.status],he=()=>{var te,Ne;X$e({reference:o.reference,status:o.status,statusLabel:fy[o.status],department:((te=o.department)==null?void 0:te.name)||"N/A",warehouse:o.warehouse||void 0,blType:o.bl_type==="interne"?"Depuis stock":"Fournisseur externe",deliveryDate:o.delivery_date||void 0,createdAt:o.created_at,createdBy:o.created_by_profile?`${o.created_by_profile.first_name||""} ${o.created_by_profile.last_name||""}`.trim():"N/A",deliveredBy:o.delivered_by_profile?`${o.delivered_by_profile.first_name||""} ${o.delivered_by_profile.last_name||""}`.trim():void 0,deliveredAt:o.delivered_at||void 0,validatedBy:o.validated_by_profile?`${o.validated_by_profile.first_name||""} ${o.validated_by_profile.last_name||""}`.trim():void 0,validatedAt:o.validated_at||void 0,besoinTitle:((Ne=o.besoin)==null?void 0:Ne.title)||"N/A",besoinReference:void 0,observations:o.observations||void 0,articles:c.map(Y=>({designation:Y.designation,quantityOrdered:Y.quantity_ordered||Y.quantity,quantityDelivered:Y.quantity_delivered||0,unit:Y.unit,ecartReason:Y.ecart_reason||void 0}))})};return a.jsxs(st,{children:[a.jsxs("div",{className:"mx-auto max-w-3xl space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/bons-livraison",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:o.reference}),a.jsxs(it,{className:cFe[o.status],children:[a.jsx(X,{className:"mr-1 h-3 w-3"}),fy[o.status]]})]}),a.jsxs("p",{className:"text-muted-foreground",children:["Cr le ",Ct(new Date(o.created_at),"dd MMMM yyyy  HH:mm",{locale:Tt})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:he,children:[a.jsx(bd,{className:"mr-2 h-4 w-4"}),"Exporter PDF"]}),i&&["livre","livree_partiellement","valide"].includes(o.status)&&o.status!=="annulee"&&a.jsxs(de,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>N(!0),children:[a.jsx(wl,{className:"mr-2 h-4 w-4"}),"Annuler"]}),G&&o.status==="prepare"&&a.jsxs(de,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>p(!0),children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]}),M&&a.jsx(me,{className:"border-primary/50 bg-primary/5",children:a.jsxs(pe,{className:"flex flex-col gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"BL en prparation"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Soumettez ce BL  validation lorsqu'il est prt."})]}),a.jsxs(de,{onClick:()=>J("en_attente_validation"),disabled:m,children:[a.jsx(ao,{className:"mr-2 h-4 w-4"}),"Soumettre  validation"]})]})}),T&&a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex flex-col gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Validation DAF requise"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"En tant que DAF, validez ce BL pour autoriser la Logistique  effectuer la livraison."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",onClick:()=>J("refusee"),disabled:m,className:"text-destructive hover:bg-destructive/10",children:[a.jsx(Er,{className:"mr-2 h-4 w-4"}),"Refuser"]}),a.jsxs(de,{onClick:()=>J("valide"),disabled:m,children:[a.jsx(Br,{className:"mr-2 h-4 w-4"}),"Valider"]})]})]})}),B&&a.jsx(me,{className:"border-success/50 bg-success/5",children:a.jsxs(pe,{className:"flex flex-col gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Prt pour livraison"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Confirmez la livraison une fois effectue. Vous pourrez indiquer les quantits rellement livres."})]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(de,{onClick:I,disabled:m,children:[a.jsx(VQ,{className:"mr-2 h-4 w-4"}),"Enregistrer livraison"]})})]})}),q&&a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex flex-col gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-foreground flex items-center gap-2",children:[a.jsx(zr,{className:"h-4 w-4 text-warning"}),"Livraison partielle - Reliquat disponible"]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[z.length," article(s) non livr(s) intgralement. Vous pouvez crer une DA pour approvisionner le reliquat."]})]}),a.jsxs(de,{variant:"outline",onClick:()=>x(!0),disabled:E,className:"border-warning text-warning hover:bg-warning/10",children:[a.jsx(jp,{className:"mr-2 h-4 w-4"}),"Crer DA pour reliquat"]})]})}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[a.jsx(jn,{className:"h-5 w-5"}),"Besoin source"]})}),a.jsx(pe,{children:a.jsxs($t,{to:`/besoins/${o.besoin_id}`,className:"flex items-center gap-2 text-primary hover:underline",children:[((se=o.besoin)==null?void 0:se.title)||"Voir le besoin",a.jsx(Fc,{className:"h-4 w-4"})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Dtails du bon"})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Dpartement"}),a.jsx("p",{className:"font-medium",children:((ue=o.department)==null?void 0:ue.name)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cr par"}),a.jsxs("p",{className:"font-medium",children:[(ge=o.created_by_profile)==null?void 0:ge.first_name," ",(ve=o.created_by_profile)==null?void 0:ve.last_name]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Type de livraison"}),a.jsx("p",{className:"font-medium",children:o.bl_type==="interne"?"Interne (stock)":"Fournisseur"})]}),o.warehouse&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Magasin / Dpt"}),a.jsx("p",{className:"font-medium",children:o.warehouse})]}),o.delivery_date&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Date de livraison prvue"}),a.jsx("p",{className:"font-medium",children:Ct(new Date(o.delivery_date),"dd MMMM yyyy",{locale:Tt})})]})]}),o.observations&&a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Observations"}),a.jsx("p",{className:"whitespace-pre-wrap text-foreground",children:o.observations})]}),o.validated_by_profile&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Valid par"}),a.jsxs("p",{className:"font-medium",children:[o.validated_by_profile.first_name," ",o.validated_by_profile.last_name,o.validated_at&&a.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["le ",Ct(new Date(o.validated_at),"dd MMM yyyy",{locale:Tt})]})]})]}),o.delivered_by_profile&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Livr par"}),a.jsxs("p",{className:"font-medium",children:[o.delivered_by_profile.first_name," ",o.delivered_by_profile.last_name,o.delivered_at&&a.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["le ",Ct(new Date(o.delivered_at),"dd MMM yyyy",{locale:Tt})]})]})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:["Articles (",c.length,")"]})}),a.jsx(pe,{children:c.length===0?a.jsx("p",{className:"text-muted-foreground",children:"Aucun article."}):a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Dsignation"}),a.jsx(Ee,{className:"text-right",children:"Command"}),a.jsx(Ee,{className:"text-right",children:"Livr"}),a.jsx(Ee,{children:"Unit"}),a.jsx(Ee,{children:"cart"})]})}),a.jsx(rn,{children:c.map(te=>{const Ne=te.quantity_ordered||te.quantity,Y=te.quantity_delivered||0,Le=Y>0&&Y!==Ne;return a.jsxs(gt,{className:Le?"bg-warning/5":void 0,children:[a.jsx(Se,{className:"font-medium",children:te.designation}),a.jsx(Se,{className:"text-right font-mono",children:Ne}),a.jsxs(Se,{className:"text-right font-mono",children:[Y>0?Y:"-",Le&&a.jsx(zr,{className:"ml-2 inline h-4 w-4 text-warning"})]}),a.jsx(Se,{children:te.unit}),a.jsx(Se,{className:"text-muted-foreground",children:te.ecart_reason||te.observations||"-"})]},te.id)})})]})})]})]}),a.jsx(Yo,{open:v,onOpenChange:p,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(fo,{children:"Supprimer ce BL ?"}),a.jsx(ho,{children:"Cette action est irrversible."})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),a.jsx(Xo,{onClick:re,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})}),a.jsx(kr,{open:g,onOpenChange:y,children:a.jsxs(_r,{className:"max-w-2xl",children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Enregistrer la livraison"}),a.jsx(Yr,{children:"Indiquez les quantits rellement livres pour chaque article."})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto py-4",children:a.jsx("div",{className:"space-y-4",children:A.map((te,Ne)=>a.jsxs("div",{className:"rounded-lg border p-4",children:[a.jsx("p",{className:"mb-3 font-medium",children:te.designation}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Quantit commande"}),a.jsx(De,{value:te.quantity_ordered,disabled:!0,className:"bg-muted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Quantit livre"}),a.jsx(De,{type:"number",min:0,max:te.quantity_ordered,value:te.quantity_delivered,onChange:Y=>{const Le=[...A];Le[Ne].quantity_delivered=Number(Y.target.value),C(Le)}})]})]}),te.quantity_delivered<te.quantity_ordered&&a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsxs(Pe,{className:"flex items-center gap-2 text-warning",children:[a.jsx(zr,{className:"h-4 w-4"}),"Motif de l'cart"]}),a.jsx(Kr,{placeholder:"Expliquez la raison de l'cart...",value:te.ecart_reason,onChange:Y=>{const Le=[...A];Le[Ne].ecart_reason=Y.target.value,C(Le)},rows:2})]})]},te.id))})}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>y(!1),children:"Annuler"}),a.jsx(de,{onClick:$,disabled:m,children:m?"Enregistrement...":"Confirmer la livraison"})]})]})}),a.jsx(kr,{open:b,onOpenChange:x,children:a.jsxs(_r,{className:"max-w-lg",children:[a.jsxs(jr,{children:[a.jsxs(Nr,{className:"flex items-center gap-2",children:[a.jsx(jp,{className:"h-5 w-5 text-warning"}),"Crer une DA pour le reliquat"]}),a.jsx(Yr,{children:"Une demande d'achat sera cre pour les articles non livrs intgralement depuis le stock."})]}),a.jsxs("div",{className:"py-4",children:[a.jsx("p",{className:"text-sm font-medium mb-3",children:"Articles concerns :"}),a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:z.map(te=>{const Ne=te.quantity_ordered||te.quantity,Y=te.quantity_delivered||0,Le=Ne-Y;return a.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 bg-muted/30",children:[a.jsx("span",{className:"font-medium",children:te.designation}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.jsx("span",{className:"text-warning font-mono",children:Le})," ",te.unit,"  commander"]})]},te.id)})})]}),a.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3",children:a.jsxs("p",{className:"text-sm text-foreground",children:[a.jsx("span",{className:"font-medium",children:" Information :"}),' La DA sera cre en statut "brouillon" et lie au mme besoin source. Vous pourrez la soumettre au service Achats pour traitement.']})}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>x(!1),children:"Annuler"}),a.jsx(de,{onClick:H,disabled:E,children:E?"Cration...":"Crer la DA"})]})]})}),a.jsx(PO,{open:j,onOpenChange:N,onConfirm:U,entityType:"bl",isLoading:m})]})}function fFe(){const{user:e,roles:t,isAdmin:r}=yr(),{toast:n}=qr(),[i,s]=_.useState([]),[o,l]=_.useState(!0),[c,u]=_.useState(""),[d,f]=_.useState(!1),[m,h]=_.useState(null),[v,p]=_.useState(!1),[g,y]=_.useState(null),[b,x]=_.useState(!1),[j,N]=_.useState({name:"",contact_name:"",email:"",phone:"",address:"",notes:""}),A=t.some(M=>Bz.includes(M)),C=A||r;_.useEffect(()=>{E()},[]);const E=async()=>{try{const{data:M,error:G}=await fe.from("fournisseurs").select("*").is("deleted_at",null).order("name");if(G)throw G;s(M||[])}catch(M){n({title:"Erreur",description:M.message,variant:"destructive"})}finally{l(!1)}},O=()=>{N({name:"",contact_name:"",email:"",phone:"",address:"",notes:""}),h(null),f(!1)},L=M=>{N({name:M.name,contact_name:M.contact_name||"",email:M.email||"",phone:M.phone||"",address:M.address||"",notes:M.notes||""}),h(M.id),f(!0)},k=async()=>{if(!j.name.trim()){n({title:"Erreur",description:"Le nom est obligatoire.",variant:"destructive"});return}x(!0);try{if(m){const{error:M}=await fe.from("fournisseurs").update({name:j.name.trim(),contact_name:j.contact_name.trim()||null,email:j.email.trim()||null,phone:j.phone.trim()||null,address:j.address.trim()||null,notes:j.notes.trim()||null}).eq("id",m);if(M)throw M;n({title:"Fournisseur modifi"})}else{const{error:M}=await fe.from("fournisseurs").insert({name:j.name.trim(),contact_name:j.contact_name.trim()||null,email:j.email.trim()||null,phone:j.phone.trim()||null,address:j.address.trim()||null,notes:j.notes.trim()||null,created_by:e==null?void 0:e.id});if(M)throw M;n({title:"Fournisseur cr"})}O(),E()}catch(M){n({title:"Erreur",description:M.message,variant:"destructive"})}finally{x(!1)}},T=async()=>{if(g){x(!0);try{const{error:M}=await fe.from("fournisseurs").update({deleted_at:new Date().toISOString(),deleted_by:e==null?void 0:e.id,is_active:!1}).eq("id",g);if(M)throw M;n({title:"Fournisseur supprim",description:"Le fournisseur a t archiv."}),p(!1),y(null),E()}catch(M){n({title:"Erreur",description:M.message,variant:"destructive"})}finally{x(!1)}}},B=i.filter(M=>M.name.toLowerCase().includes(c.toLowerCase())||(M.contact_name||"").toLowerCase().includes(c.toLowerCase()));return C?a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Fournisseurs"}),a.jsx("p",{className:"text-muted-foreground",children:"Grez la liste des fournisseurs"})]}),a.jsxs(de,{onClick:()=>f(!0),children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouveau fournisseur"]})]}),a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher...",value:c,onChange:M=>u(M.target.value),className:"pl-10"})]})})}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:[B.length," fournisseur(s)"]})}),a.jsx(pe,{children:o?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):B.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucun fournisseur trouv."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Nom"}),a.jsx(Ee,{children:"Contact"}),a.jsx(Ee,{children:"Email"}),a.jsx(Ee,{children:"Tlphone"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{className:"text-right",children:"Actions"})]})}),a.jsx(rn,{children:B.map(M=>a.jsxs(gt,{children:[a.jsx(Se,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zs,{className:"h-4 w-4 text-muted-foreground"}),M.name]})}),a.jsx(Se,{children:M.contact_name||"-"}),a.jsx(Se,{children:M.email?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(gB,{className:"h-3 w-3"}),M.email]}):"-"}),a.jsx(Se,{children:M.phone?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(KQ,{className:"h-3 w-3"}),M.phone]}):"-"}),a.jsx(Se,{children:a.jsx(it,{className:M.is_active?"bg-success/10 text-success":"bg-muted text-muted-foreground",children:M.is_active?"Actif":"Inactif"})}),a.jsx(Se,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>L(M),children:a.jsx(Bc,{className:"h-4 w-4"})}),(A||r)&&a.jsx(de,{variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10",onClick:()=>{y(M.id),p(!0)},children:a.jsx(ds,{className:"h-4 w-4"})})]})})]},M.id))})]})})})]})]}),a.jsx(kr,{open:d,onOpenChange:M=>{M||O()},children:a.jsxs(_r,{className:"max-w-md",children:[a.jsx(jr,{children:a.jsxs(Nr,{children:[m?"Modifier":"Nouveau"," fournisseur"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Nom *"}),a.jsx(De,{placeholder:"Nom de l'entreprise",value:j.name,onChange:M=>N({...j,name:M.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Personne de contact"}),a.jsx(De,{placeholder:"Nom du contact",value:j.contact_name,onChange:M=>N({...j,contact_name:M.target.value})})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Email"}),a.jsx(De,{type:"email",placeholder:"email@exemple.com",value:j.email,onChange:M=>N({...j,email:M.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Tlphone"}),a.jsx(De,{placeholder:"+225...",value:j.phone,onChange:M=>N({...j,phone:M.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Adresse"}),a.jsx(De,{placeholder:"Adresse complte",value:j.address,onChange:M=>N({...j,address:M.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Notes"}),a.jsx(Kr,{placeholder:"Remarques...",value:j.notes,onChange:M=>N({...j,notes:M.target.value}),rows:2})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:O,children:"Annuler"}),a.jsx(de,{onClick:k,disabled:b,children:b?"Enregistrement...":"Enregistrer"})]})]})}),a.jsx(Yo,{open:v,onOpenChange:p,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(fo,{children:"Supprimer ce fournisseur ?"}),a.jsx(ho,{children:"Cette action est irrversible."})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),a.jsx(Xo,{onClick:T,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})})]}):a.jsx(st,{children:a.jsx(Ji,{message:"Seul le Service Achats peut grer les fournisseurs."})})}const hFe={validee_finance:"bg-success text-success-foreground",payee:"bg-success text-success-foreground",rejetee_comptabilite:"bg-destructive text-destructive-foreground"},mFe={validee_finance:Ya,payee:kl,rejetee_comptabilite:Uf};function pFe(){const{roles:e,isAdmin:t}=yr(),{toast:r}=qr(),[n,i]=_.useState([]),[s,o]=_.useState(!0),[l,c]=_.useState(""),[u,d]=_.useState("validee_finance"),f=e.includes("comptable"),m=e.includes("dg"),h=e.includes("daf"),v=f||t||m||h;_.useEffect(()=>{v?p():o(!1)},[v]);const p=async()=>{try{const{data:j,error:N}=await fe.from("demandes_achat").select(`
          *,
          department:departments(id, name),
          created_by_profile:profiles!demandes_achat_created_by_fkey(id, first_name, last_name),
          selected_fournisseur:fournisseurs(id, name),
          besoin:besoins(id, title)
        `).in("status",["validee_finance","payee","rejetee_comptabilite"]).order("created_at",{ascending:!1});if(N)throw N;i(j||[])}catch(j){console.error("Error fetching DA:",j),r({title:"Erreur",description:j.message,variant:"destructive"})}finally{o(!1)}};if(!v)return a.jsx(st,{children:a.jsx(Ji,{})});const g=n.filter(j=>{const N=j.reference.toLowerCase().includes(l.toLowerCase())||j.description.toLowerCase().includes(l.toLowerCase()),A=u==="all"||j.status===u;return N&&A}),y=n.filter(j=>j.status==="validee_finance").length,b=n.filter(j=>j.status==="payee").length,x=n.filter(j=>j.status==="validee_finance").reduce((j,N)=>j+(N.total_amount||0),0);return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Comptabilit & SYSCOHADA"}),a.jsx("p",{className:"text-muted-foreground",children:"Rattachement comptable et excution des paiements"})]})}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"rounded-full bg-warning/10 p-3",children:a.jsx(zr,{className:"h-6 w-6 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:y}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"DA  traiter"})]})]})}),a.jsx(me,{className:"border-success/50 bg-success/5",children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"rounded-full bg-success/10 p-3",children:a.jsx(kl,{className:"h-6 w-6 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:b}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"DA payes"})]})]})}),a.jsx(me,{className:"border-primary/50 bg-primary/5",children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:a.jsx(Mc,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold",children:[x.toLocaleString()," XOF"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant en attente"})]})]})})]}),a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(Mc,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Module d'excution comptable"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Rattachez les DA au plan comptable SYSCOHADA avant de dclencher le paiement. Toute criture valide est irrversible."})]})]})}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-4",children:a.jsx(Ue,{className:"text-lg",children:"Filtres"})}),a.jsx(pe,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par rfrence...",value:l,onChange:j=>c(j.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:u,onValueChange:d,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Statut"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les statuts"}),a.jsx(et,{value:"validee_finance",children:" traiter"}),a.jsx(et,{value:"payee",children:"Payes"}),a.jsx(et,{value:"rejetee_comptabilite",children:"Rejetes"})]})]})]})})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsxs(Ue,{children:[g.length," demande",g.length!==1?"s":""]}),a.jsx(wn,{children:f?"Cliquez sur une DA pour procder au rattachement comptable et au paiement.":"Vue en lecture seule des oprations comptables."})]}),a.jsx(pe,{children:s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):g.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucune demande  afficher."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Rfrence"}),a.jsx(Ee,{children:"Fournisseur"}),a.jsx(Ee,{className:"text-right",children:"Montant"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{children:"Valide le"}),a.jsx(Ee,{className:"text-right",children:"Action"})]})}),a.jsx(rn,{children:g.map(j=>{var A,C;const N=mFe[j.status]||Ya;return a.jsxs(gt,{children:[a.jsx(Se,{className:"font-medium",children:j.reference}),a.jsx(Se,{children:((A=j.selected_fournisseur)==null?void 0:A.name)||"N/A"}),a.jsxs(Se,{className:"text-right font-medium",children:[(C=j.total_amount)==null?void 0:C.toLocaleString()," ",j.currency]}),a.jsx(Se,{children:a.jsxs(it,{className:hFe[j.status]||"bg-muted",children:[a.jsx(N,{className:"mr-1 h-3 w-3"}),Ol[j.status]]})}),a.jsx(Se,{children:j.validated_finance_at?Ct(new Date(j.validated_finance_at),"dd MMM yyyy",{locale:Tt}):"-"}),a.jsx(Se,{className:"text-right",children:a.jsx($t,{to:`/comptabilite/${j.id}`,children:a.jsx(de,{variant:j.status==="validee_finance"?"default":"ghost",size:"sm",children:j.status==="validee_finance"?"Traiter":"Voir"})})})]},j.id)})})]})})})]})]})})}const gFe={1:"Comptes de ressources durables",2:"Comptes d'actif immobilis",3:"Comptes de stocks",4:"Comptes de tiers",5:"Comptes de trsorerie",6:"Comptes de charges",7:"Comptes de produits"},vFe=[1,2,3,4,5,6,7];function yFe({value:e,onChange:t,disabled:r=!1}){const[n,i]=_.useState([]),[s,o]=_.useState(!0);_.useEffect(()=>{l()},[]);const l=async()=>{o(!0);try{const{data:h,error:v}=await fe.from("comptes_comptables").select("id, code, libelle, classe").eq("is_active",!0).order("code");if(v){console.error("Error fetching comptes:",v);return}i(h||[])}finally{o(!1)}},c=e.classe?n.filter(h=>h.classe===parseInt(e.classe)):n,u=h=>n.filter(v=>v.classe===h).length,d=_.useCallback(h=>{const v=Number(h),p=n.filter(y=>y.classe===v),g=e.compte?n.find(y=>y.code===e.compte):void 0;if(g&&g.classe===v){t({...e,classe:h,nature_charge:g.libelle});return}if(p.length>0){const y=p[0];t({...e,classe:h,compte:y.code,nature_charge:y.libelle});return}t({...e,classe:h,compte:"",nature_charge:""})},[n,e,t]),f=_.useCallback(h=>{const v=n.find(p=>p.code===h);if(!v){t({...e,compte:h});return}t({...e,classe:v.classe.toString(),compte:v.code,nature_charge:v.libelle})},[n,e,t]),m=n.find(h=>h.code===e.compte);return s?a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground py-4",children:[a.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),a.jsx("span",{className:"text-sm",children:"Chargement du plan comptable..."})]}):n.length===0?a.jsxs("div",{className:"rounded-lg border border-dashed p-4 text-center text-muted-foreground",children:[a.jsx("p",{className:"text-sm",children:"Aucun compte comptable configur."}),a.jsx("p",{className:"text-xs mt-1",children:"Contactez l'administrateur pour configurer le plan comptable SYSCOHADA."})]}):a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(Mc,{className:"h-4 w-4 text-muted-foreground"}),"Classe SYSCOHADA *"]}),a.jsxs(Kt,{value:e.classe,onValueChange:d,disabled:r,children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner une classe"})}),a.jsx(Xt,{children:vFe.map(h=>{const v=u(h);return a.jsx(et,{value:h.toString(),children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsxs("span",{children:["Classe ",h," - ",gFe[h]||""]}),v===0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"(aucun compte)"})]})},h)})})]}),e.classe&&u(parseInt(e.classe))===0&&a.jsx("p",{className:"text-xs text-warning",children:"Aucun compte configur pour cette classe. Contactez l'admin pour ajouter des comptes."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Compte comptable *"}),a.jsxs(Kt,{value:e.compte,onValueChange:f,disabled:r,children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner un compte"})}),a.jsx(Xt,{children:c.map(h=>a.jsxs(et,{value:h.code,children:[a.jsx("span",{className:"font-mono font-medium mr-2",children:h.code}),a.jsx("span",{className:"text-muted-foreground",children:h.libelle})]},h.id))})]}),m&&a.jsx("p",{className:"text-xs text-muted-foreground",children:m.libelle})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Nature de charge *"}),a.jsx(De,{value:e.nature_charge,onChange:h=>t({...e,nature_charge:h.target.value}),placeholder:"Auto-rempli selon le compte",disabled:r,className:"bg-muted/50",readOnly:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Rempli automatiquement selon le compte slectionn"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Centre de cot"}),a.jsx(De,{placeholder:"Ex: Direction, Production...",value:e.centre_cout,onChange:h=>t({...e,centre_cout:h.target.value}),disabled:r,maxLength:50})]})]})}const h$={mobile_money:si,banque:zs,cheque:__,especes:kl,autre:R1},m$={transaction_id:"N Transaction",reference_virement:"Rfrence virement",numero_cheque:"N Chque",banque_emetteur:"Banque mettrice",caisse:"Caisse utilise",nom_banque:"Nom de la banque"};function xFe({value:e,onChange:t,disabled:r=!1}){const[n,i]=_.useState([]),[s,o]=_.useState([]),[l,c]=_.useState([]),[u,d]=_.useState(!0);_.useEffect(()=>{f()},[]);const f=async()=>{d(!0);try{const[C,E,O]=await Promise.all([fe.from("payment_categories").select("id, code, label, required_fields").eq("is_active",!0).order("sort_order"),fe.from("payment_methods").select("id, code, label, category_id").eq("is_active",!0).order("sort_order"),fe.from("caisses").select("id, code, name, solde_actuel, devise").eq("is_active",!0).order("code")]);C.data&&i(C.data.map(L=>({...L,required_fields:Array.isArray(L.required_fields)?L.required_fields:[]}))),E.data&&o(E.data),O.data&&c(O.data)}catch(C){console.error("Error fetching payment data:",C)}finally{d(!1)}},m=n.find(C=>C.id===e.category_id),h=s.filter(C=>C.category_id===e.category_id),v=s.find(C=>C.id===e.method_id),p=(m==null?void 0:m.code)==="especes",g=C=>{const E=s.filter(k=>k.category_id===C),O=n.find(k=>k.id===C),L=(O==null?void 0:O.code)==="especes"&&l.length===1?l[0].id:void 0;t({category_id:C,method_id:E.length===1?E[0].id:"",details:{},caisse_id:L})},y=C=>{t({...e,method_id:C,details:{}})},b=C=>{t({...e,caisse_id:C})},x=(C,E)=>{t({...e,details:{...e.details,[C]:E}})},j=m&&h$[m.code]||R1,N=()=>{if(!m)return[];const C=[];return(v==null?void 0:v.code)==="autre_banque"&&C.push("nom_banque"),C.push(...m.required_fields.filter(E=>E!=="caisse")),C},A=(C,E="XOF")=>new Intl.NumberFormat("fr-FR").format(C)+" "+E;return u?a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground py-4",children:[a.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),a.jsx("span",{className:"text-sm",children:"Chargement des modes de paiement..."})]}):n.length===0?a.jsxs("div",{className:"rounded-lg border border-dashed p-4 text-center text-muted-foreground",children:[a.jsx("p",{className:"text-sm",children:"Aucun mode de paiement configur."}),a.jsx("p",{className:"text-xs mt-1",children:"Contactez l'administrateur pour configurer les modes de paiement."})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(j,{className:"h-4 w-4 text-muted-foreground"}),"Mode de paiement *"]}),a.jsxs(Kt,{value:e.category_id,onValueChange:g,disabled:r,children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner une catgorie"})}),a.jsx(Xt,{children:n.map(C=>{const E=h$[C.code]||R1;return a.jsx(et,{value:C.id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(E,{className:"h-4 w-4"}),C.label]})},C.id)})})]})]}),p&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(kl,{className:"h-4 w-4 text-muted-foreground"}),"Caisse *"]}),l.length===0?a.jsxs("div",{className:"rounded-lg border border-dashed p-3 text-center text-muted-foreground",children:[a.jsx("p",{className:"text-sm",children:"Aucune caisse active."}),a.jsx("p",{className:"text-xs mt-1",children:"Configurez une caisse dans l'administration."})]}):a.jsxs(Kt,{value:e.caisse_id||"",onValueChange:b,disabled:r,children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner une caisse"})}),a.jsx(Xt,{children:l.map(C=>a.jsx(et,{value:C.id,children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("span",{children:[C.code," - ",C.name]}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["Solde: ",A(C.solde_actuel,C.devise)]})]})},C.id))})]})]}),e.category_id&&h.length>1&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Rfrence / Oprateur *"}),a.jsxs(Kt,{value:e.method_id,onValueChange:y,disabled:r,children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner"})}),a.jsx(Xt,{children:h.map(C=>a.jsx(et,{value:C.id,children:C.label},C.id))})]})]}),N().map(C=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{children:[m$[C]||C,(m==null?void 0:m.required_fields.includes(C))&&" *"]}),a.jsx(De,{placeholder:m$[C]||C,value:e.details[C]||"",onChange:E=>x(C,E.target.value),disabled:r,maxLength:100})]},C))]})}function bFe(){var I,$,U,H,re;const{id:e}=Qc(),t=yi(),{user:r,roles:n,isAdmin:i}=yr(),{toast:s}=qr(),[o,l]=_.useState(null),[c,u]=_.useState(!0),[d,f]=_.useState(!1),[m,h]=_.useState(!1),[v,p]=_.useState(!1),[g,y]=_.useState(""),[b,x]=_.useState({classe:"",compte:"",nature_charge:"",centre_cout:""}),[j,N]=_.useState({category_id:"",method_id:"",details:{}}),[A,C]=_.useState(""),[E,O]=_.useState([]),L=n.includes("comptable"),k=n.includes("dg"),T=n.includes("daf"),B=L||i||k||T,M=L&&(o==null?void 0:o.status)==="validee_finance";_.useEffect(()=>{e&&B?(z(),G()):B||u(!1)},[e,B]);const G=async()=>{try{const{data:X,error:he}=await fe.from("caisses").select("id, code, name, type, solde_actuel, devise").eq("is_active",!0).order("type").order("name");if(he)throw he;O(X||[])}catch(X){console.error("Error fetching caisses:",X)}},z=async()=>{try{const{data:X,error:he}=await fe.from("demandes_achat").select(`
          *,
          department:departments(id, name),
          selected_fournisseur:fournisseurs(id, name, address, phone, email),
          besoin:besoins(id, title, user_id)
        `).eq("id",e).maybeSingle();if(he||!X){s({title:"Demande introuvable",description:"Cette demande d'achat n'existe pas ou a t supprime."}),t("/comptabilite");return}if(!["validee_finance","payee","rejetee_comptabilite"].includes(X.status)){s({title:"Accs non autoris",description:"Cette DA n'est pas encore prte pour le traitement comptable."}),t("/comptabilite");return}const se=[X.created_by,X.analyzed_by,X.priced_by,X.submitted_validation_by,X.validated_finance_by,X.comptabilise_by].filter(Boolean),{data:ue}=await fe.rpc("get_public_profiles",{_user_ids:se}),ge={};(ue||[]).forEach(te=>{ge[te.id]={first_name:te.first_name,last_name:te.last_name}});const ve={...X,created_by_profile:ge[X.created_by]||null,analyzed_by_profile:X.analyzed_by&&ge[X.analyzed_by]||null,priced_by_profile:X.priced_by&&ge[X.priced_by]||null,submitted_validation_by_profile:X.submitted_validation_by&&ge[X.submitted_validation_by]||null,validated_finance_by_profile:X.validated_finance_by&&ge[X.validated_finance_by]||null,comptabilise_by_profile:X.comptabilise_by&&ge[X.comptabilise_by]||null};l(ve),X.syscohada_classe&&x({classe:X.syscohada_classe.toString(),compte:X.syscohada_compte||"",nature_charge:X.syscohada_nature_charge||"",centre_cout:X.syscohada_centre_cout||""}),X.payment_category_id&&N({category_id:X.payment_category_id||"",method_id:X.payment_method_id||"",details:typeof X.payment_details=="object"&&X.payment_details!==null?X.payment_details:{}})}catch(X){console.error("Error:",X)}finally{u(!1)}},D=()=>b.classe?b.compte.trim()?b.nature_charge.trim()?j.category_id?!0:(s({title:"Mode de paiement requis",description:"Veuillez slectionner une catgorie de paiement."}),!1):(s({title:"Informations incompltes",description:"La nature de charge est requise."}),!1):(s({title:"Informations incompltes",description:"Veuillez slectionner un compte comptable."}),!1):(s({title:"Informations incompltes",description:"Veuillez slectionner une classe SYSCOHADA."}),!1),q=async()=>{if(!(!o||!D())){f(!0);try{const{error:X}=await fe.from("demandes_achat").update({status:"payee",syscohada_classe:parseInt(b.classe),syscohada_compte:b.compte.trim(),syscohada_nature_charge:b.nature_charge.trim(),syscohada_centre_cout:b.centre_cout.trim()||null,payment_category_id:j.category_id||null,payment_method_id:j.method_id||null,payment_details:j.details,caisse_id:A&&A!=="_none"?A:null,comptabilise_by:r==null?void 0:r.id,comptabilise_at:new Date().toISOString()}).eq("id",o.id);if(X)throw X;s({title:"Paiement enregistr",description:"La DA a t marque comme paye et les critures comptables ont t cres."}),h(!1),z()}catch{s({title:"Erreur lors de l'enregistrement",description:"Veuillez ressayer ou contacter l'administrateur."})}finally{f(!1)}}},K=async()=>{if(!(!o||!g.trim())){f(!0);try{const{error:X}=await fe.from("demandes_achat").update({status:"rejetee_comptabilite",comptabilite_rejection_reason:g.trim(),comptabilise_by:r==null?void 0:r.id,comptabilise_at:new Date().toISOString()}).eq("id",o.id);if(X)throw X;s({title:"DA rejete",description:"Le DAF et la Logistique ont t notifis."}),p(!1),z()}catch{s({title:"Erreur lors du rejet",description:"Veuillez ressayer ou contacter l'administrateur."})}finally{f(!1)}}};if(!B)return a.jsx(st,{children:a.jsx(Ji,{})});if(c)return a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(!o)return null;const ae=o.status==="payee"?"bg-success text-success-foreground":o.status==="rejetee_comptabilite"?"bg-destructive text-destructive-foreground":"bg-warning text-warning-foreground",J=()=>{var X;o.status!=="payee"||!o.syscohada_classe||Z$e({reference:`EC-${o.reference}`,daReference:o.reference,libelle:`Paiement ${o.reference} - ${((X=o.selected_fournisseur)==null?void 0:X.name)||"N/A"}`,dateEcriture:o.comptabilise_at?Ct(new Date(o.comptabilise_at),"dd MMMM yyyy",{locale:Tt}):Ct(new Date,"dd MMMM yyyy",{locale:Tt}),classesSyscohada:o.syscohada_classe,compteComptable:o.syscohada_compte||"N/A",natureCharge:o.syscohada_nature_charge||"N/A",centreCout:o.syscohada_centre_cout||void 0,debit:o.total_amount||0,credit:0,devise:o.currency||"XOF",modePaiement:o.mode_paiement||void 0,referencePaiement:o.reference_paiement||void 0,isValidated:!0,validatedAt:o.comptabilise_at?Ct(new Date(o.comptabilise_at),"dd MMMM yyyy  HH:mm",{locale:Tt}):void 0,validatedBy:"Comptable",createdAt:Ct(new Date(o.created_at),"dd MMMM yyyy",{locale:Tt}),createdBy:o.created_by_profile?`${o.created_by_profile.first_name||""} ${o.created_by_profile.last_name||""}`.trim():"N/A",observations:void 0})};return a.jsxs(st,{children:[a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/comptabilite",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:o.reference}),a.jsx(it,{className:ae,children:Ol[o.status]})]}),a.jsx("p",{className:"text-muted-foreground",children:"Traitement comptable"})]})]}),o.status==="payee"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:J,children:[a.jsx(bd,{className:"mr-2 h-4 w-4"}),"criture PDF"]}),a.jsxs(de,{variant:"default",size:"sm",onClick:()=>{var ue,ge;const X=E.find(ve=>ve.id===A),he=o.comptabilise_by_profile,se=he?`${he.first_name||""} ${he.last_name||""}`.trim():((ue=r==null?void 0:r.email)==null?void 0:ue.split("@")[0])||"Comptable";vY({type:"DA",reference:o.reference,montant:o.total_amount||0,currency:o.currency||"XOF",caisseName:(X==null?void 0:X.name)||"Caisse",caisseCode:(X==null?void 0:X.code)||"N/A",comptableName:se,paidAt:o.comptabilise_at||new Date().toISOString(),beneficiaire:(ge=o.selected_fournisseur)==null?void 0:ge.name,description:o.description,modePaiement:o.mode_paiement||void 0,referencePaiement:o.reference_paiement||void 0})},children:[a.jsx(jn,{className:"mr-2 h-4 w-4"}),"Dcharge PDF"]})]})]}),o.status==="payee"&&a.jsx(me,{className:"border-success bg-success/10",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(kl,{className:"h-6 w-6 text-success"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-success",children:"Paiement effectu"}),a.jsxs("p",{className:"text-sm text-foreground",children:["Cette DA a t paye le ",o.comptabilise_at&&Ct(new Date(o.comptabilise_at),"dd MMMM yyyy  HH:mm",{locale:Tt}),".",o.mode_paiement&&` Mode: ${o.mode_paiement}.`,o.reference_paiement&&` Rf: ${o.reference_paiement}.`]})]})]})}),o.status==="rejetee_comptabilite"&&a.jsx(me,{className:"border-destructive bg-destructive/10",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(Uf,{className:"h-6 w-6 text-destructive"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-destructive",children:"Rejete par la Comptabilit"}),a.jsx("p",{className:"text-sm text-foreground",children:o.comptabilite_rejection_reason||"Aucun motif spcifi."})]})]})}),(T||k)&&!L&&!i&&a.jsx(me,{className:"border-primary/30 bg-primary/5",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(Ya,{className:"h-6 w-6 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Mode lecture seule"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vous consultez cette DA en tant que ",T?"DAF":"DG",". Seul le comptable peut effectuer le traitement comptable."]})]})]})}),M&&a.jsx(me,{className:"border-2 border-warning bg-gradient-to-r from-warning/5 to-primary/5",children:a.jsxs(pe,{className:"space-y-6 py-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Mc,{className:"h-8 w-8 text-warning"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-bold text-foreground",children:"Rattachement SYSCOHADA obligatoire"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Renseignez les informations comptables avant de procder au paiement."})]})]}),a.jsx("div",{className:"rounded-lg border bg-card p-4",children:a.jsx(yFe,{value:b,onChange:x,disabled:!1})}),a.jsx("div",{className:"rounded-lg border bg-card p-4",children:a.jsx(xFe,{value:j,onChange:N,disabled:!1})}),a.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[a.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[a.jsx(si,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"font-semibold",children:"Source des fonds (optionnel)"})]}),a.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:"Slectionnez une caisse pour enregistrer automatiquement le mouvement de sortie."}),a.jsxs(Kt,{value:A,onValueChange:C,children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner une caisse..."})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"_none",children:"Aucune (paiement externe)"}),E.map(X=>a.jsx(et,{value:X.id,children:a.jsxs("span",{className:"flex items-center gap-2",children:[X.code," - ",X.name,a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",new Intl.NumberFormat("fr-FR").format(X.solde_actuel)," ",X.devise,")"]})]})},X.id))]})]}),A&&A!=="_none"&&(o==null?void 0:o.total_amount)&&a.jsxs("p",{className:"mt-2 text-sm text-warning",children:[" Un mouvement de sortie de ",o.total_amount.toLocaleString()," ",o.currency," sera cr automatiquement."]})]}),a.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-warning/50 bg-warning/10 p-3",children:[a.jsx(zr,{className:"mt-0.5 h-5 w-5 shrink-0 text-warning"}),a.jsx("p",{className:"text-sm text-foreground",children:"Cette opration cre une criture comptable irrversible. Vrifiez toutes les informations avant de valider."})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs(de,{onClick:()=>h(!0),className:"bg-success hover:bg-success/90",disabled:d,children:[a.jsx(kl,{className:"mr-2 h-4 w-4"}),"Enregistrer le paiement"]}),a.jsxs(de,{variant:"outline",className:"text-destructive hover:bg-destructive/10",onClick:()=>p(!0),disabled:d,children:[a.jsx(Uf,{className:"mr-2 h-4 w-4"}),"Rejeter"]})]})]})}),a.jsx(me,{className:"border-primary/50 bg-primary/5",children:a.jsxs(pe,{className:"flex items-center gap-4 py-6",children:[a.jsx("div",{className:"rounded-full bg-primary/10 p-4",children:a.jsx(w_,{className:"h-8 w-8 text-primary"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-3xl font-bold text-foreground",children:[(I=o.total_amount)==null?void 0:I.toLocaleString()," ",o.currency]}),a.jsx("p",{className:"text-muted-foreground",children:"Montant total  payer"})]})]})}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[a.jsx(zs,{className:"h-5 w-5"}),"Fournisseur"]})}),a.jsx(pe,{children:o.selected_fournisseur?a.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nom"}),a.jsx("p",{className:"font-medium",children:o.selected_fournisseur.name})]}),o.selected_fournisseur.phone&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Tlphone"}),a.jsx("p",{className:"font-medium",children:o.selected_fournisseur.phone})]}),o.selected_fournisseur.email&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),a.jsx("p",{className:"font-medium",children:o.selected_fournisseur.email})]}),o.selected_fournisseur.address&&a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Adresse"}),a.jsx("p",{className:"font-medium",children:o.selected_fournisseur.address})]})]}):a.jsx("p",{className:"text-muted-foreground",children:"Fournisseur non spcifi"})})]}),o.status==="payee"&&o.syscohada_classe&&a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Mc,{className:"h-5 w-5"}),"Rattachement SYSCOHADA"]})}),a.jsx(pe,{children:a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Classe"}),a.jsxs("p",{className:"font-medium",children:["Classe ",o.syscohada_classe," - ",zz[o.syscohada_classe]]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Compte"}),a.jsx("p",{className:"font-medium",children:o.syscohada_compte})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nature de charge"}),a.jsx("p",{className:"font-medium",children:o.syscohada_nature_charge})]}),o.syscohada_centre_cout&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Centre de cot"}),a.jsx("p",{className:"font-medium",children:o.syscohada_centre_cout})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Dtails de la demande"})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Dpartement"}),a.jsx("p",{className:"font-medium",children:(($=o.department)==null?void 0:$.name)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Catgorie"}),a.jsx(it,{variant:"outline",children:lx[o.category]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Valide financirement le"}),a.jsx("p",{className:"font-medium",children:o.validated_finance_at?Ct(new Date(o.validated_finance_at),"dd MMMM yyyy  HH:mm",{locale:Tt}):"N/A"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Description"}),a.jsx("p",{className:"whitespace-pre-wrap text-foreground",children:o.description})]}),o.fournisseur_justification&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Justification Achats"}),a.jsx("p",{className:"whitespace-pre-wrap text-foreground",children:o.fournisseur_justification})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[a.jsx(jn,{className:"h-5 w-5"}),"Besoin source"]})}),a.jsx(pe,{children:a.jsxs($t,{to:`/besoins/${o.besoin_id}`,className:"flex items-center gap-2 text-primary hover:underline",children:[((U=o.besoin)==null?void 0:U.title)||"Voir le besoin",a.jsx(Fc,{className:"h-4 w-4"})]})})]}),a.jsx(yY,{da:o})]}),a.jsx(Yo,{open:m,onOpenChange:h,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsxs(fo,{className:"flex items-center gap-2",children:[a.jsx(kl,{className:"h-5 w-5 text-success"}),"Confirmer le paiement ?"]}),a.jsxs(ho,{children:["Cette opration cre une criture comptable irrversible. Le montant de ",a.jsxs("strong",{children:[(H=o.total_amount)==null?void 0:H.toLocaleString()," ",o.currency]})," sera enregistr comme pay au fournisseur ",a.jsx("strong",{children:(re=o.selected_fournisseur)==null?void 0:re.name}),"."]})]}),a.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Rattachement comptable"}),a.jsxs("p",{className:"font-medium",children:["Classe ",b.classe,"  ",b.compte,"  ",b.nature_charge]}),j.category_id&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"Paiement configur"})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),a.jsx(Xo,{onClick:q,className:"bg-success text-success-foreground hover:bg-success/90",disabled:d,children:"Confirmer le paiement"})]})]})}),a.jsx(kr,{open:v,onOpenChange:p,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsxs(Nr,{className:"flex items-center gap-2 text-destructive",children:[a.jsx(Uf,{className:"h-5 w-5"}),"Rejeter cette DA"]}),a.jsx(Yr,{children:"Cette action bloque dfinitivement la demande. Indiquez le motif du rejet."})]}),a.jsxs("div",{className:"space-y-2 py-4",children:[a.jsx(Pe,{children:"Motif du rejet *"}),a.jsx(Kr,{placeholder:"Expliquez pourquoi cette DA ne peut pas tre paye...",value:g,onChange:X=>y(X.target.value),rows:4,maxLength:500})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>p(!1),children:"Annuler"}),a.jsx(de,{variant:"destructive",onClick:K,disabled:!g.trim()||d,children:"Confirmer le rejet"})]})]})})]})}function xY({value:e,onChange:t,disabled:r=!1,placeholder:n="Slectionner une catgorie",showAll:i=!1}){var m;const[s,o]=_.useState([]),[l,c]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const{data:v,error:p}=await fe.from("stock_categories").select("*").eq("is_active",!0).order("name");if(p)throw p;o(v||[])}catch(v){console.error("Error fetching categories:",v)}finally{c(!1)}})()},[]);const u=_.useMemo(()=>s.filter(v=>!v.parent_id).map(v=>({...v,children:s.filter(p=>p.parent_id===v.id)})),[s]),d=_.useMemo(()=>{const h=[];return u.forEach(v=>{var p;h.push({id:v.id,name:v.name,indent:0}),(p=v.children)==null||p.forEach(g=>{h.push({id:g.id,name:g.name,indent:1})})}),h},[u]);if(l)return a.jsx(Kt,{disabled:!0,children:a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Chargement..."})})});const f="__none__";return a.jsxs(Kt,{value:e||f,onValueChange:h=>t(h===f?null:h),disabled:r,children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:n,children:e?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(_4,{className:"h-4 w-4 text-muted-foreground"}),((m=s.find(h=>h.id===e))==null?void 0:m.name)||n]}):n})}),a.jsxs(Xt,{children:[i&&a.jsx(et,{value:f,children:"Toutes les catgories"}),!i&&a.jsx(et,{value:f,children:"Aucune catgorie"}),d.map(h=>a.jsx(et,{value:h.id,children:a.jsxs("span",{style:{paddingLeft:`${h.indent*16}px`},children:[h.indent>0&&" ",h.name]})},h.id))]})]})}const wFe={disponible:"bg-success/10 text-success border-success/20",reserve:"bg-warning/10 text-warning border-warning/20",epuise:"bg-destructive/10 text-destructive border-destructive/20"},_Fe={disponible:Br,reserve:zr,epuise:Er},p$=[{value:"unit",label:"Unit"},{value:"pice",label:"Pice"},{value:"kg",label:"Kilogramme (kg)"},{value:"g",label:"Gramme (g)"},{value:"t",label:"Tonne (t)"},{value:"m",label:"Mtre (m)"},{value:"cm",label:"Centimtre (cm)"},{value:"m",label:"Mtre carr (m)"},{value:"m",label:"Mtre cube (m)"},{value:"L",label:"Litre (L)"},{value:"mL",label:"Millilitre (mL)"},{value:"bote",label:"Bote"},{value:"carton",label:"Carton"},{value:"palette",label:"Palette"},{value:"rouleau",label:"Rouleau"},{value:"sac",label:"Sac"},{value:"bidon",label:"Bidon"},{value:"paquet",label:"Paquet"},{value:"paquets",label:"Paquets"},{value:"lot",label:"Lot"}];function jFe(){const{user:e,roles:t,isAdmin:r,hasRole:n}=yr(),{toast:i}=qr(),[s,o]=_.useState([]),[l,c]=_.useState([]),[u,d]=_.useState(!0),[f,m]=_.useState(""),[h,v]=_.useState("all"),[p,g]=_.useState(null),[y,b]=_.useState(!1),[x,j]=_.useState(!1),[N,A]=_.useState(!1),[C,E]=_.useState({designation:"",description:"",unit:"unit",quantity_available:0,quantity_min:0,location:"",category_id:null}),O=t.some(D=>jh.includes(D)),L=n("daf"),k=O||r||L;_.useEffect(()=>{T()},[]);const T=async()=>{try{const{data:D,error:q}=await fe.from("articles_stock").select("*, category:stock_categories(*)").order("designation");if(q)throw q;const{data:K,error:ae}=await fe.from("stock_categories").select("*").eq("is_active",!0).order("name");if(ae)throw ae;o(D||[]),c(K||[])}catch(D){console.error("Error fetching stock:",D),i({title:"Erreur",description:D.message,variant:"destructive"})}finally{d(!1)}},B=async()=>{if(!C.designation.trim()){i({title:"Erreur",description:"La dsignation est requise.",variant:"destructive"});return}j(!0);try{const{error:D}=await fe.from("articles_stock").insert({designation:C.designation,description:C.description||null,unit:C.unit,quantity_available:C.quantity_available,quantity_min:C.quantity_min||null,location:C.location||null,category_id:C.category_id,created_by:e==null?void 0:e.id});if(D)throw D;i({title:"Succs",description:"Article ajout au stock."}),b(!1),E({designation:"",description:"",unit:"unit",quantity_available:0,quantity_min:0,location:"",category_id:null}),A(!1),T()}catch(D){i({title:"Erreur",description:D.message,variant:"destructive"})}finally{j(!1)}},M=()=>{E({designation:"",description:"",unit:"unit",quantity_available:0,quantity_min:0,location:"",category_id:null}),A(!1)},G=s.filter(D=>{const q=D.designation.toLowerCase().includes(f.toLowerCase())||(D.location||"").toLowerCase().includes(f.toLowerCase()),K=h==="all"||D.status===h,ae=!p||D.category_id===p;return q&&K&&ae}),z={total:s.length,disponible:s.filter(D=>D.status==="disponible").length,reserve:s.filter(D=>D.status==="reserve").length,epuise:s.filter(D=>D.status==="epuise").length,lowStock:s.filter(D=>D.quantity_min&&D.quantity_available<=D.quantity_min).length};return a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Gestion du Stock"}),a.jsx("p",{className:"text-muted-foreground",children:"Inventaire et mouvements de stock"})]}),k&&a.jsxs(de,{onClick:()=>b(!0),children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouvel article"]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(Tn,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:z.total}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Articles total"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-success/10",children:a.jsx(Br,{className:"h-6 w-6 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:z.disponible}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Disponibles"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-warning/10",children:a.jsx(zr,{className:"h-6 w-6 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:z.lowStock}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Stock bas"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-destructive/10",children:a.jsx(Er,{className:"h-6 w-6 text-destructive"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:z.epuise}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"puiss"})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-4",children:a.jsx(Ue,{className:"text-lg",children:"Filtres"})}),a.jsx(pe,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par dsignation ou emplacement...",value:f,onChange:D=>m(D.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:h,onValueChange:v,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Tous les statuts"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les statuts"}),Object.keys(q1).map(D=>a.jsx(et,{value:D,children:q1[D]},D))]})]})]})})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between",children:[a.jsxs(Ue,{children:[G.length," article",G.length!==1?"s":""]}),a.jsx($t,{to:"/stock/mouvements",children:a.jsxs(de,{variant:"outline",size:"sm",children:[a.jsx(xB,{className:"mr-2 h-4 w-4"}),"Voir les mouvements"]})})]}),a.jsx(pe,{children:u?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):G.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucun article trouv."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Dsignation"}),a.jsx(Ee,{children:"Catgorie"}),a.jsx(Ee,{className:"text-right",children:"Qt disponible"}),a.jsx(Ee,{className:"text-right",children:"Qt rserve"}),a.jsx(Ee,{children:"Unit"}),a.jsx(Ee,{children:"Emplacement"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{className:"text-right",children:"Action"})]})}),a.jsx(rn,{children:G.map(D=>{const q=_Fe[D.status],K=D.quantity_min&&D.quantity_available<=D.quantity_min;return a.jsxs(gt,{className:K?"bg-warning/5":void 0,children:[a.jsxs(Se,{children:[a.jsx("div",{className:"font-medium",children:D.designation}),D.description&&a.jsx("div",{className:"text-xs text-muted-foreground",children:D.description})]}),a.jsx(Se,{children:D.category?a.jsxs(it,{variant:"outline",className:"text-xs",children:[a.jsx(_4,{className:"mr-1 h-3 w-3"}),D.category.name]}):a.jsx("span",{className:"text-muted-foreground",children:"-"})}),a.jsxs(Se,{className:"text-right font-mono",children:[D.quantity_available,K&&a.jsx(zr,{className:"ml-2 inline h-4 w-4 text-warning"})]}),a.jsx(Se,{className:"text-right font-mono",children:D.quantity_reserved}),a.jsx(Se,{children:D.unit}),a.jsx(Se,{children:D.location||"-"}),a.jsx(Se,{children:a.jsxs(it,{className:wFe[D.status],children:[a.jsx(q,{className:"mr-1 h-3 w-3"}),q1[D.status]]})}),a.jsx(Se,{className:"text-right",children:a.jsx($t,{to:`/stock/${D.id}`,children:a.jsx(de,{variant:"ghost",size:"sm",children:"Dtails"})})})]},D.id)})})]})})})]})]}),a.jsx(kr,{open:y,onOpenChange:D=>{b(D),D||M()},children:a.jsxs(_r,{className:"sm:max-w-lg",children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Ajouter un article au stock"}),a.jsx(Yr,{children:"Crez un nouvel article dans l'inventaire avec sa quantit initiale."})]}),a.jsxs("div",{className:"space-y-5 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{htmlFor:"designation",className:"text-sm font-medium",children:["Dsignation ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(De,{id:"designation",value:C.designation,onChange:D=>E({...C,designation:D.target.value}),placeholder:"Ex: Cble lectrique 2.5mm",className:"h-11"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),a.jsx(Kr,{id:"description",value:C.description,onChange:D=>E({...C,description:D.target.value}),placeholder:"Caractristiques, rfrences, spcifications...",rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{className:"text-sm font-medium",children:["Unit de mesure ",a.jsx("span",{className:"text-destructive",children:"*"})]}),N?a.jsxs("div",{className:"flex gap-2",children:[a.jsx(De,{value:C.unit,onChange:D=>E({...C,unit:D.target.value}),placeholder:"Entrer une unit personnalise",className:"h-11 flex-1"}),a.jsx(de,{type:"button",variant:"outline",onClick:()=>{A(!1),E({...C,unit:"unit"})},className:"h-11",children:"Liste"})]}):a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Kt,{value:p$.find(D=>D.value===C.unit)?C.unit:"",onValueChange:D=>E({...C,unit:D}),children:[a.jsx(Wt,{className:"h-11 flex-1",children:a.jsx(Yt,{placeholder:"Slectionner une unit"})}),a.jsx(Xt,{children:p$.map(D=>a.jsx(et,{value:D.value,children:D.label},D.value))})]}),a.jsx(de,{type:"button",variant:"outline",onClick:()=>{A(!0),E({...C,unit:""})},className:"h-11",children:"Autre"})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{htmlFor:"quantity",className:"text-sm font-medium",children:["Quantit initiale ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(De,{id:"quantity",type:"number",min:0,step:"0.01",value:C.quantity_available,onChange:D=>E({...C,quantity_available:Number(D.target.value)}),className:"h-11"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Stock disponible  la cration"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"quantity_min",className:"text-sm font-medium",children:"Seuil d'alerte"}),a.jsx(De,{id:"quantity_min",type:"number",min:0,step:"0.01",value:C.quantity_min,onChange:D=>E({...C,quantity_min:Number(D.target.value)}),className:"h-11"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Alerte si stock  ce seuil"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{className:"text-sm font-medium",children:"Catgorie"}),a.jsx(xY,{value:C.category_id,onChange:D=>E({...C,category_id:D}),placeholder:"Slectionner une catgorie"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"location",className:"text-sm font-medium",children:"Emplacement"}),a.jsx(De,{id:"location",value:C.location,onChange:D=>E({...C,location:D.target.value}),placeholder:"Ex: Entrept A - Rayon 3 - tagre B",className:"h-11"})]})]}),a.jsxs(Fr,{className:"gap-2 sm:gap-0",children:[a.jsx(de,{variant:"outline",onClick:()=>{b(!1),M()},children:"Annuler"}),a.jsx(de,{onClick:B,disabled:x||!C.designation.trim()||!C.unit.trim(),children:x?"Enregistrement...":"Crer l'article"})]})]})})]})}const NFe={entree:"bg-success/10 text-success border-success/20",sortie:"bg-destructive/10 text-destructive border-destructive/20",ajustement:"bg-primary/10 text-primary border-primary/20",reservation:"bg-warning/10 text-warning border-warning/20",liberation:"bg-muted text-muted-foreground"},SFe={entree:hB,sortie:fB,ajustement:j_,reservation:Uy,liberation:BA};function AFe(){const{toast:e}=qr(),[t,r]=_.useState([]),[n,i]=_.useState(!0),[s,o]=_.useState(""),[l,c]=_.useState("all");_.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:f,error:m}=await fe.from("stock_movements").select(`
          *,
          article_stock:articles_stock(id, designation),
          created_by_profile:profiles!stock_movements_created_by_fkey(id, first_name, last_name)
        `).order("created_at",{ascending:!1}).limit(500);if(m)throw m;r(f||[])}catch(f){console.error("Error fetching movements:",f),e({title:"Erreur",description:f.message,variant:"destructive"})}finally{i(!1)}},d=t.filter(f=>{var v;const m=(((v=f.article_stock)==null?void 0:v.designation)||"").toLowerCase().includes(s.toLowerCase())||(f.reference||"").toLowerCase().includes(s.toLowerCase()),h=l==="all"||f.movement_type===l;return m&&h});return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/stock",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Mouvements de Stock"}),a.jsx("p",{className:"text-muted-foreground",children:"Historique de tous les mouvements d'inventaire"})]})]}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-4",children:a.jsx(Ue,{className:"text-lg",children:"Filtres"})}),a.jsx(pe,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par article ou rfrence...",value:s,onChange:f=>o(f.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:l,onValueChange:c,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Tous les types"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les types"}),Object.keys(z1).map(f=>a.jsx(et,{value:f,children:z1[f]},f))]})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:[d.length," mouvement",d.length!==1?"s":""]})}),a.jsx(pe,{children:n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):d.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucun mouvement trouv."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Date"}),a.jsx(Ee,{children:"Type"}),a.jsx(Ee,{children:"Article"}),a.jsx(Ee,{className:"text-right",children:"Quantit"}),a.jsx(Ee,{className:"text-right",children:"Avant"}),a.jsx(Ee,{className:"text-right",children:"Aprs"}),a.jsx(Ee,{children:"Rfrence"}),a.jsx(Ee,{children:"Par"})]})}),a.jsx(rn,{children:d.map(f=>{var h,v,p;const m=SFe[f.movement_type];return a.jsxs(gt,{children:[a.jsx(Se,{className:"whitespace-nowrap",children:Ct(new Date(f.created_at),"dd MMM yyyy HH:mm",{locale:Tt})}),a.jsx(Se,{children:a.jsxs(it,{className:NFe[f.movement_type],children:[a.jsx(m,{className:"mr-1 h-3 w-3"}),z1[f.movement_type]]})}),a.jsx(Se,{className:"font-medium",children:((h=f.article_stock)==null?void 0:h.designation)||"N/A"}),a.jsxs(Se,{className:"text-right font-mono",children:[f.movement_type==="sortie"?"-":"+",f.quantity]}),a.jsx(Se,{className:"text-right font-mono text-muted-foreground",children:f.quantity_before}),a.jsx(Se,{className:"text-right font-mono",children:f.quantity_after}),a.jsx(Se,{className:"text-muted-foreground",children:f.reference||"-"}),a.jsxs(Se,{children:[(v=f.created_by_profile)==null?void 0:v.first_name," ",(p=f.created_by_profile)==null?void 0:p.last_name]})]},f.id)})})]})})})]})]})})}const CFe={disponible:"bg-success/10 text-success border-success/20",reserve:"bg-warning/10 text-warning border-warning/20",epuise:"bg-destructive/10 text-destructive border-destructive/20"},kFe={disponible:Br,reserve:zr,epuise:Er},EFe={entree:"text-success",sortie:"text-destructive",ajustement:"text-warning",reservation:"text-primary",liberation:"text-muted-foreground"},PFe={entree:Uo,sortie:u0,ajustement:j_,reservation:Tn,liberation:Tn},qS=[{value:"unit",label:"Unit"},{value:"pice",label:"Pice"},{value:"kg",label:"Kilogramme (kg)"},{value:"g",label:"Gramme (g)"},{value:"t",label:"Tonne (t)"},{value:"m",label:"Mtre (m)"},{value:"cm",label:"Centimtre (cm)"},{value:"m",label:"Mtre carr (m)"},{value:"m",label:"Mtre cube (m)"},{value:"L",label:"Litre (L)"},{value:"mL",label:"Millilitre (mL)"},{value:"bote",label:"Bote"},{value:"carton",label:"Carton"},{value:"palette",label:"Palette"},{value:"rouleau",label:"Rouleau"},{value:"sac",label:"Sac"},{value:"bidon",label:"Bidon"},{value:"paquet",label:"Paquet"},{value:"paquets",label:"Paquets"},{value:"lot",label:"Lot"}];function OFe(){const{id:e}=Qc(),t=yi(),{user:r,roles:n,isAdmin:i,hasRole:s}=yr(),{toast:o}=qr(),[l,c]=_.useState(null),[u,d]=_.useState([]),[f,m]=_.useState([]),[h,v]=_.useState(!0),[p,g]=_.useState(!1),[y,b]=_.useState(!1),[x,j]=_.useState(!1),[N,A]=_.useState(!1),[C,E]=_.useState(!1),[O,L]=_.useState({type:"ajustement",quantity:0,observations:""}),[k,T]=_.useState({designation:"",description:"",unit:"",quantity_available:0,quantity_min:0,location:"",category_id:null}),B=n.some($=>jh.includes($)),M=s("daf"),G=B||i||M;_.useEffect(()=>{e&&(z(),D())},[e]);const z=async()=>{try{const{data:$,error:U}=await fe.from("articles_stock").select("*").eq("id",e).maybeSingle();if(U||!$){o({title:"Erreur",description:"Article introuvable.",variant:"destructive"}),t("/stock");return}c($),T({designation:$.designation,description:$.description||"",unit:$.unit,quantity_available:$.quantity_available,quantity_min:$.quantity_min||0,location:$.location||"",category_id:$.category_id||null}),E(!qS.find(H=>H.value===$.unit))}catch($){console.error("Error:",$)}finally{v(!1)}},D=async()=>{try{const{data:$,error:U}=await fe.from("stock_movements").select("*").eq("article_stock_id",e).order("created_at",{ascending:!1}).limit(50);if(U)throw U;const H=$||[],re=H.map(ge=>ge.created_by).filter(Boolean);let X={};if(re.length>0){const{data:ge}=await fe.rpc("get_public_profiles",{_user_ids:[...new Set(re)]});(ge||[]).forEach(ve=>{X[ve.id]={first_name:ve.first_name,last_name:ve.last_name}})}const he=H.map(ge=>({...ge,created_by_profile:ge.created_by&&X[ge.created_by]||null}));d(he);const se=[...he].reverse(),ue=[];se.length>0&&se.forEach(ge=>{ue.push({date:Ct(new Date(ge.created_at),"dd/MM",{locale:Tt}),quantity:ge.quantity_after})}),m(ue)}catch($){console.error("Error fetching movements:",$)}},q=async()=>{if(!l||O.quantity<=0){o({title:"Erreur",description:"Quantit invalide.",variant:"destructive"});return}g(!0);try{const $=l.quantity_available;let U=$,H=O.quantity;switch(O.type){case"entree":U=$+O.quantity;break;case"sortie":if(O.quantity>$){o({title:"Erreur",description:"Quantit insuffisante.",variant:"destructive"}),g(!1);return}U=$-O.quantity,H=-O.quantity;break;case"ajustement":U=O.quantity,H=O.quantity-$;break;default:break}const{error:re}=await fe.from("stock_movements").insert({article_stock_id:l.id,movement_type:O.type,quantity:Math.abs(H),quantity_before:$,quantity_after:U,observations:O.observations||null,created_by:r==null?void 0:r.id,reference:`ADJ-${new Date().toISOString().slice(0,10).replace(/-/g,"")}-${l.id.slice(0,8).toUpperCase()}`});if(re)throw re;const{error:X}=await fe.from("articles_stock").update({quantity_available:U}).eq("id",l.id);if(X)throw X;o({title:"Ajustement effectu",description:`Stock mis  jour: ${$}  ${U}`}),b(!1),L({type:"ajustement",quantity:0,observations:""}),z(),D()}catch($){o({title:"Erreur",description:$.message,variant:"destructive"})}finally{g(!1)}},K=async()=>{if(!l||!k.designation.trim()){o({title:"Erreur",description:"La dsignation est requise.",variant:"destructive"});return}if(!k.unit.trim()){o({title:"Erreur",description:"L'unit est requise.",variant:"destructive"});return}g(!0);try{const $=k.quantity_available!==l.quantity_available,{error:U}=await fe.from("articles_stock").update({designation:k.designation,description:k.description||null,unit:k.unit,quantity_available:k.quantity_available,quantity_min:k.quantity_min||null,location:k.location||null,category_id:k.category_id||null}).eq("id",l.id);if(U)throw U;if($){const{error:H}=await fe.from("stock_movements").insert({article_stock_id:l.id,movement_type:"ajustement",quantity:Math.abs(k.quantity_available-l.quantity_available),quantity_before:l.quantity_available,quantity_after:k.quantity_available,observations:"Modification via dition article",created_by:r==null?void 0:r.id,reference:`EDIT-${new Date().toISOString().slice(0,10).replace(/-/g,"")}-${l.id.slice(0,8).toUpperCase()}`});H&&console.error("Error creating movement:",H)}o({title:"Article mis  jour"}),j(!1),z(),$&&D()}catch($){o({title:"Erreur",description:$.message,variant:"destructive"})}finally{g(!1)}},ae=async()=>{if(l){g(!0);try{const{count:$,error:U}=await fe.from("stock_movements").select("id",{count:"exact",head:!0}).eq("article_stock_id",l.id).not("movement_type","eq","ajustement");if(U)throw U;if($&&$>0){o({title:"Suppression impossible",description:`Cet article a ${$} mouvement(s) valid(s). Impossible de le supprimer.`,variant:"destructive"}),g(!1),A(!1);return}const{error:H}=await fe.from("stock_movements").delete().eq("article_stock_id",l.id);if(H)throw H;const{error:re}=await fe.from("articles_stock").delete().eq("id",l.id);if(re)throw re;o({title:"Article supprim",description:"L'article a t retir du stock."}),t("/stock")}catch($){o({title:"Erreur",description:$.message,variant:"destructive"})}finally{g(!1),A(!1)}}};if(h)return a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(!l)return null;const J=kFe[l.status],I=l.quantity_min&&l.quantity_available<=l.quantity_min;return a.jsxs(st,{children:[a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/stock",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:l.designation}),a.jsxs(it,{className:CFe[l.status],children:[a.jsx(J,{className:"mr-1 h-3 w-3"}),q1[l.status]]})]}),a.jsxs("p",{className:"text-muted-foreground",children:["Article de stock  ",l.unit]})]})]}),G&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx(de,{variant:"outline",size:"sm",onClick:()=>j(!0),children:"Modifier"}),a.jsxs(de,{size:"sm",onClick:()=>b(!0),children:[a.jsx(EQ,{className:"mr-2 h-4 w-4"}),"Ajuster"]}),a.jsxs(de,{variant:"destructive",size:"sm",onClick:()=>A(!0),children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]}),I&&a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx(zr,{className:"h-5 w-5 text-warning"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Stock critique"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Le stock actuel (",l.quantity_available,") est infrieur ou gal au seuil minimum (",l.quantity_min,")."]})]})]})}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-4",children:[a.jsx(me,{children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(Tn,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:l.quantity_available}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Disponible"})]})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-warning/10",children:a.jsx(zr,{className:"h-5 w-5 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:l.quantity_reserved}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Rserv"})]})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:a.jsx(Wy,{className:"h-5 w-5 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold truncate",children:l.location||"N/A"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Emplacement"})]})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-destructive/10",children:a.jsx(u0,{className:"h-5 w-5 text-destructive"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:l.quantity_min||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Seuil alerte"})]})]})})})]}),l.description&&a.jsxs(me,{children:[a.jsx(ze,{className:"pb-2",children:a.jsx(Ue,{className:"text-sm",children:"Description"})}),a.jsx(pe,{children:a.jsx("p",{className:"text-muted-foreground",children:l.description})})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{children:"volution du stock"}),a.jsx(wn,{children:"Historique des quantits disponibles"})]}),a.jsx(pe,{children:f.length>1?a.jsx(Ym,{width:"100%",height:250,children:a.jsxs(mO,{data:f,children:[a.jsx(Qp,{strokeDasharray:"3 3"}),a.jsx(Kc,{dataKey:"date",tick:{fontSize:12}}),a.jsx(Yc,{tick:{fontSize:12}}),a.jsx(Os,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"},labelStyle:{color:"hsl(var(--foreground))"}}),a.jsx(no,{type:"monotone",dataKey:"quantity",name:"Quantit",stroke:"hsl(32, 93%, 54%)",fill:"hsl(32, 93%, 54%)",fillOpacity:.2,strokeWidth:2})]})}):a.jsx("div",{className:"flex h-[250px] items-center justify-center text-muted-foreground",children:"Pas assez de donnes pour afficher le graphique"})})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{children:"Historique des mouvements"}),a.jsx(wn,{children:"Derniers mouvements de stock"})]}),a.jsx(pe,{children:u.length===0?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Aucun mouvement enregistr"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Date"}),a.jsx(Ee,{children:"Type"}),a.jsx(Ee,{className:"text-right",children:"Quantit"}),a.jsx(Ee,{className:"text-right",children:"Avant"}),a.jsx(Ee,{className:"text-right",children:"Aprs"}),a.jsx(Ee,{children:"Observations"}),a.jsx(Ee,{children:"Par"})]})}),a.jsx(rn,{children:u.map($=>{const U=PFe[$.movement_type];return a.jsxs(gt,{children:[a.jsx(Se,{className:"whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wh,{className:"h-3 w-3 text-muted-foreground"}),Ct(new Date($.created_at),"dd/MM/yyyy HH:mm",{locale:Tt})]})}),a.jsx(Se,{children:a.jsxs("div",{className:`flex items-center gap-2 ${EFe[$.movement_type]}`,children:[a.jsx(U,{className:"h-4 w-4"}),z1[$.movement_type]]})}),a.jsxs(Se,{className:"text-right font-mono font-bold",children:[$.movement_type==="sortie"?"-":"+",$.quantity]}),a.jsx(Se,{className:"text-right font-mono text-muted-foreground",children:$.quantity_before}),a.jsx(Se,{className:"text-right font-mono font-medium",children:$.quantity_after}),a.jsx(Se,{className:"max-w-[150px] truncate",children:$.observations||"-"}),a.jsx(Se,{children:$.created_by_profile?`${$.created_by_profile.first_name||""} ${$.created_by_profile.last_name||""}`.trim():"Systme"})]},$.id)})})]})})})]})]}),a.jsx(kr,{open:y,onOpenChange:b,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Ajuster le stock"}),a.jsxs(Yr,{children:["Stock actuel: ",a.jsx("strong",{children:l.quantity_available})," ",l.unit]})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Type d'opration"}),a.jsxs(Kt,{value:O.type,onValueChange:$=>L({...O,type:$}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"entree",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ai,{className:"h-4 w-4 text-success"}),"Entre (ajouter au stock)"]})}),a.jsx(et,{value:"sortie",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(j4,{className:"h-4 w-4 text-destructive"}),"Sortie (retirer du stock)"]})}),a.jsx(et,{value:"ajustement",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(j_,{className:"h-4 w-4 text-warning"}),"Ajustement (dfinir la quantit exacte)"]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:O.type==="ajustement"?"Nouvelle quantit":"Quantit"}),a.jsx(De,{type:"number",min:0,value:O.quantity,onChange:$=>L({...O,quantity:Number($.target.value)})}),O.type!=="ajustement"&&O.quantity>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Rsultat: ",l.quantity_available,O.type==="entree"?" + ":" - ",O.quantity," = "," ",a.jsx("strong",{children:O.type==="entree"?l.quantity_available+O.quantity:l.quantity_available-O.quantity})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Observations"}),a.jsx(Kr,{value:O.observations,onChange:$=>L({...O,observations:$.target.value}),placeholder:"Raison de l'ajustement, inventaire, etc.",rows:2})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>b(!1),children:"Annuler"}),a.jsx(de,{onClick:q,disabled:p,children:p?"Enregistrement...":"Confirmer"})]})]})}),a.jsx(kr,{open:x,onOpenChange:j,children:a.jsxs(_r,{className:"sm:max-w-lg",children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Modifier l'article"}),a.jsx(Yr,{children:"Mettre  jour les informations de l'article. Les modifications de quantit seront traces."})]}),a.jsxs("div",{className:"space-y-5 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{className:"text-sm font-medium",children:["Dsignation ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(De,{value:k.designation,onChange:$=>T({...k,designation:$.target.value}),className:"h-11"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{className:"text-sm font-medium",children:"Description"}),a.jsx(Kr,{value:k.description,onChange:$=>T({...k,description:$.target.value}),rows:3,placeholder:"Caractristiques, rfrences, spcifications..."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{className:"text-sm font-medium",children:["Unit de mesure ",a.jsx("span",{className:"text-destructive",children:"*"})]}),C?a.jsxs("div",{className:"flex gap-2",children:[a.jsx(De,{value:k.unit,onChange:$=>T({...k,unit:$.target.value}),placeholder:"Entrer une unit personnalise",className:"h-11 flex-1"}),a.jsx(de,{type:"button",variant:"outline",onClick:()=>{E(!1),T({...k,unit:"unit"})},className:"h-11",children:"Liste"})]}):a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Kt,{value:qS.find($=>$.value===k.unit)?k.unit:"",onValueChange:$=>T({...k,unit:$}),children:[a.jsx(Wt,{className:"h-11 flex-1",children:a.jsx(Yt,{placeholder:"Slectionner une unit"})}),a.jsx(Xt,{children:qS.map($=>a.jsx(et,{value:$.value,children:$.label},$.value))})]}),a.jsx(de,{type:"button",variant:"outline",onClick:()=>{E(!0)},className:"h-11",children:"Autre"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{className:"text-sm font-medium",children:["Quantit disponible ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(De,{type:"number",min:0,step:"0.01",value:k.quantity_available,onChange:$=>T({...k,quantity_available:Number($.target.value)}),className:"h-11"}),l&&k.quantity_available!==l.quantity_available&&a.jsxs("p",{className:"text-xs text-warning",children:["Modification: ",l.quantity_available,"  ",k.quantity_available,"(",k.quantity_available>l.quantity_available?"+":"",k.quantity_available-l.quantity_available,")  Un mouvement d'ajustement sera cr"]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{className:"text-sm font-medium",children:"Seuil d'alerte"}),a.jsx(De,{type:"number",min:0,step:"0.01",value:k.quantity_min,onChange:$=>T({...k,quantity_min:Number($.target.value)}),className:"h-11"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Alerte si stock  seuil"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{className:"text-sm font-medium",children:"Emplacement"}),a.jsx(De,{value:k.location,onChange:$=>T({...k,location:$.target.value}),placeholder:"Entrept, rayon...",className:"h-11"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{className:"text-sm font-medium",children:"Catgorie"}),a.jsx(xY,{value:k.category_id,onChange:$=>T({...k,category_id:$}),placeholder:"Slectionner une catgorie"})]})]}),a.jsxs(Fr,{className:"gap-2 sm:gap-0",children:[a.jsx(de,{variant:"outline",onClick:()=>j(!1),children:"Annuler"}),a.jsx(de,{onClick:K,disabled:p||!k.designation.trim()||!k.unit.trim(),children:p?"Enregistrement...":"Enregistrer les modifications"})]})]})}),a.jsx(kr,{open:N,onOpenChange:A,children:a.jsxs(_r,{className:"sm:max-w-md",children:[a.jsxs(jr,{children:[a.jsx(Nr,{className:"text-destructive",children:"Supprimer l'article"}),a.jsx(Yr,{children:"tes-vous sr de vouloir supprimer cet article du stock ? Cette action est irrversible et supprimera galement tout l'historique des mouvements associs."})]}),a.jsx("div",{className:"py-4",children:a.jsxs("div",{className:"rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:[a.jsx("p",{className:"font-medium text-foreground",children:l==null?void 0:l.designation}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantit actuelle : ",l==null?void 0:l.quantity_available," ",l==null?void 0:l.unit]})]})}),a.jsxs(Fr,{className:"gap-2 sm:gap-0",children:[a.jsx(de,{variant:"outline",onClick:()=>A(!1),children:"Annuler"}),a.jsx(de,{variant:"destructive",onClick:ae,disabled:p,children:p?"Suppression...":"Confirmer la suppression"})]})]})})]})}function TFe(){const{user:e,isAdmin:t,hasRole:r}=yr(),{toast:n}=qr(),[i,s]=_.useState([]),[o,l]=_.useState(!0),[c,u]=_.useState(""),[d,f]=_.useState(!1),[m,h]=_.useState(!1),[v,p]=_.useState(!1),[g,y]=_.useState(!1),[b,x]=_.useState(!1),[j,N]=_.useState(null),[A,C]=_.useState({name:"",code:"",description:"",parent_id:""}),[E,O]=_.useState(!1),[L,k]=_.useState(""),[T,B]=_.useState(null),[M,G]=_.useState(!1),[z,D]=_.useState(null),q=r("daf"),K=r("responsable_logistique")||r("agent_logistique"),ae=t||q||K;_.useEffect(()=>{J()},[]);const J=async()=>{try{const{data:te,error:Ne}=await fe.from("stock_categories").select("*").order("name");if(Ne)throw Ne;const{data:Y,error:Le}=await fe.from("articles_stock").select("category_id");if(Le)throw Le;const ye={};Y==null||Y.forEach(_e=>{_e.category_id&&(ye[_e.category_id]=(ye[_e.category_id]||0)+1)});const we=(te||[]).map(_e=>({..._e,articles_count:ye[_e.id]||0}));s(we)}catch(te){console.error("Error fetching categories:",te),n({title:"Erreur",description:te.message,variant:"destructive"})}finally{l(!1)}};_.useMemo(()=>i.filter(Ne=>!Ne.parent_id).map(Ne=>({...Ne,children:i.filter(Y=>Y.parent_id===Ne.id)})),[i]);const I=_.useMemo(()=>i.filter(te=>{const Ne=te.name.toLowerCase().includes(c.toLowerCase())||(te.code||"").toLowerCase().includes(c.toLowerCase()),Y=d?!te.is_active:te.is_active;return Ne&&Y}),[i,c,d]),$=_.useMemo(()=>i.filter(te=>te.is_active&&!te.parent_id&&te.id!==(j==null?void 0:j.id)),[i,j]),U=()=>{C({name:"",code:"",description:"",parent_id:""}),N(null)},H=te=>{te?(N(te),C({name:te.name,code:te.code||"",description:te.description||"",parent_id:te.parent_id||""})):U(),h(!0)},re=async()=>{if(!A.name.trim()){n({title:"Erreur",description:"Le nom est requis.",variant:"destructive"});return}O(!0);try{const te={name:A.name.trim(),code:A.code.trim()||null,description:A.description.trim()||null,parent_id:A.parent_id||null,created_by:j||e==null?void 0:e.id};if(j){const{error:Ne}=await fe.from("stock_categories").update(te).eq("id",j.id);if(Ne)throw Ne;n({title:"Succs",description:"Catgorie mise  jour."}),await ge("update",j.name,A.name)}else{const{error:Ne}=await fe.from("stock_categories").insert(te);if(Ne)throw Ne;n({title:"Succs",description:"Catgorie cre."}),await ge("create",A.name)}h(!1),U(),J()}catch(te){n({title:"Erreur",description:te.message,variant:"destructive"})}finally{O(!1)}},X=async()=>{if(z)try{const{error:te}=await fe.from("stock_categories").update({is_active:!1}).eq("id",z.id);if(te)throw te;n({title:"Succs",description:"Catgorie archive."}),await ge("archive",z.name),y(!1),D(null),J()}catch(te){n({title:"Erreur",description:te.message,variant:"destructive"})}},he=async te=>{try{const{error:Ne}=await fe.from("stock_categories").update({is_active:!0}).eq("id",te.id);if(Ne)throw Ne;n({title:"Succs",description:"Catgorie restaure."}),await ge("restore",te.name),J()}catch(Ne){n({title:"Erreur",description:Ne.message,variant:"destructive"})}},se=async()=>{if(z)try{const{error:te}=await fe.from("stock_categories").delete().eq("id",z.id);if(te)throw te;n({title:"Succs",description:"Catgorie supprime dfinitivement."}),await ge("delete",z.name),x(!1),D(null),J()}catch(te){n({title:"Erreur",description:te.message,variant:"destructive"})}},ue=async()=>{if(!L.trim()){n({title:"Erreur",description:"Veuillez coller une liste de catgories.",variant:"destructive"});return}G(!0);const te={created:[],ignored:[],duplicates:[]};try{const Ne=L.split(`
`).map(Ge=>Ge.trim()).filter(Ge=>Ge),Y=new Set(i.map(Ge=>Ge.name.toLowerCase())),Le=[],ye={};for(const Ge of Ne){const Ke=Ge.split(";").map(Pt=>Pt.trim()).filter(Pt=>Pt);if(Ke.length===1){const Pt=Ke[0],Lt=Pt.toLowerCase();Y.has(Lt)?te.duplicates.push(Pt):(Le.push({name:Pt,parent_id:null,code:null}),Y.add(Lt))}else if(Ke.length>=2){const Pt=Ke[0],Lt=Ke[1],ft=Pt.toLowerCase(),Zt=Lt.toLowerCase();!Y.has(ft)&&!ye[ft]&&(Le.push({name:Pt,parent_id:null,code:null}),Y.add(ft),ye[ft]=Pt),Y.has(Zt)?te.duplicates.push(Lt):(Le.push({name:Lt,parent_id:ft,code:null}),Y.add(Zt))}}if(Le.length===0){te.ignored.push("Aucune nouvelle catgorie  crer"),B(te),G(!1);return}const we=Le.filter(Ge=>Ge.parent_id===null),_e=Le.filter(Ge=>Ge.parent_id!==null);for(const Ge of we){const{error:Ke}=await fe.from("stock_categories").insert({name:Ge.name,parent_id:null,code:null,created_by:e==null?void 0:e.id});Ke?Ke.code==="23505"?te.duplicates.push(Ge.name):te.ignored.push(`${Ge.name}: ${Ke.message}`):te.created.push(Ge.name)}const{data:Qe}=await fe.from("stock_categories").select("id, name"),We={};Qe==null||Qe.forEach(Ge=>{We[Ge.name.toLowerCase()]=Ge.id});for(const Ge of _e){const Ke=We[Ge.parent_id],{error:Pt}=await fe.from("stock_categories").insert({name:Ge.name,parent_id:Ke||null,code:null,created_by:e==null?void 0:e.id});Pt?Pt.code==="23505"?te.duplicates.push(Ge.name):te.ignored.push(`${Ge.name}: ${Pt.message}`):te.created.push(Ge.name)}await ge("import",`${te.created.length} catgories importes`),B(te),J()}catch(Ne){n({title:"Erreur",description:Ne.message,variant:"destructive"})}finally{G(!1)}},ge=async(te,Ne,Y)=>{try{await fe.from("audit_logs").insert({user_id:e==null?void 0:e.id,action:`STOCK_CATEGORY_${te.toUpperCase()}`,table_name:"stock_categories",new_values:{category_name:Ne,new_name:Y||null,action:te}})}catch(Le){console.error("Audit log error:",Le)}},ve=te=>{if(!te)return"-";const Ne=i.find(Y=>Y.id===te);return(Ne==null?void 0:Ne.name)||"-"};return ae?a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Catgories de Stock"}),a.jsx("p",{className:"text-muted-foreground",children:"Grez les catgories et sous-catgories d'articles"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",onClick:()=>p(!0),children:[a.jsx(S4,{className:"mr-2 h-4 w-4"}),"Importer"]}),a.jsxs(de,{onClick:()=>H(),children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouvelle catgorie"]})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(_4,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:i.filter(te=>te.is_active).length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Catgories actives"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-warning/10",children:a.jsx(aN,{className:"h-6 w-6 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:i.filter(te=>!te.is_active).length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Archives"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-success/10",children:a.jsx(Tn,{className:"h-6 w-6 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:i.reduce((te,Ne)=>te+Ne.articles_count,0)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Articles lis"})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx(Ue,{children:"Liste des catgories"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1 sm:w-64",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher...",value:c,onChange:te=>u(te.target.value),className:"pl-10"})]}),a.jsxs(de,{variant:d?"default":"outline",size:"sm",onClick:()=>f(!d),children:[a.jsx(aN,{className:"mr-2 h-4 w-4"}),d?"Actives":"Archives"]})]})]})}),a.jsx(pe,{children:o?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):I.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:d?"Aucune catgorie archive.":"Aucune catgorie trouve."}):a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Nom"}),a.jsx(Ee,{children:"Code"}),a.jsx(Ee,{children:"Parent"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{className:"text-right",children:"Nb articles"}),a.jsx(Ee,{className:"text-right",children:"Actions"})]})}),a.jsx(rn,{children:I.map(te=>a.jsxs(gt,{children:[a.jsxs(Se,{children:[a.jsx("div",{className:"font-medium",children:te.name}),te.description&&a.jsx("div",{className:"text-xs text-muted-foreground",children:te.description})]}),a.jsx(Se,{children:a.jsx("code",{className:"text-xs",children:te.code||"-"})}),a.jsx(Se,{children:ve(te.parent_id)}),a.jsx(Se,{children:a.jsx(it,{variant:te.is_active?"default":"secondary",className:te.is_active?"bg-success/10 text-success":"",children:te.is_active?a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"mr-1 h-3 w-3"}),"Actif"]}):a.jsxs(a.Fragment,{children:[a.jsx(Er,{className:"mr-1 h-3 w-3"}),"Archiv"]})})}),a.jsx(Se,{className:"text-right font-mono",children:te.articles_count}),a.jsx(Se,{className:"text-right",children:a.jsx("div",{className:"flex justify-end gap-1",children:te.is_active?a.jsxs(a.Fragment,{children:[a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>H(te),title:"Modifier",children:a.jsx(Bc,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>{D(te),y(!0)},title:"Archiver",children:a.jsx(aN,{className:"h-4 w-4"})})]}):a.jsxs(a.Fragment,{children:[a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>he(te),title:"Restaurer",children:a.jsx(cd,{className:"h-4 w-4"})}),te.articles_count===0&&a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>{D(te),x(!0)},title:"Supprimer dfinitivement",className:"text-destructive hover:text-destructive",children:a.jsx(ds,{className:"h-4 w-4"})})]})})})]},te.id))})]})})]})]}),a.jsx(kr,{open:m,onOpenChange:te=>{h(te),te||U()},children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:j?"Modifier la catgorie":"Nouvelle catgorie"}),a.jsx(Yr,{children:j?"Modifiez les informations de cette catgorie.":"Crez une nouvelle catgorie pour organiser vos articles de stock."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Pe,{htmlFor:"name",children:["Nom ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(De,{id:"name",value:A.name,onChange:te=>C({...A,name:te.target.value}),placeholder:"Ex: Peinture"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"code",children:"Code (optionnel)"}),a.jsx(De,{id:"code",value:A.code,onChange:te=>C({...A,code:te.target.value}),placeholder:"Ex: CAT-PEINT"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"parent",children:"Catgorie parente"}),a.jsxs(Kt,{value:A.parent_id||"__none__",onValueChange:te=>C({...A,parent_id:te==="__none__"?"":te}),children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Aucune (catgorie principale)"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"__none__",children:"Aucune (catgorie principale)"}),$.map(te=>a.jsx(et,{value:te.id,children:te.name},te.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"description",children:"Description"}),a.jsx(Kr,{id:"description",value:A.description,onChange:te=>C({...A,description:te.target.value}),placeholder:"Description optionnelle...",rows:3})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),a.jsx(de,{onClick:re,disabled:E||!A.name.trim(),children:E?"Enregistrement...":j?"Mettre  jour":"Crer"})]})]})}),a.jsx(kr,{open:v,onOpenChange:te=>{p(te),te||(k(""),B(null))},children:a.jsxs(_r,{className:"sm:max-w-2xl",children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Importer des catgories"}),a.jsx(Yr,{children:"Collez une liste de catgories, une par ligne."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsx(me,{className:"border-primary/20 bg-primary/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-3",children:[a.jsx(qy,{className:"h-5 w-5 text-primary mt-0.5"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-1",children:"Comment importer la liste du DAF"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[a.jsx("li",{children:"Copiez la liste manuscrite du DAF"}),a.jsx("li",{children:"Une catgorie par ligne"}),a.jsxs("li",{children:["Format CSV optionnel : ",a.jsx("code",{className:"bg-muted px-1 rounded",children:"Parent;SousCategorie"})]}),a.jsx("li",{children:"Les doublons seront ignors automatiquement"})]})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Liste des catgories"}),a.jsx(Kr,{value:L,onChange:te=>k(te.target.value),placeholder:`Peinture
Plomberie
lectricit
ou avec sous-catgories:
Peinture;Peinture intrieure
Peinture;Peinture extrieure`,rows:10,className:"font-mono text-sm"})]}),T&&a.jsxs(me,{children:[a.jsx(ze,{className:"py-3",children:a.jsx(Ue,{className:"text-base",children:"Rapport d'import"})}),a.jsxs(pe,{className:"space-y-3 py-0 pb-4",children:[T.created.length>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-success flex items-center gap-1",children:[a.jsx(Br,{className:"h-4 w-4"}),"Cres (",T.created.length,")"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:T.created.join(", ")})]}),T.duplicates.length>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-warning flex items-center gap-1",children:[a.jsx(Er,{className:"h-4 w-4"}),"Doublons ignors (",T.duplicates.length,")"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:T.duplicates.join(", ")})]}),T.ignored.length>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-destructive flex items-center gap-1",children:[a.jsx(Er,{className:"h-4 w-4"}),"Erreurs (",T.ignored.length,")"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:T.ignored.join(", ")})]})]})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>p(!1),children:"Fermer"}),a.jsx(de,{onClick:ue,disabled:M||!L.trim(),children:M?"Import en cours...":"Importer"})]})]})}),a.jsx(Yo,{open:g,onOpenChange:y,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(fo,{children:"Archiver cette catgorie ?"}),a.jsxs(ho,{children:['La catgorie "',z==null?void 0:z.name,'" sera archive.',z&&z.articles_count>0&&a.jsxs("span",{className:"block mt-2 font-medium text-warning",children:["Cette catgorie contient ",z.articles_count," article(s). Les articles resteront lis mais la catgorie ne sera plus propose pour de nouveaux articles."]})]})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),a.jsx(Xo,{onClick:X,children:"Archiver"})]})]})}),a.jsx(Yo,{open:b,onOpenChange:x,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(fo,{children:"Supprimer dfinitivement ?"}),a.jsxs(ho,{children:['Cette action est irrversible. La catgorie "',z==null?void 0:z.name,'" sera supprime dfinitivement.']})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),a.jsx(Xo,{onClick:se,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})})]}):a.jsx(st,{children:a.jsx(Ji,{message:"Vous n'avez pas accs  la gestion des catgories de stock."})})}const LFe={actif:"bg-success/10 text-success border-success/20",en_pause:"bg-warning/10 text-warning border-warning/20",termine:"bg-muted text-muted-foreground",annule:"bg-destructive/10 text-destructive border-destructive/20"},RFe={actif:Br,en_pause:vB,termine:Yn,annule:Er};function IFe(){const{user:e,roles:t,isAdmin:r}=yr(),{toast:n}=qr(),[i,s]=_.useState([]),[o,l]=_.useState(!0),[c,u]=_.useState(""),[d,f]=_.useState("all"),[m,h]=_.useState(!1),[v,p]=_.useState(!1),[g,y]=_.useState({code:"",name:"",description:"",client:"",location:"",start_date:"",end_date:"",budget:""}),x=t.some(E=>jh.includes(E))||r;_.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:E,error:O}=await fe.from("projets").select("*").order("created_at",{ascending:!1});if(O)throw O;s(E||[])}catch(E){console.error("Error:",E),n({title:"Erreur",description:E.message,variant:"destructive"})}finally{l(!1)}},N=async()=>{if(!g.code.trim()||!g.name.trim()){n({title:"Erreur",description:"Le code et le nom sont requis.",variant:"destructive"});return}p(!0);try{const{error:E}=await fe.from("projets").insert({code:g.code.toUpperCase(),name:g.name,description:g.description||null,client:g.client||null,location:g.location||null,start_date:g.start_date||null,end_date:g.end_date||null,budget:g.budget?Number(g.budget):null,created_by:e==null?void 0:e.id});if(E)throw E;n({title:"Projet cr",description:"Le projet a t ajout avec succs."}),h(!1),y({code:"",name:"",description:"",client:"",location:"",start_date:"",end_date:"",budget:""}),j()}catch(E){n({title:"Erreur",description:E.message,variant:"destructive"})}finally{p(!1)}},A=i.filter(E=>{const O=E.code.toLowerCase().includes(c.toLowerCase())||E.name.toLowerCase().includes(c.toLowerCase())||(E.client||"").toLowerCase().includes(c.toLowerCase()),L=d==="all"||E.status===d;return O&&L}),C={total:i.length,actif:i.filter(E=>E.status==="actif").length,en_pause:i.filter(E=>E.status==="en_pause").length,termine:i.filter(E=>E.status==="termine").length};return a.jsxs(st,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Projets & Chantiers"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestion des projets et centres de cot"})]}),x&&a.jsxs(de,{onClick:()=>h(!0),children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouveau projet"]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(zy,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:C.total}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Projets total"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-success/10",children:a.jsx(Br,{className:"h-6 w-6 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:C.actif}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Actifs"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-warning/10",children:a.jsx(vB,{className:"h-6 w-6 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:C.en_pause}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"En pause"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-muted",children:a.jsx(Yn,{className:"h-6 w-6 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:C.termine}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Termins"})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-4",children:a.jsx(Ue,{className:"text-lg",children:"Filtres"})}),a.jsx(pe,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par code, nom ou client...",value:c,onChange:E=>u(E.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:d,onValueChange:f,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Tous les statuts"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les statuts"}),Object.keys(EN).map(E=>a.jsx(et,{value:E,children:EN[E]},E))]})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:[A.length," projet",A.length!==1?"s":""]})}),a.jsx(pe,{children:o?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):A.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucun projet trouv."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Code"}),a.jsx(Ee,{children:"Nom"}),a.jsx(Ee,{children:"Client"}),a.jsx(Ee,{children:"Lieu"}),a.jsx(Ee,{children:"Dates"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{className:"text-right",children:"Action"})]})}),a.jsx(rn,{children:A.map(E=>{const O=RFe[E.status];return a.jsxs(gt,{children:[a.jsx(Se,{className:"font-mono font-medium",children:E.code}),a.jsxs(Se,{children:[a.jsx("div",{className:"font-medium",children:E.name}),E.description&&a.jsx("div",{className:"text-xs text-muted-foreground line-clamp-1",children:E.description})]}),a.jsx(Se,{children:E.client&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zs,{className:"h-3 w-3 text-muted-foreground"}),E.client]})}),a.jsx(Se,{children:E.location&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Wy,{className:"h-3 w-3 text-muted-foreground"}),E.location]})}),a.jsx(Se,{children:E.start_date&&a.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[a.jsx(wh,{className:"h-3 w-3 text-muted-foreground"}),Ct(new Date(E.start_date),"dd/MM/yyyy",{locale:Tt}),E.end_date&&a.jsxs("span",{className:"text-muted-foreground",children:[" ",Ct(new Date(E.end_date),"dd/MM/yyyy",{locale:Tt})]})]})}),a.jsx(Se,{children:a.jsxs(it,{className:LFe[E.status],children:[a.jsx(O,{className:"mr-1 h-3 w-3"}),EN[E.status]]})}),a.jsx(Se,{className:"text-right",children:a.jsx($t,{to:`/projets/${E.id}`,children:a.jsx(de,{variant:"ghost",size:"sm",children:"Dtails"})})})]},E.id)})})]})})})]})]}),a.jsx(kr,{open:m,onOpenChange:h,children:a.jsxs(_r,{className:"max-w-lg",children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Nouveau projet"}),a.jsx(Yr,{children:"Crez un nouveau projet ou chantier pour le suivi."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"code",children:"Code projet *"}),a.jsx(De,{id:"code",value:g.code,onChange:E=>y({...g,code:E.target.value.toUpperCase()}),placeholder:"PROJ-001"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"name",children:"Nom du projet *"}),a.jsx(De,{id:"name",value:g.name,onChange:E=>y({...g,name:E.target.value}),placeholder:"Construction site UIPA"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"description",children:"Description"}),a.jsx(Kr,{id:"description",value:g.description,onChange:E=>y({...g,description:E.target.value}),placeholder:"Description du projet...",rows:2})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"client",children:"Client"}),a.jsx(De,{id:"client",value:g.client,onChange:E=>y({...g,client:E.target.value}),placeholder:"Nom du client"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"location",children:"Lieu"}),a.jsx(De,{id:"location",value:g.location,onChange:E=>y({...g,location:E.target.value}),placeholder:"Douala, Cameroun"})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"start_date",children:"Date de dbut"}),a.jsx(De,{id:"start_date",type:"date",value:g.start_date,onChange:E=>y({...g,start_date:E.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"end_date",children:"Date de fin"}),a.jsx(De,{id:"end_date",type:"date",value:g.end_date,onChange:E=>y({...g,end_date:E.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"budget",children:"Budget (XOF)"}),a.jsx(De,{id:"budget",type:"number",min:0,value:g.budget,onChange:E=>y({...g,budget:E.target.value}),placeholder:"0"})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),a.jsx(de,{onClick:N,disabled:v,children:v?"Cration...":"Crer le projet"})]})]})})]})}const DFe={actif:"Actif",termine:"Termin",suspendu:"Suspendu"},MFe={actif:"bg-success/10 text-success border-success/20",termine:"bg-muted text-muted-foreground",suspendu:"bg-warning/10 text-warning border-warning/20"};function $Fe(){const{id:e}=Qc(),t=yi(),{roles:r,isAdmin:n}=yr(),{toast:i}=qr(),[s,o]=_.useState(null),[l,c]=_.useState(!0),[u,d]=_.useState(!1),[f,m]=_.useState(!1),[h,v]=_.useState({name:"",code:"",description:"",client:"",location:"",status:"actif",budget:"",start_date:"",end_date:""}),[p,g]=_.useState(!1),[y,b]=_.useState(!1),[x,j]=_.useState({besoins:0,da:0,bl:0,mouvements:0}),A=r.some(T=>["responsable_logistique","agent_logistique"].includes(T))||n,C=n;_.useEffect(()=>{e&&(E(),O())},[e]);const E=async()=>{var T;try{const{data:B,error:M}=await fe.from("projets").select("*, created_by_profile:profiles!projets_created_by_fkey(id, first_name, last_name)").eq("id",e).maybeSingle();if(M||!B){i({title:"Erreur",description:"Projet introuvable.",variant:"destructive"}),t("/projets");return}o(B),v({name:B.name||"",code:B.code||"",description:B.description||"",client:B.client||"",location:B.location||"",status:B.status||"actif",budget:((T=B.budget)==null?void 0:T.toString())||"",start_date:B.start_date||"",end_date:B.end_date||""})}catch(B){console.error("Error:",B)}finally{c(!1)}},O=async()=>{try{const[T,B,M,G]=await Promise.all([fe.from("besoins").select("id",{count:"exact",head:!0}).eq("projet_id",e),fe.from("demandes_achat").select("id",{count:"exact",head:!0}).eq("projet_id",e),fe.from("bons_livraison").select("id",{count:"exact",head:!0}).eq("projet_id",e),fe.from("stock_movements").select("id",{count:"exact",head:!0}).eq("projet_id",e)]);j({besoins:T.count||0,da:B.count||0,bl:M.count||0,mouvements:G.count||0})}catch(T){console.error("Error fetching linked items:",T)}},L=async()=>{if(s){m(!0);try{const{error:T}=await fe.from("projets").update({name:h.name,code:h.code,description:h.description||null,client:h.client||null,location:h.location||null,status:h.status,budget:h.budget?parseFloat(h.budget):null,start_date:h.start_date||null,end_date:h.end_date||null}).eq("id",s.id);if(T)throw T;i({title:"Projet modifi",description:"Les modifications ont t enregistres."}),d(!1),E()}catch(T){i({title:"Erreur",description:T.message,variant:"destructive"})}finally{m(!1)}}},k=async()=>{if(!s)return;if(x.besoins+x.da+x.bl+x.mouvements>0){const B=[];x.besoins>0&&B.push(`${x.besoins} besoin(s)`),x.da>0&&B.push(`${x.da} DA`),x.bl>0&&B.push(`${x.bl} BL`),x.mouvements>0&&B.push(`${x.mouvements} mouvement(s)`),i({title:"Suppression impossible",description:`Ce projet est rattach  : ${B.join(", ")}. Veuillez d'abord dtacher ces lments.`,variant:"destructive"}),g(!1);return}b(!0);try{const{error:B}=await fe.from("projets").delete().eq("id",s.id);if(B)throw B;i({title:"Projet supprim",description:"Le projet a t supprim."}),t("/projets")}catch(B){i({title:"Erreur",description:B.message,variant:"destructive"})}finally{b(!1),g(!1)}};return l?a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})}):s?a.jsxs(st,{children:[a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/projets",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:s.name}),a.jsx(it,{variant:"outline",children:s.code}),a.jsx(it,{className:MFe[s.status]||"bg-muted",children:DFe[s.status]||s.status})]}),a.jsxs("p",{className:"text-muted-foreground",children:["Cr le ",Ct(new Date(s.created_at),"dd MMMM yyyy",{locale:Tt})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[A&&a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[a.jsx(Bc,{className:"mr-2 h-4 w-4"}),"Modifier"]}),C&&a.jsxs(de,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>g(!0),children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-4",children:[a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:a.jsx(jn,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:x.besoins}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Besoins"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx("div",{className:"rounded-full bg-warning/10 p-2",children:a.jsx(si,{className:"h-5 w-5 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:x.da}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"DA"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx("div",{className:"rounded-full bg-success/10 p-2",children:a.jsx(Tn,{className:"h-5 w-5 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:x.bl}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"BL"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-3 py-4",children:[a.jsx("div",{className:"rounded-full bg-muted p-2",children:a.jsx(Tn,{className:"h-5 w-5 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:x.mouvements}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Mouvements"})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Informations du projet"})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.client&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(zs,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Client"}),a.jsx("p",{className:"font-medium",children:s.client})]})]}),s.location&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Wy,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Localisation"}),a.jsx("p",{className:"font-medium",children:s.location})]})]}),s.budget&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(w_,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Budget"}),a.jsxs("p",{className:"font-medium",children:[s.budget.toLocaleString()," XOF"]})]})]}),s.start_date&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(wh,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Priode"}),a.jsxs("p",{className:"font-medium",children:[Ct(new Date(s.start_date),"dd MMM yyyy",{locale:Tt}),s.end_date&&` - ${Ct(new Date(s.end_date),"dd MMM yyyy",{locale:Tt})}`]})]})]})]}),s.description&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Description"}),a.jsx("p",{className:"whitespace-pre-wrap",children:s.description})]})]})]})]}),a.jsx(kr,{open:u,onOpenChange:d,children:a.jsxs(_r,{className:"max-w-lg",children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Modifier le projet"}),a.jsx(Yr,{children:"Modifiez les informations du projet."})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Nom *"}),a.jsx(De,{value:h.name,onChange:T=>v({...h,name:T.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Code *"}),a.jsx(De,{value:h.code,onChange:T=>v({...h,code:T.target.value})})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Statut"}),a.jsxs(Kt,{value:h.status,onValueChange:T=>v({...h,status:T}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"actif",children:"Actif"}),a.jsx(et,{value:"termine",children:"Termin"}),a.jsx(et,{value:"suspendu",children:"Suspendu"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Client"}),a.jsx(De,{value:h.client,onChange:T=>v({...h,client:T.target.value})})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Localisation"}),a.jsx(De,{value:h.location,onChange:T=>v({...h,location:T.target.value})})]})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Budget (XOF)"}),a.jsx(De,{type:"number",value:h.budget,onChange:T=>v({...h,budget:T.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Date dbut"}),a.jsx(De,{type:"date",value:h.start_date,onChange:T=>v({...h,start_date:T.target.value})})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Date fin"}),a.jsx(De,{type:"date",value:h.end_date,onChange:T=>v({...h,end_date:T.target.value})})]})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Pe,{children:"Description"}),a.jsx(Kr,{value:h.description,onChange:T=>v({...h,description:T.target.value}),rows:3})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),a.jsx(de,{onClick:L,disabled:!h.name||!h.code||f,children:"Enregistrer"})]})]})}),a.jsx(Yo,{open:p,onOpenChange:g,children:a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsxs(fo,{className:"flex items-center gap-2",children:[a.jsx(zr,{className:"h-5 w-5 text-destructive"}),"Supprimer ce projet ?"]}),a.jsx(ho,{children:x.besoins+x.da+x.bl+x.mouvements>0?a.jsxs("span",{className:"text-destructive",children:["Ce projet est rattach  :",x.besoins>0&&` ${x.besoins} besoin(s),`,x.da>0&&` ${x.da} DA,`,x.bl>0&&` ${x.bl} BL,`,x.mouvements>0&&` ${x.mouvements} mouvement(s)`,". La suppression est impossible."]}):"Cette action est irrversible. Le projet sera dfinitivement supprim."})]}),a.jsxs(uo,{children:[a.jsx(mo,{children:"Annuler"}),x.besoins+x.da+x.bl+x.mouvements===0&&a.jsx(Xo,{onClick:k,disabled:y,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:y?"Suppression...":"Supprimer"})]})]})})]}):null}const FFe={brouillon:"bg-muted text-muted-foreground",soumise:"bg-warning/10 text-warning border-warning/20",validee_daf:"bg-primary/10 text-primary border-primary/20",payee:"bg-success/10 text-success border-success/20",rejetee:"bg-destructive/10 text-destructive border-destructive/20"},BFe={brouillon:Yn,soumise:ao,validee_daf:Br,payee:si,rejetee:Er};function zFe(){const{user:e,roles:t,isAdmin:r}=yr(),{toast:n}=qr(),[i,s]=_.useState([]),[o,l]=_.useState(!0),[c,u]=_.useState(""),[d,f]=_.useState("all");t.includes("daf"),t.includes("comptable"),t.includes("dg"),_.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:g,error:y}=await fe.from("notes_frais").select(`
          *,
          user:profiles!notes_frais_user_id_fkey(id, first_name, last_name, email),
          department:departments(id, name),
          projet:projets(id, code, name)
        `).order("created_at",{ascending:!1});if(y)throw y;s(g||[])}catch(g){console.error("Error:",g),n({title:"Erreur",description:g.message,variant:"destructive"})}finally{l(!1)}},h=i.filter(g=>{var x,j;const y=g.reference.toLowerCase().includes(c.toLowerCase())||g.title.toLowerCase().includes(c.toLowerCase())||(((x=g.user)==null?void 0:x.first_name)||"").toLowerCase().includes(c.toLowerCase())||(((j=g.user)==null?void 0:j.last_name)||"").toLowerCase().includes(c.toLowerCase()),b=d==="all"||g.status===d;return y&&b}),v={total:i.length,brouillon:i.filter(g=>g.status==="brouillon").length,soumise:i.filter(g=>g.status==="soumise").length,validee_daf:i.filter(g=>g.status==="validee_daf").length,payee:i.filter(g=>g.status==="payee").length},p=(g,y="XOF")=>new Intl.NumberFormat("fr-FR").format(g)+" "+y;return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Notes de Frais"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestion des demandes de remboursement"})]}),a.jsx($t,{to:"/notes-frais/nouveau",children:a.jsxs(de,{children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Nouvelle note"]})})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(__,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:v.total}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-muted",children:a.jsx(Yn,{className:"h-6 w-6 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:v.brouillon}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Brouillons"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-warning/10",children:a.jsx(ao,{className:"h-6 w-6 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:v.soumise}),a.jsx("p",{className:"text-sm text-muted-foreground",children:" valider"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:a.jsx(Br,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:v.validee_daf}),a.jsx("p",{className:"text-sm text-muted-foreground",children:" payer"})]})]})}),a.jsx(me,{children:a.jsxs(pe,{className:"flex items-center gap-4 py-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-success/10",children:a.jsx(si,{className:"h-6 w-6 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:v.payee}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Payes"})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-4",children:a.jsx(Ue,{className:"text-lg",children:"Filtres"})}),a.jsx(pe,{children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par rfrence, titre ou demandeur...",value:c,onChange:g=>u(g.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:d,onValueChange:f,children:[a.jsx(Wt,{className:"w-full sm:w-48",children:a.jsx(Yt,{placeholder:"Tous les statuts"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les statuts"}),Object.keys(U1).map(g=>a.jsx(et,{value:g,children:U1[g]},g))]})]})]})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs(Ue,{children:[h.length," note",h.length!==1?"s":""," de frais"]})}),a.jsx(pe,{children:o?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):h.length===0?a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Aucune note de frais trouve."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Rfrence"}),a.jsx(Ee,{children:"Titre"}),a.jsx(Ee,{children:"Demandeur"}),a.jsx(Ee,{children:"Projet"}),a.jsx(Ee,{className:"text-right",children:"Montant"}),a.jsx(Ee,{children:"Statut"}),a.jsx(Ee,{children:"Date"}),a.jsx(Ee,{className:"text-right",children:"Action"})]})}),a.jsx(rn,{children:h.map(g=>{var b,x;const y=BFe[g.status];return a.jsxs(gt,{children:[a.jsx(Se,{className:"font-mono font-medium",children:g.reference}),a.jsxs(Se,{children:[a.jsx("div",{className:"font-medium",children:g.title}),g.description&&a.jsx("div",{className:"text-xs text-muted-foreground line-clamp-1",children:g.description})]}),a.jsxs(Se,{children:[(b=g.user)==null?void 0:b.first_name," ",(x=g.user)==null?void 0:x.last_name]}),a.jsx(Se,{children:g.projet?a.jsx("span",{className:"font-mono text-sm",children:g.projet.code}):a.jsx("span",{className:"text-muted-foreground",children:"-"})}),a.jsx(Se,{className:"text-right font-mono font-medium",children:p(g.total_amount,g.currency)}),a.jsx(Se,{children:a.jsxs(it,{className:FFe[g.status],children:[a.jsx(y,{className:"mr-1 h-3 w-3"}),U1[g.status]]})}),a.jsx(Se,{className:"whitespace-nowrap",children:Ct(new Date(g.created_at),"dd MMM yyyy",{locale:Tt})}),a.jsx(Se,{className:"text-right",children:a.jsx($t,{to:`/notes-frais/${g.id}`,children:a.jsx(de,{variant:"ghost",size:"sm",children:"Dtails"})})})]},g.id)})})]})})})]})]})})}function qFe(){const e=yi(),{user:t,profile:r}=yr(),{toast:n}=qr(),[i,s]=_.useState(!1),[o,l]=_.useState({title:"",description:"",projet_id:""}),[c,u]=_.useState([{id:crypto.randomUUID(),date_depense:new Date().toISOString().split("T")[0],motif:"",projet_id:"",montant:0,observations:""}]),d=()=>{u([...c,{id:crypto.randomUUID(),date_depense:new Date().toISOString().split("T")[0],motif:"",projet_id:o.projet_id||"",montant:0,observations:""}])},f=(p,g,y)=>{u(c.map(b=>b.id===p?{...b,[g]:y}:b))},m=p=>{c.length!==1&&u(c.filter(g=>g.id!==p))},h=c.reduce((p,g)=>p+(g.montant||0),0),v=async p=>{if(!o.title.trim()){n({title:"Erreur",description:"Le titre est requis.",variant:"destructive"});return}const g=c.filter(y=>y.motif.trim()&&y.montant>0);if(g.length===0){n({title:"Erreur",description:"Ajoutez au moins une ligne de dpense valide.",variant:"destructive"});return}s(!0);try{const{data:y}=await fe.rpc("generate_ndf_reference"),b=y||`NDF-${Date.now()}`,{data:x,error:j}=await fe.from("notes_frais").insert({reference:b,user_id:t==null?void 0:t.id,department_id:r==null?void 0:r.department_id,projet_id:o.projet_id||null,title:o.title,description:o.description||null,total_amount:h,status:"brouillon"}).select().single();if(j)throw j;const N=g.map(C=>({note_frais_id:x.id,date_depense:C.date_depense,motif:C.motif,projet_id:C.projet_id||null,montant:C.montant,observations:C.observations||null})),{error:A}=await fe.from("note_frais_lignes").insert(N);if(A)throw A;if(!p){const{error:C}=await fe.from("notes_frais").update({status:"soumise",submitted_at:new Date().toISOString()}).eq("id",x.id);if(C)throw C}n({title:p?"Brouillon enregistr":"Note soumise",description:p?"Votre note de frais a t enregistre comme brouillon.":"Votre note de frais a t soumise pour validation."}),e(`/notes-frais/${x.id}`)}catch(y){n({title:"Erreur",description:y.message,variant:"destructive"})}finally{s(!1)}};return a.jsx(st,{children:a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/notes-frais",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Nouvelle note de frais"}),a.jsx("p",{className:"text-muted-foreground",children:"Crez une demande de remboursement"})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{children:"Informations gnrales"})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"title",children:"Titre de la note *"}),a.jsx(De,{id:"title",value:o.title,onChange:p=>l({...o,title:p.target.value}),placeholder:"Ex: Frais de dplacement mission Douala"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"description",children:"Description"}),a.jsx(Kr,{id:"description",value:o.description,onChange:p=>l({...o,description:p.target.value}),placeholder:"Contexte et justification des dpenses...",rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"projet",children:"Projet rattach (optionnel)"}),a.jsx(H2,{value:o.projet_id,onChange:p=>l({...o,projet_id:p}),placeholder:"Slectionner un projet..."})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{className:"flex flex-row items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ue,{children:"Lignes de dpenses"}),a.jsx(wn,{children:"Ajoutez les dpenses  rembourser"})]}),a.jsxs(de,{variant:"outline",size:"sm",onClick:d,children:[a.jsx(ai,{className:"mr-2 h-4 w-4"}),"Ajouter"]})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{className:"w-32",children:"Date"}),a.jsx(Ee,{children:"Motif *"}),a.jsx(Ee,{className:"w-40",children:"Projet"}),a.jsx(Ee,{className:"w-32 text-right",children:"Montant *"}),a.jsx(Ee,{className:"w-40",children:"Observations"}),a.jsx(Ee,{className:"w-12"})]})}),a.jsx(rn,{children:c.map(p=>a.jsxs(gt,{children:[a.jsx(Se,{children:a.jsx(De,{type:"date",value:p.date_depense,onChange:g=>f(p.id,"date_depense",g.target.value),className:"w-full"})}),a.jsx(Se,{children:a.jsx(De,{value:p.motif,onChange:g=>f(p.id,"motif",g.target.value),placeholder:"Objet de la dpense"})}),a.jsx(Se,{children:a.jsx(H2,{value:p.projet_id,onChange:g=>f(p.id,"projet_id",g),placeholder:"-"})}),a.jsx(Se,{children:a.jsx(De,{type:"number",min:0,value:p.montant||"",onChange:g=>f(p.id,"montant",Number(g.target.value)),className:"text-right",placeholder:"0"})}),a.jsx(Se,{children:a.jsx(De,{value:p.observations,onChange:g=>f(p.id,"observations",g.target.value),placeholder:"Note"})}),a.jsx(Se,{children:a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>m(p.id),disabled:c.length===1,children:a.jsx(ds,{className:"h-4 w-4 text-destructive"})})})]},p.id))})]})}),a.jsx("div",{className:"mt-4 flex justify-end border-t pt-4",children:a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),a.jsxs("p",{className:"text-2xl font-bold",children:[new Intl.NumberFormat("fr-FR").format(h)," XOF"]})]})})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx($t,{to:"/notes-frais",children:a.jsx(de,{variant:"outline",children:"Annuler"})}),a.jsx(de,{variant:"outline",onClick:()=>v(!0),disabled:i,children:"Enregistrer brouillon"}),a.jsxs(de,{onClick:()=>v(!1),disabled:i,children:[a.jsx(__,{className:"mr-2 h-4 w-4"}),i?"Envoi...":"Soumettre pour validation"]})]})]})})}const UFe={brouillon:"bg-muted text-muted-foreground",soumise:"bg-warning/10 text-warning border-warning/20",validee_daf:"bg-primary/10 text-primary border-primary/20",payee:"bg-success/10 text-success border-success/20",rejetee:"bg-destructive/10 text-destructive border-destructive/20"},WFe={brouillon:Yn,soumise:ao,validee_daf:Br,payee:si,rejetee:Er};function HFe(){var D,q,K,ae;const{id:e}=Qc(),t=yi(),{user:r,roles:n,isAdmin:i}=yr(),{toast:s}=qr(),[o,l]=_.useState(null),[c,u]=_.useState([]),[d,f]=_.useState(!0),[m,h]=_.useState(!1),[v,p]=_.useState(!1),[g,y]=_.useState(!1),[b,x]=_.useState(""),[j,N]=_.useState({mode_paiement:"",reference_paiement:""}),A=n.includes("daf"),C=n.includes("comptable");n.includes("dg");const E=(o==null?void 0:o.user_id)===(r==null?void 0:r.id);_.useEffect(()=>{e&&(O(),L())},[e]);const O=async()=>{try{const{data:J,error:I}=await fe.from("notes_frais").select(`
          *,
          user:profiles!notes_frais_user_id_fkey(id, first_name, last_name, email),
          department:departments(id, name),
          projet:projets(id, code, name),
          validated_daf_by_profile:profiles!notes_frais_validated_daf_by_fkey(id, first_name, last_name),
          paid_by_profile:profiles!notes_frais_paid_by_fkey(id, first_name, last_name),
          rejected_by_profile:profiles!notes_frais_rejected_by_fkey(id, first_name, last_name)
        `).eq("id",e).maybeSingle();if(I||!J){s({title:"Erreur",description:"Note de frais introuvable.",variant:"destructive"}),t("/notes-frais");return}const{data:$}=await fe.from("note_frais_lignes").select("*, projet:projets(id, code, name)").eq("note_frais_id",e).order("date_depense");l({...J,lignes:$||[]})}catch(J){console.error("Error:",J)}finally{f(!1)}},L=async()=>{const{data:J}=await fe.from("payment_methods").select("*").eq("is_active",!0).order("sort_order");u(J||[])},k=async()=>{if(o){h(!0);try{const{error:J}=await fe.from("notes_frais").update({status:"soumise",submitted_at:new Date().toISOString()}).eq("id",o.id);if(J)throw J;s({title:"Note soumise",description:"Votre note de frais a t soumise pour validation."}),O()}catch(J){s({title:"Erreur",description:J.message,variant:"destructive"})}finally{h(!1)}}},T=async()=>{if(o){h(!0);try{const{error:J}=await fe.from("notes_frais").update({status:"validee_daf",validated_daf_by:r==null?void 0:r.id,validated_daf_at:new Date().toISOString()}).eq("id",o.id);if(J)throw J;s({title:"Note valide",description:"La note de frais a t valide."}),O()}catch(J){s({title:"Erreur",description:J.message,variant:"destructive"})}finally{h(!1)}}},B=async()=>{if(!(!o||!b.trim())){h(!0);try{const{error:J}=await fe.from("notes_frais").update({status:"rejetee",rejection_reason:b.trim(),rejected_by:r==null?void 0:r.id,rejected_at:new Date().toISOString()}).eq("id",o.id);if(J)throw J;s({title:"Note rejete",description:"La note de frais a t rejete."}),p(!1),O()}catch(J){s({title:"Erreur",description:J.message,variant:"destructive"})}finally{h(!1)}}},M=async()=>{if(!(!o||!j.mode_paiement)){h(!0);try{const{error:J}=await fe.from("notes_frais").update({status:"payee",mode_paiement:j.mode_paiement,reference_paiement:j.reference_paiement||null,paid_by:r==null?void 0:r.id,paid_at:new Date().toISOString()}).eq("id",o.id);if(J)throw J;s({title:"Paiement effectu",description:"La note de frais a t paye."}),y(!1),O()}catch(J){s({title:"Erreur",description:J.message,variant:"destructive"})}finally{h(!1)}}};if(d)return a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(!o)return null;const G=WFe[o.status],z=(J,I="XOF")=>new Intl.NumberFormat("fr-FR").format(J)+" "+I;return a.jsxs(st,{children:[a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/notes-frais",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:o.reference}),a.jsxs(it,{className:UFe[o.status],children:[a.jsx(G,{className:"mr-1 h-3 w-3"}),U1[o.status]]})]}),a.jsx("p",{className:"text-muted-foreground",children:o.title})]})]})}),o.status==="rejetee"&&o.rejection_reason&&a.jsx(me,{className:"border-destructive/50 bg-destructive/5",children:a.jsxs(pe,{className:"flex items-start gap-3 py-4",children:[a.jsx(Er,{className:"mt-0.5 h-5 w-5 shrink-0 text-destructive"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-destructive",children:"Motif du rejet"}),a.jsx("p",{className:"text-sm text-foreground",children:o.rejection_reason})]})]})}),E&&o.status==="brouillon"&&a.jsx(me,{className:"border-primary/50 bg-primary/5",children:a.jsxs(pe,{className:"flex items-center justify-between gap-4 py-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Brouillon"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Soumettez cette note pour validation DAF."})]}),a.jsxs(de,{onClick:k,disabled:m,children:[a.jsx(ao,{className:"mr-2 h-4 w-4"}),"Soumettre"]})]})}),(A||i)&&o.status==="soumise"&&a.jsx(me,{className:"border-warning/50 bg-warning/5",children:a.jsxs(pe,{className:"flex items-center justify-between gap-4 py-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Validation requise"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Validez ou rejetez cette demande de remboursement."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",className:"text-destructive",onClick:()=>p(!0),disabled:m,children:[a.jsx(Er,{className:"mr-2 h-4 w-4"}),"Rejeter"]}),a.jsxs(de,{onClick:T,disabled:m,children:[a.jsx(Br,{className:"mr-2 h-4 w-4"}),"Valider"]})]})]})}),(C||i)&&o.status==="validee_daf"&&a.jsx(me,{className:"border-success/50 bg-success/5",children:a.jsxs(pe,{className:"flex items-center justify-between gap-4 py-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Paiement requis"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Procdez au paiement de cette note de frais valide."})]}),a.jsxs(de,{onClick:()=>y(!0),disabled:m,children:[a.jsx(si,{className:"mr-2 h-4 w-4"}),"Marquer comme paye"]})]})}),o.status==="payee"&&a.jsx(me,{className:"border-success/50 bg-success/5",children:a.jsxs(pe,{className:"flex items-center justify-between gap-4 py-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Br,{className:"h-5 w-5 text-success"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-success",children:"Paiement effectu"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o.paid_at?`Paye le ${Ct(new Date(o.paid_at),"dd MMMM yyyy",{locale:Tt})}`:"Cette note de frais a t paye."})]})]}),a.jsxs(de,{variant:"default",size:"sm",onClick:()=>{var H;const J=o.paid_by_profile,I=J?`${J.first_name||""} ${J.last_name||""}`.trim():((H=r==null?void 0:r.email)==null?void 0:H.split("@")[0])||"Comptable",$=o,U=typeof $.payment_details=="object"&&$.payment_details!==null?$.payment_details:{};vY({type:"NOTE_FRAIS",reference:o.reference,montant:o.total_amount||0,currency:o.currency||"XOF",caisseName:U.caisse_name||"Caisse",caisseCode:U.caisse_code||"N/A",comptableName:I,paidAt:o.paid_at||new Date().toISOString(),beneficiaire:o.user?`${o.user.first_name||""} ${o.user.last_name||""}`.trim():void 0,description:o.title,modePaiement:o.mode_paiement||void 0,referencePaiement:o.reference_paiement||void 0})},children:[a.jsx(jn,{className:"mr-2 h-4 w-4"}),"Dcharge PDF"]})]})}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs(me,{children:[a.jsx(ze,{className:"pb-2",children:a.jsx(Ue,{className:"text-sm",children:"Demandeur"})}),a.jsxs(pe,{className:"flex items-center gap-3",children:[a.jsx(_h,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:[(D=o.user)==null?void 0:D.first_name," ",(q=o.user)==null?void 0:q.last_name]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:(K=o.department)==null?void 0:K.name})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{className:"pb-2",children:a.jsx(Ue,{className:"text-sm",children:"Montant total"})}),a.jsx(pe,{children:a.jsx("p",{className:"text-2xl font-bold text-primary",children:z(o.total_amount,o.currency)})})]})]}),o.projet&&a.jsxs(me,{children:[a.jsx(ze,{className:"pb-2",children:a.jsx(Ue,{className:"text-sm",children:"Projet rattach"})}),a.jsxs(pe,{className:"flex items-center gap-3",children:[a.jsx(zy,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-mono font-medium",children:o.projet.code}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o.projet.name})]})]})]}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{children:"Dtail des dpenses"}),a.jsxs(wn,{children:[((ae=o.lignes)==null?void 0:ae.length)||0," ligne(s)"]})]}),a.jsx(pe,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Date"}),a.jsx(Ee,{children:"Motif"}),a.jsx(Ee,{children:"Projet"}),a.jsx(Ee,{className:"text-right",children:"Montant"}),a.jsx(Ee,{children:"Observations"})]})}),a.jsx(rn,{children:(o.lignes||[]).map(J=>a.jsxs(gt,{children:[a.jsx(Se,{className:"whitespace-nowrap",children:Ct(new Date(J.date_depense),"dd MMM yyyy",{locale:Tt})}),a.jsx(Se,{className:"font-medium",children:J.motif}),a.jsx(Se,{children:J.projet?a.jsx("span",{className:"font-mono text-sm",children:J.projet.code}):"-"}),a.jsx(Se,{className:"text-right font-mono",children:z(J.montant)}),a.jsx(Se,{className:"text-muted-foreground",children:J.observations||"-"})]},J.id))})]})})})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsx(Ue,{className:"text-sm",children:"Historique"})}),a.jsxs(pe,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx(wh,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{children:["Cre le ",Ct(new Date(o.created_at),"dd MMMM yyyy  HH:mm",{locale:Tt})]})]}),o.submitted_at&&a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx(ao,{className:"h-4 w-4 text-warning"}),a.jsxs("span",{children:["Soumise le ",Ct(new Date(o.submitted_at),"dd MMMM yyyy  HH:mm",{locale:Tt})]})]}),o.validated_daf_at&&o.validated_daf_by_profile&&a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx(Br,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{children:["Valide par ",o.validated_daf_by_profile.first_name," ",o.validated_daf_by_profile.last_name," le"," ",Ct(new Date(o.validated_daf_at),"dd MMMM yyyy  HH:mm",{locale:Tt})]})]}),o.paid_at&&o.paid_by_profile&&a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx(si,{className:"h-4 w-4 text-success"}),a.jsxs("span",{children:["Paye par ",o.paid_by_profile.first_name," ",o.paid_by_profile.last_name," le"," ",Ct(new Date(o.paid_at),"dd MMMM yyyy  HH:mm",{locale:Tt}),o.mode_paiement&&` (${o.mode_paiement})`]})]}),o.rejected_at&&o.rejected_by_profile&&a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx(Er,{className:"h-4 w-4 text-destructive"}),a.jsxs("span",{children:["Rejete par ",o.rejected_by_profile.first_name," ",o.rejected_by_profile.last_name," le"," ",Ct(new Date(o.rejected_at),"dd MMMM yyyy  HH:mm",{locale:Tt})]})]})]})]})]}),a.jsx(kr,{open:v,onOpenChange:p,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Rejeter la note de frais"}),a.jsx(Yr,{children:"Indiquez le motif du rejet."})]}),a.jsxs("div",{className:"py-4",children:[a.jsx(Pe,{htmlFor:"rejection",children:"Motif du rejet *"}),a.jsx(Kr,{id:"rejection",value:b,onChange:J=>x(J.target.value),placeholder:"Raison du rejet...",rows:3})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>p(!1),children:"Annuler"}),a.jsx(de,{variant:"destructive",onClick:B,disabled:m||!b.trim(),children:"Confirmer le rejet"})]})]})}),a.jsx(kr,{open:g,onOpenChange:y,children:a.jsxs(_r,{children:[a.jsxs(jr,{children:[a.jsx(Nr,{children:"Marquer comme paye"}),a.jsxs(Yr,{children:["Confirmez le paiement de ",z(o.total_amount,o.currency),"."]})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"mode",children:"Mode de paiement *"}),a.jsxs(Kt,{value:j.mode_paiement,onValueChange:J=>N({...j,mode_paiement:J}),children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner"})}),a.jsx(Xt,{children:c.map(J=>a.jsx(et,{value:J.label,children:J.label},J.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"ref",children:"Rfrence paiement"}),a.jsx(De,{id:"ref",value:j.reference_paiement,onChange:J=>N({...j,reference_paiement:J.target.value}),placeholder:"N transaction, chque..."})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>y(!1),children:"Annuler"}),a.jsx(de,{onClick:M,disabled:m||!j.mode_paiement,children:"Confirmer le paiement"})]})]})})]})}const lf={besoin:["besoin_created","besoin_status_changed"],da:["da_created","da_submitted","da_rejected","da_validation_required","da_validated_finance","da_refused_finance","da_revision_requested","da_ready_accounting","da_paid","da_submitted_validation","da_rejected_comptabilite"],bl:["bl_created","BL livr","Livraison partielle"]};function VFe(){const{user:e}=yr(),[t,r]=_.useState([]),[n,i]=_.useState(!0),[s,o]=_.useState("all"),[l,c]=_.useState("all"),u=async()=>{if(!e)return;i(!0);let y=fe.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});s==="unread"&&(y=y.eq("is_read",!1));const{data:b,error:x}=await y;x?IA({title:"Erreur",description:"Impossible de charger les notifications",variant:"destructive"}):r(b||[]),i(!1)};_.useEffect(()=>{if(u(),!e)return;const y=fe.channel("notifications-page").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},()=>{u()}).subscribe();return()=>{fe.removeChannel(y)}},[e,s]);const d=async y=>{const{error:b}=await fe.from("notifications").update({is_read:!0}).eq("id",y);b||r(x=>x.map(j=>j.id===y?{...j,is_read:!0}:j))},f=async()=>{if(!e)return;const{error:y}=await fe.from("notifications").update({is_read:!0}).eq("user_id",e.id).eq("is_read",!1);y||(r(b=>b.map(x=>({...x,is_read:!0}))),IA({title:"Succs",description:"Toutes les notifications ont t marques comme lues"}))},m=y=>lf.besoin.includes(y)?a.jsx(jn,{className:"h-5 w-5"}):lf.da.includes(y)?a.jsx(Wf,{className:"h-5 w-5"}):lf.bl.includes(y)?a.jsx(Tn,{className:"h-5 w-5"}):a.jsx(zm,{className:"h-5 w-5"}),h=y=>y.includes("rejected")||y.includes("refused")||y.includes("refusee")?"bg-destructive/10 text-destructive border-destructive/20":y.includes("validated")||y.includes("paid")||y.includes("accepte")||y==="BL livr"?"bg-success/10 text-success border-success/20":y.includes("revision")||y.includes("validation")||y==="Livraison partielle"?"bg-warning/10 text-warning border-warning/20":"bg-primary/10 text-primary border-primary/20",v=y=>lf.besoin.includes(y)?"Besoin":lf.da.includes(y)?"DA":lf.bl.includes(y)?"BL":"Systme",p=t.filter(y=>{var b;return l==="all"?!0:(b=lf[l])==null?void 0:b.includes(y.type)}),g=t.filter(y=>!y.is_read).length;return a.jsx(st,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Notifications"}),a.jsx("p",{className:"text-muted-foreground",children:g>0?`${g} notification${g>1?"s":""} non lue${g>1?"s":""}`:"Toutes vos notifications sont lues"})]}),g>0&&a.jsxs(de,{onClick:f,variant:"outline",children:[a.jsx(TQ,{className:"mr-2 h-4 w-4"}),"Tout marquer comme lu"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsx(W2,{value:s,onValueChange:y=>o(y),children:a.jsxs(Hx,{children:[a.jsx(wa,{value:"all",children:"Toutes"}),a.jsxs(wa,{value:"unread",children:["Non lues (",g,")"]})]})}),a.jsx(W2,{value:l,onValueChange:y=>c(y),children:a.jsxs(Hx,{children:[a.jsx(wa,{value:"all",children:"Tous types"}),a.jsx(wa,{value:"besoin",children:"Besoins"}),a.jsx(wa,{value:"da",children:"DA"}),a.jsx(wa,{value:"bl",children:"BL"})]})})]}),a.jsx(me,{children:a.jsx(pe,{className:"p-0",children:n?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):p.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[a.jsx(zm,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),a.jsx("h3",{className:"font-medium text-muted-foreground",children:"Aucune notification"}),a.jsx("p",{className:"text-sm text-muted-foreground/70",children:s==="unread"?"Vous avez lu toutes vos notifications":"Vous n'avez pas encore reu de notifications"})]}):a.jsx("div",{className:"divide-y",children:p.map(y=>a.jsxs("div",{className:rt("flex gap-4 p-4 transition-colors hover:bg-muted/30",!y.is_read&&"bg-accent/20"),children:[a.jsx("div",{className:rt("flex h-10 w-10 shrink-0 items-center justify-center rounded-full border",h(y.type)),children:m(y.type)}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium leading-tight",children:y.title}),a.jsx(it,{variant:"outline",className:"mt-1 text-xs",children:v(y.type)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!y.is_read&&a.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-primary"}),a.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:Dz(new Date(y.created_at),{addSuffix:!0,locale:Tt})})]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.message}),a.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:Ct(new Date(y.created_at),"dd MMM yyyy  HH:mm",{locale:Tt})}),y.link&&a.jsxs($t,{to:y.link,onClick:()=>d(y.id),className:"inline-flex items-center gap-1 text-xs text-primary hover:underline",children:[a.jsx(Fc,{className:"h-3 w-3"}),"Voir le dtail"]}),!y.is_read&&a.jsxs(de,{variant:"ghost",size:"sm",className:"h-auto p-1 text-xs",onClick:()=>d(y.id),children:[a.jsx($c,{className:"mr-1 h-3 w-3"}),"Marquer comme lu"]})]})]})]},y.id))})})})]})})}function GFe(){var x;const{user:e,profile:t,roles:r,refreshProfile:n}=yr(),{toast:i}=qr(),[s,o]=_.useState(!1),[l,c]=_.useState(!1),[u,d]=_.useState(!1);_.useState(!1);const[f,m]=_.useState(!1),[h,v]=_.useState({first_name:(t==null?void 0:t.first_name)||"",last_name:(t==null?void 0:t.last_name)||""}),[p,g]=_.useState({current_password:"",new_password:"",confirm_password:""}),y=async()=>{if(e){c(!0);try{const{error:j}=await fe.from("profiles").update({first_name:h.first_name.trim()||null,last_name:h.last_name.trim()||null}).eq("id",e.id);if(j)throw j;i({title:"Profil mis  jour",description:"Vos informations ont t enregistres."}),o(!1),await n()}catch(j){i({title:"Erreur",description:j.message,variant:"destructive"})}finally{c(!1)}}},b=async()=>{if(p.new_password!==p.confirm_password){i({title:"Erreur",description:"Les mots de passe ne correspondent pas.",variant:"destructive"});return}if(p.new_password.length<6){i({title:"Erreur",description:"Le mot de passe doit contenir au moins 6 caractres.",variant:"destructive"});return}c(!0);try{const{error:j}=await fe.auth.updateUser({password:p.new_password});if(j)throw j;i({title:"Mot de passe modifi",description:"Votre mot de passe a t mis  jour."}),d(!1),g({current_password:"",new_password:"",confirm_password:""})}catch(j){i({title:"Erreur",description:j.message,variant:"destructive"})}finally{c(!1)}};return a.jsx(st,{children:a.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-serif text-2xl font-bold text-foreground",children:"Mon profil"}),a.jsx("p",{className:"text-muted-foreground",children:"Grez vos informations personnelles"})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_h,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx(Ue,{children:"Informations personnelles"}),a.jsx(wn,{children:"Vos informations de base"})]})]}),!s&&a.jsx(de,{variant:"outline",size:"sm",onClick:()=>o(!0),children:"Modifier"})]})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Email"}),a.jsx(De,{value:(t==null?void 0:t.email)||"",disabled:!0,className:"bg-muted"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"L'email ne peut pas tre modifi"})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"first_name",children:"Prnom"}),a.jsx(De,{id:"first_name",value:h.first_name,onChange:j=>v({...h,first_name:j.target.value}),disabled:!s,placeholder:"Votre prnom"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"last_name",children:"Nom"}),a.jsx(De,{id:"last_name",value:h.last_name,onChange:j=>v({...h,last_name:j.target.value}),disabled:!s,placeholder:"Votre nom"})]})]}),s&&a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(de,{onClick:y,disabled:l,children:[a.jsx(N4,{className:"mr-2 h-4 w-4"}),l?"Enregistrement...":"Enregistrer"]}),a.jsx(de,{variant:"outline",onClick:()=>{o(!1),v({first_name:(t==null?void 0:t.first_name)||"",last_name:(t==null?void 0:t.last_name)||""})},children:"Annuler"})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(zs,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx(Ue,{children:"Dpartement & Rles"}),a.jsx(wn,{children:"Ces informations sont gres par l'administration"})]})]})}),a.jsxs(pe,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Dpartement"}),a.jsx(De,{value:((x=t==null?void 0:t.department)==null?void 0:x.name)||"Non assign",disabled:!0,className:"bg-muted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Rles"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.length>0?r.map(j=>a.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-sm text-primary",children:[a.jsx(_p,{className:"h-3 w-3"}),Cc[j]||j]},j)):a.jsx("span",{className:"text-sm text-muted-foreground",children:"Aucun rle assign"})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Les rles sont attribus par un administrateur"})]})]})]}),a.jsxs(me,{children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Uy,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx(Ue,{children:"Scurit"}),a.jsx(wn,{children:"Grez votre mot de passe"})]})]}),!u&&a.jsx(de,{variant:"outline",size:"sm",onClick:()=>d(!0),children:"Changer le mot de passe"})]})}),u&&a.jsxs(pe,{className:"space-y-4",children:[a.jsx(Iu,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"new_password",children:"Nouveau mot de passe"}),a.jsxs("div",{className:"relative",children:[a.jsx(De,{id:"new_password",type:f?"text":"password",value:p.new_password,onChange:j=>g({...p,new_password:j.target.value}),placeholder:"Minimum 6 caractres"}),a.jsx(de,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2",onClick:()=>m(!f),children:f?a.jsx($Q,{className:"h-4 w-4"}):a.jsx(wp,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{htmlFor:"confirm_password",children:"Confirmer le nouveau mot de passe"}),a.jsx(De,{id:"confirm_password",type:f?"text":"password",value:p.confirm_password,onChange:j=>g({...p,confirm_password:j.target.value}),placeholder:"Rptez le mot de passe"})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx(de,{onClick:b,disabled:l,children:l?"Enregistrement...":"Mettre  jour"}),a.jsx(de,{variant:"outline",onClick:()=>{d(!1),g({current_password:"",new_password:"",confirm_password:""})},children:"Annuler"})]})]})]})]})})}const x1={principale:"Principale",logistique:"Logistique",chantier:"Chantier",projet:"Projet"},KFe={principale:"bg-primary/20 text-primary",logistique:"bg-blue-500/20 text-blue-700",chantier:"bg-orange-500/20 text-orange-700",projet:"bg-green-500/20 text-green-700"};function YFe(){const e=yi(),{user:t,roles:r,isLoading:n}=yr(),[i,s]=_.useState([]),[o,l]=_.useState([]),[c,u]=_.useState(!0),[d,f]=_.useState(""),[m,h]=_.useState("all"),[v,p]=_.useState(!1),[g,y]=_.useState(null),[b,x]=_.useState({code:"",name:"",type:"principale",responsable_id:"",solde_initial:0,devise:"XOF",description:""}),j=r.some(D=>["admin","daf"].includes(D)),N=r.some(D=>["admin","daf","dg","comptable"].includes(D));_.useEffect(()=>{!n&&N&&(A(),C())},[n,N]);const A=async()=>{try{const{data:D,error:q}=await fe.from("caisses").select("*").order("type",{ascending:!0}).order("name",{ascending:!0});if(q)throw q;const K=(D==null?void 0:D.filter(ae=>ae.responsable_id).map(ae=>ae.responsable_id))||[];if(K.length>0){const{data:ae}=await fe.rpc("get_public_profiles",{_user_ids:K}),J=new Map(ae==null?void 0:ae.map($=>[$.id,$])),I=D==null?void 0:D.map($=>({...$,responsable:$.responsable_id?J.get($.responsable_id):null}));s(I||[])}else s(D||[])}catch(D){fi.error("Erreur lors du chargement des caisses"),console.error(D)}finally{u(!1)}},C=async()=>{try{const{data:D,error:q}=await fe.from("profiles").select("id, first_name, last_name, email").eq("status","active").order("last_name");if(q)throw q;l(D||[])}catch(D){console.error("Error fetching profiles:",D)}},E=async()=>{if(!b.code||!b.name){fi.error("Le code et le nom sont obligatoires");return}try{const{error:D}=await fe.from("caisses").insert({code:b.code,name:b.name,type:b.type,responsable_id:b.responsable_id&&b.responsable_id!=="_none"?b.responsable_id:null,solde_initial:b.solde_initial,solde_actuel:b.solde_initial,devise:b.devise,description:b.description||null,created_by:t==null?void 0:t.id});if(D)throw D;fi.success("Caisse cre avec succs"),p(!1),T(),A()}catch(D){D.code==="23505"?fi.error("Ce code de caisse existe dj"):fi.error("Erreur lors de la cration")}},O=async()=>{if(!g||!b.code||!b.name){fi.error("Le code et le nom sont obligatoires");return}try{const{error:D}=await fe.from("caisses").update({code:b.code,name:b.name,type:b.type,responsable_id:b.responsable_id&&b.responsable_id!=="_none"?b.responsable_id:null,solde_initial:b.solde_initial,devise:b.devise,description:b.description||null}).eq("id",g.id);if(D)throw D;fi.success("Caisse modifie avec succs"),y(null),T(),A()}catch{fi.error("Erreur lors de la modification")}},L=async D=>{if(confirm("tes-vous sr de vouloir supprimer cette caisse ?"))try{const{error:q}=await fe.from("caisses").delete().eq("id",D);if(q)throw q;fi.success("Caisse supprime"),A()}catch{fi.error("Erreur lors de la suppression")}},k=async D=>{try{const{error:q}=await fe.from("caisses").update({is_active:!D.is_active}).eq("id",D.id);if(q)throw q;fi.success(D.is_active?"Caisse dsactive":"Caisse active"),A()}catch{fi.error("Erreur lors de la modification")}},T=()=>{x({code:"",name:"",type:"principale",responsable_id:"",solde_initial:0,devise:"XOF",description:""})},B=D=>{x({code:D.code,name:D.name,type:D.type,responsable_id:D.responsable_id||"",solde_initial:D.solde_initial,devise:D.devise,description:D.description||""}),y(D)},M=i.filter(D=>{const q=D.code.toLowerCase().includes(d.toLowerCase())||D.name.toLowerCase().includes(d.toLowerCase()),K=m==="all"||D.type===m;return q&&K}),G=i.filter(D=>D.is_active).reduce((D,q)=>D+q.solde_actuel,0);if(n)return a.jsx(st,{children:a.jsx("div",{className:"p-8",children:"Chargement..."})});if(!N)return a.jsx(st,{children:a.jsx(Ji,{})});const z=(D,q="XOF")=>new Intl.NumberFormat("fr-FR").format(D)+" "+q;return a.jsx(st,{children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(si,{className:"h-6 w-6"}),"Gestion des Caisses"]}),a.jsx("p",{className:"text-muted-foreground",children:"Grez les diffrentes caisses de l'entreprise"})]}),j&&a.jsxs(kr,{open:v,onOpenChange:p,children:[a.jsx(zj,{asChild:!0,children:a.jsxs(de,{onClick:()=>{T(),p(!0)},children:[a.jsx(ai,{className:"h-4 w-4 mr-2"}),"Nouvelle Caisse"]})}),a.jsxs(_r,{className:"max-w-md",children:[a.jsx(jr,{children:a.jsx(Nr,{children:"Crer une Caisse"})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Code *"}),a.jsx(De,{value:b.code,onChange:D=>x({...b,code:D.target.value.toUpperCase()}),placeholder:"CAISSE-001"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Type"}),a.jsxs(Kt,{value:b.type,onValueChange:D=>x({...b,type:D}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.entries(x1).map(([D,q])=>a.jsx(et,{value:D,children:q},D))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Nom *"}),a.jsx(De,{value:b.name,onChange:D=>x({...b,name:D.target.value}),placeholder:"Caisse Principale"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Responsable"}),a.jsxs(Kt,{value:b.responsable_id,onValueChange:D=>x({...b,responsable_id:D}),children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner..."})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"_none",children:"Aucun"}),o.map(D=>a.jsxs(et,{value:D.id,children:[D.first_name," ",D.last_name]},D.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Solde Initial"}),a.jsx(De,{type:"number",value:b.solde_initial,onChange:D=>x({...b,solde_initial:parseFloat(D.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Devise"}),a.jsxs(Kt,{value:b.devise,onValueChange:D=>x({...b,devise:D}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"XOF",children:"XOF (Franc CFA BCEAO)"}),a.jsx(et,{value:"XAF",children:"XAF (Franc CFA BEAC)"}),a.jsx(et,{value:"EUR",children:"EUR (Euro)"}),a.jsx(et,{value:"USD",children:"USD"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Description"}),a.jsx(Kr,{value:b.description,onChange:D=>x({...b,description:D.target.value}),placeholder:"Description de la caisse..."})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>p(!1),children:"Annuler"}),a.jsx(de,{onClick:E,children:"Crer"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Caisses"}),a.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),a.jsx(si,{className:"h-8 w-8 text-muted-foreground"})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Caisses Actives"}),a.jsx("p",{className:"text-2xl font-bold",children:i.filter(D=>D.is_active).length})]}),a.jsx(Uo,{className:"h-8 w-8 text-green-500"})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Solde Total"}),a.jsx("p",{className:"text-2xl font-bold",children:z(G)})]}),a.jsx(Uo,{className:"h-8 w-8 text-primary"})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Responsables"}),a.jsx("p",{className:"text-2xl font-bold",children:i.filter(D=>D.responsable_id).length})]}),a.jsx(fg,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(De,{placeholder:"Rechercher par code ou nom...",value:d,onChange:D=>f(D.target.value),className:"pl-10"})]}),a.jsxs(Kt,{value:m,onValueChange:h,children:[a.jsx(Wt,{className:"w-[180px]",children:a.jsx(Yt,{placeholder:"Filtrer par type"})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"all",children:"Tous les types"}),Object.entries(x1).map(([D,q])=>a.jsx(et,{value:D,children:q},D))]})]})]}),a.jsx(me,{children:a.jsx(pe,{className:"p-0",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Code"}),a.jsx(Ee,{children:"Nom"}),a.jsx(Ee,{children:"Type"}),a.jsx(Ee,{children:"Responsable"}),a.jsx(Ee,{className:"text-right",children:"Solde Actuel"}),a.jsx(Ee,{children:"Statut"}),j&&a.jsx(Ee,{className:"text-right",children:"Actions"})]})}),a.jsx(rn,{children:c?a.jsx(gt,{children:a.jsx(Se,{colSpan:7,className:"text-center py-8",children:"Chargement..."})}):M.length===0?a.jsx(gt,{children:a.jsx(Se,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Aucune caisse trouve"})}):M.map(D=>a.jsxs(gt,{className:D.is_active?"":"opacity-50",children:[a.jsx(Se,{className:"font-mono font-medium",children:D.code}),a.jsx(Se,{className:"font-medium",children:D.name}),a.jsx(Se,{children:a.jsx(it,{className:KFe[D.type],children:x1[D.type]})}),a.jsx(Se,{children:D.responsable?a.jsxs("span",{children:[D.responsable.first_name," ",D.responsable.last_name]}):a.jsx("span",{className:"text-muted-foreground",children:"-"})}),a.jsx(Se,{className:"text-right font-mono",children:a.jsx("span",{className:D.solde_actuel>=0?"text-green-600":"text-red-600",children:z(D.solde_actuel,D.devise)})}),a.jsx(Se,{children:a.jsx(it,{variant:D.is_active?"default":"secondary",children:D.is_active?"Active":"Inactive"})}),j&&a.jsx(Se,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>e(`/caisse/${D.id}`),children:a.jsx(wp,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>B(D),children:a.jsx(Bc,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>k(D),children:D.is_active?a.jsx(u0,{className:"h-4 w-4 text-orange-500"}):a.jsx(Uo,{className:"h-4 w-4 text-green-500"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>L(D.id),children:a.jsx(ds,{className:"h-4 w-4 text-destructive"})})]})})]},D.id))})]})})}),a.jsx(kr,{open:!!g,onOpenChange:D=>!D&&y(null),children:a.jsxs(_r,{className:"max-w-md",children:[a.jsx(jr,{children:a.jsx(Nr,{children:"Modifier la Caisse"})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Code *"}),a.jsx(De,{value:b.code,onChange:D=>x({...b,code:D.target.value.toUpperCase()})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Type"}),a.jsxs(Kt,{value:b.type,onValueChange:D=>x({...b,type:D}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsx(Xt,{children:Object.entries(x1).map(([D,q])=>a.jsx(et,{value:D,children:q},D))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Nom *"}),a.jsx(De,{value:b.name,onChange:D=>x({...b,name:D.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Responsable"}),a.jsxs(Kt,{value:b.responsable_id,onValueChange:D=>x({...b,responsable_id:D}),children:[a.jsx(Wt,{children:a.jsx(Yt,{placeholder:"Slectionner..."})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"_none",children:"Aucun"}),o.map(D=>a.jsxs(et,{value:D.id,children:[D.first_name," ",D.last_name]},D.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Solde Initial"}),a.jsx(De,{type:"number",value:b.solde_initial,onChange:D=>x({...b,solde_initial:parseFloat(D.target.value)||0})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Toute modification gnre un mouvement d'ajustement traable."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Devise"}),a.jsxs(Kt,{value:b.devise,onValueChange:D=>x({...b,devise:D}),children:[a.jsx(Wt,{children:a.jsx(Yt,{})}),a.jsxs(Xt,{children:[a.jsx(et,{value:"XOF",children:"XOF (Franc CFA BCEAO)"}),a.jsx(et,{value:"XAF",children:"XAF (Franc CFA BEAC)"}),a.jsx(et,{value:"EUR",children:"EUR (Euro)"}),a.jsx(et,{value:"USD",children:"USD"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pe,{children:"Description"}),a.jsx(Kr,{value:b.description,onChange:D=>x({...b,description:D.target.value})})]})]}),a.jsxs(Fr,{children:[a.jsx(de,{variant:"outline",onClick:()=>y(null),children:"Annuler"}),a.jsx(de,{onClick:O,children:"Enregistrer"})]})]})})]})})}const XFe={principale:"Principale",logistique:"Logistique",chantier:"Chantier",projet:"Projet"},ZFe={principale:"bg-primary/20 text-primary",logistique:"bg-blue-500/20 text-blue-700",chantier:"bg-orange-500/20 text-orange-700",projet:"bg-green-500/20 text-green-700"},JFe={entree:"text-green-600 bg-green-50",sortie:"text-red-600 bg-red-50",ajustement:"text-blue-600 bg-blue-50"},QFe={entree:hB,sortie:fB,ajustement:j4};function e7e(){const{id:e}=Qc(),t=yi(),{roles:r,isLoading:n}=yr(),[i,s]=_.useState(null),[o,l]=_.useState([]),[c,u]=_.useState(!0),d=r.some(g=>["admin","daf","dg","comptable"].includes(g));_.useEffect(()=>{!n&&d&&e?(f(),m()):n||u(!1)},[n,d,e]);const f=async()=>{try{const{data:g,error:y}=await fe.from("caisses").select("*").eq("id",e).maybeSingle();if(y||!g){t("/caisse");return}let b;if(g.responsable_id){const{data:x}=await fe.rpc("get_public_profiles",{_user_ids:[g.responsable_id]});x&&x.length>0&&(b=x[0])}s({...g,responsable:b})}catch(g){console.error("Error fetching caisse:",g),t("/caisse")}},m=async()=>{try{const{data:g,error:y}=await fe.from("caisse_mouvements").select("*").eq("caisse_id",e).order("created_at",{ascending:!1}).limit(100);if(y)throw y;const b=[...new Set((g||[]).map(x=>x.created_by).filter(Boolean))];if(b.length>0){const{data:x}=await fe.rpc("get_public_profiles",{_user_ids:b}),j=new Map((x||[]).map(A=>[A.id,A])),N=(g||[]).map(A=>({...A,created_by_profile:j.get(A.created_by)}));l(N)}else l(g||[])}catch(g){console.error("Error fetching mouvements:",g)}finally{u(!1)}},h=(g,y="XOF")=>new Intl.NumberFormat("fr-FR").format(g)+" "+y;if(n||c)return a.jsx(st,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(!d)return a.jsx(st,{children:a.jsx(Ji,{})});if(!i)return a.jsx(st,{children:a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Caisse introuvable"})});const v=i.solde_actuel-i.solde_initial,p=i.solde_initial!==0?(v/i.solde_initial*100).toFixed(1):"0";return a.jsx(st,{children:a.jsxs("div",{className:"p-6 space-y-6 max-w-5xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx($t,{to:"/caisse",children:a.jsx(de,{variant:"ghost",size:"icon",children:a.jsx(ra,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(si,{className:"h-6 w-6"}),a.jsx("h1",{className:"text-2xl font-bold",children:i.name}),a.jsx(it,{className:ZFe[i.type],children:XFe[i.type]}),a.jsx(it,{variant:i.is_active?"default":"secondary",children:i.is_active?"Active":"Inactive"})]}),a.jsx("p",{className:"text-muted-foreground font-mono",children:i.code})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Solde Initial"}),a.jsx("p",{className:"text-xl font-bold font-mono",children:h(i.solde_initial,i.devise)})]}),a.jsx(si,{className:"h-8 w-8 text-muted-foreground"})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Solde Actuel"}),a.jsx("p",{className:`text-xl font-bold font-mono ${i.solde_actuel>=0?"text-green-600":"text-red-600"}`,children:h(i.solde_actuel,i.devise)})]}),i.solde_actuel>=i.solde_initial?a.jsx(Uo,{className:"h-8 w-8 text-green-500"}):a.jsx(u0,{className:"h-8 w-8 text-red-500"})]})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Variation"}),a.jsxs("p",{className:`text-xl font-bold font-mono ${v>=0?"text-green-600":"text-red-600"}`,children:[v>=0?"+":"",h(v,i.devise)]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["(",p,"%)"]})]})})})}),a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Mouvements"}),a.jsx("p",{className:"text-xl font-bold",children:o.length})]}),a.jsx(wh,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),(i.description||i.responsable)&&a.jsx(me,{children:a.jsx(pe,{className:"pt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.responsable&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_h,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Responsable"}),a.jsxs("p",{className:"font-medium",children:[i.responsable.first_name," ",i.responsable.last_name]})]})]}),i.description&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Description"}),a.jsx("p",{children:i.description})]})]})})}),a.jsxs(me,{children:[a.jsxs(ze,{children:[a.jsx(Ue,{children:"Historique des Mouvements"}),a.jsx(wn,{children:"Les 100 derniers mouvements de cette caisse"})]}),a.jsx(pe,{className:"p-0",children:a.jsxs(tn,{children:[a.jsx(hn,{children:a.jsxs(gt,{children:[a.jsx(Ee,{children:"Date"}),a.jsx(Ee,{children:"Type"}),a.jsx(Ee,{children:"Rfrence"}),a.jsx(Ee,{children:"Motif"}),a.jsx(Ee,{className:"text-right",children:"Montant"}),a.jsx(Ee,{className:"text-right",children:"Solde aprs"}),a.jsx(Ee,{children:"Par"})]})}),a.jsx(rn,{children:o.length===0?a.jsx(gt,{children:a.jsx(Se,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Aucun mouvement enregistr"})}):o.map(g=>{const y=QFe[g.type]||j4;return a.jsxs(gt,{children:[a.jsx(Se,{className:"whitespace-nowrap",children:Ct(new Date(g.created_at),"dd MMM yyyy HH:mm",{locale:Tt})}),a.jsx(Se,{children:a.jsxs(it,{className:JFe[g.type],children:[a.jsx(y,{className:"h-3 w-3 mr-1"}),g.type.charAt(0).toUpperCase()+g.type.slice(1)]})}),a.jsx(Se,{className:"font-mono text-sm",children:g.reference}),a.jsx(Se,{className:"max-w-[200px] truncate",title:g.motif,children:g.motif}),a.jsxs(Se,{className:`text-right font-mono ${g.type==="sortie"?"text-red-600":"text-green-600"}`,children:[g.type==="sortie"?"-":"+",h(g.montant,i.devise)]}),a.jsx(Se,{className:"text-right font-mono",children:h(g.solde_apres,i.devise)}),a.jsx(Se,{className:"text-sm text-muted-foreground",children:g.created_by_profile?`${g.created_by_profile.first_name||""} ${g.created_by_profile.last_name||""}`.trim():"-"})]},g.id)})})]})})]})]})})}const t7e=new pne;function Cr({children:e}){const{user:t,isLoading:r}=yr();return r?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary",children:a.jsx("span",{className:"text-xl font-bold text-primary-foreground",children:"K"})}),a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})]})}):t?a.jsx(a.Fragment,{children:e}):a.jsx(_9,{to:"/auth",replace:!0})}function r7e(){return a.jsxs(aie,{children:[a.jsx(pr,{path:"/auth",element:a.jsx(Poe,{})}),a.jsx(pr,{path:"/",element:a.jsx(lIe,{})}),a.jsx(pr,{path:"/dashboard",element:a.jsx(Cr,{children:a.jsx(ELe,{})})}),a.jsx(pr,{path:"/audit",element:a.jsx(Cr,{children:a.jsx(xRe,{})})}),a.jsx(pr,{path:"/reports",element:a.jsx(Cr,{children:a.jsx(IRe,{})})}),a.jsx(pr,{path:"/admin/users",element:a.jsx(Cr,{children:a.jsx(YRe,{})})}),a.jsx(pr,{path:"/admin/departments",element:a.jsx(Cr,{children:a.jsx(tIe,{})})}),a.jsx(pr,{path:"/admin/settings",element:a.jsx(Cr,{children:a.jsx(rIe,{})})}),a.jsx(pr,{path:"/admin/roles",element:a.jsx(Cr,{children:a.jsx(nIe,{})})}),a.jsx(pr,{path:"/admin/units",element:a.jsx(Cr,{children:a.jsx(iIe,{})})}),a.jsx(pr,{path:"/admin/payment-categories",element:a.jsx(Cr,{children:a.jsx(sIe,{})})}),a.jsx(pr,{path:"/admin/comptes-comptables",element:a.jsx(Cr,{children:a.jsx(aIe,{})})}),a.jsx(pr,{path:"/admin",element:a.jsx(_9,{to:"/admin/users",replace:!0})}),a.jsx(pr,{path:"/besoins",element:a.jsx(Cr,{children:a.jsx(fIe,{})})}),a.jsx(pr,{path:"/besoins/nouveau",element:a.jsx(Cr,{children:a.jsx(KIe,{})})}),a.jsx(pr,{path:"/besoins/:id",element:a.jsx(Cr,{children:a.jsx(JIe,{})})}),a.jsx(pr,{path:"/besoins/:id/dossier",element:a.jsx(Cr,{children:a.jsx(r6e,{})})}),a.jsx(pr,{path:"/demandes-achat",element:a.jsx(Cr,{children:a.jsx(a6e,{})})}),a.jsx(pr,{path:"/demandes-achat/nouveau",element:a.jsx(Cr,{children:a.jsx(o6e,{})})}),a.jsx(pr,{path:"/demandes-achat/:id",element:a.jsx(Cr,{children:a.jsx(rFe,{})})}),a.jsx(pr,{path:"/bons-livraison",element:a.jsx(Cr,{children:a.jsx(sFe,{})})}),a.jsx(pr,{path:"/bons-livraison/nouveau",element:a.jsx(Cr,{children:a.jsx(lFe,{})})}),a.jsx(pr,{path:"/bons-livraison/:id",element:a.jsx(Cr,{children:a.jsx(dFe,{})})}),a.jsx(pr,{path:"/fournisseurs",element:a.jsx(Cr,{children:a.jsx(fFe,{})})}),a.jsx(pr,{path:"/comptabilite",element:a.jsx(Cr,{children:a.jsx(pFe,{})})}),a.jsx(pr,{path:"/comptabilite/:id",element:a.jsx(Cr,{children:a.jsx(bFe,{})})}),a.jsx(pr,{path:"/stock",element:a.jsx(Cr,{children:a.jsx(jFe,{})})}),a.jsx(pr,{path:"/stock/mouvements",element:a.jsx(Cr,{children:a.jsx(AFe,{})})}),a.jsx(pr,{path:"/stock/categories",element:a.jsx(Cr,{children:a.jsx(TFe,{})})}),a.jsx(pr,{path:"/stock/:id",element:a.jsx(Cr,{children:a.jsx(OFe,{})})}),a.jsx(pr,{path:"/projets",element:a.jsx(Cr,{children:a.jsx(IFe,{})})}),a.jsx(pr,{path:"/projets/:id",element:a.jsx(Cr,{children:a.jsx($Fe,{})})}),a.jsx(pr,{path:"/notes-frais",element:a.jsx(Cr,{children:a.jsx(zFe,{})})}),a.jsx(pr,{path:"/notes-frais/nouveau",element:a.jsx(Cr,{children:a.jsx(qFe,{})})}),a.jsx(pr,{path:"/notes-frais/:id",element:a.jsx(Cr,{children:a.jsx(HFe,{})})}),a.jsx(pr,{path:"/notifications",element:a.jsx(Cr,{children:a.jsx(VFe,{})})}),a.jsx(pr,{path:"/caisse",element:a.jsx(Cr,{children:a.jsx(YFe,{})})}),a.jsx(pr,{path:"/caisse/:id",element:a.jsx(Cr,{children:a.jsx(e7e,{})})}),a.jsx(pr,{path:"/profile",element:a.jsx(Cr,{children:a.jsx(GFe,{})})}),a.jsx(pr,{path:"*",element:a.jsx(oIe,{})})]})}function n7e(){return a.jsx(vne,{client:t7e,children:a.jsx(mie,{basename:"/kimbo3",children:a.jsxs(Hre,{children:[a.jsx(Qae,{children:a.jsx(r7e,{})}),a.jsx(Lee,{}),a.jsx(ote,{})]})})})}M7(document.getElementById("root")).render(a.jsx(n7e,{}));export{dn as _,ub as c,nn as g};
